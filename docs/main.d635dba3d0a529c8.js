"use strict";(self.webpackChunkemail_signature_generator=self.webpackChunkemail_signature_generator||[]).push([[792],{1076:($t,ze,B)=>{B.d(ze,{Am:()=>on,Bd:()=>Je,FA:()=>se,Fy:()=>Fe,I9:()=>We,Im:()=>Le,Ku:()=>yi,Ll:()=>Lt,T9:()=>Re,Uj:()=>Ve,XA:()=>tt,ZQ:()=>nt,bD:()=>Rn,cY:()=>Te,eX:()=>ke,g:()=>xe,gR:()=>Gt,hp:()=>Mt,jZ:()=>vt,lT:()=>Dn,lV:()=>an,mS:()=>He,nr:()=>de,p7:()=>Zt,sr:()=>cn,tD:()=>rn,u:()=>ie,zW:()=>ye,zw:()=>we});const J=function(X){const W=[];let G=0;for(let Z=0;Z<X.length;Z++){let re=X.charCodeAt(Z);re<128?W[G++]=re:re<2048?(W[G++]=re>>6|192,W[G++]=63&re|128):55296==(64512&re)&&Z+1<X.length&&56320==(64512&X.charCodeAt(Z+1))?(re=65536+((1023&re)<<10)+(1023&X.charCodeAt(++Z)),W[G++]=re>>18|240,W[G++]=re>>12&63|128,W[G++]=re>>6&63|128,W[G++]=63&re|128):(W[G++]=re>>12|224,W[G++]=re>>6&63|128,W[G++]=63&re|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,W){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let re=0;re<X.length;re+=3){const et=X[re],Ct=re+1<X.length,Pt=Ct?X[re+1]:0,hn=re+2<X.length,he=hn?X[re+2]:0;let ir=(15&Pt)<<2|he>>6,vi=63&he;hn||(vi=64,Ct||(ir=64)),Z.push(G[et>>2],G[(3&et)<<4|Pt>>4],G[ir],G[vi])}return Z.join("")},encodeString(X,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(X):this.encodeByteArray(J(X),W)},decodeString(X,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(X):function(X){const W=[];let G=0,Z=0;for(;G<X.length;){const re=X[G++];if(re<128)W[Z++]=String.fromCharCode(re);else if(re>191&&re<224){const et=X[G++];W[Z++]=String.fromCharCode((31&re)<<6|63&et)}else if(re>239&&re<365){const hn=((7&re)<<18|(63&X[G++])<<12|(63&X[G++])<<6|63&X[G++])-65536;W[Z++]=String.fromCharCode(55296+(hn>>10)),W[Z++]=String.fromCharCode(56320+(1023&hn))}else{const et=X[G++],Ct=X[G++];W[Z++]=String.fromCharCode((15&re)<<12|(63&et)<<6|63&Ct)}}return W.join("")}(this.decodeStringToByteArray(X,W))},decodeStringToByteArray(X,W){this.init_();const G=W?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let re=0;re<X.length;){const et=G[X.charAt(re++)],Pt=re<X.length?G[X.charAt(re)]:0;++re;const he=re<X.length?G[X.charAt(re)]:64;++re;const tn=re<X.length?G[X.charAt(re)]:64;if(++re,null==et||null==Pt||null==he||null==tn)throw new Se;Z.push(et<<2|Pt>>4),64!==he&&(Z.push(Pt<<4&240|he>>2),64!==tn&&Z.push(he<<6&192|tn))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}};class Se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ve=function(X){return function(X){const W=J(X);return _e.encodeByteArray(W,!0)}(X).replace(/\./g,"")},ie=function(X){try{return _e.decodeString(X,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function we(X,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return W}for(const G in W)!W.hasOwnProperty(G)||!at(G)||(X[G]=we(X[G],W[G]));return X}function at(X){return"__proto__"!==X}function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gt=()=>{try{return He().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const X=process.env.__FIREBASE_DEFAULTS__;return X?JSON.parse(X):void 0})()||(()=>{if(typeof document>"u")return;let X;try{X=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=X&&ie(X[1]);return W&&JSON.parse(W)})()}catch(X){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${X}`)}},Re=()=>{var X;return null===(X=gt())||void 0===X?void 0:X.config},tt=X=>{var W;return null===(W=gt())||void 0===W?void 0:W[`_${X}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,G)=>{this.resolve=W,this.reject=G})}wrapCallback(W){return(G,Z)=>{G?this.reject(G):this.resolve(Z),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(G):W(G,Z))}}}function Fe(X,W){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=W||"demo-project",re=X.iat||0,et=X.sub||X.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:re,exp:re+3600,auth_time:re,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},X);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(Ct)),""].join(".")}function nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function Lt(){var X;const W=null===(X=gt())||void 0===X?void 0:X.forceEnvironment;if("node"===W)return!0;if("browser"===W)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return typeof window<"u"||Zt()}function Zt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function cn(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function an(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dn(){const X=nt();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function de(){return!Lt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ye(){try{return"object"==typeof indexedDB}catch{return!1}}function ke(){return new Promise((X,W)=>{try{let G=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(Z);re.onsuccess=()=>{re.result.close(),G||self.indexedDB.deleteDatabase(Z),X(!0)},re.onupgradeneeded=()=>{G=!1},re.onerror=()=>{var et;W((null===(et=re.error)||void 0===et?void 0:et.message)||"")}}catch(G){W(G)}})}class xe extends Error{constructor(W,G,Z){super(G),this.code=W,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(W,G,Z){this.service=W,this.serviceName=G,this.errors=Z}create(W,...G){const Z=G[0]||{},re=`${this.service}/${W}`,et=this.errors[W],Ct=et?function ve(X,W){return X.replace(Tt,(G,Z)=>{const re=W[Z];return null!=re?String(re):`<${Z}?>`})}(et,Z):"Error";return new xe(re,`${this.serviceName}: ${Ct} (${re}).`,Z)}}const Tt=/\{\$([^}]+)}/g;function Gt(X,W){return Object.prototype.hasOwnProperty.call(X,W)}function Le(X){for(const W in X)if(Object.prototype.hasOwnProperty.call(X,W))return!1;return!0}function Rn(X,W){if(X===W)return!0;const G=Object.keys(X),Z=Object.keys(W);for(const re of G){if(!Z.includes(re))return!1;const et=X[re],Ct=W[re];if(Nr(et)&&Nr(Ct)){if(!Rn(et,Ct))return!1}else if(et!==Ct)return!1}for(const re of Z)if(!G.includes(re))return!1;return!0}function Nr(X){return null!==X&&"object"==typeof X}function on(X){const W=[];for(const[G,Z]of Object.entries(X))Array.isArray(Z)?Z.forEach(re=>{W.push(encodeURIComponent(G)+"="+encodeURIComponent(re))}):W.push(encodeURIComponent(G)+"="+encodeURIComponent(Z));return W.length?"&"+W.join("&"):""}function We(X){const W={};return X.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[re,et]=Z.split("=");W[decodeURIComponent(re)]=decodeURIComponent(et)}}),W}function Mt(X){const W=X.indexOf("?");if(!W)return"";const G=X.indexOf("#",W);return X.substring(W,G>0?G:void 0)}function rn(X,W){const G=new kt(X,W);return G.subscribe.bind(G)}class kt{constructor(W,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{W(this)}).catch(Z=>{this.error(Z)})}next(W){this.forEachObserver(G=>{G.next(W)})}error(W){this.forEachObserver(G=>{G.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,G,Z){let re;if(void 0===W&&void 0===G&&void 0===Z)throw new Error("Missing Observer.");re=function xr(X,W){if("object"!=typeof X||null===X)return!1;for(const G of W)if(G in X&&"function"==typeof X[G])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:G,complete:Z},void 0===re.next&&(re.next=Qi),void 0===re.error&&(re.error=Qi),void 0===re.complete&&(re.complete=Qi);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),et}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,W)}sendOne(W,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{G(this.observers[W])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qi(){}function yi(X){return X&&X._delegate?X._delegate:X}},1124:($t,ze,B)=>{B.r(ze),B.d(ze,{AuthModule:()=>on});var g=B(177),oe=B(945),R=B(467),J=B(4341),F=B(7705),_e=B(6354),Se=B(3236),Ae=B(8793),Ve=B(6697),ie=B(9974),ce=B(4360),we=B(5343),He=B(3703),_t=B(1397),lt=B(8750);function yt(We,Mt){return Mt?ot=>(0,Ae.x)(Mt.pipe((0,Ve.s)(1),function at(){return(0,ie.N)((We,Mt)=>{We.subscribe((0,ce._)(Mt,we.l))})}()),ot.pipe(yt(We))):(0,_t.Z)((ot,rn)=>(0,lt.Tg)(We(ot,rn)).pipe((0,Ve.s)(1),(0,He.u)(ot)))}var gt=B(1985),qt=B(9470);var Te=B(1977),Fe=B(8079);let nt=(()=>{class We{constructor(ot,rn){this.auth=ot,this.db=rn,this.userCollection=rn.collection("users"),this.auth.user.subscribe(console.log),this.isAuthenticated$=ot.user.pipe((0,_e.T)(kt=>!!kt)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function tt(We,Mt=Se.E){const ot=function Re(We=0,Mt,ot=Se.b){let rn=-1;return null!=Mt&&((0,qt.m)(Mt)?ot=Mt:rn=Mt),new gt.c(kt=>{let mn=function Ce(We){return We instanceof Date&&!isNaN(We)}(We)?+We-ot.now():We;mn<0&&(mn=0);let xr=0;return ot.schedule(function(){kt.closed||(kt.next(xr++),0<=rn?this.schedule(void 0,rn):kt.complete())},mn)})}(We,Mt);return yt(()=>ot)}(100))}createUser(ot){var rn=this;return(0,R.A)(function*(){if(!ot.password)throw new Error("Password not provided");const kt=yield rn.auth.createUserWithEmailAndPassword(ot.email,ot.password);if(!kt.user)throw new Error("User can't be found");yield rn.userCollection.doc(kt.user?.uid).set({name:ot.name,email:ot.email,age:ot.age,phoneNumber:ot.phoneNumber}),yield kt.user.updateProfile({displayName:ot.name})})()}static#e=this.\u0275fac=function(rn){return new(rn||We)(F.KVO(Te.DS),F.KVO(Fe.Qe))};static#t=this.\u0275prov=F.jDH({token:We,factory:We.\u0275fac,providedIn:"root"})}return We})();function vt(We,Mt){if(1&We&&(F.j41(0,"div",31),F.EFF(1),F.k0s()),2&We){const ot=F.XpG();F.ZvI("alert alert-",ot.alertColor,""),F.R7$(1),F.SpI(" ",ot.alertMsg," ")}}function Lt(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Name is required"),F.k0s())}function Je(We,Mt){if(1&We&&(F.j41(0,"div",32),F.DNE(1,Lt,2,0,"div",33),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.name.errors.required)}}function Zt(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Email is required"),F.k0s())}function cn(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Email must be a valid email address"),F.k0s())}function an(We,Mt){if(1&We&&(F.j41(0,"div",32),F.DNE(1,Zt,2,0,"div",33),F.DNE(2,cn,2,0,"div",33),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.email.errors.required),F.R7$(1),F.Y8G("ngIf",ot.f.email.errors.email)}}function Wn(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Age is required"),F.k0s())}function Dn(We,Mt){if(1&We&&(F.j41(0,"div",32),F.DNE(1,Wn,2,0,"div",33),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.age.errors.required)}}function Ft(We,Mt){1&We&&F.nrm(0,"i",34)}function Vt(We,Mt){1&We&&F.nrm(0,"i",35)}function de(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Password is required"),F.k0s())}function ye(We,Mt){1&We&&(F.j41(0,"span"),F.EFF(1,"Password must be at least 8 characters."),F.k0s())}function ke(We,Mt){1&We&&(F.j41(0,"span"),F.EFF(1," Password must contain alphabetics,numbers and special characters !"),F.k0s())}function Me(We,Mt){if(1&We&&(F.j41(0,"div",32),F.DNE(1,de,2,0,"div",33),F.DNE(2,ye,2,0,"span",33),F.DNE(3,ke,2,0,"span",33),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.password.errors.required),F.R7$(1),F.Y8G("ngIf",ot.f.password.errors.minlength),F.R7$(1),F.Y8G("ngIf",ot.f.password.errors.pattern)}}function le(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Phone Number is required"),F.k0s())}function xe(We,Mt){1&We&&(F.j41(0,"span"),F.EFF(1,"Phone number should be a valid one."),F.k0s())}function se(We,Mt){if(1&We&&(F.j41(0,"div",32),F.DNE(1,le,2,0,"div",33),F.DNE(2,xe,2,0,"span",33),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.phoneNumber.errors.required),F.R7$(1),F.Y8G("ngIf",ot.f.phoneNumber.errors.pattern||ot.f.phoneNumber.errors.maxLength)}}const ve=function(We){return{"is-invalid":We}};let Tt=(()=>{class We{constructor(ot,rn){this.auth=ot,this.router=rn,this.showpassword=!1,this.name=new J.MJ("",[J.k0.required,J.k0.minLength(3)]),this.email=new J.MJ("",[J.k0.required,J.k0.email]),this.age=new J.MJ(null,[J.k0.required,J.k0.max(120)]),this.password=new J.MJ("",[J.k0.required,J.k0.minLength(8),J.k0.pattern(/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/)]),this.phoneNumber=new J.MJ("",[J.k0.required,J.k0.minLength(10),J.k0.maxLength(10),J.k0.pattern("[0-9]{10}")]),this.year=(new Date).getFullYear(),this.showAlert=!1,this.alertMsg="Please wait! Your account is being created.",this.alertColor="primary",this.inSubmission=!1,this.registerForm=new J.gE({name:this.name,email:this.email,age:this.age,password:this.password,phoneNumber:this.phoneNumber})}get f(){return this.registerForm.controls}register(){var ot=this;return(0,R.A)(function*(){if(ot.inSubmission=!0,!ot.registerForm.invalid){ot.showAlert=!0,ot.alertMsg="Please wait! Your account is being created.",ot.alertColor="primary";try{yield ot.auth.createUser(ot.registerForm.value),ot.alertMsg="Success! Your account has been created.",ot.alertColor="success",ot.router.navigate(["/email-signature"])}catch(mn){ot.alertMsg="auth/email-already-in-use"===mn.code?"This email is already registered. Please use a different email.":"An unexpected error occurred. Please try again later.",ot.alertColor="danger",ot.inSubmission=!1}}})()}static#e=this.\u0275fac=function(rn){return new(rn||We)(F.rXU(nt),F.rXU(oe.Ix))};static#t=this.\u0275cmp=F.VBU({type:We,selectors:[["app-signup"]],decls:54,vars:26,consts:[[1,"account-pages","my-5","pt-sm-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","col-xl-5"],[1,"card","overflow-hidden"],[1,"bg-soft","bg-primary"],[1,"row"],[1,"col-12","text-center","login-header"],[1,"p-5"],[1,"card-body","pt-3"],[1,"p-2"],["name","registerForm","novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["role","alert",3,"class",4,"ngIf"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","formControlName","name","id","name","placeholder","Enter name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","formControlName","email","id","email","placeholder","Enter Email",1,"form-control",3,"ngClass"],[1,"inline-block","mb-2"],["type","number","formControlName","age","id","age","placeholder","Enter age",1,"form-control",3,"ngClass"],[1,"input-group","auth-pass-inputgroup"],["formControlName","password","id","password","placeholder","Enter password",1,"form-control",3,"type","ngClass"],["type","button",1,"btn","btn-light",3,"click"],["class","bi bi-eye-slash-fill",4,"ngIf"],["class","bi bi-eye-fill",4,"ngIf"],["type","text","formControlName","phoneNumber","id","phoneNumber","placeholder","Enter phoneNumber",1,"form-control",3,"ngClass"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-block","register"],[1,"mt-5","text-center"],["routerLink","/account/login",1,"fw-medium"],["role","alert"],[1,"invalid-feedback"],[4,"ngIf"],[1,"bi","bi-eye-slash-fill"],[1,"bi","bi-eye-fill"]],template:function(rn,kt){1&rn&&(F.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5"),F.EFF(10,"Create Account"),F.k0s()()()()(),F.j41(11,"div",9)(12,"div",10)(13,"form",11),F.bIt("ngSubmit",function(){return kt.register()}),F.DNE(14,vt,2,4,"div",12),F.j41(15,"div",13)(16,"label",14),F.EFF(17,"Name"),F.k0s(),F.nrm(18,"input",15),F.DNE(19,Je,2,1,"div",16),F.k0s(),F.j41(20,"div",13)(21,"label",17),F.EFF(22,"Email"),F.k0s(),F.nrm(23,"input",18),F.DNE(24,an,3,2,"div",16),F.k0s(),F.j41(25,"div",13)(26,"label",19),F.EFF(27,"Age"),F.k0s(),F.nrm(28,"input",20),F.DNE(29,Dn,2,1,"div",16),F.k0s(),F.j41(30,"div",13)(31,"label",19),F.EFF(32,"Password"),F.k0s(),F.j41(33,"div",21),F.nrm(34,"input",22),F.j41(35,"button",23),F.bIt("click",function(){return kt.showpassword=!kt.showpassword}),F.DNE(36,Ft,1,0,"i",24),F.DNE(37,Vt,1,0,"i",25),F.k0s(),F.DNE(38,Me,4,3,"div",16),F.k0s()(),F.j41(39,"div",13)(40,"label",19),F.EFF(41,"Phone Number"),F.k0s(),F.nrm(42,"input",26),F.DNE(43,se,3,2,"div",16),F.k0s(),F.j41(44,"div",27)(45,"button",28),F.EFF(46,"Register"),F.k0s()()()()()(),F.j41(47,"div",29)(48,"p"),F.EFF(49,"Already have an account ?"),F.j41(50,"a",30),F.EFF(51," Login"),F.k0s()(),F.j41(52,"p"),F.EFF(53),F.k0s()()()()()()),2&rn&&(F.R7$(13),F.Y8G("formGroup",kt.registerForm),F.R7$(1),F.Y8G("ngIf",kt.showAlert),F.R7$(4),F.Y8G("ngClass",F.eq3(16,ve,kt.inSubmission&&kt.f.name.errors)),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.name.errors),F.R7$(4),F.Y8G("ngClass",F.eq3(18,ve,kt.inSubmission&&kt.f.email.errors)),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.email.errors),F.R7$(4),F.Y8G("ngClass",F.eq3(20,ve,kt.inSubmission&&kt.f.age.errors)),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.age.errors),F.R7$(5),F.Y8G("type",kt.showpassword?"text":"password")("ngClass",F.eq3(22,ve,kt.inSubmission&&kt.f.password.errors)),F.R7$(2),F.Y8G("ngIf",!kt.showpassword),F.R7$(1),F.Y8G("ngIf",kt.showpassword),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.password.errors),F.R7$(4),F.Y8G("ngClass",F.eq3(24,ve,kt.inSubmission&&kt.f.phoneNumber.errors)),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.phoneNumber.errors),F.R7$(10),F.SpI("\xa9 ",kt.year," Email Signature"))},dependencies:[g.YU,g.bT,oe.Wk,J.qT,J.me,J.Q0,J.BC,J.cb,J.j4,J.JD],styles:[".login-header[_ngcontent-%COMP%]{background-color:#e4d0d0}.register[_ngcontent-%COMP%]{background-color:#d5b4b4}a[_ngcontent-%COMP%]{color:#867070}"]})}return We})();function xt(We,Mt){if(1&We&&(F.j41(0,"div",27),F.EFF(1),F.k0s()),2&We){const ot=F.XpG();F.ZvI("alert alert-",ot.alertColor,""),F.R7$(1),F.SpI(" ",ot.alertMsg," ")}}function Ke(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Email is required"),F.k0s())}function Ot(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Email is invalid"),F.k0s())}function Un(We,Mt){if(1&We&&(F.j41(0,"div",28),F.DNE(1,Ke,2,0,"div",29),F.DNE(2,Ot,2,0,"div",29),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.email.errors.required),F.R7$(1),F.Y8G("ngIf",ot.f.email.errors.email)}}function dn(We,Mt){1&We&&F.nrm(0,"i",30)}function pt(We,Mt){1&We&&F.nrm(0,"i",31)}function It(We,Mt){1&We&&(F.j41(0,"div"),F.EFF(1,"Password is required"),F.k0s())}function Gt(We,Mt){1&We&&(F.j41(0,"span"),F.EFF(1,"Password must be at least 8 characters."),F.k0s())}function ut(We,Mt){1&We&&(F.j41(0,"span"),F.EFF(1," Password must contain alphabetics,numbers and special characters !"),F.k0s())}function Le(We,Mt){if(1&We&&(F.j41(0,"div",28),F.DNE(1,It,2,0,"div",29),F.DNE(2,Gt,2,0,"span",29),F.DNE(3,ut,2,0,"span",29),F.k0s()),2&We){const ot=F.XpG();F.R7$(1),F.Y8G("ngIf",ot.f.password.errors.required),F.R7$(1),F.Y8G("ngIf",ot.f.password.errors.minlength),F.R7$(1),F.Y8G("ngIf",ot.f.password.errors.pattern)}}const qe=function(We){return{"is-invalid":We}},Nr=[{path:"login",component:(()=>{class We{constructor(ot,rn){this.auth=ot,this.router=rn,this.showpassword=!1,this.credentials={email:"",password:""},this.email=new J.MJ("",[J.k0.required,J.k0.email]),this.password=new J.MJ("",[J.k0.required,J.k0.required,J.k0.minLength(8),J.k0.pattern(/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/)]),this.loginForm=new J.gE({email:this.email,password:this.password}),this.showAlert=!1,this.alertMsg="Please wait! We are logging you in.",this.alertColor="primary",this.inSubmission=!1,this.year=(new Date).getFullYear()}ngOnInit(){}get f(){return this.loginForm.controls}login(){var ot=this;return(0,R.A)(function*(){if(ot.inSubmission=!0,!ot.loginForm.invalid){ot.showAlert=!0,ot.alertMsg="Please wait! We are logging you in.",ot.alertColor="primary";try{yield ot.auth.signInWithEmailAndPassword(ot.loginForm.value.email,ot.loginForm.value.password)}catch{return ot.alertMsg="An unexpected error occurred. Please try again later",ot.alertColor="danger ",void(ot.inSubmission=!1)}ot.alertMsg="Success! You are now logged in.",ot.alertColor="success ",ot.router.navigate(["/email-signature"])}})()}static#e=this.\u0275fac=function(rn){return new(rn||We)(F.rXU(Te.DS),F.rXU(oe.Ix))};static#t=this.\u0275cmp=F.VBU({type:We,selectors:[["app-login"]],decls:39,vars:14,consts:[[1,"account-pages","mt-5","mb-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","col-xl-5"],[1,"card","overflow-hidden"],[1,"bg-soft-primary","mb-4"],[1,"row"],[1,"col-12","text-center","login-header"],[1,"p-5"],[1,""],[1,"card-body","pt-3"],[1,"p-2"],[1,"form-horizontal",3,"formGroup","ngSubmit"],["role","alert",3,"class",4,"ngIf"],[1,"form-group","mb-3"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control","mt-2",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password"],[1,"input-group","auth-pass-inputgroup"],["formControlName","password","id","password","placeholder","Enter password",1,"form-control",3,"type","ngClass"],["type","button",1,"btn","btn-light",3,"click"],["class","bi bi-eye-slash-fill",4,"ngIf"],["class","bi bi-eye-fill",4,"ngIf"],[1,"mt-4","text-center"],["type","submit",1,"btn","btn-block"],["routerLink","/account/sign-up",1,"fw-medium"],["role","alert"],[1,"invalid-feedback"],[4,"ngIf"],[1,"bi","bi-eye-slash-fill"],[1,"bi","bi-eye-fill"]],template:function(rn,kt){1&rn&&(F.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5",9),F.EFF(10,"Welcome Back !"),F.k0s()()()()(),F.j41(11,"div",10)(12,"div",11)(13,"form",12),F.bIt("ngSubmit",function(){return kt.login()}),F.DNE(14,xt,2,4,"div",13),F.j41(15,"div",14)(16,"label",15),F.EFF(17,"Email"),F.k0s(),F.nrm(18,"input",16),F.DNE(19,Un,3,2,"div",17),F.k0s(),F.j41(20,"div",14)(21,"label",18),F.EFF(22,"Password"),F.k0s(),F.j41(23,"div",19),F.nrm(24,"input",20),F.j41(25,"button",21),F.bIt("click",function(){return kt.showpassword=!kt.showpassword}),F.DNE(26,dn,1,0,"i",22),F.DNE(27,pt,1,0,"i",23),F.k0s(),F.DNE(28,Le,4,3,"div",17),F.k0s()(),F.j41(29,"div",24)(30,"button",25),F.EFF(31,"Login"),F.k0s()()()()(),F.j41(32,"div",24)(33,"p"),F.EFF(34,"Don't have an account ? "),F.j41(35,"a",26),F.EFF(36," Signup "),F.k0s()(),F.j41(37,"p"),F.EFF(38),F.k0s()()()()()()()),2&rn&&(F.R7$(13),F.Y8G("formGroup",kt.loginForm),F.R7$(1),F.Y8G("ngIf",kt.showAlert),F.R7$(4),F.Y8G("ngClass",F.eq3(10,qe,kt.inSubmission&&kt.f.email.errors)),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.email.errors),F.R7$(5),F.Y8G("type",kt.showpassword?"text":"password")("ngClass",F.eq3(12,qe,kt.inSubmission&&kt.f.password.errors)),F.R7$(2),F.Y8G("ngIf",!kt.showpassword),F.R7$(1),F.Y8G("ngIf",kt.showpassword),F.R7$(1),F.Y8G("ngIf",kt.inSubmission&&kt.f.password.errors),F.R7$(10),F.SpI("\xa9 ",kt.year," Email Signature"))},dependencies:[g.YU,g.bT,oe.Wk,J.qT,J.me,J.BC,J.cb,J.j4,J.JD],styles:[".card[_ngcontent-%COMP%]{border:none;background-color:#f5ebeb;border-radius:24px}.login-header[_ngcontent-%COMP%]{background-color:#e4d0d0}button[_ngcontent-%COMP%]{background-color:#d5b4b4}a[_ngcontent-%COMP%]{color:#867070}"]})}return We})()},{path:"sign-up",component:Tt}];let hr=(()=>{class We{static#e=this.\u0275fac=function(rn){return new(rn||We)};static#t=this.\u0275mod=F.$C({type:We});static#n=this.\u0275inj=F.G2t({imports:[oe.iI.forChild(Nr),oe.iI]})}return We})(),on=(()=>{class We{static#e=this.\u0275fac=function(rn){return new(rn||We)};static#t=this.\u0275mod=F.$C({type:We});static#n=this.\u0275inj=F.G2t({imports:[g.MD,hr,J.YN,J.X1]})}return We})()},5463:($t,ze,B)=>{B.r(ze),B.d(ze,{FeaturesModule:()=>Me});var g=B(177),oe=B(945),R=B(7705),J=B(467),F=B(1977);function _e(le,xe){if(1&le){const se=R.RV6();R.j41(0,"div",3)(1,"button",4),R.bIt("click",function(Tt){R.eBV(se);const xt=R.XpG();return R.Njj(xt.logout(Tt))}),R.EFF(2,"Log Out"),R.k0s()()}}let Se=(()=>{class le{constructor(se,ve){this.afAuth=se,this._router=ve,this.user=null}ngOnInit(){this.afAuth.user.subscribe(se=>this.user=se)}logout(se){var ve=this;return(0,J.A)(function*(){se.preventDefault(),yield ve.afAuth.signOut(),ve._router.navigateByUrl("/login")})()}static#e=this.\u0275fac=function(ve){return new(ve||le)(R.rXU(F.DS),R.rXU(oe.Ix))};static#t=this.\u0275cmp=R.VBU({type:le,selectors:[["app-nav-bar"]],decls:5,vars:1,consts:[[1,"row","m-3"],[1,"col-8","col-lg-10","text-center"],["class","col-4 col-lg-2 text-end",4,"ngIf"],[1,"col-4","col-lg-2","text-end"],[1,"btn","btn-block",3,"click"]],template:function(ve,Tt){1&ve&&(R.j41(0,"div",0)(1,"div",1)(2,"h4"),R.EFF(3,"Email Signature"),R.k0s()(),R.DNE(4,_e,3,0,"div",2),R.k0s()),2&ve&&(R.R7$(4),R.Y8G("ngIf",null!==Tt.user))},dependencies:[g.bT],styles:["button[_ngcontent-%COMP%]{background-color:#d5b4b4}a[_ngcontent-%COMP%]{color:#867070}"]})}return le})();var Ae=B(4341),Ve=B(4412),ie=B(6354),ce=B(8079);let we=(()=>{class le{constructor(se,ve){this.db=se,this.auth=ve,this.user=null,this.formStateSubject=new Ve.t({general:null,social:null,design:null}),this.formState$=this.formStateSubject.asObservable(),this.signCollection=se.collection("signature"),this.auth.user.subscribe(Tt=>{this.user=Tt})}createSign(se){var ve=this;return(0,J.A)(function*(){ve.user?.uid&&(yield ve.signCollection.doc(ve.user.uid).set(se))})()}updateFormState(se){this.formStateSubject.next({...this.formStateSubject.value,...se})}getSignatureFormData(se){return this.getSignatureData().pipe((0,ie.T)(ve=>ve.map(xt=>({uid:xt.payload.doc.id,...xt.payload.doc.data()})).find(xt=>xt.uid===se)))}getLocalStorageData(){return JSON.parse(localStorage.getItem("data")||"{}")}getSignatureData(){return this.db.collection("signature").snapshotChanges()}static#e=this.\u0275fac=function(ve){return new(ve||le)(R.KVO(ce.Qe),R.KVO(F.DS))};static#t=this.\u0275prov=R.jDH({token:le,factory:le.\u0275fac,providedIn:"root"})}return le})();function at(le,xe){1&le&&(R.j41(0,"small"),R.EFF(1,"Please enter a valid email address."),R.k0s())}function He(le,xe){if(1&le&&(R.j41(0,"div"),R.DNE(1,at,2,0,"small",16),R.k0s()),2&le){const se=R.XpG();let ve;R.R7$(1),R.Y8G("ngIf",null==(ve=se.generalForm.get("email"))||null==ve.errors?null:ve.errors.email)}}let _t=(()=>{class le{constructor(se,ve){this._signatureService=se,this.auth=ve,this.user=null,this.generalForm=new Ae.gE({fName:new Ae.MJ(null,[Ae.k0.minLength(3),Ae.k0.maxLength(30)]),lName:new Ae.MJ(null,[Ae.k0.minLength(3),Ae.k0.maxLength(30)]),email:new Ae.MJ(null,[Ae.k0.email]),mobileNo:new Ae.MJ(null,[Ae.k0.minLength(3),Ae.k0.maxLength(30)])})}ngOnInit(){this.generalForm.valueChanges.subscribe(se=>{this._signatureService.updateFormState({general:se})}),this.auth.user.subscribe(se=>{this.user=se,this.user&&this.getBasicForm()})}getBasicForm(){let se=this._signatureService.getLocalStorageData();this._signatureService.getSignatureFormData(this.user?.uid).subscribe(ve=>{if(ve||se.basicForm){var Tt=ve||se;this.generalForm.patchValue({fName:Tt.basicForm.fName||"",lName:Tt.basicForm.lName||"",email:Tt.basicForm.email||"",mobileNo:Tt.basicForm.mobileNo||""})}else console.warn("No general found for user.")})}static#e=this.\u0275fac=function(ve){return new(ve||le)(R.rXU(we),R.rXU(F.DS))};static#t=this.\u0275cmp=R.VBU({type:le,selectors:[["app-general"]],decls:35,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","col-lg-6","col-xl-12"],[1,"card","overflow-hidden","shadow","p-3","mb-5","rounded"],[1,"card-body","pt-0"],[1,"p-2"],["name","registerForm",1,"needs-validation",3,"formGroup"],[1,"mb-3","row","col-md-12"],[1,"col-md-4"],["for","name",1,"form-label"],[1,"col-md-8"],["type","text","formControlName","fName","id","name","placeholder","Enter name",1,"form-control"],["for","lastName",1,"form-label"],["type","text","formControlName","lName","id","lastName","placeholder","Enter name",1,"form-control"],["for","email",1,"form-label"],["type","text","formControlName","email","id","email","placeholder","Enter Email",1,"form-control"],[4,"ngIf"],["for","number",1,"form-label"],["type","text","formControlName","mobileNo","id","number","placeholder","Enter Mobile Number",1,"form-control"]],template:function(ve,Tt){if(1&ve&&(R.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"p")(8,"b"),R.EFF(9,"Personal Details"),R.k0s()(),R.j41(10,"div",7)(11,"div",8)(12,"label",9),R.EFF(13,"First Name"),R.k0s()(),R.j41(14,"div",10),R.nrm(15,"input",11),R.k0s()(),R.j41(16,"div",7)(17,"div",8)(18,"label",12),R.EFF(19,"Last Name"),R.k0s()(),R.j41(20,"div",10),R.nrm(21,"input",13),R.k0s()(),R.j41(22,"div",7)(23,"div",8)(24,"label",14),R.EFF(25,"Email"),R.k0s()(),R.j41(26,"div",10),R.nrm(27,"input",15),R.DNE(28,He,2,1,"div",16),R.k0s()(),R.j41(29,"div",7)(30,"div",8)(31,"label",17),R.EFF(32,"Mobile Number"),R.k0s()(),R.j41(33,"div",10),R.nrm(34,"input",18),R.k0s()()()()()()()()()),2&ve){let xt;R.R7$(6),R.Y8G("formGroup",Tt.generalForm),R.R7$(22),R.Y8G("ngIf",(null==(xt=Tt.generalForm.get("email"))?null:xt.invalid)&&(null==(xt=Tt.generalForm.get("email"))?null:xt.touched))}},dependencies:[g.bT,Ae.qT,Ae.me,Ae.BC,Ae.cb,Ae.j4,Ae.JD]})}return le})();function lt(le,xe){1&le&&(R.j41(0,"small"),R.EFF(1,"Please enter a valid LinkedIn URL (e.g., https://www.linkedin.com/in/username)."),R.k0s())}function yt(le,xe){if(1&le&&(R.j41(0,"div"),R.DNE(1,lt,2,0,"small",13),R.k0s()),2&le){const se=R.XpG();let ve;R.R7$(1),R.Y8G("ngIf",null==(ve=se.socialForm.get("linkedinLink"))||null==ve.errors?null:ve.errors.pattern)}}function gt(le,xe){1&le&&(R.j41(0,"small"),R.EFF(1,"Please enter a valid Instagram URL (e.g., https://www.instagram.com/username)."),R.k0s())}function qt(le,xe){if(1&le&&(R.j41(0,"div"),R.DNE(1,gt,2,0,"small",13),R.k0s()),2&le){const se=R.XpG();let ve;R.R7$(1),R.Y8G("ngIf",null==(ve=se.socialForm.get("instagramLink"))||null==ve.errors?null:ve.errors.pattern)}}function Ce(le,xe){1&le&&(R.j41(0,"small"),R.EFF(1,"Please enter a valid Facebook URL (e.g., https://www.facebook.com/username)."),R.k0s())}function Re(le,xe){if(1&le&&(R.j41(0,"div"),R.DNE(1,Ce,2,0,"small",13),R.k0s()),2&le){const se=R.XpG();let ve;R.R7$(1),R.Y8G("ngIf",null==(ve=se.socialForm.get("facebookLink"))||null==ve.errors?null:ve.errors.pattern)}}function tt(le,xe){1&le&&(R.j41(0,"small"),R.EFF(1,"Please enter a valid YouTube URL (e.g., https://www.youtube.com/channel/CHANNEL_ID)."),R.k0s())}function Te(le,xe){if(1&le&&(R.j41(0,"div"),R.DNE(1,tt,2,0,"small",13),R.k0s()),2&le){const se=R.XpG();let ve;R.R7$(1),R.Y8G("ngIf",null==(ve=se.socialForm.get("youtubeLink"))||null==ve.errors?null:ve.errors.pattern)}}let Fe=(()=>{class le{constructor(se,ve){this._signatureService=se,this.auth=ve,this.user=null,this.socialForm=new Ae.gE({linkedinLink:new Ae.MJ(null,Ae.k0.pattern("^(https?://)?(www.)?linkedin.com/in/[A-Za-z0-9_-]+/?$")),facebookLink:new Ae.MJ(null,Ae.k0.pattern("^(https?://)?(www.)?facebook.com/[A-Za-z0-9_.-]+/?$")),instagramLink:new Ae.MJ(null,Ae.k0.pattern("^(https?://)?(www.)?instagram.com/[A-Za-z0-9_.-]+/?$")),youtubeLink:new Ae.MJ(null,Ae.k0.pattern("^(https?://)?(www.)?(youtube.com/(channel|user)/[A-Za-z0-9_-]+)/?$"))})}ngOnInit(){this.socialForm.valueChanges.subscribe(se=>{this._signatureService.updateFormState({social:se})}),this.auth.user.subscribe(se=>{this.user=se,this.user&&this.getSocialForm()})}getSocialForm(){let se=this._signatureService.getLocalStorageData();this._signatureService.getSignatureFormData(this.user?.uid).subscribe(ve=>{if(ve||se.designForm){var Tt=ve||se;this.socialForm.patchValue({linkedinLink:Tt.socialMedia.linkedinLink||"",facebookLink:Tt.socialMedia.facebookLink||"",instagramLink:Tt.socialMedia.instagramLink||"",youtubeLink:Tt.socialMedia.youtubeLink||""})}else console.warn("No social found for user.")})}static#e=this.\u0275fac=function(ve){return new(ve||le)(R.rXU(we),R.rXU(F.DS))};static#t=this.\u0275cmp=R.VBU({type:le,selectors:[["app-social"]],decls:35,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-12","col-lg-6","col-xl-12"],[1,"card","overflow-hidden","shadow","p-3","mb-5","rounded"],[1,"card-body","pt-0"],[1,"col-md-12"],[1,"p-2"],[3,"formGroup"],[1,"mb-3","row"],[1,"col-3","col-lg-2"],["src","assets/images/linkdin.jpeg","alt","linkedin"],[1,"col-9","col-lg-8"],["type","text","formControlName","linkedinLink","placeholder","LinkedIn URL",1,"form-control"],[4,"ngIf"],["src","assets/images/instagram.jpeg","alt","instagram"],["type","text","formControlName","instagramLink","placeholder","Instagram Username",1,"form-control"],["src","assets/images/facebook.jpeg","alt","facebook"],["type","text","formControlName","facebookLink","placeholder","Facebook URL",1,"form-control"],["src","assets/images/youtube.jpeg","alt","youtube"],["type","text","formControlName","youtubeLink","placeholder","YouTube URL",1,"form-control"]],template:function(ve,Tt){if(1&ve&&(R.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p")(7,"b"),R.EFF(8,"Social Media Links"),R.k0s()()(),R.j41(9,"div",6)(10,"form",7)(11,"div",8)(12,"div",9),R.nrm(13,"img",10),R.k0s(),R.j41(14,"div",11),R.nrm(15,"input",12),R.DNE(16,yt,2,1,"div",13),R.k0s()(),R.j41(17,"div",8)(18,"div",9),R.nrm(19,"img",14),R.k0s(),R.j41(20,"div",11),R.nrm(21,"input",15),R.DNE(22,qt,2,1,"div",13),R.k0s()(),R.j41(23,"div",8)(24,"div",9),R.nrm(25,"img",16),R.k0s(),R.j41(26,"div",11),R.nrm(27,"input",17),R.DNE(28,Re,2,1,"div",13),R.k0s()(),R.j41(29,"div",8)(30,"div",9),R.nrm(31,"img",18),R.k0s(),R.j41(32,"div",11),R.nrm(33,"input",19),R.DNE(34,Te,2,1,"div",13),R.k0s()()()()()()()()()),2&ve){let xt,Ke,Ot,Un;R.R7$(10),R.Y8G("formGroup",Tt.socialForm),R.R7$(6),R.Y8G("ngIf",(null==(xt=Tt.socialForm.get("linkedinLink"))?null:xt.invalid)&&(null==(xt=Tt.socialForm.get("linkedinLink"))?null:xt.touched)),R.R7$(6),R.Y8G("ngIf",(null==(Ke=Tt.socialForm.get("instagramLink"))?null:Ke.invalid)&&(null==(Ke=Tt.socialForm.get("instagramLink"))?null:Ke.touched)),R.R7$(6),R.Y8G("ngIf",(null==(Ot=Tt.socialForm.get("facebookLink"))?null:Ot.invalid)&&(null==(Ot=Tt.socialForm.get("facebookLink"))?null:Ot.touched)),R.R7$(6),R.Y8G("ngIf",(null==(Un=Tt.socialForm.get("youtubeLink"))?null:Un.invalid)&&(null==(Un=Tt.socialForm.get("youtubeLink"))?null:Un.touched))}},dependencies:[g.bT,Ae.qT,Ae.me,Ae.BC,Ae.cb,Ae.j4,Ae.JD],styles:["img[_ngcontent-%COMP%]{width:35px}"]})}return le})(),nt=(()=>{class le{constructor(se,ve){this._signatureService=se,this.auth=ve,this.user=null,this.designForm=new Ae.gE({fontFamily:new Ae.MJ(null,[Ae.k0.minLength(3),Ae.k0.maxLength(30)]),fontSize:new Ae.MJ(null,[Ae.k0.minLength(3),Ae.k0.maxLength(30)]),templateColor:new Ae.MJ(null,[Ae.k0.minLength(3),Ae.k0.maxLength(30)]),backgroundColor:new Ae.MJ("#FFFFFF",[Ae.k0.minLength(3),Ae.k0.maxLength(30)])})}ngOnInit(){this.designForm.valueChanges.subscribe(se=>{this._signatureService.updateFormState({design:se})}),this.auth.user.subscribe(se=>{this.user=se,this.user&&this.getDesignForm()})}getDesignForm(){let se=this._signatureService.getLocalStorageData();this._signatureService.getSignatureFormData(this.user?.uid).subscribe(ve=>{if(ve||se.designForm){var Tt=ve||se;this.designForm.patchValue({fontFamily:Tt.designForm.fontFamily||"",fontSize:Tt.designForm.fontSize||"",templateColor:Tt.designForm.templateColor||"",backgroundColor:Tt.designForm.backgroundColor||""})}else console.warn("No Design Form found for user.")})}static#e=this.\u0275fac=function(ve){return new(ve||le)(R.rXU(we),R.rXU(F.DS))};static#t=this.\u0275cmp=R.VBU({type:le,selectors:[["app-design"]],decls:55,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12","col-lg-6","col-xl-12"],[1,"card","overflow-hidden","shadow","p-3","rounded"],[1,"card-body"],[1,"p-2"],[1,"col-md-12"],[3,"formGroup"],[1,"mb-3","row"],[1,"col-md-4"],[1,""],[1,"col-md-8"],["id","fonFomily","formControlName","fontFamily",1,"form-control"],["value","arial","selected","",1,"bg-slate-700"],["value","inter",1,"bg-slate-700"],["value","verdana",1,"bg-slate-700"],["value","tahoma",1,"bg-slate-700"],["value","trebuchet",1,"bg-slate-700"],["value","timeNewRoman",1,"bg-slate-700"],["value","georgia",1,"bg-slate-700"],["value","garamond",1,"bg-slate-700"],["value","courierNew",1,"bg-slate-700"],["value","brushScriptMt",1,"bg-slate-700"],["type","range","min","10","max","30","formControlName","fontSize",1,"form-range"],[1,"mb-4","row"],[1,"inline-block","mb-2","col-span-1"],["type","color","value","#fefefe","formControlName","templateColor",1,""],["type","color","formControlName","backgroundColor"]],template:function(ve,Tt){1&ve&&(R.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"p")(8,"b"),R.EFF(9,"Layout"),R.k0s()()(),R.j41(10,"form",7)(11,"div",8)(12,"div",9)(13,"label",10),R.EFF(14,"Font family"),R.k0s()(),R.j41(15,"div",11)(16,"select",12)(17,"option",13),R.EFF(18,"Arial (sans-serif)"),R.k0s(),R.j41(19,"option",14),R.EFF(20,"Inter, sans-serif"),R.k0s(),R.j41(21,"option",15),R.EFF(22,"Verdana (sans-serif)"),R.k0s(),R.j41(23,"option",16),R.EFF(24,"Tahoma (sans-serif)"),R.k0s(),R.j41(25,"option",17),R.EFF(26,"Trebuchet MS (sans-serif)"),R.k0s(),R.j41(27,"option",18),R.EFF(28,"Times New Roman (serif)"),R.k0s(),R.j41(29,"option",19),R.EFF(30,"Georgia (serif)"),R.k0s(),R.j41(31,"option",20),R.EFF(32,"Garamond (serif)"),R.k0s(),R.j41(33,"option",21),R.EFF(34,"Courier New (monospace)"),R.k0s(),R.j41(35,"option",22),R.EFF(36,"Brush Script MT (cursive)"),R.k0s()()()(),R.j41(37,"div",8)(38,"div",9)(39,"label",10),R.EFF(40,"Font size"),R.k0s()(),R.j41(41,"div",11),R.nrm(42,"input",23),R.k0s()(),R.j41(43,"div",24)(44,"div",9)(45,"label",25),R.EFF(46,"Template color"),R.k0s()(),R.j41(47,"div",11),R.nrm(48,"input",26),R.k0s()(),R.j41(49,"div",1)(50,"div",9)(51,"label",25),R.EFF(52,"Background color"),R.k0s()(),R.j41(53,"div",11),R.nrm(54,"input",27),R.k0s()()()()()()()()()),2&ve&&(R.R7$(10),R.Y8G("formGroup",Tt.designForm))},dependencies:[Ae.qT,Ae.xH,Ae.y7,Ae.me,Ae.MR,Ae.wz,Ae.BC,Ae.cb,Ae.j4,Ae.JD]})}return le})(),vt=(()=>{class le{constructor(){}copyToClip(se){let ve=document.getElementById(se);if(ve=ve?.innerHTML,ve){let Tt=function(xt){xt.clipboardData?.setData("text/html",ve),xt.clipboardData?.setData("text/plain",ve),xt.preventDefault()};document.addEventListener("copy",Tt),document.execCommand("copy"),document.removeEventListener("copy",Tt),alert("Success! Signature has been copied.")}else alert("An unexpected error occurred. Please try again later.")}static#e=this.\u0275fac=function(ve){return new(ve||le)};static#t=this.\u0275prov=R.jDH({token:le,factory:le.\u0275fac,providedIn:"root"})}return le})();function Lt(le,xe){if(1&le&&(R.j41(0,"div",8)(1,"P",9),R.EFF(2),R.k0s()()),2&le){const se=R.XpG();R.R7$(2),R.JRh(se.signaturePreviewText)}}function Je(le,xe){if(1&le&&(R.j41(0,"span")(1,"a",17),R.nrm(2,"img",18),R.k0s()()),2&le){const se=R.XpG(2);R.R7$(1),R.FS9("href",null==se.formData.social?null:se.formData.social.linkedinLink,R.B4B)}}function Zt(le,xe){if(1&le&&(R.j41(0,"span")(1,"a",17),R.nrm(2,"img",19),R.k0s()()),2&le){const se=R.XpG(2);R.R7$(1),R.FS9("href",null==se.formData.social?null:se.formData.social.instagramLink,R.B4B)}}function cn(le,xe){if(1&le&&(R.j41(0,"span")(1,"a",17),R.nrm(2,"img",20),R.k0s()()),2&le){const se=R.XpG(2);R.R7$(1),R.FS9("href",null==se.formData.social?null:se.formData.social.facebookLink,R.B4B)}}function an(le,xe){if(1&le&&(R.j41(0,"span")(1,"a",17),R.nrm(2,"img",21),R.k0s()()),2&le){const se=R.XpG(2);R.R7$(1),R.FS9("href",null==se.formData.social?null:se.formData.social.youtubeLink,R.B4B)}}function Wn(le,xe){if(1&le){const se=R.RV6();R.j41(0,"div")(1,"div",10,11)(3,"div")(4,"span")(5,"p",12),R.EFF(6),R.k0s(),R.j41(7,"p",12),R.EFF(8),R.k0s(),R.j41(9,"p",12),R.EFF(10),R.k0s(),R.j41(11,"p",12),R.EFF(12),R.k0s()(),R.DNE(13,Je,3,1,"span",6),R.DNE(14,Zt,3,1,"span",6),R.DNE(15,cn,3,1,"span",6),R.DNE(16,an,3,1,"span",6),R.k0s()(),R.j41(17,"div",13)(18,"div",14)(19,"button",15),R.bIt("click",function(){R.eBV(se);const Tt=R.XpG();return R.Njj(Tt.copySignature())}),R.EFF(20," Copy Signature "),R.k0s(),R.j41(21,"button",16),R.bIt("click",function(){R.eBV(se);const Tt=R.XpG();return R.Njj(Tt.onSubmit())}),R.EFF(22," Save Signature "),R.k0s()()()()}if(2&le){const se=R.XpG();R.R7$(3),R.xc7("background",null==se.formData.design?null:se.formData.design.backgroundColor),R.R7$(1),R.xc7("font-family",null==se.formData.design?null:se.formData.design.fontFamily)("font-size",null==se.formData.design?null:se.formData.design.fontSize,"px")("color",null==se.formData.design?null:se.formData.design.templateColor),R.R7$(2),R.JRh(null==se.formData.general?null:se.formData.general.fName),R.R7$(2),R.JRh(null==se.formData.general?null:se.formData.general.lName),R.R7$(2),R.JRh(null==se.formData.general?null:se.formData.general.email),R.R7$(2),R.JRh(null==se.formData.general?null:se.formData.general.mobileNo),R.R7$(1),R.Y8G("ngIf",null==se.formData.social?null:se.formData.social.linkedinLink),R.R7$(1),R.Y8G("ngIf",null==se.formData.social?null:se.formData.social.instagramLink),R.R7$(1),R.Y8G("ngIf",null==se.formData.social?null:se.formData.social.facebookLink),R.R7$(1),R.Y8G("ngIf",null==se.formData.social?null:se.formData.social.youtubeLink)}}function Dn(le,xe){if(1&le&&(R.j41(0,"div",22),R.EFF(1),R.k0s()),2&le){const se=R.XpG();R.ZvI("alert alert-",se.alertColor,""),R.R7$(1),R.SpI(" ",se.showSuccessMessage,"\n")}}let Ft=(()=>{class le{constructor(se,ve,Tt,xt){this._signatureService=se,this._auth=ve,this._router=Tt,this._copySignatureService=xt,this.user=null,this.showSuccess=!1,this.showSuccessMessage="",this.alertColor="primary",this.images={linkedin:"assets/images/linkdin.jpeg",facebook:"assets/images/youtube.png",instagram:"assets/images/instagram.png",youtube:"assets/images/linkedin.png"},ve.user.subscribe(Ke=>this.user=Ke)}ngOnInit(){this.localStorageData=this._signatureService.getLocalStorageData(),this._signatureService.formState$.subscribe(se=>{se&&this.hasValidFormData(se)?this.formData=se||this.localStorageData:this.signaturePreviewText="Your personalized email signature will be displayed here after entering your details."})}hasValidFormData(se){return se.general&&Object.keys(se.general).length>0||se.social&&Object.keys(se.social).length>0||se.design&&Object.keys(se.design).length>0}onSubmit(){var se=this;return(0,J.A)(function*(){console.log(se.data),se.data={uid:se.user?.uid,basicForm:{...se.formData.general},socialMedia:{...se.formData.social},designForm:{...se.formData.design}};try{yield se._signatureService.createSign(se.data),se.showSuccessMessage="Success! New signature has been saved.",se.showSuccess=!0,se.alertColor="success",setTimeout(()=>{se.showSuccess=!1},2e3)}catch{se.showSuccessMessage="An unexpected error occurred. Please try again later",se.alertColor="danger "}if(!se.user?.uid)return localStorage.setItem("data",JSON.stringify(se.data)),void se._router.navigateByUrl("/login")})()}copySignature(){this._copySignatureService.copyToClip("email-signature"),this.showSuccess=!0,this.showSuccessMessage="Success! Signature has been copied.",this.alertColor="success",setTimeout(()=>{this.showSuccess=!1},2e3)}static#e=this.\u0275fac=function(ve){return new(ve||le)(R.rXU(we),R.rXU(F.DS),R.rXU(oe.Ix),R.rXU(vt))};static#t=this.\u0275cmp=R.VBU({type:le,selectors:[["app-signature-preview"]],decls:9,vars:3,consts:[[1,"container","mt-5"],[1,"card","shadow","mb-5","rounded"],[1,"card-header"],[1,"header-text"],[1,"card-body"],["class","m-3 p-3",4,"ngIf"],[4,"ngIf"],["role","alert","style","position: fixed; bottom: 40px; right: 40px;",3,"class",4,"ngIf"],[1,"m-3","p-3"],[1,"text-center","fs-4"],["id","email-signature",1,"m-3","p-3"],["elementContentToCopy",""],[2,"margin","0"],[1,"row","m-2"],[1,"col-md-12"],[1,"btn",3,"click"],["type","submit",1,"btn","float-end",3,"click"],["target","_blank",3,"href"],["src","https://firebasestorage.googleapis.com/v0/b/email-signature-9cbf1.appspot.com/o/linkdin.jpeg?alt=media&token=21e40dab-f0c1-4313-858b-b58f750a03e2","alt","linkedin",2,"width","35px","margin-right","10px"],["src","https://firebasestorage.googleapis.com/v0/b/email-signature-9cbf1.appspot.com/o/instagram.jpeg?alt=media&token=d5f8cdbc-b1e1-402c-966f-964adfc6e2c9","alt","instagram",2,"width","35px","margin-right","10px"],["src","https://firebasestorage.googleapis.com/v0/b/email-signature-9cbf1.appspot.com/o/facebook.jpeg?alt=media&token=604136f4-5da2-4cce-8cee-e542b26b52eb","alt","facebook",2,"width","35px","margin-right","10px"],["src","https://firebasestorage.googleapis.com/v0/b/email-signature-9cbf1.appspot.com/o/youtube.jpeg?alt=media&token=977983c0-1478-4352-bd5a-5203d58f72a4","alt","youtube",2,"width","35px","margin-right","10px"],["role","alert",2,"position","fixed","bottom","40px","right","40px"]],template:function(ve,Tt){1&ve&&(R.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),R.EFF(4,"Signature Preview"),R.k0s()(),R.j41(5,"div",4),R.DNE(6,Lt,3,1,"div",5),R.DNE(7,Wn,23,16,"div",6),R.k0s()()(),R.DNE(8,Dn,2,4,"div",7)),2&ve&&(R.R7$(6),R.Y8G("ngIf",Tt.signaturePreviewText&&!Tt.formData),R.R7$(1),R.Y8G("ngIf",Tt.formData),R.R7$(1),R.Y8G("ngIf",Tt.showSuccess))},dependencies:[g.bT],styles:["button[_ngcontent-%COMP%]{background-color:#d5b4b4}"]})}return le})(),Vt=(()=>{class le{constructor(){this.name="!!!",this.viewMode="tab1",this.tabValue="general"}tabChange(se){this.tabValue=se}static#e=this.\u0275fac=function(ve){return new(ve||le)};static#t=this.\u0275cmp=R.VBU({type:le,selectors:[["app-feature"]],decls:26,vars:9,consts:[[1,"main","pt-4","pb-3"],[1,"container"],[1,"row"],[1,"col-12","col-lg-6","mt-4"],[1,"text-center","col-12","col-lg-12"],[1,"active",3,"click"],[3,"click"],[1,"col-12","col-lg-12"],[3,"hidden"]],template:function(ve,Tt){1&ve&&(R.j41(0,"div",0)(1,"div",1),R.nrm(2,"app-nav-bar"),R.j41(3,"div",2)(4,"div",3)(5,"div",2)(6,"ul",4)(7,"li")(8,"a",5),R.bIt("click",function(){return Tt.tabChange("general")}),R.EFF(9,"General"),R.k0s()(),R.j41(10,"li")(11,"a",6),R.bIt("click",function(){return Tt.tabChange("social")}),R.EFF(12,"Social"),R.k0s()(),R.j41(13,"li")(14,"a",6),R.bIt("click",function(){return Tt.tabChange("design")}),R.EFF(15,"Design"),R.k0s()()()(),R.j41(16,"div",2)(17,"div",7)(18,"div",8),R.nrm(19,"app-general"),R.k0s(),R.j41(20,"div",8),R.nrm(21,"app-social"),R.k0s(),R.j41(22,"div",8),R.nrm(23,"app-design"),R.k0s()()()(),R.j41(24,"div",3),R.nrm(25,"app-signature-preview"),R.k0s()()()()),2&ve&&(R.R7$(8),R.AVh("color","general"===Tt.tabValue),R.R7$(3),R.AVh("color","social"===Tt.tabValue),R.R7$(3),R.AVh("color","design"===Tt.tabValue),R.R7$(4),R.Y8G("hidden","general"!==Tt.tabValue),R.R7$(2),R.Y8G("hidden","social"!==Tt.tabValue),R.R7$(2),R.Y8G("hidden","design"!==Tt.tabValue))},dependencies:[Se,_t,Fe,nt,Ft],styles:[".main[_ngcontent-%COMP%]{height:100vh;background-color:#e4d0d0}.color[_ngcontent-%COMP%]{color:#dd2022}ul[_ngcontent-%COMP%]{margin:6;padding:0}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{display:inline-block}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#0c0909;padding:10px 25px;text-decoration:none;border-radius:40px}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#cf8788;color:#fff}.icon[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 575.98px){.main[_ngcontent-%COMP%]{height:216vh;background-color:#e4d0d0}}"]})}return le})();const de=[{path:"",redirectTo:"email-signature",pathMatch:"full"},{path:"",component:Vt},{path:"email-signature",component:Vt,data:{authOnly:!0}}];let ye=(()=>{class le{static#e=this.\u0275fac=function(ve){return new(ve||le)};static#t=this.\u0275mod=R.$C({type:le});static#n=this.\u0275inj=R.G2t({imports:[oe.iI.forChild(de),oe.iI]})}return le})(),ke=(()=>{class le{static#e=this.\u0275fac=function(ve){return new(ve||le)};static#t=this.\u0275mod=R.$C({type:le});static#n=this.\u0275inj=R.G2t({imports:[g.MD,oe.iI]})}return le})(),Me=(()=>{class le{static#e=this.\u0275fac=function(ve){return new(ve||le)};static#t=this.\u0275mod=R.$C({type:le});static#n=this.\u0275inj=R.G2t({imports:[g.MD,ye,ke,Ae.YN,Ae.X1]})}return le})()},226:($t,ze,B)=>{var g=B(345),oe=B(9253);const R_firebase={projectId:"email-signature-9cbf1",appId:"1:426124768182:web:53a688307676f4b171c717",storageBucket:"email-signature-9cbf1.appspot.com",apiKey:"AIzaSyBfoC0w2boZqPUc9ajj5W8xzUI_wxBtbdg",authDomain:"email-signature-9cbf1.firebaseapp.com"};var J=B(1977),F=B(8079),_e=B(945),Se=B(7705);const Ae=[{path:"account",loadChildren:()=>Promise.resolve().then(B.bind(B,1124)).then(He=>He.AuthModule)},{path:"",loadChildren:()=>Promise.resolve().then(B.bind(B,5463)).then(He=>He.FeaturesModule)}];let Ve=(()=>{class He{static#e=this.\u0275fac=function(yt){return new(yt||He)};static#t=this.\u0275mod=Se.$C({type:He});static#n=this.\u0275inj=Se.G2t({imports:[_e.iI.forRoot(Ae),_e.iI]})}return He})(),ie=(()=>{class He{constructor(){this.title="email_signature_generator"}static#e=this.\u0275fac=function(yt){return new(yt||He)};static#t=this.\u0275cmp=Se.VBU({type:He,selectors:[["app-root"]],decls:1,vars:0,template:function(yt,gt){1&yt&&Se.nrm(0,"router-outlet")},dependencies:[_e.n3]})}return He})();var ce=B(5463),we=B(1124);let at=(()=>{class He{static#e=this.\u0275fac=function(yt){return new(yt||He)};static#t=this.\u0275mod=Se.$C({type:He,bootstrap:[ie]});static#n=this.\u0275inj=Se.G2t({imports:[g.Bb,Ve,oe.bf.initializeApp(R_firebase),J.X8,F.cM,ce.FeaturesModule,we.AuthModule]})}return He})();g.sG().bootstrapModule(at).catch(He=>console.error(He))},4412:($t,ze,B)=>{B.d(ze,{t:()=>oe});var g=B(1413);class oe extends g.B{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const F=super._subscribe(J);return!F.closed&&J.next(this._value),F}getValue(){const{hasError:J,thrownError:F,_value:_e}=this;if(J)throw F;return this._throwIfClosed(),_e}next(J){super.next(this._value=J)}}},1985:($t,ze,B)=>{B.d(ze,{c:()=>Ae});var g=B(7707),oe=B(8359),R=B(3494),J=B(1203),F=B(1026),_e=B(8071),Se=B(9786);let Ae=(()=>{class we{constructor(He){He&&(this._subscribe=He)}lift(He){const _t=new we;return _t.source=this,_t.operator=He,_t}subscribe(He,_t,lt){const yt=function ce(we){return we&&we instanceof g.vU||function ie(we){return we&&(0,_e.T)(we.next)&&(0,_e.T)(we.error)&&(0,_e.T)(we.complete)}(we)&&(0,oe.Uv)(we)}(He)?He:new g.Ms(He,_t,lt);return(0,Se.Y)(()=>{const{operator:gt,source:qt}=this;yt.add(gt?gt.call(yt,qt):qt?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(He){try{return this._subscribe(He)}catch(_t){He.error(_t)}}forEach(He,_t){return new(_t=Ve(_t))((lt,yt)=>{const gt=new g.Ms({next:qt=>{try{He(qt)}catch(Ce){yt(Ce),gt.unsubscribe()}},error:yt,complete:lt});this.subscribe(gt)})}_subscribe(He){var _t;return null===(_t=this.source)||void 0===_t?void 0:_t.subscribe(He)}[R.s](){return this}pipe(...He){return(0,J.m)(He)(this)}toPromise(He){return new(He=Ve(He))((_t,lt)=>{let yt;this.subscribe(gt=>yt=gt,gt=>lt(gt),()=>_t(yt))})}}return we.create=at=>new we(at),we})();function Ve(we){var at;return null!==(at=we??F.$.Promise)&&void 0!==at?at:Promise}},1413:($t,ze,B)=>{B.d(ze,{B:()=>Se});var g=B(1985),oe=B(8359);const J=(0,B(1853).L)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var F=B(7908),_e=B(9786);let Se=(()=>{class Ve extends g.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ce){const we=new Ae(this,this);return we.operator=ce,we}_throwIfClosed(){if(this.closed)throw new J}next(ce){(0,_e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const we of this.currentObservers)we.next(ce)}})}error(ce){(0,_e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ce;const{observers:we}=this;for(;we.length;)we.shift().error(ce)}})}complete(){(0,_e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ce}=this;for(;ce.length;)ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ce;return(null===(ce=this.observers)||void 0===ce?void 0:ce.length)>0}_trySubscribe(ce){return this._throwIfClosed(),super._trySubscribe(ce)}_subscribe(ce){return this._throwIfClosed(),this._checkFinalizedStatuses(ce),this._innerSubscribe(ce)}_innerSubscribe(ce){const{hasError:we,isStopped:at,observers:He}=this;return we||at?oe.Kn:(this.currentObservers=null,He.push(ce),new oe.yU(()=>{this.currentObservers=null,(0,F.o)(He,ce)}))}_checkFinalizedStatuses(ce){const{hasError:we,thrownError:at,isStopped:He}=this;we?ce.error(at):He&&ce.complete()}asObservable(){const ce=new g.c;return ce.source=this,ce}}return Ve.create=(ie,ce)=>new Ae(ie,ce),Ve})();class Ae extends Se{constructor(ie,ce){super(),this.destination=ie,this.source=ce}next(ie){var ce,we;null===(we=null===(ce=this.destination)||void 0===ce?void 0:ce.next)||void 0===we||we.call(ce,ie)}error(ie){var ce,we;null===(we=null===(ce=this.destination)||void 0===ce?void 0:ce.error)||void 0===we||we.call(ce,ie)}complete(){var ie,ce;null===(ce=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===ce||ce.call(ie)}_subscribe(ie){var ce,we;return null!==(we=null===(ce=this.source)||void 0===ce?void 0:ce.subscribe(ie))&&void 0!==we?we:oe.Kn}}},7707:($t,ze,B)=>{B.d(ze,{Ms:()=>lt,vU:()=>we});var g=B(8071),oe=B(8359),R=B(1026),J=B(5334),F=B(5343);const _e=Ve("C",void 0,void 0);function Ve(Re,tt,Te){return{kind:Re,value:tt,error:Te}}var ie=B(9270),ce=B(9786);class we extends oe.yU{constructor(tt){super(),this.isStopped=!1,tt?(this.destination=tt,(0,oe.Uv)(tt)&&tt.add(this)):this.destination=Ce}static create(tt,Te,Fe){return new lt(tt,Te,Fe)}next(tt){this.isStopped?qt(function Ae(Re){return Ve("N",Re,void 0)}(tt),this):this._next(tt)}error(tt){this.isStopped?qt(function Se(Re){return Ve("E",void 0,Re)}(tt),this):(this.isStopped=!0,this._error(tt))}complete(){this.isStopped?qt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(tt){this.destination.next(tt)}_error(tt){try{this.destination.error(tt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function He(Re,tt){return at.call(Re,tt)}class _t{constructor(tt){this.partialObserver=tt}next(tt){const{partialObserver:Te}=this;if(Te.next)try{Te.next(tt)}catch(Fe){yt(Fe)}}error(tt){const{partialObserver:Te}=this;if(Te.error)try{Te.error(tt)}catch(Fe){yt(Fe)}else yt(tt)}complete(){const{partialObserver:tt}=this;if(tt.complete)try{tt.complete()}catch(Te){yt(Te)}}}class lt extends we{constructor(tt,Te,Fe){let nt;if(super(),(0,g.T)(tt)||!tt)nt={next:tt??void 0,error:Te??void 0,complete:Fe??void 0};else{let vt;this&&R.$.useDeprecatedNextContext?(vt=Object.create(tt),vt.unsubscribe=()=>this.unsubscribe(),nt={next:tt.next&&He(tt.next,vt),error:tt.error&&He(tt.error,vt),complete:tt.complete&&He(tt.complete,vt)}):nt=tt}this.destination=new _t(nt)}}function yt(Re){R.$.useDeprecatedSynchronousErrorHandling?(0,ce.l)(Re):(0,J.m)(Re)}function qt(Re,tt){const{onStoppedNotification:Te}=R.$;Te&&ie.f.setTimeout(()=>Te(Re,tt))}const Ce={closed:!0,next:F.l,error:function gt(Re){throw Re},complete:F.l}},8359:($t,ze,B)=>{B.d(ze,{Kn:()=>_e,yU:()=>F,Uv:()=>Se});var g=B(8071);const R=(0,B(1853).L)(Ve=>function(ce){Ve(this),this.message=ce?`${ce.length} errors occurred during unsubscription:\n${ce.map((we,at)=>`${at+1}) ${we.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ce});var J=B(7908);class F{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:ce}=this;if(ce)if(this._parentage=null,Array.isArray(ce))for(const He of ce)He.remove(this);else ce.remove(this);const{initialTeardown:we}=this;if((0,g.T)(we))try{we()}catch(He){ie=He instanceof R?He.errors:[He]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const He of at)try{Ae(He)}catch(_t){ie=ie??[],_t instanceof R?ie=[...ie,..._t.errors]:ie.push(_t)}}if(ie)throw new R(ie)}}add(ie){var ce;if(ie&&ie!==this)if(this.closed)Ae(ie);else{if(ie instanceof F){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(ce=this._finalizers)&&void 0!==ce?ce:[]).push(ie)}}_hasParent(ie){const{_parentage:ce}=this;return ce===ie||Array.isArray(ce)&&ce.includes(ie)}_addParent(ie){const{_parentage:ce}=this;this._parentage=Array.isArray(ce)?(ce.push(ie),ce):ce?[ce,ie]:ie}_removeParent(ie){const{_parentage:ce}=this;ce===ie?this._parentage=null:Array.isArray(ce)&&(0,J.o)(ce,ie)}remove(ie){const{_finalizers:ce}=this;ce&&(0,J.o)(ce,ie),ie instanceof F&&ie._removeParent(this)}}F.EMPTY=(()=>{const Ve=new F;return Ve.closed=!0,Ve})();const _e=F.EMPTY;function Se(Ve){return Ve instanceof F||Ve&&"closed"in Ve&&(0,g.T)(Ve.remove)&&(0,g.T)(Ve.add)&&(0,g.T)(Ve.unsubscribe)}function Ae(Ve){(0,g.T)(Ve)?Ve():Ve.unsubscribe()}},1026:($t,ze,B)=>{B.d(ze,{$:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:($t,ze,B)=>{B.d(ze,{x:()=>F});var g=B(6365),R=B(9326),J=B(8455);function F(..._e){return function oe(){return(0,g.U)(1)}()((0,J.H)(_e,(0,R.lI)(_e)))}},983:($t,ze,B)=>{B.d(ze,{w:()=>oe});const oe=new(B(1985).c)(F=>F.complete())},8455:($t,ze,B)=>{B.d(ze,{H:()=>tt});var g=B(8750),oe=B(941),R=B(6745),_e=B(1985),Ae=B(4761),Ve=B(8071),ie=B(5225);function we(Te,Fe){if(!Te)throw new Error("Iterable cannot be null");return new _e.c(nt=>{(0,ie.N)(nt,Fe,()=>{const vt=Te[Symbol.asyncIterator]();(0,ie.N)(nt,Fe,()=>{vt.next().then(Lt=>{Lt.done?nt.complete():nt.next(Lt.value)})},0,!0)})})}var at=B(5055),He=B(9858),_t=B(7441),lt=B(5397),yt=B(7953),gt=B(591),qt=B(5196);function tt(Te,Fe){return Fe?function Re(Te,Fe){if(null!=Te){if((0,at.l)(Te))return function J(Te,Fe){return(0,g.Tg)(Te).pipe((0,R._)(Fe),(0,oe.Q)(Fe))}(Te,Fe);if((0,_t.X)(Te))return function Se(Te,Fe){return new _e.c(nt=>{let vt=0;return Fe.schedule(function(){vt===Te.length?nt.complete():(nt.next(Te[vt++]),nt.closed||this.schedule())})})}(Te,Fe);if((0,He.y)(Te))return function F(Te,Fe){return(0,g.Tg)(Te).pipe((0,R._)(Fe),(0,oe.Q)(Fe))}(Te,Fe);if((0,yt.T)(Te))return we(Te,Fe);if((0,lt.x)(Te))return function ce(Te,Fe){return new _e.c(nt=>{let vt;return(0,ie.N)(nt,Fe,()=>{vt=Te[Ae.l](),(0,ie.N)(nt,Fe,()=>{let Lt,Je;try{({value:Lt,done:Je}=vt.next())}catch(Zt){return void nt.error(Zt)}Je?nt.complete():nt.next(Lt)},0,!0)}),()=>(0,Ve.T)(vt?.return)&&vt.return()})}(Te,Fe);if((0,qt.U)(Te))return function Ce(Te,Fe){return we((0,qt.C)(Te),Fe)}(Te,Fe)}throw(0,gt.L)(Te)}(Te,Fe):(0,g.Tg)(Te)}},8750:($t,ze,B)=>{B.d(ze,{Tg:()=>at});var g=B(1635),oe=B(7441),R=B(9858),J=B(1985),F=B(5055),_e=B(7953),Se=B(591),Ae=B(5397),Ve=B(5196),ie=B(8071),ce=B(5334),we=B(3494);function at(Re){if(Re instanceof J.c)return Re;if(null!=Re){if((0,F.l)(Re))return function He(Re){return new J.c(tt=>{const Te=Re[we.s]();if((0,ie.T)(Te.subscribe))return Te.subscribe(tt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,oe.X)(Re))return function _t(Re){return new J.c(tt=>{for(let Te=0;Te<Re.length&&!tt.closed;Te++)tt.next(Re[Te]);tt.complete()})}(Re);if((0,R.y)(Re))return function lt(Re){return new J.c(tt=>{Re.then(Te=>{tt.closed||(tt.next(Te),tt.complete())},Te=>tt.error(Te)).then(null,ce.m)})}(Re);if((0,_e.T)(Re))return gt(Re);if((0,Ae.x)(Re))return function yt(Re){return new J.c(tt=>{for(const Te of Re)if(tt.next(Te),tt.closed)return;tt.complete()})}(Re);if((0,Ve.U)(Re))return function qt(Re){return gt((0,Ve.C)(Re))}(Re)}throw(0,Se.L)(Re)}function gt(Re){return new J.c(tt=>{(function Ce(Re,tt){var Te,Fe,nt,vt;return(0,g.sH)(this,void 0,void 0,function*(){try{for(Te=(0,g.xN)(Re);!(Fe=yield Te.next()).done;)if(tt.next(Fe.value),tt.closed)return}catch(Lt){nt={error:Lt}}finally{try{Fe&&!Fe.done&&(vt=Te.return)&&(yield vt.call(Te))}finally{if(nt)throw nt.error}}tt.complete()})})(Re,tt).catch(Te=>tt.error(Te))})}},7786:($t,ze,B)=>{B.d(ze,{h:()=>_e});var g=B(6365),oe=B(8750),R=B(983),J=B(9326),F=B(8455);function _e(...Se){const Ae=(0,J.lI)(Se),Ve=(0,J.R0)(Se,1/0),ie=Se;return ie.length?1===ie.length?(0,oe.Tg)(ie[0]):(0,g.U)(Ve)((0,F.H)(ie,Ae)):R.w}},7673:($t,ze,B)=>{B.d(ze,{of:()=>R});var g=B(9326),oe=B(8455);function R(...J){const F=(0,g.lI)(J);return(0,oe.H)(J,F)}},4360:($t,ze,B)=>{B.d(ze,{_:()=>oe});var g=B(7707);function oe(J,F,_e,Se,Ae){return new R(J,F,_e,Se,Ae)}class R extends g.vU{constructor(F,_e,Se,Ae,Ve,ie){super(F),this.onFinalize=Ve,this.shouldUnsubscribe=ie,this._next=_e?function(ce){try{_e(ce)}catch(we){F.error(we)}}:super._next,this._error=Ae?function(ce){try{Ae(ce)}catch(we){F.error(we)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(ce){F.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var F;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(F=this.onFinalize)||void 0===F||F.call(this))}}}},9901:($t,ze,B)=>{B.d(ze,{U:()=>R});var g=B(9974),oe=B(4360);function R(J){return(0,g.N)((F,_e)=>{let Se=!1;F.subscribe((0,oe._)(_e,Ae=>{Se=!0,_e.next(Ae)},()=>{Se||_e.next(J),_e.complete()}))})}},3294:($t,ze,B)=>{B.d(ze,{F:()=>J});var g=B(3669),oe=B(9974),R=B(4360);function J(_e,Se=g.D){return _e=_e??F,(0,oe.N)((Ae,Ve)=>{let ie,ce=!0;Ae.subscribe((0,R._)(Ve,we=>{const at=Se(we);(ce||!_e(ie,at))&&(ce=!1,ie=at,Ve.next(we))}))})}function F(_e,Se){return _e===Se}},5964:($t,ze,B)=>{B.d(ze,{p:()=>R});var g=B(9974),oe=B(4360);function R(J,F){return(0,g.N)((_e,Se)=>{let Ae=0;_e.subscribe((0,oe._)(Se,Ve=>J.call(F,Ve,Ae++)&&Se.next(Ve)))})}},1594:($t,ze,B)=>{B.d(ze,{$:()=>Se});var g=B(9350),oe=B(5964),R=B(6697),J=B(9901),F=B(3774),_e=B(3669);function Se(Ae,Ve){const ie=arguments.length>=2;return ce=>ce.pipe(Ae?(0,oe.p)((we,at)=>Ae(we,at,ce)):_e.D,(0,R.s)(1),ie?(0,J.U)(Ve):(0,F.v)(()=>new g.G))}},6354:($t,ze,B)=>{B.d(ze,{T:()=>R});var g=B(9974),oe=B(4360);function R(J,F){return(0,g.N)((_e,Se)=>{let Ae=0;_e.subscribe((0,oe._)(Se,Ve=>{Se.next(J.call(F,Ve,Ae++))}))})}},3703:($t,ze,B)=>{B.d(ze,{u:()=>oe});var g=B(6354);function oe(R){return(0,g.T)(()=>R)}},6365:($t,ze,B)=>{B.d(ze,{U:()=>R});var g=B(1397),oe=B(3669);function R(J=1/0){return(0,g.Z)(oe.D,J)}},1397:($t,ze,B)=>{B.d(ze,{Z:()=>Ae});var g=B(6354),oe=B(8750),R=B(9974),J=B(5225),F=B(4360),Se=B(8071);function Ae(Ve,ie,ce=1/0){return(0,Se.T)(ie)?Ae((we,at)=>(0,g.T)((He,_t)=>ie(we,He,at,_t))((0,oe.Tg)(Ve(we,at))),ce):("number"==typeof ie&&(ce=ie),(0,R.N)((we,at)=>function _e(Ve,ie,ce,we,at,He,_t,lt){const yt=[];let gt=0,qt=0,Ce=!1;const Re=()=>{Ce&&!yt.length&&!gt&&ie.complete()},tt=Fe=>gt<we?Te(Fe):yt.push(Fe),Te=Fe=>{He&&ie.next(Fe),gt++;let nt=!1;(0,oe.Tg)(ce(Fe,qt++)).subscribe((0,F._)(ie,vt=>{at?.(vt),He?tt(vt):ie.next(vt)},()=>{nt=!0},void 0,()=>{if(nt)try{for(gt--;yt.length&&gt<we;){const vt=yt.shift();_t?(0,J.N)(ie,_t,()=>Te(vt)):Te(vt)}Re()}catch(vt){ie.error(vt)}}))};return Ve.subscribe((0,F._)(ie,tt,()=>{Ce=!0,Re()})),()=>{lt?.()}}(we,at,Ve,ce)))}},941:($t,ze,B)=>{B.d(ze,{Q:()=>J});var g=B(5225),oe=B(9974),R=B(4360);function J(F,_e=0){return(0,oe.N)((Se,Ae)=>{Se.subscribe((0,R._)(Ae,Ve=>(0,g.N)(Ae,F,()=>Ae.next(Ve),_e),()=>(0,g.N)(Ae,F,()=>Ae.complete(),_e),Ve=>(0,g.N)(Ae,F,()=>Ae.error(Ve),_e)))})}},2816:($t,ze,B)=>{B.d(ze,{S:()=>J});var g=B(9974),oe=B(4360);function J(F,_e){return(0,g.N)(function R(F,_e,Se,Ae,Ve){return(ie,ce)=>{let we=Se,at=_e,He=0;ie.subscribe((0,oe._)(ce,_t=>{const lt=He++;at=we?F(at,_t,lt):(we=!0,_t),Ae&&ce.next(at)},Ve&&(()=>{we&&ce.next(at),ce.complete()})))}}(F,_e,arguments.length>=2,!0))}},7647:($t,ze,B)=>{B.d(ze,{u:()=>F});var g=B(8750),oe=B(1413),R=B(7707),J=B(9974);function F(Se={}){const{connector:Ae=(()=>new oe.B),resetOnError:Ve=!0,resetOnComplete:ie=!0,resetOnRefCountZero:ce=!0}=Se;return we=>{let at,He,_t,lt=0,yt=!1,gt=!1;const qt=()=>{He?.unsubscribe(),He=void 0},Ce=()=>{qt(),at=_t=void 0,yt=gt=!1},Re=()=>{const tt=at;Ce(),tt?.unsubscribe()};return(0,J.N)((tt,Te)=>{lt++,!gt&&!yt&&qt();const Fe=_t=_t??Ae();Te.add(()=>{lt--,0===lt&&!gt&&!yt&&(He=_e(Re,ce))}),Fe.subscribe(Te),!at&&lt>0&&(at=new R.Ms({next:nt=>Fe.next(nt),error:nt=>{gt=!0,qt(),He=_e(Ce,Ve,nt),Fe.error(nt)},complete:()=>{yt=!0,qt(),He=_e(Ce,ie),Fe.complete()}}),(0,g.Tg)(tt).subscribe(at))})(we)}}function _e(Se,Ae,...Ve){if(!0===Ae)return void Se();if(!1===Ae)return;const ie=new R.Ms({next:()=>{ie.unsubscribe(),Se()}});return(0,g.Tg)(Ae(...Ve)).subscribe(ie)}},9172:($t,ze,B)=>{B.d(ze,{Z:()=>J});var g=B(8793),oe=B(9326),R=B(9974);function J(...F){const _e=(0,oe.lI)(F);return(0,R.N)((Se,Ae)=>{(_e?(0,g.x)(F,Se,_e):(0,g.x)(F,Se)).subscribe(Ae)})}},6745:($t,ze,B)=>{B.d(ze,{_:()=>oe});var g=B(9974);function oe(R,J=0){return(0,g.N)((F,_e)=>{_e.add(R.schedule(()=>F.subscribe(_e),J))})}},5558:($t,ze,B)=>{B.d(ze,{n:()=>J});var g=B(8750),oe=B(9974),R=B(4360);function J(F,_e){return(0,oe.N)((Se,Ae)=>{let Ve=null,ie=0,ce=!1;const we=()=>ce&&!Ve&&Ae.complete();Se.subscribe((0,R._)(Ae,at=>{Ve?.unsubscribe();let He=0;const _t=ie++;(0,g.Tg)(F(at,_t)).subscribe(Ve=(0,R._)(Ae,lt=>Ae.next(_e?_e(at,lt,_t,He++):lt),()=>{Ve=null,we()}))},()=>{ce=!0,we()}))})}},6697:($t,ze,B)=>{B.d(ze,{s:()=>J});var g=B(983),oe=B(9974),R=B(4360);function J(F){return F<=0?()=>g.w:(0,oe.N)((_e,Se)=>{let Ae=0;_e.subscribe((0,R._)(Se,Ve=>{++Ae<=F&&(Se.next(Ve),F<=Ae&&Se.complete())}))})}},8141:($t,ze,B)=>{B.d(ze,{M:()=>F});var g=B(8071),oe=B(9974),R=B(4360),J=B(3669);function F(_e,Se,Ae){const Ve=(0,g.T)(_e)||Se||Ae?{next:_e,error:Se,complete:Ae}:_e;return Ve?(0,oe.N)((ie,ce)=>{var we;null===(we=Ve.subscribe)||void 0===we||we.call(Ve);let at=!0;ie.subscribe((0,R._)(ce,He=>{var _t;null===(_t=Ve.next)||void 0===_t||_t.call(Ve,He),ce.next(He)},()=>{var He;at=!1,null===(He=Ve.complete)||void 0===He||He.call(Ve),ce.complete()},He=>{var _t;at=!1,null===(_t=Ve.error)||void 0===_t||_t.call(Ve,He),ce.error(He)},()=>{var He,_t;at&&(null===(He=Ve.unsubscribe)||void 0===He||He.call(Ve)),null===(_t=Ve.finalize)||void 0===_t||_t.call(Ve)}))}):J.D}},3774:($t,ze,B)=>{B.d(ze,{v:()=>J});var g=B(9350),oe=B(9974),R=B(4360);function J(_e=F){return(0,oe.N)((Se,Ae)=>{let Ve=!1;Se.subscribe((0,R._)(Ae,ie=>{Ve=!0,Ae.next(ie)},()=>Ve?Ae.complete():Ae.error(_e())))})}function F(){return new g.G}},6780:($t,ze,B)=>{B.d(ze,{R:()=>F});var g=B(8359);class oe extends g.yU{constructor(Se,Ae){super()}schedule(Se,Ae=0){return this}}const R={setInterval(_e,Se,...Ae){const{delegate:Ve}=R;return Ve?.setInterval?Ve.setInterval(_e,Se,...Ae):setInterval(_e,Se,...Ae)},clearInterval(_e){const{delegate:Se}=R;return(Se?.clearInterval||clearInterval)(_e)},delegate:void 0};var J=B(7908);class F extends oe{constructor(Se,Ae){super(Se,Ae),this.scheduler=Se,this.work=Ae,this.pending=!1}schedule(Se,Ae=0){var Ve;if(this.closed)return this;this.state=Se;const ie=this.id,ce=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(ce,ie,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(ce,this.id,Ae),this}requestAsyncId(Se,Ae,Ve=0){return R.setInterval(Se.flush.bind(Se,this),Ve)}recycleAsyncId(Se,Ae,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Ae;null!=Ae&&R.clearInterval(Ae)}execute(Se,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(Se,Ae);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Ae){let ie,Ve=!1;try{this.work(Se)}catch(ce){Ve=!0,ie=ce||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),ie}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Ae}=this,{actions:Ve}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.o)(Ve,this),null!=Se&&(this.id=this.recycleAsyncId(Ae,Se,null)),this.delay=null,super.unsubscribe()}}}},9687:($t,ze,B)=>{B.d(ze,{q:()=>R});var g=B(6129);class oe{constructor(F,_e=oe.now){this.schedulerActionCtor=F,this.now=_e}schedule(F,_e=0,Se){return new this.schedulerActionCtor(this,F).schedule(Se,_e)}}oe.now=g.U.now;class R extends oe{constructor(F,_e=oe.now){super(F,_e),this.actions=[],this._active=!1}flush(F){const{actions:_e}=this;if(this._active)return void _e.push(F);let Se;this._active=!0;do{if(Se=F.execute(F.state,F.delay))break}while(F=_e.shift());if(this._active=!1,Se){for(;F=_e.shift();)F.unsubscribe();throw Se}}}},3236:($t,ze,B)=>{B.d(ze,{E:()=>R,b:()=>J});var g=B(6780);const R=new(B(9687).q)(g.R),J=R},6129:($t,ze,B)=>{B.d(ze,{U:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},9270:($t,ze,B)=>{B.d(ze,{f:()=>g});const g={setTimeout(oe,R,...J){const{delegate:F}=g;return F?.setTimeout?F.setTimeout(oe,R,...J):setTimeout(oe,R,...J)},clearTimeout(oe){const{delegate:R}=g;return(R?.clearTimeout||clearTimeout)(oe)},delegate:void 0}},4761:($t,ze,B)=>{B.d(ze,{l:()=>oe});const oe=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:($t,ze,B)=>{B.d(ze,{s:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:($t,ze,B)=>{B.d(ze,{G:()=>oe});const oe=(0,B(1853).L)(R=>function(){R(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:($t,ze,B)=>{B.d(ze,{R0:()=>_e,lI:()=>F,ms:()=>J});var g=B(8071),oe=B(9470);function R(Se){return Se[Se.length-1]}function J(Se){return(0,g.T)(R(Se))?Se.pop():void 0}function F(Se){return(0,oe.m)(R(Se))?Se.pop():void 0}function _e(Se,Ae){return"number"==typeof R(Se)?Se.pop():Ae}},3073:($t,ze,B)=>{B.d(ze,{D:()=>F});const{isArray:g}=Array,{getPrototypeOf:oe,prototype:R,keys:J}=Object;function F(Se){if(1===Se.length){const Ae=Se[0];if(g(Ae))return{args:Ae,keys:null};if(function _e(Se){return Se&&"object"==typeof Se&&oe(Se)===R}(Ae)){const Ve=J(Ae);return{args:Ve.map(ie=>Ae[ie]),keys:Ve}}}return{args:Se,keys:null}}},7908:($t,ze,B)=>{function g(oe,R){if(oe){const J=oe.indexOf(R);0<=J&&oe.splice(J,1)}}B.d(ze,{o:()=>g})},1853:($t,ze,B)=>{function g(oe){const J=oe(F=>{Error.call(F),F.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}B.d(ze,{L:()=>g})},8496:($t,ze,B)=>{function g(oe,R){return oe.reduce((J,F,_e)=>(J[F]=R[_e],J),{})}B.d(ze,{e:()=>g})},9786:($t,ze,B)=>{B.d(ze,{Y:()=>R,l:()=>J});var g=B(1026);let oe=null;function R(F){if(g.$.useDeprecatedSynchronousErrorHandling){const _e=!oe;if(_e&&(oe={errorThrown:!1,error:null}),F(),_e){const{errorThrown:Se,error:Ae}=oe;if(oe=null,Se)throw Ae}}else F()}function J(F){g.$.useDeprecatedSynchronousErrorHandling&&oe&&(oe.errorThrown=!0,oe.error=F)}},5225:($t,ze,B)=>{function g(oe,R,J,F=0,_e=!1){const Se=R.schedule(function(){J(),_e?oe.add(this.schedule(null,F)):this.unsubscribe()},F);if(oe.add(Se),!_e)return Se}B.d(ze,{N:()=>g})},3669:($t,ze,B)=>{function g(oe){return oe}B.d(ze,{D:()=>g})},7441:($t,ze,B)=>{B.d(ze,{X:()=>g});const g=oe=>oe&&"number"==typeof oe.length&&"function"!=typeof oe},7953:($t,ze,B)=>{B.d(ze,{T:()=>oe});var g=B(8071);function oe(R){return Symbol.asyncIterator&&(0,g.T)(R?.[Symbol.asyncIterator])}},8071:($t,ze,B)=>{function g(oe){return"function"==typeof oe}B.d(ze,{T:()=>g})},5055:($t,ze,B)=>{B.d(ze,{l:()=>R});var g=B(3494),oe=B(8071);function R(J){return(0,oe.T)(J[g.s])}},5397:($t,ze,B)=>{B.d(ze,{x:()=>R});var g=B(4761),oe=B(8071);function R(J){return(0,oe.T)(J?.[g.l])}},9858:($t,ze,B)=>{B.d(ze,{y:()=>oe});var g=B(8071);function oe(R){return(0,g.T)(R?.then)}},5196:($t,ze,B)=>{B.d(ze,{C:()=>R,U:()=>J});var g=B(1635),oe=B(8071);function R(F){return(0,g.AQ)(this,arguments,function*(){const Se=F.getReader();try{for(;;){const{value:Ae,done:Ve}=yield(0,g.N3)(Se.read());if(Ve)return yield(0,g.N3)(void 0);yield yield(0,g.N3)(Ae)}}finally{Se.releaseLock()}})}function J(F){return(0,oe.T)(F?.getReader)}},9470:($t,ze,B)=>{B.d(ze,{m:()=>oe});var g=B(8071);function oe(R){return R&&(0,g.T)(R.schedule)}},9974:($t,ze,B)=>{B.d(ze,{N:()=>R,S:()=>oe});var g=B(8071);function oe(J){return(0,g.T)(J?.lift)}function R(J){return F=>{if(oe(F))return F.lift(function(_e){try{return J(_e,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:($t,ze,B)=>{B.d(ze,{I:()=>J});var g=B(6354);const{isArray:oe}=Array;function J(F){return(0,g.T)(_e=>function R(F,_e){return oe(_e)?F(..._e):F(_e)}(F,_e))}},5343:($t,ze,B)=>{function g(){}B.d(ze,{l:()=>g})},1203:($t,ze,B)=>{B.d(ze,{F:()=>oe,m:()=>R});var g=B(3669);function oe(...J){return R(J)}function R(J){return 0===J.length?g.D:1===J.length?J[0]:function(_e){return J.reduce((Se,Ae)=>Ae(Se),_e)}}},5334:($t,ze,B)=>{B.d(ze,{m:()=>R});var g=B(1026),oe=B(9270);function R(J){oe.f.setTimeout(()=>{const{onUnhandledError:F}=g.$;if(!F)throw J;F(J)})}},591:($t,ze,B)=>{function g(oe){return new TypeError(`You provided ${null!==oe&&"object"==typeof oe?"an invalid object":`'${oe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(ze,{L:()=>g})},177:($t,ze,B)=>{B.d(ze,{AJ:()=>qn,MD:()=>Ji,N0:()=>ii,QT:()=>R,Sm:()=>_t,VF:()=>F,Vy:()=>ci,Xr:()=>Fr,YU:()=>rr,ZD:()=>J,_b:()=>Yt,aZ:()=>yt,bT:()=>Ao,fw:()=>lt,hb:()=>at,hj:()=>Ae,qQ:()=>_e});var g=B(7705);let oe=null;function R(){return oe}function J(D){oe||(oe=D)}class F{}const _e=new g.nKC("DocumentToken");let Se=(()=>{class D{historyGo(N){throw new Error("Not implemented")}static#e=this.\u0275fac=function(j){return new(j||D)};static#t=this.\u0275prov=g.jDH({token:D,factory:function(){return(0,g.WQX)(Ve)},providedIn:"platform"})}return D})();const Ae=new g.nKC("Location Initialized");let Ve=(()=>{class D extends Se{constructor(){super(),this._doc=(0,g.WQX)(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(N){const j=R().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",N,!1),()=>j.removeEventListener("popstate",N)}onHashChange(N){const j=R().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",N,!1),()=>j.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,j,ue){this._history.pushState(N,j,ue)}replaceState(N,j,ue){this._history.replaceState(N,j,ue)}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}static#e=this.\u0275fac=function(j){return new(j||D)};static#t=this.\u0275prov=g.jDH({token:D,factory:function(){return new D},providedIn:"platform"})}return D})();function ie(D,H){if(0==D.length)return H;if(0==H.length)return D;let N=0;return D.endsWith("/")&&N++,H.startsWith("/")&&N++,2==N?D+H.substring(1):1==N?D+H:D+"/"+H}function ce(D){const H=D.match(/#|\?|$/),N=H&&H.index||D.length;return D.slice(0,N-("/"===D[N-1]?1:0))+D.slice(N)}function we(D){return D&&"?"!==D[0]?"?"+D:D}let at=(()=>{class D{historyGo(N){throw new Error("Not implemented")}static#e=this.\u0275fac=function(j){return new(j||D)};static#t=this.\u0275prov=g.jDH({token:D,factory:function(){return(0,g.WQX)(_t)},providedIn:"root"})}return D})();const He=new g.nKC("appBaseHref");let _t=(()=>{class D extends at{constructor(N,j){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=j??this._platformLocation.getBaseHrefFromDOM()??(0,g.WQX)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return ie(this._baseHref,N)}path(N=!1){const j=this._platformLocation.pathname+we(this._platformLocation.search),ue=this._platformLocation.hash;return ue&&N?`${j}${ue}`:j}pushState(N,j,ue,Ye){const dt=this.prepareExternalUrl(ue+we(Ye));this._platformLocation.pushState(N,j,dt)}replaceState(N,j,ue,Ye){const dt=this.prepareExternalUrl(ue+we(Ye));this._platformLocation.replaceState(N,j,dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(j){return new(j||D)(g.KVO(Se),g.KVO(He,8))};static#t=this.\u0275prov=g.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),lt=(()=>{class D extends at{constructor(N,j){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(N){const j=ie(this._baseHref,N);return j.length>0?"#"+j:j}pushState(N,j,ue,Ye){let dt=this.prepareExternalUrl(ue+we(Ye));0==dt.length&&(dt=this._platformLocation.pathname),this._platformLocation.pushState(N,j,dt)}replaceState(N,j,ue,Ye){let dt=this.prepareExternalUrl(ue+we(Ye));0==dt.length&&(dt=this._platformLocation.pathname),this._platformLocation.replaceState(N,j,dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(j){return new(j||D)(g.KVO(Se),g.KVO(He,8))};static#t=this.\u0275prov=g.jDH({token:D,factory:D.\u0275fac})}return D})(),yt=(()=>{class D{constructor(N){this._subject=new g.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const j=this._locationStrategy.getBaseHref();this._basePath=function Re(D){if(new RegExp("^(https?:)?//").test(D)){const[,N]=D.split(/\/\/[^\/]+/);return N}return D}(ce(Ce(j))),this._locationStrategy.onPopState(ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:ue.state,type:ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,j=""){return this.path()==this.normalize(N+we(j))}normalize(N){return D.stripTrailingSlash(function qt(D,H){if(!D||!H.startsWith(D))return H;const N=H.substring(D.length);return""===N||["/",";","?","#"].includes(N[0])?N:H}(this._basePath,Ce(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,j="",ue=null){this._locationStrategy.pushState(ue,"",N,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+we(j)),ue)}replaceState(N,j="",ue=null){this._locationStrategy.replaceState(ue,"",N,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+we(j)),ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)})),()=>{const j=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(j,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",j){this._urlChangeListeners.forEach(ue=>ue(N,j))}subscribe(N,j,ue){return this._subject.subscribe({next:N,error:j,complete:ue})}static#e=this.normalizeQueryParams=we;static#t=this.joinWithSlash=ie;static#n=this.stripTrailingSlash=ce;static#r=this.\u0275fac=function(j){return new(j||D)(g.KVO(at))};static#i=this.\u0275prov=g.jDH({token:D,factory:function(){return function gt(){return new yt((0,g.KVO)(at))}()},providedIn:"root"})}return D})();function Ce(D){return D.replace(/\/index.html$/,"")}function Yt(D,H){H=encodeURIComponent(H);for(const N of D.split(";")){const j=N.indexOf("="),[ue,Ye]=-1==j?[N,""]:[N.slice(0,j),N.slice(j+1)];if(ue.trim()===H)return decodeURIComponent(Ye)}return null}const Wt=/\s+/,Tn=[];let rr=(()=>{class D{constructor(N,j,ue,Ye){this._iterableDiffers=N,this._keyValueDiffers=j,this._ngEl=ue,this._renderer=Ye,this.initialClasses=Tn,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(Wt):Tn}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(Wt):N}ngDoCheck(){for(const j of this.initialClasses)this._updateState(j,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const j of N)this._updateState(j,!0);else if(null!=N)for(const j of Object.keys(N))this._updateState(j,!!N[j]);this._applyStateDiff()}_updateState(N,j){const ue=this.stateMap.get(N);void 0!==ue?(ue.enabled!==j&&(ue.changed=!0,ue.enabled=j),ue.touched=!0):this.stateMap.set(N,{enabled:j,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const j=N[0],ue=N[1];ue.changed?(this._toggleClass(j,ue.enabled),ue.changed=!1):ue.touched||(ue.enabled&&this._toggleClass(j,!1),this.stateMap.delete(j)),ue.touched=!1}}_toggleClass(N,j){(N=N.trim()).length>0&&N.split(Wt).forEach(ue=>{j?this._renderer.addClass(this._ngEl.nativeElement,ue):this._renderer.removeClass(this._ngEl.nativeElement,ue)})}static#e=this.\u0275fac=function(j){return new(j||D)(g.rXU(g._q3),g.rXU(g.MKu),g.rXU(g.aKT),g.rXU(g.sFG))};static#t=this.\u0275dir=g.FsC({type:D,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return D})(),Ao=(()=>{class D{constructor(N,j){this._viewContainer=N,this._context=new zs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Ka("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Ka("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,j){return!0}static#e=this.\u0275fac=function(j){return new(j||D)(g.rXU(g.c1b),g.rXU(g.C4Q))};static#t=this.\u0275dir=g.FsC({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class zs{constructor(){this.$implicit=null,this.ngIf=null}}function Ka(D,H){if(H&&!H.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,g.Tbb)(H)}'.`)}let Ji=(()=>{class D{static#e=this.\u0275fac=function(j){return new(j||D)};static#t=this.\u0275mod=g.$C({type:D});static#n=this.\u0275inj=g.G2t({})}return D})();const qn="browser",as="server";function ci(D){return D===as}let Fr=(()=>{class D{static#e=this.\u0275prov=(0,g.jDH)({token:D,providedIn:"root",factory:()=>new Ai((0,g.KVO)(_e),window)})}return D})();class Ai{constructor(H,N){this.document=H,this.window=N,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const N=function Di(D,H){const N=D.getElementById(H)||D.getElementsByName(H)[0];if(N)return N;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const j=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let ue=j.currentNode;for(;ue;){const Ye=ue.shadowRoot;if(Ye){const dt=Ye.getElementById(H)||Ye.querySelector(`[name="${H}"]`);if(dt)return dt}ue=j.nextNode()}}return null}(this.document,H);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(H){this.supportsScrolling()&&(this.window.history.scrollRestoration=H)}scrollToElement(H){const N=H.getBoundingClientRect(),j=N.left+this.window.pageXOffset,ue=N.top+this.window.pageYOffset,Ye=this.offset();this.window.scrollTo(j-Ye[0],ue-Ye[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ii{}},7705:($t,ze,B)=>{B.d(ze,{$C:()=>bo,$GK:()=>on,$K3:()=>hw,AVh:()=>Rc,Agw:()=>op,B4B:()=>Oh,BIS:()=>rm,BMQ:()=>tf,C4Q:()=>l_,Co$:()=>g0,DNE:()=>Wp,EFF:()=>rt,EJ8:()=>Ii,FS9:()=>jm,FsC:()=>Is,G2t:()=>dn,GFd:()=>Fp,H3F:()=>dw,H5H:()=>hE,H8p:()=>em,HJs:()=>WC,Hbi:()=>xC,JRh:()=>dr,JZv:()=>mn,Jv_:()=>p0,KH2:()=>og,KVO:()=>Pt,L39:()=>GC,LfX:()=>It,MKu:()=>WE,NEm:()=>lC,NYb:()=>sC,Njj:()=>Vc,O8t:()=>Ye,OA$:()=>En,Ocv:()=>OT,Ol2:()=>_0,PLl:()=>Bh,QTQ:()=>ay,Ql9:()=>VT,QuC:()=>ss,R7$:()=>sy,RV6:()=>Hy,Rfq:()=>_t,RxE:()=>zh,SKi:()=>Li,SpI:()=>qi,TL$:()=>E_,Tbb:()=>we,VBU:()=>wa,Vns:()=>vf,Vt3:()=>wn,WHO:()=>mw,WQX:()=>he,XpG:()=>Qd,Xx1:()=>Fa,Y8G:()=>hf,Z63:()=>Ad,ZvI:()=>bI,_9s:()=>gp,_q3:()=>zE,aKT:()=>Pd,aNF:()=>y0,bIt:()=>Kd,bkB:()=>_a,c1b:()=>dv,czy:()=>ec,e01:()=>_w,eBV:()=>ra,eq3:()=>T0,fpN:()=>NC,gRc:()=>yC,gXe:()=>Ri,giA:()=>yw,hnV:()=>cw,iLQ:()=>UE,j41:()=>Wd,jDH:()=>Ot,jNT:()=>xu,k0s:()=>Qp,kS0:()=>Kl,kdw:()=>gu,lsd:()=>G0,mGM:()=>$0,mq5:()=>UI,n$t:()=>kh,nKC:()=>mt,naY:()=>_C,nrm:()=>Yp,o8S:()=>cg,oH4:()=>ww,plB:()=>RE,rXU:()=>Vd,sFG:()=>Gh,sZ2:()=>nm,uvJ:()=>ga,w6W:()=>mD,wOt:()=>Re,wni:()=>H0,xGo:()=>ki,xc7:()=>ng,xe9:()=>fv,xvI:()=>lm,zZn:()=>to,zcH:()=>Il,zjR:()=>za});var g=B(1413),oe=B(8359),R=B(1985),J=B(7786),F=B(4412),_e=B(7673),Se=B(7647),Ae=B(5558),Ve=B(3294);function ie(t){for(let n in t)if(t[n]===ie)return n;throw Error("Could not find renamed property on target object.")}function ce(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function we(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(we).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function at(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const He=ie({__forward_ref__:ie});function _t(t){return t.__forward_ref__=_t,t.toString=function(){return we(this())},t}function lt(t){return yt(t)?t():t}function yt(t){return"function"==typeof t&&t.hasOwnProperty(He)&&t.__forward_ref__===_t}function gt(t){return t&&!!t.\u0275providers}const Ce="https://g.co/ng/security#xss";class Re extends Error{constructor(n,i){super(function tt(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function Je(t,n){throw new Re(-201,!1)}function se(t,n){null==t&&function ve(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Ot(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function pt(t){return Gt(t,qe)||Gt(t,Nr)}function It(t){return null!==pt(t)}function Gt(t,n){return t.hasOwnProperty(n)?t[n]:null}function Le(t){return t&&(t.hasOwnProperty(Rn)||t.hasOwnProperty(hr))?t[Rn]:null}const qe=ie({\u0275prov:ie}),Rn=ie({\u0275inj:ie}),Nr=ie({ngInjectableDef:ie}),hr=ie({ngInjectorDef:ie});var on=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(on||{});let We;function ot(t){const n=We;return We=t,n}function rn(t,n,i){const o=pt(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&on.Optional?null:void 0!==n?n:void Je(we(t))}const mn=globalThis;class mt{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Ot({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Dr={},Qr="__NG_DI_FLAG__",Tr="ngTempTokenPath",X=/\n/gm,G="__source";let Z;function et(t){const n=Z;return Z=t,n}function Ct(t,n=on.Default){if(void 0===Z)throw new Re(-203,!1);return null===Z?rn(t,void 0,n):Z.get(t,n&on.Optional?null:void 0,n)}function Pt(t,n=on.Default){return(function Mt(){return We}()||Ct)(lt(t),n)}function he(t,n=on.Default){return Pt(t,Hn(n))}function Hn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tn(t){const n=[];for(let i=0;i<t.length;i++){const o=lt(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Re(900,!1);let l,f=on.Default;for(let y=0;y<o.length;y++){const w=o[y],C=vi(w);"number"==typeof C?-1===C?l=w.token:f|=C:l=w}n.push(Pt(l,f))}else n.push(Pt(o))}return n}function ir(t,n){return t[Qr]=n,t.prototype[Qr]=n,t}function vi(t){return t[Qr]}function Or(t){return{toString:t}.toString()}var Pr=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Pr||{}),Ri=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ri||{});const yr={},yn=[],Qe=ie({\u0275cmp:ie}),be=ie({\u0275dir:ie}),it=ie({\u0275pipe:ie}),Nt=ie({\u0275mod:ie}),Yt=ie({\u0275fac:ie}),Wt=ie({__NG_ELEMENT_ID__:ie}),Tn=ie({__NG_ENV_ID__:ie});function rr(t,n,i){let o=t.length;for(;;){const l=t.indexOf(n,i);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const f=n.length;if(l+f===o||t.charCodeAt(l+f)<=32)return l}i=l+1}}function bn(t,n,i){let o=0;for(;o<i.length;){const l=i[o];if("number"==typeof l){if(0!==l)break;o++;const f=i[o++],y=i[o++],w=i[o++];t.setAttribute(n,y,w,f)}else{const f=l,y=i[++o];Yi(f)?t.setProperty(n,f,y):t.setAttribute(n,f,y),o++}}return o}function ri(t){return 3===t||4===t||6===t}function Yi(t){return 64===t.charCodeAt(0)}function Gn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const l=n[o];"number"==typeof l?i=l:0===i||io(t,i,l,null,-1===i||2===i?n[++o]:null)}}return t}function io(t,n,i,o,l){let f=0,y=t.length;if(-1===n)y=-1;else for(;f<t.length;){const w=t[f++];if("number"==typeof w){if(w===n){y=-1;break}if(w>n){y=f-1;break}}}for(;f<t.length;){const w=t[f];if("number"==typeof w)break;if(w===i){if(null===o)return void(null!==l&&(t[f+1]=l));if(o===t[f+1])return void(t[f+2]=l)}f++,null!==o&&f++,null!==l&&f++}-1!==y&&(t.splice(y,0,n),f=y+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==l&&t.splice(f++,0,l)}const Xi="ng-template";function Ao(t,n,i){let o=0,l=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&l){const y=t[o++];if(i&&"class"===f&&-1!==rr(y.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function zs(t){return 4===t.type&&t.value!==Xi}function Ka(t,n,i){return n===(4!==t.type||i?t.value:Xi)}function Do(t,n,i){let o=4;const l=t.attrs||[],f=function Mi(t){for(let n=0;n<t.length;n++)if(ri(t[n]))return n;return t.length}(l);let y=!1;for(let w=0;w<n.length;w++){const C=n[w];if("number"!=typeof C){if(!y)if(4&o){if(o=2|1&o,""!==C&&!Ka(t,C,i)||""===C&&1===n.length){if($r(o))return!1;y=!0}}else{const k=8&o?C:n[++w];if(8&o&&null!==t.attrs){if(!Ao(t.attrs,k,i)){if($r(o))return!1;y=!0}continue}const ne=Es(8&o?"class":C,l,zs(t),i);if(-1===ne){if($r(o))return!1;y=!0;continue}if(""!==k){let De;De=ne>f?"":l[ne+1].toLowerCase();const Ue=8&o?De:null;if(Ue&&-1!==rr(Ue,k,0)||2&o&&k!==De){if($r(o))return!1;y=!0}}}}else{if(!y&&!$r(o)&&!$r(C))return!1;if(y&&$r(C))continue;y=!1,o=C|1&o}}return $r(o)||y}function $r(t){return 0==(1&t)}function Es(t,n,i,o){if(null===n)return-1;let l=0;if(o||!i){let f=!1;for(;l<n.length;){const y=n[l];if(y===t)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=n[++l];for(;"string"==typeof w;)w=n[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function Co(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Pi(t,n,i=!1){for(let o=0;o<n.length;o++)if(Do(t,n[o],i))return!0;return!1}function is(t,n){return t?":not("+n.trim()+")":n}function Ea(t){let n=t[0],i=1,o=2,l="",f=!1;for(;i<t.length;){let y=t[i];if("string"==typeof y)if(2&o){const w=t[++i];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&o?l+="."+y:4&o&&(l+=" "+y);else""!==l&&!$r(y)&&(n+=is(f,l),l=""),o=y,f=f||!$r(o);i++}return""!==l&&(n+=is(f,l)),n}function wa(t){return Or(()=>{const n=er(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Pr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ri.Emulated,styles:t.styles||yn,_:null,schemas:t.schemas||null,tView:null,id:""};os(i);const o=t.dependencies;return i.directiveDefs=wi(o,!1),i.pipeDefs=wi(o,!0),i.id=function Ni(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of i)n=Math.imul(31,n)+l.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function so(t){return Mn(t)||kr(t)}function Da(t){return null!==t}function bo(t){return Or(()=>({type:t.type,bootstrap:t.bootstrap||yn,declarations:t.declarations||yn,imports:t.imports||yn,exports:t.exports||yn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Sr(t,n){if(null==t)return yr;const i={};for(const o in t)if(t.hasOwnProperty(o)){let l=t[o],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),i[l]=o,n&&(n[l]=f)}return i}function Is(t){return Or(()=>{const n=er(t);return os(n),n})}function Ii(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Mn(t){return t[Qe]||null}function kr(t){return t[be]||null}function An(t){return t[it]||null}function ss(t){const n=Mn(t)||kr(t)||An(t);return null!==n&&n.standalone}function Bn(t,n){const i=t[Nt]||null;if(!i&&!0===n)throw new Error(`Type ${we(t)} does not have '\u0275mod' property.`);return i}function er(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||yr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||yn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sr(t.inputs,n),outputs:Sr(t.outputs)}}function os(t){t.features?.forEach(n=>n(t))}function wi(t,n){if(!t)return null;const i=n?An:so;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(Da)}const fr=0,Dt=1,fn=2,Cn=3,Nn=4,ui=5,Er=6,Ji=7,qn=8,as=9,Hr=10,sn=11,li=12,ci=13,pr=14,sr=15,ji=16,Fr=17,Ai=18,Di=19,Ws=20,ii=21,Rr=22,$i=23,Zi=24,xn=25,Hi=1,Fs=2,si=7,Ks=9,Ir=11;function Cr(t){return Array.isArray(t)&&"object"==typeof t[Hi]}function vn(t){return Array.isArray(t)&&!0===t[Hi]}function ao(t){return 0!=(4&t.flags)}function jn(t){return t.componentOffset>-1}function As(t){return 1==(1&t.flags)}function ei(t){return!!t.template}function Zo(t){return 0!=(512&t[fn])}function Ci(t,n){return t.hasOwnProperty(Yt)?t[Yt]:null}let Vr=null,Po=!1;function di(t){const n=Vr;return Vr=t,n}const Ls={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function cs(t){if(!Xs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Lu(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function xi(t){t.dirty=!0,function Us(t){if(void 0===t.liveConsumerNode)return;const n=Po;Po=!0;try{for(const i of t.liveConsumerNode)i.dirty||xi(i)}finally{Po=n}}(t),t.consumerMarkedDirty?.(t)}function Gr(t){return t&&(t.nextProducerIndex=0),di(t)}function ta(t,n){if(di(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Xs(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)Bs(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Lu(t){Gi(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(cs(i),o!==i.version))return!0}return!1}function na(t){if(Gi(t),Xs(t))for(let n=0;n<t.producerNode.length;n++)Bs(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Bs(t,n){if(function lo(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Gi(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)Bs(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],l=t.liveConsumerNode[n];Gi(l),l.producerIndexOfThis[o]=n}}function Xs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Gi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Bu=null;function Ye(t){const n=di(null);try{return t()}finally{di(n)}}const Kt=()=>{},lr=(()=>({...Ls,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Kt}))();class Jn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function En(){return cr}function cr(t){return t.type.prototype.ngOnChanges&&(t.setInput=gr),ar}function ar(){const t=oi(this),n=t?.current;if(n){const i=t.previous;if(i===yr)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function gr(t,n,i,o){const l=this.declaredInputs[i],f=oi(t)||function co(t,n){return t[hi]=n}(t,{previous:yr,current:null}),y=f.current||(f.current={}),w=f.previous,C=w[l];y[l]=new Jn(C&&C.currentValue,n,w===yr),t[o]=n}En.ngInherit=!0;const hi="__ngSimpleChanges__";function oi(t){return t[hi]||null}const fi=function(t,n,i){};function wr(t){for(;Array.isArray(t);)t=t[fr];return t}function xo(t,n){return wr(n[t])}function ns(t,n){return wr(n[t.index])}function eh(t,n){return t.data[n]}function mr(t,n){const i=n[t];return Cr(i)?i:i[fr]}function js(t,n){return null==n?null:t[n]}function ps(t){t[Fr]=0}function ba(t){1024&t[fn]||(t[fn]|=1024,Fl(t,1))}function kl(t){1024&t[fn]&&(t[fn]&=-1025,Fl(t,-1))}function Fl(t,n){let i=t[Cn];if(null===i)return;i[ui]+=n;let o=i;for(i=i[Cn];null!==i&&(1===n&&1===o[ui]||-1===n&&0===o[ui]);)i[ui]+=n,o=i,i=i[Cn]}const gn={lFrame:Q(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ll(){return gn.bindingsEnabled}function ft(){return gn.lFrame.lView}function zn(){return gn.lFrame.tView}function ra(t){return gn.lFrame.contextLView=t,t[qn]}function Vc(t){return gn.lFrame.contextLView=null,t}function Yn(){let t=th();for(;null!==t&&64===t.type;)t=t.parent;return t}function th(){return gn.lFrame.currentTNode}function Zs(t,n){const i=gn.lFrame;i.currentTNode=t,i.isParent=n}function Ra(){return gn.lFrame.isParent}function _r(){return gn.lFrame.bindingIndex++}function Ss(t){const n=gn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function Ma(t,n){const i=gn.lFrame;i.bindingIndex=i.bindingRootIndex=t,nu(n)}function nu(t){gn.lFrame.currentDirectiveIndex=t}function $l(){return gn.lFrame.currentQueryIndex}function I(t){gn.lFrame.currentQueryIndex=t}function T(t){const n=t[Dt];return 2===n.type?n.declTNode:1===n.type?t[Er]:null}function E(t,n,i){if(i&on.SkipSelf){let l=n,f=t;for(;!(l=l.parent,null!==l||i&on.Host||(l=T(f),null===l||(f=f[pr],10&l.type))););if(null===l)return!1;n=l,t=f}const o=gn.lFrame=O();return o.currentTNode=n,o.lView=t,!0}function b(t){const n=O(),i=t[Dt];gn.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function O(){const t=gn.lFrame,n=null===t?null:t.child;return null===n?Q(t):n}function Q(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function ae(){const t=gn.lFrame;return gn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ze=ae;function Ge(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kn(){return gn.lFrame.selectedIndex}function Fn(t){gn.lFrame.selectedIndex=t}function ur(){const t=gn.lFrame;return eh(t.tView,t.selectedIndex)}let ih=!0;function Lc(){return ih}function po(t){ih=t}function su(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:k,ngOnDestroy:K}=f;y&&(t.contentHooks??=[]).push(-i,y),w&&((t.contentHooks??=[]).push(i,w),(t.contentCheckHooks??=[]).push(i,w)),C&&(t.viewHooks??=[]).push(-i,C),k&&((t.viewHooks??=[]).push(i,k),(t.viewCheckHooks??=[]).push(i,k)),null!=K&&(t.destroyHooks??=[]).push(i,K)}}function Uc(t,n,i){Vo(t,n,3,i)}function ou(t,n,i,o){(3&t[fn])===i&&Vo(t,n,i,o)}function Wu(t,n){let i=t[fn];(3&i)===n&&(i&=8191,i+=1,t[fn]=i)}function Vo(t,n,i,o){const f=o??-1,y=n.length-1;let w=0;for(let C=void 0!==o?65535&t[Fr]:0;C<y;C++)if("number"==typeof n[C+1]){if(w=n[C],null!=o&&w>=o)break}else n[C]<0&&(t[Fr]+=65536),(w<f||-1==f)&&(oa(t,i,n,C),t[Fr]=(4294901760&t[Fr])+C+2),C++}function go(t,n){fi(4,t,n);const i=di(null);try{n.call(t)}finally{di(i),fi(5,t,n)}}function oa(t,n,i,o){const l=i[o]<0,f=i[o+1],w=t[l?-i[o]:i[o]];l?t[fn]>>13<t[Fr]>>16&&(3&t[fn])===n&&(t[fn]+=8192,go(w,f)):go(w,f)}const Lo=-1;class Na{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function uu(t){return t!==Lo}function Gl(t){return 32767&t}function zl(t,n){let i=function aa(t){return t>>16}(t),o=n;for(;i>0;)o=o[pr],i--;return o}let qu=!0;function jc(t){const n=qu;return qu=t,n}const $c=255,Qu=5;let mo=0;const zi={};function lu(t,n){const i=Hc(t,n);if(-1!==i)return i;const o=n[Dt];o.firstCreatePass&&(t.injectorIndex=n.length,Yu(o.data,t),Yu(n,null),Yu(o.blueprint,null));const l=Xu(t,n),f=t.injectorIndex;if(uu(l)){const y=Gl(l),w=zl(l,n),C=w[Dt].data;for(let k=0;k<8;k++)n[f+k]=w[y+k]|C[y+k]}return n[f+8]=l,f}function Yu(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Hc(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Xu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,l=n;for(;null!==l;){if(o=el(l),null===o)return Lo;if(i++,l=l[pr],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return Lo}function cu(t,n,i){!function Af(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(Wt)&&(o=i[Wt]),null==o&&(o=i[Wt]=mo++);const l=o&$c;n.data[t+(l>>Qu)]|=1<<l}(t,n,i)}function Wl(t,n,i){if(i&on.Optional||void 0!==t)return t;Je()}function Gc(t,n,i,o){if(i&on.Optional&&void 0===o&&(o=null),!(i&(on.Self|on.Host))){const l=t[as],f=ot(void 0);try{return l?l.get(n,o,i&on.Optional):rn(n,o,i&on.Optional)}finally{ot(f)}}return Wl(o,0,i)}function ah(t,n,i,o=on.Default,l){if(null!==t){if(2048&n[fn]&&!(o&on.Self)){const y=function Wc(t,n,i,o,l){let f=t,y=n;for(;null!==f&&null!==y&&2048&y[fn]&&!(512&y[fn]);){const w=du(f,y,i,o|on.Self,zi);if(w!==zi)return w;let C=f.parent;if(!C){const k=y[Ws];if(k){const K=k.get(i,zi,o);if(K!==zi)return K}C=el(y),y=y[pr]}f=C}return l}(t,n,i,o,zi);if(y!==zi)return y}const f=du(t,n,i,o,zi);if(f!==zi)return f}return Gc(n,i,o,l)}function du(t,n,i,o,l){const f=function gg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Wt)?t[Wt]:void 0;return"number"==typeof n?n>=0?n&$c:zc:n}(i);if("function"==typeof f){if(!E(n,t,o))return o&on.Host?Wl(l,0,o):Gc(n,i,o,l);try{let y;if(y=f(o),null!=y||o&on.Optional)return y;Je()}finally{Ze()}}else if("number"==typeof f){let y=null,w=Hc(t,n),C=Lo,k=o&on.Host?n[sr][Er]:null;for((-1===w||o&on.SkipSelf)&&(C=-1===w?Xu(t,n):n[w+8],C!==Lo&&ua(o,!1)?(y=n[Dt],w=Gl(C),n=zl(C,n)):w=-1);-1!==w;){const K=n[Dt];if(uh(f,w,K.data)){const ne=pg(w,n,i,y,o,k);if(ne!==zi)return ne}C=n[w+8],C!==Lo&&ua(o,n[Dt].data[w+8]===k)&&uh(f,w,n)?(y=K,w=Gl(C),n=zl(C,n)):w=-1}}return l}function pg(t,n,i,o,l,f){const y=n[Dt],w=y.data[t+8],K=Ju(w,y,i,null==o?jn(w)&&qu:o!=y&&0!=(3&w.type),l&on.Host&&f===w);return null!==K?eo(n,y,K,w):zi}function Ju(t,n,i,o,l){const f=t.providerIndexes,y=n.data,w=1048575&f,C=t.directiveStart,K=f>>20,De=l?w+K:t.directiveEnd;for(let Ue=o?w:w+K;Ue<De;Ue++){const ct=y[Ue];if(Ue<C&&i===ct||Ue>=C&&ct.type===i)return Ue}if(l){const Ue=y[C];if(Ue&&ei(Ue)&&Ue.type===i)return C}return null}function eo(t,n,i,o){let l=t[i];const f=n.data;if(function au(t){return t instanceof Na}(l)){const y=l;y.resolving&&function nt(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Re(-200,`Circular dependency in DI detected for ${t}${i}`)}(function Fe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(f[i]));const w=jc(y.canSeeViewProviders);y.resolving=!0;const k=y.injectImpl?ot(y.injectImpl):null;E(t,o,on.Default);try{l=t[i]=y.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function sa(t,n,i){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:f}=n.type.prototype;if(o){const y=cr(n);(i.preOrderHooks??=[]).push(t,y),(i.preOrderCheckHooks??=[]).push(t,y)}l&&(i.preOrderHooks??=[]).push(0-t,l),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==k&&ot(k),jc(w),y.resolving=!1,Ze()}}return l}function uh(t,n,i){return!!(i[n+(t>>Qu)]&1<<t)}function ua(t,n){return!(t&on.Self||t&on.Host&&n)}class bi{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return ah(this._tNode,this._lView,n,Hn(o),i)}}function zc(){return new bi(Yn(),ft())}function ki(t){return Or(()=>{const n=t.prototype.constructor,i=n[Yt]||Zu(n),o=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==o;){const f=l[Yt]||Zu(l);if(f&&f!==i)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Zu(t){return yt(t)?()=>{const n=Zu(lt(t));return n&&n()}:Ci(t)}function el(t){const n=t[Dt],i=n.type;return 2===i?n.declTNode:1===i?t[Er]:null}function Kl(t){return function oh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let l=0;for(;l<o;){const f=i[l];if(ri(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<o&&"string"==typeof i[l];)l++;else{if(f===n)return i[l+1];l+=2}}}return null}(Yn(),t)}const _o="__parameters__";function yo(t,n,i){return Or(()=>{const o=function lh(t){return function(...i){if(t){const o=t(...i);for(const l in o)this[l]=o[l]}}}(n);function l(...f){if(this instanceof l)return o.apply(this,f),this;const y=new l(...f);return w.annotation=y,w;function w(C,k,K){const ne=C.hasOwnProperty(_o)?C[_o]:Object.defineProperty(C,_o,{value:[]})[_o];for(;ne.length<=K;)ne.push(null);return(ne[K]=ne[K]||[]).push(y),C}}return i&&(l.prototype=Object.create(i.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function fu(t,n){t.forEach(i=>Array.isArray(i)?fu(i,n):n(i))}function ch(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function qc(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ar(t,n,i){let o=rl(t,n);return o>=0?t[1|o]=i:(o=~o,function wg(t,n,i,o){let l=t.length;if(l==n)t.push(i,o);else if(1===l)t.push(o,t[0]),t[0]=i;else{for(l--,t.push(t[l-1],t[l]);l>n;)t[l]=t[l-2],l--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function dh(t,n){const i=rl(t,n);if(i>=0)return t[1|i]}function rl(t,n){return function Qc(t,n,i){let o=0,l=t.length>>i;for(;l!==o;){const f=o+(l-o>>1),y=t[f<<i];if(n===y)return f<<i;y>n?l=f:o=f+1}return~(l<<i)}(t,n,1)}const Fa=ir(yo("Optional"),8),gu=ir(yo("SkipSelf"),4);function ha(t){return 128==(128&t.flags)}var ec=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ec||{});const cl=new Map;let Va=0;const dd="__ngContext__";function Vi(t,n){Cr(n)?(t[dd]=n[Di],function nc(t){cl.set(t[Di],t)}(n)):t[dd]=n}let Eu;function sc(t,n){return Eu(t,n)}function Ps(t){const n=t[Cn];return vn(n)?n[Cn]:n}function oc(t){return hl(t[li])}function Bf(t){return hl(t[Nn])}function hl(t){for(;null!==t&&!vn(t);)t=t[Nn];return t}function fl(t,n,i,o,l){if(null!=o){let f,y=!1;vn(o)?f=o:Cr(o)&&(y=!0,o=o[fr]);const w=wr(o);0===t&&null!==i?null==l?gl(n,i,w):$o(n,i,w,l||null,!0):1===t&&null!==i?$o(n,i,w,l||null,!0):2===t?function Kf(t,n,i){const o=wu(t,n);o&&function $f(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,w,y):3===t&&n.destroyNode(w),null!=f&&function xg(t,n,i,o,l){const f=i[si];f!==wr(i)&&fl(n,t,o,f,l);for(let w=Ir;w<i.length;w++){const C=i[w];bh(C[Dt],C,t,n,o,f)}}(n,t,f,i,l)}}function _(t,n,i){return t.createElement(n,i)}function Ne(t,n){const i=t[Ks],o=i.indexOf(n);kl(n),i.splice(o,1)}function st(t,n){if(t.length<=Ir)return;const i=Ir+n,o=t[i];if(o){const l=o[ji];null!==l&&l!==t&&Ne(l,o),n>0&&(t[i-1][Nn]=o[Nn]);const f=qc(t,Ir+n);!function c(t,n){bh(t,n,n[sn],2,null,null),n[fr]=null,n[Er]=null}(o[Dt],o);const y=f[Ai];null!==y&&y.detachView(f[Dt]),o[Cn]=null,o[Nn]=null,o[fn]&=-129}return o}function Ut(t,n){if(!(256&n[fn])){const i=n[sn];n[$i]&&na(n[$i]),n[Zi]&&na(n[Zi]),i.destroyNode&&bh(t,n,i,3,null,null),function x(t){let n=t[li];if(!n)return Ht(t[Dt],t);for(;n;){let i=null;if(Cr(n))i=n[li];else{const o=n[Ir];o&&(i=o)}if(!i){for(;n&&!n[Nn]&&n!==t;)Cr(n)&&Ht(n[Dt],n),n=n[Cn];null===n&&(n=t),Cr(n)&&Ht(n[Dt],n),i=n&&n[Nn]}n=i}}(n)}}function Ht(t,n){if(!(256&n[fn])){n[fn]&=-129,n[fn]|=256,function Jr(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const l=n[i[o]];if(!(l instanceof Na)){const f=i[o+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=l[f[y]],C=f[y+1];fi(4,w,C);try{C.call(w)}finally{fi(5,w,C)}}else{fi(4,l,f);try{f.call(l)}finally{fi(5,l,f)}}}}}(t,n),function Qt(t,n){const i=t.cleanup,o=n[Ji];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const y=i[f+3];y>=0?o[y]():o[-y].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[Ji]=null);const l=n[ii];if(null!==l){n[ii]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(t,n),1===n[Dt].type&&n[sn].destroy();const i=n[ji];if(null!==i&&vn(n[Cn])){i!==n[Cn]&&Ne(i,n);const o=n[Ai];null!==o&&o.detachView(t)}!function rc(t){cl.delete(t[Di])}(n)}}function Ms(t,n,i){return function Iu(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[fr];{const{componentOffset:l}=o;if(l>-1){const{encapsulation:f}=t.data[o.directiveStart+l];if(f===Ri.None||f===Ri.Emulated)return null}return ns(o,i)}}(t,n.parent,i)}function $o(t,n,i,o,l){t.insertBefore(n,i,o,l)}function gl(t,n,i){t.appendChild(n,i)}function uc(t,n,i,o,l){null!==o?$o(t,n,i,o,l):gl(t,n,i)}function wu(t,n){return t.parentNode(n)}let ml,Rh,vd,Gf=function cc(t,n,i){return 40&t.type?ns(t,i):null};function Ch(t,n,i,o){const l=Ms(t,o,n),f=n[sn],w=function lc(t,n,i){return Gf(t,n,i)}(o.parent||n[Er],o,n);if(null!=l)if(Array.isArray(i))for(let C=0;C<i.length;C++)uc(f,l,i[C],w,!1);else uc(f,l,i,w,!1);void 0!==ml&&ml(f,o,n,i,l)}function md(t,n){if(null!==n){const i=n.type;if(3&i)return ns(n,t);if(4&i)return Wf(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return md(t,o);{const l=t[n.index];return vn(l)?Wf(-1,l):wr(l)}}if(32&i)return sc(n,t)()||wr(t[n.index]);{const o=Pg(t,n);return null!==o?Array.isArray(o)?o[0]:md(Ps(t[sr]),o):md(t,n.next)}}return null}function Pg(t,n){return null!==n?t[sr][Er].projection[n.projection]:null}function Wf(t,n){const i=Ir+t+1;if(i<n.length){const o=n[i],l=o[Dt].firstChild;if(null!==l)return md(o,l)}return n[si]}function Mg(t,n,i,o,l,f,y){for(;null!=i;){const w=o[i.index],C=i.type;if(y&&0===n&&(w&&Vi(wr(w),o),i.flags|=2),32!=(32&i.flags))if(8&C)Mg(t,n,i.child,o,l,f,!1),fl(n,t,l,w,f);else if(32&C){const k=sc(i,o);let K;for(;K=k();)fl(n,t,l,K,f);fl(n,t,l,w,f)}else 16&C?m_(t,n,o,i,l,f):fl(n,t,l,w,f);i=y?i.projectionNext:i.next}}function bh(t,n,i,o,l,f){Mg(i,o,t.firstChild,n,l,f,!1)}function m_(t,n,i,o,l,f){const y=i[sr],C=y[Er].projection[o.projection];if(Array.isArray(C))for(let k=0;k<C.length;k++)fl(n,t,l,C[k],f);else{let k=C;const K=y[Cn];ha(o)&&(k.flags|=128),Mg(t,n,k,K,l,f,!0)}}function qf(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function Qf(t,n,i){const{mergedAttrs:o,classes:l,styles:f}=i;null!==o&&bn(t,n,o),null!==l&&qf(t,n,l),null!==f&&function Og(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function E_(t){Rh=t}function Jf(t){return function Fg(){if(void 0===vd&&(vd=null,mn.trustedTypes))try{vd=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return vd}()?.createScriptURL(t)||t}class w_{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ce})`}}function La(t){return t instanceof w_?t.changingThisBreaksApplicationSecurity:t}function Ph(t,n){const i=function Bg(t){return t instanceof w_&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${Ce})`)}return i===n}const Iv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var wd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(wd||{});function Oh(t){const n=Ua();return n?n.sanitize(wd.URL,t)||"":Ph(t,"URL")?La(t):function Mh(t){return(t=String(t)).match(Iv)?t:"unsafe:"+t}(Te(t))}function np(t){const n=Ua();if(n)return Jf(n.sanitize(wd.RESOURCE_URL,t)||"");if(Ph(t,"ResourceURL"))return Jf(La(t));throw new Re(904,!1)}function kh(t,n,i){return function Xg(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?np:Oh}(n,i)(t)}function Ua(){const t=ft();return t&&t[Hr].sanitizer}const Ad=new mt("ENVIRONMENT_INITIALIZER"),rp=new mt("INJECTOR",-1),Jg=new mt("INJECTOR_DEF_TYPES");class yl{get(n,i=Dr){if(i===Dr){const o=new Error(`NullInjectorError: No provider for ${we(n)}!`);throw o.name="NullInjectorError",o}return i}}function Cv(...t){return{\u0275providers:x_(0,t),\u0275fromNgModule:!0}}function x_(t,...n){const i=[],o=new Set;let l;const f=y=>{i.push(y)};return fu(n,y=>{const w=y;Fh(w,f,[],o)&&(l||=[],l.push(w))}),void 0!==l&&O_(l,f),i}function O_(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:l}=t[i];sp(l,f=>{n(f,o)})}}function Fh(t,n,i,o){if(!(t=lt(t)))return!1;let l=null,f=Le(t);const y=!f&&Mn(t);if(f||y){if(y&&!y.standalone)return!1;l=t}else{const C=t.ngModule;if(f=Le(C),!f)return!1;l=C}const w=o.has(l);if(y){if(w)return!1;if(o.add(l),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const k of C)Fh(k,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let k;o.add(l);try{fu(f.imports,K=>{Fh(K,n,i,o)&&(k||=[],k.push(K))})}finally{}void 0!==k&&O_(k,n)}if(!w){const k=Ci(l)||(()=>new l);n({provide:l,useFactory:k,deps:yn},l),n({provide:Jg,useValue:l,multi:!0},l),n({provide:Ad,useValue:()=>Pt(l),multi:!0},l)}const C=f.providers;if(null!=C&&!w){const k=t;sp(C,K=>{n(K,k)})}}}return l!==t&&void 0!==t.providers}function sp(t,n){for(let i of t)gt(i)&&(i=i.\u0275providers),Array.isArray(i)?sp(i,n):n(i)}const bv=ie({provide:String,useValue:ie});function Zg(t){return null!==t&&"object"==typeof t&&bv in t}function fc(t){return"function"==typeof t}const em=new mt("Set Injector scope."),Vh={},V_={};let Lh;function Uh(){return void 0===Lh&&(Lh=new yl),Lh}class ga{}class pc extends ga{get destroyed(){return this._destroyed}constructor(n,i,o,l){super(),this.parent=i,this.source=o,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ho(n,y=>this.processProvider(y)),this.records.set(rp,Ba(void 0,this)),l.has("environment")&&this.records.set(ga,Ba(void 0,this));const f=this.records.get(em);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Jg.multi,yn,on.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=et(this),o=ot(void 0);try{return n()}finally{et(i),ot(o)}}get(n,i=Dr,o=on.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Tn))return n[Tn](this);o=Hn(o);const f=et(this),y=ot(void 0);try{if(!(o&on.SkipSelf)){let C=this.records.get(n);if(void 0===C){const k=function Zr(t){return"function"==typeof t||"object"==typeof t&&t instanceof mt}(n)&&pt(n);C=k&&this.injectableDefInScope(k)?Ba(Dd(n),Vh):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&on.Self?Uh():this.parent).get(n,i=o&on.Optional&&i===Dr?null:i)}catch(w){if("NullInjectorError"===w.name){if((w[Tr]=w[Tr]||[]).unshift(we(n)),f)throw w;return function Ei(t,n,i,o){const l=t[Tr];throw n[G]&&l.unshift(n[G]),t.message=function ni(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=we(n);if(Array.isArray(n))l=n.map(we).join(" -> ");else if("object"==typeof n){let f=[];for(let y in n)if(n.hasOwnProperty(y)){let w=n[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):we(w)))}l=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${l}]: ${t.replace(X,"\n  ")}`}("\n"+t.message,l,i,o),t.ngTokenPath=l,t[Tr]=null,t}(w,n,"R3InjectorError",this.source)}throw w}finally{ot(y),et(f)}}resolveInjectorInitializers(){const n=et(this),i=ot(void 0);try{const l=this.get(Ad.multi,yn,on.Self);for(const f of l)f()}finally{et(n),ot(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(we(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processProvider(n){let i=fc(n=lt(n))?n:lt(n&&n.provide);const o=function L_(t){return Zg(t)?Ba(void 0,t.useValue):Ba(tm(t),Vh)}(n);if(fc(n)||!0!==n.multi)this.records.get(i);else{let l=this.records.get(i);l||(l=Ba(void 0,Vh,!0),l.factory=()=>tn(l.multi),this.records.set(i,l)),i=n,l.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===Vh&&(i.value=V_,i.value=i.factory()),"object"==typeof i.value&&i.value&&function gs(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=lt(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Dd(t){const n=pt(t),i=null!==n?n.factory:Ci(t);if(null!==i)return i;if(t instanceof mt)throw new Re(204,!1);if(t instanceof Function)return function Zn(t){const n=t.length;if(n>0)throw function nl(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}(n,"?"),new Re(204,!1);const i=function ut(t){return t&&(t[qe]||t[Nr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Re(204,!1)}function tm(t,n,i){let o;if(fc(t)){const l=lt(t);return Ci(l)||Dd(l)}if(Zg(t))o=()=>lt(t.useValue);else if(function F_(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...tn(t.deps||[]));else if(function k_(t){return!(!t||!t.useExisting)}(t))o=()=>Pt(lt(t.useExisting));else{const l=lt(t&&(t.useClass||t.provide));if(!function U_(t){return!!t.deps}(t))return Ci(l)||Dd(l);o=()=>new l(...tn(t.deps))}return o}function Ba(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Ho(t,n){for(const i of t)Array.isArray(i)?Ho(i,n):i&&gt(i)?Ho(i.\u0275providers,n):n(i)}const nm=new mt("AppId",{providedIn:"root",factory:()=>Rv}),Rv="ng",Bh=new mt("Platform Initializer"),op=new mt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rm=new mt("CSP nonce",{providedIn:"root",factory:()=>function yd(){if(void 0!==Rh)return Rh;if(typeof document<"u")return document;throw new Re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ma=(t,n,i)=>null;function Cu(t,n,i=!1){return ma(t,n,i)}class H_{}class fp{}class um{resolveComponentFactory(n){throw function am(t){const n=Error(`No component factory found for ${we(t)}.`);return n.ngComponent=t,n}(n)}}let Rd=(()=>{class t{static#e=this.NULL=new um}return t})();function z_(){return Go(Yn(),ft())}function Go(t,n){return new Pd(ns(t,n))}let Pd=(()=>{class t{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=z_}return t})();function W_(t){return t instanceof Pd?t.nativeElement:t}class gp{}let Gh=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ov(){const t=ft(),i=mr(Yn().index,t);return(Cr(i)?i:t)[sn]}()}return t})(),mp=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>null})}return t})();class zh{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const lm=new zh("16.2.12"),gc={};function _p(t,n=null,i=null,o){const l=q_(t,n,i,o);return l.resolveInjectorInitializers(),l}function q_(t,n=null,i=null,o,l=new Set){const f=[i||yn,Cv(t)];return o=o||("object"==typeof t?void 0:we(t)),new pc(f,n||Uh(),o||null,l)}let to=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Dr;static#t=this.NULL=new yl;static create(i,o){if(Array.isArray(i))return _p({name:""},o,i,"");{const l=i.name??"";return _p({name:l},i.parent,i.providers,l)}}static#n=this.\u0275prov=Ot({token:t,providedIn:"any",factory:()=>Pt(rp)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function xd(t){return t.ngOriginalError}class Il{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&xd(n);for(;i&&xd(i);)i=xd(i);return i||null}}function Ep(t){return n=>{setTimeout(t,void 0,n)}}const _a=class Fv extends g.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let l=n,f=i||(()=>null),y=o;if(n&&"object"==typeof n){const C=n;l=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=Ep(f),l&&(l=Ep(l)),y&&(y=Ep(y)));const w=super.subscribe({next:l,error:f,complete:y});return n instanceof oe.yU&&n.add(w),w}};function hm(...t){}class Li{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),typeof Zone>"u")throw new Re(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&i,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Y_(){const t="function"==typeof mn.requestAnimationFrame;let n=mn[t?"requestAnimationFrame":"setTimeout"],i=mn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function cI(t){const n=()=>{!function lI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pm(t),t.isCheckStableRunning=!0,fm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,l,f,y,w)=>{if(function wl(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(w))return i.invokeTask(l,f,y,w);try{return Lv(t),i.invokeTask(l,f,y,w)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),Uv(t)}},onInvoke:(i,o,l,f,y,w,C)=>{try{return Lv(t),i.invoke(l,f,y,w,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),Uv(t)}},onHasTask:(i,o,l,f)=>{i.hasTask(l,f),o===l&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,pm(t),fm(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,l,f)=>(i.handleError(l,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Li.isInAngularZone())throw new Re(909,!1)}static assertNotInAngularZone(){if(Li.isInAngularZone())throw new Re(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,n,Ip,hm,hm);try{return f.runTask(y,i,o)}finally{f.cancelTask(y)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const Ip={};function fm(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Lv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Uv(t){t._nesting--,fm(t)}class mc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,l){return n.apply(i,o)}}const ja=new mt("",{providedIn:"root",factory:Od});function Od(){const t=he(Li);let n=!0;const i=new R.c(l=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(n),l.complete()})}),o=new R.c(l=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{Li.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,l.next(!0))})})});const y=t.onUnstable.subscribe(()=>{Li.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,J.h)(i,o.pipe((0,Se.u)()))}function Su(t){return t instanceof Function?t():t}let wp=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}return t})();function qh(t){for(;t;){t[fn]|=64;const n=Ps(t);if(Zo(t)&&!n)return t;t=n}return null}const ey=new mt("",{providedIn:"root",factory:()=>!1});let Dp=null;function ny(t,n){return t[n]??ym()}function ry(t,n){const i=ym();i.producerNode?.length&&(t[n]=Dp,i.lView=t,Dp=iy())}const pI={...Ls,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qh(t.lView)},lView:null};function iy(){return Object.create(pI)}function ym(){return Dp??=iy(),Dp}const In={};function sy(t){oy(zn(),ft(),kn()+t,!1)}function oy(t,n,i,o){if(!o)if(3==(3&n[fn])){const f=t.preOrderCheckHooks;null!==f&&Uc(n,f,i)}else{const f=t.preOrderHooks;null!==f&&ou(n,f,0,i)}Fn(i)}function Vd(t,n=on.Default){const i=ft();return null===i?Pt(t,n):ah(Yn(),i,lt(t),n)}function ay(){throw new Error("invalid")}function Tp(t,n,i,o,l,f,y,w,C,k,K){const ne=n.blueprint.slice();return ne[fr]=l,ne[fn]=140|o,(null!==k||t&&2048&t[fn])&&(ne[fn]|=2048),ps(ne),ne[Cn]=ne[pr]=t,ne[qn]=i,ne[Hr]=y||t&&t[Hr],ne[sn]=w||t&&t[sn],ne[as]=C||t&&t[as]||null,ne[Er]=f,ne[Di]=function tc(){return Va++}(),ne[Rr]=K,ne[Ws]=k,ne[sr]=2==n.type?t[sr]:ne,ne}function Ld(t,n,i,o,l){let f=t.data[n];if(null===f)f=function uy(t,n,i,o,l){const f=th(),y=Ra(),C=t.data[n]=function Sp(t,n,i,o,l,f){let y=n?n.injectorIndex:-1,w=0;return function eu(){return null!==gn.skipHydrationRootTNode}()&&(w|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,i,n,o,l);return null===t.firstChild&&(t.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(t,n,i,o,l),function tu(){return gn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=l;const y=function Fo(){const t=gn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Zs(f,!0),f}function Cp(t,n,i,o){if(0===i)return-1;const l=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return l}function qv(t,n,i,o,l){const f=ny(n,$i),y=kn(),w=2&o;try{Fn(-1),w&&n.length>xn&&oy(t,n,xn,!1),fi(w?2:0,l);const k=w?f:null,K=Gr(k);try{null!==k&&(k.dirty=!1),i(o,l)}finally{ta(k,K)}}finally{w&&null===n[$i]&&ry(n,$i),Fn(y),fi(w?3:1,l)}}function bp(t,n,i){if(ao(n)){const o=di(null);try{const f=n.directiveEnd;for(let y=n.directiveStart;y<f;y++){const w=t.data[y];w.contentQueries&&w.contentQueries(1,i[y],y)}}finally{di(o)}}}function vm(t,n,i){Ll()&&(function my(t,n,i,o){const l=i.directiveStart,f=i.directiveEnd;jn(i)&&function Hs(t,n,i){const o=ns(n,t),l=Qv(i);let y=16;i.signals?y=4096:i.onPush&&(y=64);const w=Pp(t,Tp(t,l,null,y,o,n,null,t[Hr].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=w}(n,i,t.data[l+i.componentOffset]),t.firstCreatePass||lu(i,n),Vi(o,n);const y=i.initialInputs;for(let w=l;w<f;w++){const C=t.data[w],k=eo(n,t,w,i);Vi(k,n),null!==y&&Ud(0,w-l,k,C,0,y),ei(C)&&(mr(i.index,n)[qn]=eo(n,t,w,i))}}(t,n,i,ns(i,n)),64==(64&i.flags)&&Tm(t,n,i))}function ly(t,n,i=ns){const o=n.localNames;if(null!==o){let l=n.index+1;for(let f=0;f<o.length;f+=2){const y=o[f+1],w=-1===y?i(n,t):t[y];t[l++]=w}}}function Qv(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=cy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function cy(t,n,i,o,l,f,y,w,C,k,K){const ne=xn+o,De=ne+l,Ue=function gI(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:In);return i}(ne,De),ct="function"==typeof k?k():k;return Ue[Dt]={type:t,blueprint:Ue,template:i,queries:null,viewQuery:w,declTNode:n,data:Ue.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:De,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ct,incompleteFirstPass:!1,ssrId:K}}let Yv=t=>null;function fy(t,n,i,o){for(let l in t)if(t.hasOwnProperty(l)){i=null===i?{}:i;const f=t[l];null===o?py(i,n,l,f):o.hasOwnProperty(l)&&py(i,n,o[l],f)}return i}function py(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function no(t,n,i,o,l,f,y,w){const C=ns(n,i);let K,k=n.inputs;!w&&null!=k&&(K=k[o])?(Np(t,i,K,o,l),jn(n)&&function Qh(t,n){const i=mr(n,t);16&i[fn]||(i[fn]|=64)}(i,n.index)):3&n.type&&(o=function gy(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),l=null!=y?y(l,n.value||"",o):l,f.setProperty(C,o,l))}function Am(t,n,i,o){if(Ll()){const l=null===o?null:{"":-1},f=function zo(t,n){const i=t.directiveRegistry;let o=null,l=null;if(i)for(let f=0;f<i.length;f++){const y=i[f];if(Pi(n,y.selectors,!1))if(o||(o=[]),ei(y))if(null!==y.findHostDirectiveDefs){const w=[];l=l||new Map,y.findHostDirectiveDefs(y,w,l),o.unshift(...w,y),ms(t,n,w.length)}else o.unshift(y),ms(t,n,0);else l=l||new Map,y.findHostDirectiveDefs?.(y,o,l),o.push(y)}return null===o?null:[o,l]}(t,i);let y,w;null===f?y=w=null:[y,w]=f,null!==y&&Dm(t,n,i,y,l,w),l&&function _y(t,n,i){if(n){const o=t.localNames=[];for(let l=0;l<n.length;l+=2){const f=i[n[l+1]];if(null==f)throw new Re(-301,!1);o.push(n[l],f)}}}(i,o,l)}i.mergedAttrs=Gn(i.mergedAttrs,i.attrs)}function Dm(t,n,i,o,l,f){for(let k=0;k<o.length;k++)cu(lu(i,n),t,o[k].type);!function Yh(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let k=0;k<o.length;k++){const K=o[k];K.providersResolver&&K.providersResolver(K)}let y=!1,w=!1,C=Cp(t,n,o.length,null);for(let k=0;k<o.length;k++){const K=o[k];i.mergedAttrs=Gn(i.mergedAttrs,K.hostAttrs),Xh(t,i,n,C,K),yy(C,K,l),null!==K.contentQueries&&(i.flags|=4),(null!==K.hostBindings||null!==K.hostAttrs||0!==K.hostVars)&&(i.flags|=64);const ne=K.type.prototype;!y&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),y=!0),!w&&(ne.ngOnChanges||ne.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),w=!0),C++}!function Im(t,n,i){const l=n.directiveEnd,f=t.data,y=n.attrs,w=[];let C=null,k=null;for(let K=n.directiveStart;K<l;K++){const ne=f[K],De=i?i.get(ne):null,ct=De?De.outputs:null;C=fy(ne.inputs,K,C,De?De.inputs:null),k=fy(ne.outputs,K,k,ct);const Rt=null===C||null===y||zs(n)?null:Cm(C,K,y);w.push(Rt)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=w,n.inputs=C,n.outputs=k}(t,i,f)}function Tm(t,n,i){const o=i.directiveStart,l=i.directiveEnd,f=i.index,y=function fo(){return gn.lFrame.currentDirectiveIndex}();try{Fn(f);for(let w=o;w<l;w++){const C=t.data[w],k=n[w];nu(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&_c(C,k)}}finally{Fn(-1),nu(y)}}function _c(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function ms(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function yy(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;ei(n)&&(i[""]=t)}}function Xh(t,n,i,o,l){t.data[o]=l;const f=l.factory||(l.factory=Ci(l.type)),y=new Na(f,ei(l),Vd);t.blueprint[o]=y,i[o]=y,function Rp(t,n,i,o,l){const f=l.hostBindings;if(f){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const w=~n.index;(function Xv(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(y)!=w&&y.push(w),y.push(i,o,f)}}(t,n,o,Cp(t,i,l.hostVars,In),l)}function $a(t,n,i,o,l,f){const y=ns(t,n);!function Jh(t,n,i,o,l,f,y){if(null==f)t.removeAttribute(n,l,i);else{const w=null==y?Te(f):y(f,o||"",l);t.setAttribute(n,l,w,i)}}(n[sn],y,f,t.value,i,o,l)}function Ud(t,n,i,o,l,f){const y=f[n];if(null!==y)for(let w=0;w<y.length;)Al(o,i,y[w++],y[w++],y[w++])}function Al(t,n,i,o,l){const f=di(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(o)&&(l=y[o].call(n,l)),null!==t.setInput?t.setInput(n,l,i,o):n[o]=l}finally{di(f)}}function Cm(t,n,i){let o=null,l=0;for(;l<i.length;){const f=i[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const y=t[f];for(let w=0;w<y.length;w+=2)if(y[w]===n){o.push(f,y[w+1],i[l+1]);break}}l+=2}else l+=2;else l+=4}return o}function Dl(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function vy(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const y=t.data[f];I(i[o]),y.contentQueries(2,n[f],f)}}}function Pp(t,n){return t[li]?t[ci][Nn]=n:t[li]=n,t[ci]=n,n}function bm(t,n,i){I(0);const o=di(null);try{n(t,i)}finally{di(o)}}function Ey(t){return t[Ji]||(t[Ji]=[])}function Sm(t){return t.cleanup||(t.cleanup=[])}function Mp(t,n){const i=t[as],o=i?i.get(Il,null):null;o&&o.handleError(n)}function Np(t,n,i,o,l){for(let f=0;f<i.length;){const y=i[f++],w=i[f++];Al(t.data[y],n[y],o,w,l)}}function wy(t,n){const i=mr(n,t),o=i[Dt];!function Jv(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const l=i[fr];null!==l&&null===i[Rr]&&(i[Rr]=Cu(l,i[as])),Zh(o,i,i[qn])}function Zh(t,n,i){b(n);try{const o=t.viewQuery;null!==o&&bm(1,o,i);const l=t.template;null!==l&&qv(t,n,l,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vy(t,n),t.staticViewQueries&&bm(2,t.viewQuery,i);const f=t.components;null!==f&&function Zv(t,n){for(let i=0;i<n.length;i++)wy(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[fn]&=-5,Ge()}}let Rm=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,l){const f=typeof Zone>"u"?null:Zone.current,y=function dt(t,n,i){const o=Object.create(lr);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const l=y=>{o.cleanupFn=y};return o.ref={notify:()=>xi(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Lu(o))return;o.hasRun=!0;const y=Gr(o);try{o.cleanupFn(),o.cleanupFn=Kt,o.fn(l)}finally{ta(o,y)}},cleanup:()=>o.cleanupFn()},o.ref}(i,k=>{this.all.has(k)&&this.queue.set(k,f)},l);let w;this.all.add(y),y.notify();const C=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=o?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}return t})();function xp(t,n,i){let o=i?t.styles:null,l=i?t.classes:null,f=0;if(null!==n)for(let y=0;y<n.length;y++){const w=n[y];"number"==typeof w?f=w:1==f?l=at(l,w):2==f&&(o=at(o,w+": "+n[++y]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=l:t.classesWithoutHost=l}function Bd(t,n,i,o,l=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(wr(f)),vn(f)&&Pm(f,o);const y=i.type;if(8&y)Bd(t,n,i.child,o);else if(32&y){const w=sc(i,n);let C;for(;C=w();)o.push(C)}else if(16&y){const w=Pg(n,i);if(Array.isArray(w))o.push(...w);else{const C=Ps(n[sr]);Bd(C[Dt],C,w,o,!0)}}i=l?i.projectionNext:i.next}return o}function Pm(t,n){for(let i=Ir;i<t.length;i++){const o=t[i],l=o[Dt].firstChild;null!==l&&Bd(o[Dt],o,l,n)}t[si]!==t[fr]&&n.push(t[si])}function Op(t,n,i,o=!0){const l=n[Hr],f=l.rendererFactory,y=l.afterRenderEventManager;f.begin?.(),y?.begin();try{Mm(t,n,t.template,i)}catch(C){throw o&&Mp(n,C),C}finally{f.end?.(),l.effectManager?.flush(),y?.end()}}function Mm(t,n,i,o){const l=n[fn];if(256!=(256&l)){n[Hr].effectManager?.flush(),b(n);try{ps(n),function Pa(t){return gn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&qv(t,n,i,2,o);const y=3==(3&l);if(y){const k=t.preOrderCheckHooks;null!==k&&Uc(n,k,null)}else{const k=t.preOrderHooks;null!==k&&ou(n,k,0,null),Wu(n,0)}if(function a(t){for(let n=oc(t);null!==n;n=Bf(n)){if(!n[Fs])continue;const i=n[Ks];for(let o=0;o<i.length;o++){ba(i[o])}}}(n),Ty(n,2),null!==t.contentQueries&&vy(t,n),y){const k=t.contentCheckHooks;null!==k&&Uc(n,k)}else{const k=t.contentHooks;null!==k&&ou(n,k,1),Wu(n,1)}!function Kv(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=ny(n,Zi);try{for(let l=0;l<i.length;l++){const f=i[l];if(f<0)Fn(~f);else{const y=f,w=i[++l],C=i[++l];Ma(w,y),o.dirty=!1;const k=Gr(o);try{C(2,n[y])}finally{ta(o,k)}}}}finally{null===n[Zi]&&ry(n,Zi),Fn(-1)}}(t,n);const w=t.components;null!==w&&s(n,w,0);const C=t.viewQuery;if(null!==C&&bm(2,C,o),y){const k=t.viewCheckHooks;null!==k&&Uc(n,k)}else{const k=t.viewHooks;null!==k&&ou(n,k,2),Wu(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[fn]&=-73,kl(n)}finally{Ge()}}}function Ty(t,n){for(let i=oc(t);null!==i;i=Bf(i))for(let o=Ir;o<i.length;o++)r(i[o],n)}function e(t,n,i){r(mr(n,t),i)}function r(t,n){if(!function Oc(t){return 128==(128&t[fn])}(t))return;const i=t[Dt],o=t[fn];if(80&o&&0===n||1024&o||2===n)Mm(i,t,i.template,t[qn]);else if(t[ui]>0){Ty(t,1);const l=i.components;null!==l&&s(t,l,1)}}function s(t,n,i){for(let o=0;o<n.length;o++)e(t,n[o],i)}class u{get rootNodes(){const n=this._lView,i=n[Dt];return Bd(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qn]}set context(n){this._lView[qn]=n}get destroyed(){return 256==(256&this._lView[fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Cn];if(vn(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(st(n,o),qc(i,o))}this._attachedToViewContainer=!1}Ut(this._lView[Dt],this._lView)}onDestroy(n){!function $u(t,n){if(256==(256&t[fn]))throw new Re(911,!1);null===t[ii]&&(t[ii]=[]),t[ii].push(n)}(this._lView,n)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[fn]&=-129}reattach(){this._lView[fn]|=128}detectChanges(){Op(this._lView[Dt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function v(t,n){bh(t,n,n[sn],2,null,null)}(this._lView[Dt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Re(902,!1);this._appRef=n}}class h extends u{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Op(n[Dt],n,n[qn],!1)}checkNoChanges(){}get context(){return null}}class m extends Rd{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Mn(n);return new q(i,this.ngModule)}}function A(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class V{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=Hn(o);const l=this.injector.get(n,gc,o);return l!==gc||i===gc?l:this.parentInjector.get(n,i,o)}}class q extends fp{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=A(n.inputs);if(null!==i)for(const l of o)i.hasOwnProperty(l.propName)&&(l.transform=i[l.propName]);return o}get outputs(){return A(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Bi(t){return t.map(Ea).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,l){let f=(l=l||this.ngModule)instanceof ga?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new V(n,f):n,w=y.get(gp,null);if(null===w)throw new Re(407,!1);const ne={rendererFactory:w,sanitizer:y.get(mp,null),effectManager:y.get(Rm,null),afterRenderEventManager:y.get(wp,null)},De=w.createRenderer(null,this.componentDef),Ue=this.componentDef.selectors[0][0]||"div",ct=o?function dy(t,n,i,o){const f=o.get(ey,!1)||i===Ri.ShadowDom,y=t.selectRootElement(n,f);return function hy(t){Yv(t)}(y),y}(De,o,this.componentDef.encapsulation,y):_(De,Ue,function S(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(Ue)),ln=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let wt=null;null!==ct&&(wt=Cu(ct,y,!0));const Ln=cy(0,null,null,1,0,null,null,null,null,null,null),nr=Tp(null,Ln,null,ln,null,null,ne,De,y,null,wt);let jr,Jo;b(nr);try{const Nc=this.componentDef;let dg,qE=null;Nc.findHostDirectiveDefs?(dg=[],qE=new Map,Nc.findHostDirectiveDefs(Nc,dg,qE),dg.push(Nc)):dg=[Nc];const KC=function ge(t,n){const i=t[Dt],o=xn;return t[o]=n,Ld(i,o,2,"#host",null)}(nr,ct),qC=function $e(t,n,i,o,l,f,y){const w=l[Dt];!function ht(t,n,i,o){for(const l of t)n.mergedAttrs=Gn(n.mergedAttrs,l.hostAttrs);null!==n.mergedAttrs&&(xp(n,n.mergedAttrs,!0),null!==i&&Qf(o,i,n))}(o,t,n,y);let C=null;null!==n&&(C=Cu(n,l[as]));const k=f.rendererFactory.createRenderer(n,i);let K=16;i.signals?K=4096:i.onPush&&(K=64);const ne=Tp(l,Qv(i),null,K,l[t.index],t,f,k,null,null,C);return w.firstCreatePass&&ms(w,t,o.length-1),Pp(l,ne),l[t.index]=ne}(KC,ct,Nc,dg,nr,ne,De);Jo=eh(Ln,xn),ct&&function At(t,n,i,o){if(o)bn(t,i,["ng-version",lm.full]);else{const{attrs:l,classes:f}=function Ia(t){const n=[],i=[];let o=1,l=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===l?""!==f&&n.push(f,t[++o]):8===l&&i.push(f);else{if(!$r(l))break;l=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);l&&bn(t,i,l),f&&f.length>0&&qf(t,i,f.join(" "))}}(De,Nc,ct,o),void 0!==i&&function en(t,n,i){const o=t.projection=[];for(let l=0;l<n.length;l++){const f=i[l];o.push(null!=f?Array.from(f):null)}}(Jo,this.ngContentSelectors,i),jr=function St(t,n,i,o,l,f){const y=Yn(),w=l[Dt],C=ns(y,l);Dm(w,l,y,i,null,o);for(let K=0;K<i.length;K++)Vi(eo(l,w,y.directiveStart+K,y),l);Tm(w,l,y),C&&Vi(C,l);const k=eo(l,w,y.directiveStart+y.componentOffset,y);if(t[qn]=l[qn]=k,null!==f)for(const K of f)K(k,n);return bp(w,y,t),k}(qC,Nc,dg,qE,nr,[un]),Zh(Ln,nr,null)}finally{Ge()}return new te(this.componentType,jr,Go(Jo,nr),nr,Jo)}}class te extends H_{constructor(n,i,o,l,f){super(),this.location=o,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new h(l),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let l;if(null!==o&&(l=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;Np(f[Dt],f,l,n,i),this.previousInputValues.set(n,i),qh(mr(this._tNode.index,f))}}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function un(){const t=Yn();su(ft()[Dt],t)}function wn(t){let n=function Jt(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let l;if(ei(t))l=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Re(903,!1);l=n.\u0275dir}if(l){if(i){o.push(l);const y=t;y.inputs=Vn(t.inputs),y.inputTransforms=Vn(t.inputTransforms),y.declaredInputs=Vn(t.declaredInputs),y.outputs=Vn(t.outputs);const w=l.hostBindings;w&&Ie(t,w);const C=l.viewQuery,k=l.contentQueries;if(C&&Pe(t,C),k&&pe(t,k),ce(t.inputs,l.inputs),ce(t.declaredInputs,l.declaredInputs),ce(t.outputs,l.outputs),null!==l.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ce(y.inputTransforms,l.inputTransforms)),ei(l)&&l.data.animation){const K=t.data;K.animation=(K.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(t),w===wn&&(i=!1)}}n=Object.getPrototypeOf(n)}!function tr(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const l=t[o];l.hostVars=n+=l.hostVars,l.hostAttrs=Gn(l.hostAttrs,i=Gn(i,l.hostAttrs))}}(o)}function Vn(t){return t===yr?{}:t===yn?[]:t}function Pe(t,n){const i=t.viewQuery;t.viewQuery=i?(o,l)=>{n(o,l),i(o,l)}:n}function pe(t,n){const i=t.contentQueries;t.contentQueries=i?(o,l,f)=>{n(o,l,f),i(o,l,f)}:n}function Ie(t,n){const i=t.hostBindings;t.hostBindings=i?(o,l)=>{n(o,l),i(o,l)}:n}function Fp(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const l=n[o];Array.isArray(l)&&l[2]&&(i[o]=l[2])}t.inputTransforms=i}function Vp(t){return!!Nm(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Nm(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xs(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function tf(t,n,i,o){const l=ft();return xs(l,_r(),n)&&(zn(),$a(ur(),l,t,n,i,o)),tf}function bl(t,n,i,o){return xs(t,_r(),i)?n+Te(i)+o:In}function Wp(t,n,i,o,l,f,y,w){const C=ft(),k=zn(),K=t+xn,ne=k.firstCreatePass?function ky(t,n,i,o,l,f,y,w,C){const k=n.consts,K=Ld(n,t,4,y||null,js(k,w));Am(n,i,K,js(k,C)),su(n,K);const ne=K.tView=cy(2,K,o,l,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,k,null);return null!==n.queries&&(n.queries.template(n,K),ne.queries=n.queries.embeddedTView(K)),K}(K,k,C,n,i,o,l,f,y):k.data[K];Zs(ne,!1);const De=Kp(k,C,ne,t);Lc()&&Ch(k,C,De,ne),Vi(De,C),Pp(C,C[K]=Dl(De,C,De,ne)),As(ne)&&vm(k,C,ne),null!=y&&ly(C,ne,w)}let Kp=function Vm(t,n,i,o){return po(!0),n[sn].createComment("")};function hf(t,n,i){const o=ft();return xs(o,_r(),n)&&no(zn(),ur(),o,t,n,o[sn],i,!1),hf}function Tc(t,n,i,o,l){const y=l?"class":"style";Np(t,i,n.inputs[y],y,o)}function Wd(t,n,i,o){const l=ft(),f=zn(),y=xn+t,w=l[sn],C=f.firstCreatePass?function Cc(t,n,i,o,l,f){const y=n.consts,C=Ld(n,t,2,o,js(y,l));return Am(n,i,C,js(y,f)),null!==C.attrs&&xp(C,C.attrs,!1),null!==C.mergedAttrs&&xp(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(y,f,l,n,i,o):f.data[y],k=Lm(f,l,C,w,n,t);l[y]=k;const K=As(C);return Zs(C,!0),Qf(w,k,C),32!=(32&C.flags)&&Lc()&&Ch(f,l,k,C),0===function Cs(){return gn.lFrame.elementDepthCount}()&&Vi(k,l),function kc(){gn.lFrame.elementDepthCount++}(),K&&(vm(f,l,C),bp(f,C,l)),null!==o&&ly(l,C),Wd}function Qp(){let t=Yn();Ra()?function Bl(){gn.lFrame.isParent=!1}():(t=t.parent,Zs(t,!1));const n=t;(function Ul(t){return gn.skipHydrationRootTNode===t})(n)&&function bs(){gn.skipHydrationRootTNode=null}(),function Sa(){gn.lFrame.elementDepthCount--}();const i=zn();return i.firstCreatePass&&(su(i,t),ao(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function fg(t){return 0!=(8&t.flags)}(n)&&Tc(i,n,ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function If(t){return 0!=(16&t.flags)}(n)&&Tc(i,n,ft(),n.stylesWithoutHost,!1),Qp}function Yp(t,n,i,o){return Wd(t,n,i,o),Qp(),Yp}let Lm=(t,n,i,o,l,f)=>(po(!0),_(o,l,function ia(){return gn.lFrame.currentNamespace}()));function Hy(){return ft()}function xu(t){return!!t&&"function"==typeof t.then}function za(t){return!!t&&"function"==typeof t.subscribe}function Kd(t,n,i,o){const l=ft(),f=zn(),y=Yn();return function Wr(t,n,i,o,l,f,y){const w=As(o),k=t.firstCreatePass&&Sm(t),K=n[qn],ne=Ey(n);let De=!0;if(3&o.type||y){const Rt=ns(o,n),zt=y?y(Rt):Rt,ln=ne.length,wt=y?nr=>y(wr(nr[o.index])):o.index;let Ln=null;if(!y&&w&&(Ln=function Gy(t,n,i,o){const l=t.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===i&&l[f+1]===o){const w=n[Ji],C=l[f+2];return w.length>C?w[C]:null}"string"==typeof y&&(f+=2)}return null}(t,n,l,o.index)),null!==Ln)(Ln.__ngLastListenerFn__||Ln).__ngNextListenerFn__=f,Ln.__ngLastListenerFn__=f,De=!1;else{f=qd(o,n,K,f,!1);const nr=i.listen(zt,l,f);ne.push(f,nr),k&&k.push(l,wt,ln,ln+1)}}else f=qd(o,n,K,f,!1);const Ue=o.outputs;let ct;if(De&&null!==Ue&&(ct=Ue[l])){const Rt=ct.length;if(Rt)for(let zt=0;zt<Rt;zt+=2){const jr=n[ct[zt]][ct[zt+1]].subscribe(f),Jo=ne.length;ne.push(f,jr),k&&k.push(l,o.index,Jo,-(Jo+1))}}}(f,l,l[sn],y,t,n,o),Kd}function pf(t,n,i,o){try{return fi(6,n,i),!1!==i(o)}catch(l){return Mp(t,l),!1}finally{fi(7,n,i)}}function qd(t,n,i,o,l){return function f(y){if(y===Function)return o;qh(t.componentOffset>-1?mr(t.index,n):n);let C=pf(n,i,o,y),k=f.__ngNextListenerFn__;for(;k;)C=pf(n,i,k,y)&&C,k=k.__ngNextListenerFn__;return l&&!1===C&&y.preventDefault(),C}}function Qd(t=1){return function Bt(t){return(gn.lFrame.contextLView=function Sn(t,n){for(;t>0;)n=n[pr],t--;return n}(t,gn.lFrame.contextLView))[qn]}(t)}function jm(t,n,i){return $m(t,"",n,"",i),jm}function $m(t,n,i,o,l){const f=ft(),y=bl(f,n,i,o);return y!==In&&no(zn(),ur(),f,t,y,f[sn],l,!1),$m}function Zp(t,n){return t<<17|n<<2}function Pl(t){return t>>17&32767}function Wm(t){return 2|t}function ya(t){return(131068&t)>>2}function Xd(t,n){return-131069&t|n<<2}function Sc(t){return 1|t}function Qy(t,n,i,o,l){const f=t[i+1],y=null===n;let w=o?Pl(f):ya(f),C=!1;for(;0!==w&&(!1===C||y);){const K=t[w+1];dE(t[w],n)&&(C=!0,t[w+1]=o?Sc(K):Wm(K)),w=o?Pl(K):ya(K)}C&&(t[i+1]=o?Wm(f):Sc(f))}function dE(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&rl(t,n)>=0}const Ui={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qm(t){return t.substring(Ui.key,Ui.keyEnd)}function Qm(t,n){const i=Ui.textEnd;return i===n?-1:(n=Ui.keyEnd=function Jy(t,n,i){for(;n<i&&t.charCodeAt(n)>32;)n++;return n}(t,Ui.key=n,i),Wa(t,n,i))}function Wa(t,n,i){for(;n<i&&t.charCodeAt(n)<=32;)n++;return n}function ng(t,n,i){return qo(t,n,i,!1),ng}function Rc(t,n){return qo(t,n,null,!0),Rc}function Ko(t,n){for(let i=function tg(t){return function Xy(t){Ui.key=0,Ui.keyEnd=0,Ui.value=0,Ui.valueEnd=0,Ui.textEnd=t.length}(t),Qm(t,Wa(t,0,Ui.textEnd))}(n);i>=0;i=Qm(n,i))Ar(t,qm(n),!0)}function qo(t,n,i,o){const l=ft(),f=zn(),y=Ss(2);f.firstUpdatePass&&e_(f,t,y,o),n!==In&&xs(l,y,n)&&p(f,f.data[kn()],l,l[sn],t,l[y+1]=function ee(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=we(La(t)))),t}(n,i),o,y)}function Zm(t,n){return n>=t.expandoStartIndex}function e_(t,n,i,o){const l=t.data;if(null===l[i+1]){const f=l[kn()],y=Zm(t,i);je(f,o)&&null===n&&!y&&(n=!1),n=function Pc(t,n,i,o){const l=function zu(t){const n=gn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===l)0===(o?n.classBindings:n.styleBindings)&&(i=Nl(i=rg(null,t,n,i,o),n.attrs,o),f=null);else{const y=n.directiveStylingLast;if(-1===y||t[y]!==l)if(i=rg(l,t,n,i,o),null===f){let C=function tv(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==ya(o))return t[Pl(o)]}(t,n,o);void 0!==C&&Array.isArray(C)&&(C=rg(null,t,n,C[1],o),C=Nl(C,n.attrs,o),function nv(t,n,i,o){t[Pl(i?n.classBindings:n.styleBindings)]=o}(t,n,o,C))}else f=function rv(t,n,i){let o;const l=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<l;f++)o=Nl(o,t[f].hostAttrs,i);return Nl(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(l,f,n,o),function Km(t,n,i,o,l,f){let y=f?n.classBindings:n.styleBindings,w=Pl(y),C=ya(y);t[o]=i;let K,k=!1;if(Array.isArray(i)?(K=i[1],(null===K||rl(i,K)>0)&&(k=!0)):K=i,l)if(0!==C){const De=Pl(t[w+1]);t[o+1]=Zp(De,w),0!==De&&(t[De+1]=Xd(t[De+1],o)),t[w+1]=function lE(t,n){return 131071&t|n<<17}(t[w+1],o)}else t[o+1]=Zp(w,0),0!==w&&(t[w+1]=Xd(t[w+1],o)),w=o;else t[o+1]=Zp(C,0),0===w?w=o:t[C+1]=Xd(t[C+1],o),C=o;k&&(t[o+1]=Wm(t[o+1])),Qy(t,K,o,!0),Qy(t,K,o,!1),function gi(t,n,i,o,l){const f=l?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&rl(f,n)>=0&&(i[o+1]=Sc(i[o+1]))}(n,K,t,o,f),y=Zp(w,C),f?n.classBindings=y:n.styleBindings=y}(l,f,n,i,y,o)}}function rg(t,n,i,o,l){let f=null;const y=i.directiveEnd;let w=i.directiveStylingLast;for(-1===w?w=i.directiveStart:w++;w<y&&(f=n[w],o=Nl(o,f.hostAttrs,l),f!==t);)w++;return null!==t&&(i.directiveStylingLast=w),o}function Nl(t,n,i){const o=i?1:2;let l=-1;if(null!==n)for(let f=0;f<n.length;f++){const y=n[f];"number"==typeof y?l=y:l===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ar(t,y,!!i||n[++f]))}return void 0===t?null:t}function p(t,n,i,o,l,f,y,w){if(!(3&n.type))return;const C=t.data,k=C[w+1],K=function qy(t){return 1==(1&t)}(k)?P(C,n,i,l,ya(k),y):void 0;U(K)||(U(f)||function Ml(t){return 2==(2&t)}(k)&&(f=P(C,null,i,l,w,y)),function __(t,n,i,o,l){if(n)l?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:ec.DashCase;null==l?t.removeStyle(i,o,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=ec.Important),t.setStyle(i,o,l,f))}}(o,y,xo(kn(),i),l,f))}function P(t,n,i,o,l,f){const y=null===n;let w;for(;l>0;){const C=t[l],k=Array.isArray(C),K=k?C[1]:C,ne=null===K;let De=i[l+1];De===In&&(De=ne?yn:void 0);let Ue=ne?dh(De,o):K===o?De:void 0;if(k&&!U(Ue)&&(Ue=dh(C,o)),U(Ue)&&(w=Ue,y))return w;const ct=t[l+1];l=y?Pl(ct):ya(ct)}if(null!==n){let C=f?n.residualClasses:n.residualStyles;null!=C&&(w=dh(C,o))}return w}function U(t){return void 0!==t}function je(t,n){return 0!=(t.flags&(n?8:16))}function rt(t,n=""){const i=ft(),o=zn(),l=t+xn,f=o.firstCreatePass?Ld(o,l,1,n,null):o.data[l],y=jt(o,i,f,n,t);i[l]=y,Lc()&&Ch(o,i,y,f),Zs(f,!1)}let jt=(t,n,i,o,l)=>(po(!0),function pl(t,n){return t.createText(n)}(n[sn],o));function dr(t){return qi("",t,""),dr}function qi(t,n,i){const o=ft(),l=bl(o,t,n,i);return l!==In&&function Wo(t,n,i){const o=xo(n,t);!function jf(t,n,i){t.setValue(n,i)}(t[sn],o,i)}(o,kn(),l),qi}function bI(t,n,i){!function ro(t,n,i,o){const l=zn(),f=Ss(2);l.firstUpdatePass&&e_(l,null,f,o);const y=ft();if(i!==In&&xs(y,f,i)){const w=l.data[kn()];if(je(w,o)&&!Zm(l,f)){let C=o?w.classesWithoutHost:w.stylesWithoutHost;null!==C&&(i=at(C,i||"")),Tc(l,w,y,i,o)}else!function Jd(t,n,i,o,l,f,y,w){l===In&&(l=yn);let C=0,k=0,K=0<l.length?l[0]:null,ne=0<f.length?f[0]:null;for(;null!==K||null!==ne;){const De=C<l.length?l[C+1]:void 0,Ue=k<f.length?f[k+1]:void 0;let Rt,ct=null;K===ne?(C+=2,k+=2,De!==Ue&&(ct=ne,Rt=Ue)):null===ne||null!==K&&K<ne?(C+=2,ct=K):(k+=2,ct=ne,Rt=Ue),null!==ct&&p(t,n,i,o,ct,Rt,y,w),K=C<l.length?l[C]:null,ne=k<f.length?f[k]:null}}(l,w,y,y[sn],y[f+1],y[f+1]=function Io(t,n,i){if(null==i||""===i)return yn;const o=[],l=La(i);if(Array.isArray(l))for(let f=0;f<l.length;f++)t(o,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&t(o,f,l[f]);else"string"==typeof l&&n(o,l);return o}(t,n,i),o,f)}}(Ar,Ko,bl(ft(),t,n,i),!0)}const yf=void 0;var mA=["en",[["a","p"],["AM","PM"],yf],[["AM","PM"],yf,yf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yf,"{1} 'at' {0}",yf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gA(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let sg={};function hE(t){const n=function _A(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=BI(n);if(i)return i;const o=n.split("-")[0];if(i=BI(o),i)return i;if("en"===o)return mA;throw new Re(701,!1)}function UI(t){return hE(t)[og.PluralCase]}function BI(t){return t in sg||(sg[t]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[t]),sg[t]}var og=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(og||{});const ag="en-US";let jI=ag;function gE(t,n,i,o,l){if(t=lt(t),Array.isArray(t))for(let f=0;f<t.length;f++)gE(t[f],n,i,o,l);else{const f=zn(),y=ft(),w=Yn();let C=fc(t)?t:lt(t.provide);const k=tm(t),K=1048575&w.providerIndexes,ne=w.directiveStart,De=w.providerIndexes>>20;if(fc(t)||!t.multi){const Ue=new Na(k,l,Vd),ct=_E(C,n,l?K:K+De,ne);-1===ct?(cu(lu(w,y),f,C),mE(f,t,n.length),n.push(C),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),i.push(Ue),y.push(Ue)):(i[ct]=Ue,y[ct]=Ue)}else{const Ue=_E(C,n,K+De,ne),ct=_E(C,n,K,K+De),zt=ct>=0&&i[ct];if(l&&!zt||!l&&!(Ue>=0&&i[Ue])){cu(lu(w,y),f,C);const ln=function gD(t,n,i,o,l){const f=new Na(t,i,Vd);return f.multi=[],f.index=n,f.componentProviders=0,f0(f,l,o&&!i),f}(l?pD:fD,i.length,l,o,k);!l&&zt&&(i[ct].providerFactory=ln),mE(f,t,n.length,0),n.push(C),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),i.push(ln),y.push(ln)}else mE(f,t,Ue>-1?Ue:ct,f0(i[l?ct:Ue],k,!l&&o));!l&&o&&zt&&i[ct].componentProviders++}}}function mE(t,n,i,o){const l=fc(n),f=function Sv(t){return!!t.useClass}(n);if(l||f){const C=(f?lt(n.useClass):n).prototype.ngOnDestroy;if(C){const k=t.destroyHooks||(t.destroyHooks=[]);if(!l&&n.multi){const K=k.indexOf(i);-1===K?k.push(i,[o,C]):k[K+1].push(o,C)}else k.push(i,C)}}}function f0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function _E(t,n,i,o){for(let l=i;l<o;l++)if(n[l]===t)return l;return-1}function fD(t,n,i,o){return yE(this.multi,[])}function pD(t,n,i,o){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=eo(i,i[Dt],this.providerFactory.index,o);f=w.slice(0,y),yE(l,f);for(let C=y;C<w.length;C++)f.push(w[C])}else f=[],yE(l,f);return f}function yE(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function p0(t,n=[]){return i=>{i.providersResolver=(o,l)=>function hD(t,n,i){const o=zn();if(o.firstCreatePass){const l=ei(t);gE(i,o.data,o.blueprint,l,!0),gE(n,o.data,o.blueprint,l,!1)}}(o,l?l(t):t,n)}}class vf{}class g0{}function mD(t,n){return new vE(t,n??null,[])}class vE extends vf{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new m(this);const l=Bn(n);this._bootstrapComponents=Su(l.bootstrap),this._r3Injector=q_(n,i,[{provide:vf,useValue:this},{provide:Rd,useValue:this.componentFactoryResolver},...o],we(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class EE extends g0{constructor(n){super(),this.moduleType=n}create(n){return new vE(this.moduleType,n,[])}}class m0 extends vf{constructor(n){super(),this.componentFactoryResolver=new m(this),this.instance=null;const i=new pc([...n.providers,{provide:vf,useValue:this},{provide:Rd,useValue:this.componentFactoryResolver}],n.parent||Uh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function _0(t,n,i=null){return new m0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let yD=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=x_(0,i.type),l=o.length>0?_0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,l)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ot({token:t,providedIn:"environment",factory:()=>new t(Pt(ga))})}return t})();function y0(t){t.getStandaloneInjector=n=>n.get(yD).getOrCreateStandaloneInjector(t)}function T0(t,n,i,o){return function C0(t,n,i,o,l,f){const y=n+i;return xs(t,y,l)?function Ga(t,n,i){return t[n]=i}(t,y+1,f?o.call(f,l):o(l)):function a_(t,n){const i=t[n];return i===In?void 0:i}(t,y+1)}(ft(),function Lr(){const t=gn.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),t,n,i,o)}function HD(){return this._results[Symbol.iterator]()}class wE{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new _a)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=wE.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=HD)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const l=function Fi(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function hu(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let l=t[o],f=n[o];if(i&&(l=i(l),f=i(f)),f!==l)return!1}return!0}(o._results,l,i))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zD(t,n,i,o=!0){const l=n[Dt];if(function z(t,n,i,o){const l=Ir+o,f=i.length;o>0&&(i[l-1][Nn]=n),o<f-Ir?(n[Nn]=i[l],ch(i,Ir+o,n)):(i.push(n),n[Nn]=null),n[Cn]=i;const y=n[ji];null!==y&&i!==y&&function fe(t,n){const i=t[Ks];n[sr]!==n[Cn][Cn][sr]&&(t[Fs]=!0),null===i?t[Ks]=[n]:i.push(n)}(y,n);const w=n[Ai];null!==w&&w.insertView(t),n[fn]|=128}(l,n,t,i),o){const f=Wf(i,t),y=n[sn],w=wu(y,t[si]);null!==w&&function d(t,n,i,o,l,f){o[fr]=l,o[Er]=n,bh(t,o,i,1,l,f)}(l,t[Er],y,n,w,f)}}let l_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qD}return t})();const WD=l_,KD=class extends WD{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const l=function GD(t,n,i,o){const l=n.tView,w=Tp(t,l,i,4096&t[fn]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);w[ji]=t[n.index];const k=t[Ai];return null!==k&&(w[Ai]=k.createEmbeddedView(l)),Zh(l,w,i),w}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new u(l)}};function qD(){return lv(Yn(),ft())}function lv(t,n){return 4&t.type?new KD(n,t,Go(t,n)):null}let dv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=eT}return t})();function eT(){return V0(Yn(),ft())}const tT=dv,k0=class extends tT{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Go(this._hostTNode,this._hostLView)}get injector(){return new bi(this._hostTNode,this._hostLView)}get parentInjector(){const n=Xu(this._hostTNode,this._hostLView);if(uu(n)){const i=zl(n,this._hostLView),o=Gl(n);return new bi(i[Dt].data[o+8],i)}return new bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=F0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Ir}createEmbeddedView(n,i,o){let l,f;"number"==typeof o?l=o:null!=o&&(l=o.index,f=o.injector);const w=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(w,l,false),w}createComponent(n,i,o,l,f){const y=n&&!function tl(t){return"function"==typeof t}(n);let w;if(y)w=i;else{const Rt=i||{};w=Rt.index,o=Rt.injector,l=Rt.projectableNodes,f=Rt.environmentInjector||Rt.ngModuleRef}const C=y?n:new q(Mn(n)),k=o||this.parentInjector;if(!f&&null==C.ngModule){const zt=(y?k:this.parentInjector).get(ga,null);zt&&(f=zt)}Mn(C.componentType??{});const Ue=C.create(k,l,null,f);return this.insertImpl(Ue.hostView,w,false),Ue}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const l=n._lView;if(function ju(t){return vn(t[Cn])}(l)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const k=l[Cn],K=new k0(k,k[Er],k[Cn]);K.detach(K.indexOf(n))}}const y=this._adjustIndex(i),w=this._lContainer;return zD(w,l,y,!o),n.attachToViewContainerRef(),ch(AE(w),y,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=F0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=st(this._lContainer,i);o&&(qc(AE(this._lContainer),i),Ut(o[Dt],o))}detach(n){const i=this._adjustIndex(n,-1),o=st(this._lContainer,i);return o&&null!=qc(AE(this._lContainer),i)?new u(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function F0(t){return t[8]}function AE(t){return t[8]||(t[8]=[])}function V0(t,n){let i;const o=n[t.index];return vn(o)?i=o:(i=Dl(o,n,null,t),n[t.index]=i,Pp(n,i)),L0(i,n,t,o),new k0(i,t,n)}let L0=function U0(t,n,i,o){if(t[si])return;let l;l=8&i.type?wr(o):function nT(t,n){const i=t[sn],o=i.createComment(""),l=ns(n,t);return $o(i,wu(i,l),o,function gd(t,n){return t.nextSibling(n)}(i,l),!1),o}(n,i),t[si]=l};class DE{constructor(n){this.queryList=n,this.matches=null}clone(){return new DE(this.queryList)}setDirty(){this.queryList.setDirty()}}class TE{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,l=[];for(let f=0;f<o;f++){const y=i.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new TE(l)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==K0(n,i).matches&&this.queries[i].setDirty()}}class B0{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class CE{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const l=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,l);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new CE(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class bE{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new bE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const f=o[l];this.matchTNodeWithReadOption(n,i,sT(i,f)),this.matchTNodeWithReadOption(n,i,Ju(i,n,f,!1,!1))}else o===l_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Ju(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===Pd||l===dv||l===l_&&4&i.type)this.addMatch(i.index,-2);else{const f=Ju(i,n,l,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function sT(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function aT(t,n,i,o){return-1===i?function oT(t,n){return 11&t.type?Go(t,n):4&t.type?lv(t,n):null}(n,t):-2===i?function uT(t,n,i){return i===Pd?Go(n,t):i===l_?lv(n,t):i===dv?V0(n,t):void 0}(t,n,o):eo(t,t[Dt],i,n)}function j0(t,n,i,o){const l=n[Ai].queries[o];if(null===l.matches){const f=t.data,y=i.matches,w=[];for(let C=0;C<y.length;C+=2){const k=y[C];w.push(k<0?null:aT(n,f[k],y[C+1],i.metadata.read))}l.matches=w}return l.matches}function SE(t,n,i,o){const l=t.queries.getByIndex(i),f=l.matches;if(null!==f){const y=j0(t,n,l,i);for(let w=0;w<f.length;w+=2){const C=f[w];if(C>0)o.push(y[w/2]);else{const k=f[w+1],K=n[-C];for(let ne=Ir;ne<K.length;ne++){const De=K[ne];De[ji]===De[Cn]&&SE(De[Dt],De,k,o)}if(null!==K[Ks]){const ne=K[Ks];for(let De=0;De<ne.length;De++){const Ue=ne[De];SE(Ue[Dt],Ue,k,o)}}}}}return o}function $0(t){const n=ft(),i=zn(),o=$l();I(o+1);const l=K0(i,o);if(t.dirty&&function Oo(t){return 4==(4&t[fn])}(n)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const f=l.crossesNgTemplate?SE(i,n,o,[]):j0(i,n,l,o);t.reset(f,W_),t.notifyOnChanges()}return!0}return!1}function H0(t,n,i,o){const l=zn();if(l.firstCreatePass){const f=Yn();(function W0(t,n,i){null===t.queries&&(t.queries=new CE),t.queries.track(new bE(n,i))})(l,new B0(n,i,o),f.index),function dT(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(l,t),2==(2&i)&&(l.staticContentQueries=!0)}!function z0(t,n,i){const o=new wE(4==(4&i));(function Em(t,n,i,o){const l=Ey(n);l.push(i),t.firstCreatePass&&Sm(t).push(o,l.length-1)})(t,n,o,o.destroy),null===n[Ai]&&(n[Ai]=new TE),n[Ai].queries.push(new DE(o))}(l,ft(),i)}function G0(){return function cT(t,n){return t[Ai].queries[n].queryList}(ft(),$l())}function K0(t,n){return t.queries.getByIndex(n)}function RE(t){return!!Bn(t)}const cw=new mt("Application Initializer");let OE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=he(cw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const l of this.appInits){const f=l();if(xu(f))i.push(f);else if(za(f)){const y=new Promise((w,C)=>{f.subscribe({complete:w,error:C})});i.push(y)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(l=>{this.reject(l)}),0===i.length&&o(),this.initialized=!0}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dw=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const fv=new mt("LocaleId",{providedIn:"root",factory:()=>he(fv,on.Optional|on.SkipSelf)||function xT(){return typeof $localize<"u"&&$localize.locale||ag}()}),OT=new mt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let hw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class FT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let VT=(()=>{class t{compileModuleSync(i){return new EE(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=Su(Bn(i).declarations).reduce((y,w)=>{const C=Mn(w);return C&&y.push(new q(C)),y},[]);return new FT(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const mw=new mt(""),_w=new mt("");let VE,sC=(()=>{class t{constructor(i,o,l){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,VE||(function oC(t){VE=t}(l),l.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Li.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,l){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:l})}whenStable(i,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,l){return[]}static#e=this.\u0275fac=function(o){return new(o||t)(Pt(Li),Pt(yw),Pt(_w))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),yw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return VE?.findTestabilityInTree(this,i,o)??null}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Zd=null;const vw=new mt("AllowMultipleToken"),LE=new mt("PlatformDestroyListeners"),UE=new mt("appBootstrapListener");class lC{constructor(n,i){this.name=n,this.token=i}}function ww(t,n,i=[]){const o=`Platform: ${n}`,l=new mt(o);return(f=[])=>{let y=BE();if(!y||y.injector.get(vw,!1)){const w=[...i,...f,{provide:l,useValue:!0}];t?t(w):function cC(t){if(Zd&&!Zd.get(vw,!1))throw new Re(400,!1);(function Ew(){!function Ol(t){Bu=t}(()=>{throw new Re(600,!1)})})(),Zd=t;const n=t.get(Dw);(function Iw(t){t.get(Bh,null)?.forEach(i=>i())})(t)}(function Aw(t=[],n){return to.create({name:n,providers:[{provide:em,useValue:"platform"},{provide:LE,useValue:new Set([()=>Zd=null])},...t]})}(w,o))}return function hC(t){const n=BE();if(!n)throw new Re(401,!1);return n}()}}function BE(){return Zd?.get(Dw)??null}let Dw=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const l=function fC(t="zone.js",n){return"noop"===t?new mc:"zone.js"===t?new Li(n):t}(o?.ngZone,function Tw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return l.run(()=>{const f=function _D(t,n,i){return new vE(t,n,i)}(i.moduleType,this.injector,function Pw(t){return[{provide:Li,useFactory:t},{provide:Ad,multi:!0,useFactory:()=>{const n=he(gC,{optional:!0});return()=>n.initialize()}},{provide:Rw,useFactory:pC},{provide:ja,useFactory:Od}]}(()=>l)),y=f.injector.get(Il,null);return l.runOutsideAngular(()=>{const w=l.onError.subscribe({next:C=>{y.handleError(C)}});f.onDestroy(()=>{gv(this._modules,f),w.unsubscribe()})}),function Cw(t,n,i){try{const o=i();return xu(o)?o.catch(l=>{throw n.runOutsideAngular(()=>t.handleError(l)),l}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(y,l,()=>{const w=f.injector.get(OE);return w.runInitializers(),w.donePromise.then(()=>(function $I(t){se(t,"Expected localeId to be defined"),"string"==typeof t&&(jI=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(fv,ag)||ag),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const l=bw({},o);return function aC(t,n,i){const o=new EE(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(i){const o=i.injector.get(cg);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!i.instance.ngDoBootstrap)throw new Re(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(LE,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(o){return new(o||t)(Pt(to))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function bw(t,n){return Array.isArray(n)?n.reduce(bw,t):{...t,...n}}let cg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=he(Rw),this.zoneIsStable=he(ja),this.componentTypes=[],this.components=[],this.isStable=he(hw).hasPendingTasks.pipe((0,Ae.n)(i=>i?(0,_e.of)(!1):this.zoneIsStable),(0,Ve.F)(),(0,Se.u)()),this._injector=he(ga)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const l=i instanceof fp;if(!this._injector.get(OE).done)throw!l&&ss(i),new Re(405,!1);let y;y=l?i:this._injector.get(Rd).resolveComponentFactory(i),this.componentTypes.push(y.componentType);const w=function uC(t){return t.isBoundToModule}(y)?void 0:this._injector.get(vf),k=y.create(to.NULL,[],o||y.selector,w),K=k.location.nativeElement,ne=k.injector.get(mw,null);return ne?.registerApplication(K),k.onDestroy(()=>{this.detachView(k.hostView),gv(this.components,k),ne?.unregisterApplication(K)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new Re(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;gv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(UE,[]);o.push(...this._bootstrapListeners),o.forEach(l=>l(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>gv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Re(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const Rw=new mt("",{providedIn:"root",factory:()=>he(Il).handleError.bind(void 0)});function pC(){const t=he(Li),n=he(Il);return i=>t.runOutsideAngular(()=>n.handleError(i))}let gC=(()=>{class t{constructor(){this.zone=he(Li),this.applicationRef=he(cg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _C(){return!1}let yC=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=vC}return t})();function vC(t){return function EC(t,n,i){if(jn(t)&&!i){const o=mr(t.index,n);return new u(o,o)}return 47&t.type?new u(n[sr],n):null}(Yn(),ft(),16==(16&t))}class kw{constructor(){}supports(n){return Vp(n)}create(n){return new TC(n)}}const DC=(t,n)=>n;class TC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||DC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,l=0,f=null;for(;i||o;){const y=!o||i&&i.currentIndex<Vw(o,l,f)?i:o,w=Vw(y,l,f),C=y.currentIndex;if(y===o)l--,o=o._nextRemoved;else if(i=i._next,null==y.previousIndex)l++;else{f||(f=[]);const k=w-l,K=C-l;if(k!=K){for(let De=0;De<k;De++){const Ue=De<f.length?f[De]:f[De]=0,ct=Ue+De;K<=ct&&ct<k&&(f[De]=Ue+1)}f[y.previousIndex]=K-k}}w!==C&&n(y,w,C)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Vp(n))throw new Re(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let l,f,y,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let w=0;w<this.length;w++)f=n[w],y=this._trackByFn(w,f),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,f,y,w)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,y,w),o=!0),i=i._next}else l=0,function Ns(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,w=>{y=this._trackByFn(l,w),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,w,y,l)),Object.is(i.item,w)||this._addIdentityChange(i,w)):(i=this._mismatch(i,w,y,l),o=!0),i=i._next,l++}),this.length=l;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,l){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,l)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,l))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,l)):n=this._addAfter(new CC(i,o),f,l),n}_verifyReinsertion(n,i,o,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,l):n.currentIndex!=l&&(n.currentIndex=l,this._addToMoves(n,l)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const l=n._prevRemoved,f=n._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const l=null===i?this._itHead:i._next;return n._next=l,n._prev=i,null===l?this._itTail=n:l._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new Fw),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class Fw{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new bC,this.map.set(i,o)),o.add(n)}get(n,i){const l=this.map.get(n);return l?l.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vw(t,n,i){const o=t.previousIndex;if(null===o)return o;let l=0;return i&&o<i.length&&(l=i[o]),o+n+l}class Lw{constructor(){}supports(n){return n instanceof Map||Nm(n)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||Nm(n)))throw new Re(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,l)=>{if(i&&i.key===l)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(l,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const l=this._records.get(n);this._maybeAddToChanges(l,i);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uw(){return new zE([new kw])}let zE=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:Uw});constructor(i){this.factories=i}static create(i,o){if(null!=o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||Uw()),deps:[[t,new gu,new Fa]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(null!=o)return o;throw new Re(901,!1)}}return t})();function Bw(){return new WE([new Lw])}let WE=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:Bw});constructor(i){this.factories=i}static create(i,o){if(o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||Bw()),deps:[[t,new gu,new Fa]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(o)return o;throw new Re(901,!1)}}return t})();const NC=ww(null,"core",[]);let xC=(()=>{class t{constructor(i){}static#e=this.\u0275fac=function(o){return new(o||t)(Pt(cg))};static#t=this.\u0275mod=bo({type:t});static#n=this.\u0275inj=dn({})}return t})();function GC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const n=Mn(t);if(!n)return null;const i=new q(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1977:($t,ze,B)=>{B.d(ze,{DS:()=>Wn,X8:()=>Dn,$z:()=>Je,UB:()=>cn,yy:()=>vt,ZP:()=>Lt,AU:()=>Zt,CP:()=>nt,gF:()=>an}),B(3200);var oe=B(177),R=B(7705),J=B(1825),F=B(9253),_e=B(1413),Se=B(7673),Ae=B(1985),Ve=B(8455),ie=B(7786),ce=B(941),we=B(5558),at=B(6354),He=B(6129);class _t extends _e.B{constructor(Vt=1/0,de=1/0,ye=He.U){super(),this._bufferSize=Vt,this._windowTime=de,this._timestampProvider=ye,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=de===1/0,this._bufferSize=Math.max(1,Vt),this._windowTime=Math.max(1,de)}next(Vt){const{isStopped:de,_buffer:ye,_infiniteTimeWindow:ke,_timestampProvider:Me,_windowTime:le}=this;de||(ye.push(Vt),!ke&&ye.push(Me.now()+le)),this._trimBuffer(),super.next(Vt)}_subscribe(Vt){this._throwIfClosed(),this._trimBuffer();const de=this._innerSubscribe(Vt),{_infiniteTimeWindow:ye,_buffer:ke}=this,Me=ke.slice();for(let le=0;le<Me.length&&!Vt.closed;le+=ye?1:2)Vt.next(Me[le]);return this._checkFinalizedStatuses(Vt),de}_trimBuffer(){const{_bufferSize:Vt,_timestampProvider:de,_buffer:ye,_infiniteTimeWindow:ke}=this,Me=(ke?1:2)*Vt;if(Vt<1/0&&Me<ye.length&&ye.splice(0,ye.length-Me),!ke){const le=de.now();let xe=0;for(let se=1;se<ye.length&&ye[se]<=le;se+=2)xe=se;xe&&ye.splice(0,xe+1)}}}var lt=B(7647);function yt(Ft,Vt,de){let ye,ke=!1;return Ft&&"object"==typeof Ft?({bufferSize:ye=1/0,windowTime:Vt=1/0,refCount:ke=!1,scheduler:de}=Ft):ye=Ft??1/0,(0,lt.u)({connector:()=>new _t(ye,Vt,de),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ke})}var gt=B(1594),qt=B(8071);function Ce(Ft,Vt){return(0,qt.T)(Vt)?(0,we.n)(()=>Ft,Vt):(0,we.n)(()=>Ft)}var Re=B(6745),tt=B(5964),Te=B(7935);const nt=new R.nKC("angularfire2.auth.use-emulator"),vt=new R.nKC("angularfire2.auth.settings"),Lt=new R.nKC("angularfire2.auth.tenant-id"),Je=new R.nKC("angularfire2.auth.langugage-code"),Zt=new R.nKC("angularfire2.auth.use-device-language"),cn=new R.nKC("angularfire.auth.persistence"),an=(Ft,Vt,de,ye,ke,Me,le,xe)=>(0,F.BM)(`${Ft.name}.auth`,"AngularFireAuth",Ft.name,()=>{const se=Vt.runOutsideAngular(()=>Ft.auth());if(de&&se.useEmulator(...de),ye&&(se.tenantId=ye),se.languageCode=ke,Me&&se.useDeviceLanguage(),le)for(const[ve,Tt]of Object.entries(le))se.settings[ve]=Tt;return xe&&se.setPersistence(xe),se},[de,ye,ke,Me,le,xe]);let Wn=(()=>{class Ft{authState;idToken;user;idTokenResult;credential;constructor(de,ye,ke,Me,le,xe,se,ve,Tt,xt,Ke,Ot){const Un=new _e.B,dn=(0,Se.of)(void 0).pipe((0,ce.Q)(le.outsideAngular),(0,we.n)(()=>Me.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,3200)))),(0,at.T)(()=>(0,F.iB)(de,Me,ye)),(0,at.T)(pt=>an(pt,Me,xe,ve,Tt,xt,se,Ke)),yt({bufferSize:1,refCount:!1}));if((0,oe.Vy)(ke))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Se.of)(null);else{dn.pipe((0,gt.$)()).subscribe();const pt=dn.pipe((0,we.n)(ut=>ut.getRedirectResult().then(Le=>Le,()=>null)),J.U0,yt({bufferSize:1,refCount:!1})),It=dn.pipe((0,we.n)(ut=>new Ae.c(Le=>({unsubscribe:Me.runOutsideAngular(()=>ut.onAuthStateChanged(qe=>Le.next(qe),qe=>Le.error(qe),()=>Le.complete()))})))),Gt=dn.pipe((0,we.n)(ut=>new Ae.c(Le=>({unsubscribe:Me.runOutsideAngular(()=>ut.onIdTokenChanged(qe=>Le.next(qe),qe=>Le.error(qe),()=>Le.complete()))}))));this.authState=pt.pipe(Ce(It),(0,Re._)(le.outsideAngular),(0,ce.Q)(le.insideAngular)),this.user=pt.pipe(Ce(Gt),(0,Re._)(le.outsideAngular),(0,ce.Q)(le.insideAngular)),this.idToken=this.user.pipe((0,we.n)(ut=>ut?(0,Ve.H)(ut.getIdToken()):(0,Se.of)(null))),this.idTokenResult=this.user.pipe((0,we.n)(ut=>ut?(0,Ve.H)(ut.getIdTokenResult()):(0,Se.of)(null))),this.credential=(0,ie.h)(pt,Un,this.authState.pipe((0,tt.p)(ut=>!ut))).pipe((0,at.T)(ut=>ut?.user?ut:null),(0,Re._)(le.outsideAngular),(0,ce.Q)(le.insideAngular))}return(0,F.Gt)(this,dn,Me,{spy:{apply:(pt,It,Gt)=>{(pt.startsWith("signIn")||pt.startsWith("createUser"))&&Gt.then(ut=>Un.next(ut))}}})}static \u0275fac=function(ye){return new(ye||Ft)(R.KVO(F.rx),R.KVO(F.uP,8),R.KVO(R.Agw),R.KVO(R.SKi),R.KVO(J.u0),R.KVO(nt,8),R.KVO(vt,8),R.KVO(Lt,8),R.KVO(Je,8),R.KVO(Zt,8),R.KVO(cn,8),R.KVO(J.Jv,8))};static \u0275prov=R.jDH({token:Ft,factory:Ft.\u0275fac,providedIn:"any"})}return Ft})(),Dn=(()=>{class Ft{constructor(){Te.A.registerVersion("angularfire",J.xv.full,"auth-compat")}static \u0275fac=function(ye){return new(ye||Ft)};static \u0275mod=R.$C({type:Ft});static \u0275inj=R.G2t({providers:[Wn]})}return Ft})()},8079:($t,ze,B)=>{B.d(ze,{Qe:()=>Mm,cM:()=>Ty});var g=B(177),oe=B(7705),R=B(1825),J=B(9253),F=B(1977),_e=B(3236),Se=B(1985),Ae=B(8455),Ve=B(7673),ie=B(9172),ce=B(9974),we=B(4360);function at(){return(0,ce.N)((a,e)=>{let r,s=!1;a.subscribe((0,we._)(e,u=>{const h=r;r=u,s&&e.next([h,u]),s=!0}))})}var Lt,Je,He=B(6354),_t=B(2816),lt=B(3294),yt=B(5964),qt=(B(3200),B(3345)),Ce=B(467),Re=B(7852),tt=B(1362),Te=B(8041),Fe=B(1076),nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vt={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(Pe,pe,Ie){Ie||(Ie=0);var Oe=Array(16);if("string"==typeof pe)for(var Be=0;16>Be;++Be)Oe[Be]=pe.charCodeAt(Ie++)|pe.charCodeAt(Ie++)<<8|pe.charCodeAt(Ie++)<<16|pe.charCodeAt(Ie++)<<24;else for(Be=0;16>Be;++Be)Oe[Be]=pe[Ie++]|pe[Ie++]<<8|pe[Ie++]<<16|pe[Ie++]<<24;var Xe=Pe.g[3],Ee=(pe=Pe.g[0])+(Xe^(Ie=Pe.g[1])&((Be=Pe.g[2])^Xe))+Oe[0]+3614090360&4294967295;Ee=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=(Ie=(Be=(Xe=(pe=Ie+(Ee<<7&4294967295|Ee>>>25))+((Ee=Xe+(Be^pe&(Ie^Be))+Oe[1]+3905402710&4294967295)<<12&4294967295|Ee>>>20))+((Ee=Be+(Ie^Xe&(pe^Ie))+Oe[2]+606105819&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(pe^Be&(Xe^pe))+Oe[3]+3250441966&4294967295)<<22&4294967295|Ee>>>10))+((Ee=pe+(Xe^Ie&(Be^Xe))+Oe[4]+4118548399&4294967295)<<7&4294967295|Ee>>>25))+((Ee=Xe+(Be^pe&(Ie^Be))+Oe[5]+1200080426&4294967295)<<12&4294967295|Ee>>>20))+((Ee=Be+(Ie^Xe&(pe^Ie))+Oe[6]+2821735955&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(pe^Be&(Xe^pe))+Oe[7]+4249261313&4294967295)<<22&4294967295|Ee>>>10))+((Ee=pe+(Xe^Ie&(Be^Xe))+Oe[8]+1770035416&4294967295)<<7&4294967295|Ee>>>25))+((Ee=Xe+(Be^pe&(Ie^Be))+Oe[9]+2336552879&4294967295)<<12&4294967295|Ee>>>20))+((Ee=Be+(Ie^Xe&(pe^Ie))+Oe[10]+4294925233&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(pe^Be&(Xe^pe))+Oe[11]+2304563134&4294967295)<<22&4294967295|Ee>>>10))+((Ee=pe+(Xe^Ie&(Be^Xe))+Oe[12]+1804603682&4294967295)<<7&4294967295|Ee>>>25))+((Ee=Xe+(Be^pe&(Ie^Be))+Oe[13]+4254626195&4294967295)<<12&4294967295|Ee>>>20))+((Ee=Be+(Ie^Xe&(pe^Ie))+Oe[14]+2792965006&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(pe^Be&(Xe^pe))+Oe[15]+1236535329&4294967295)<<22&4294967295|Ee>>>10))+((Ee=pe+(Be^Xe&(Ie^Be))+Oe[1]+4129170786&4294967295)<<5&4294967295|Ee>>>27))+((Ee=Xe+(Ie^Be&(pe^Ie))+Oe[6]+3225465664&4294967295)<<9&4294967295|Ee>>>23))+((Ee=Be+(pe^Ie&(Xe^pe))+Oe[11]+643717713&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(Xe^pe&(Be^Xe))+Oe[0]+3921069994&4294967295)<<20&4294967295|Ee>>>12))+((Ee=pe+(Be^Xe&(Ie^Be))+Oe[5]+3593408605&4294967295)<<5&4294967295|Ee>>>27))+((Ee=Xe+(Ie^Be&(pe^Ie))+Oe[10]+38016083&4294967295)<<9&4294967295|Ee>>>23))+((Ee=Be+(pe^Ie&(Xe^pe))+Oe[15]+3634488961&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(Xe^pe&(Be^Xe))+Oe[4]+3889429448&4294967295)<<20&4294967295|Ee>>>12))+((Ee=pe+(Be^Xe&(Ie^Be))+Oe[9]+568446438&4294967295)<<5&4294967295|Ee>>>27))+((Ee=Xe+(Ie^Be&(pe^Ie))+Oe[14]+3275163606&4294967295)<<9&4294967295|Ee>>>23))+((Ee=Be+(pe^Ie&(Xe^pe))+Oe[3]+4107603335&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(Xe^pe&(Be^Xe))+Oe[8]+1163531501&4294967295)<<20&4294967295|Ee>>>12))+((Ee=pe+(Be^Xe&(Ie^Be))+Oe[13]+2850285829&4294967295)<<5&4294967295|Ee>>>27))+((Ee=Xe+(Ie^Be&(pe^Ie))+Oe[2]+4243563512&4294967295)<<9&4294967295|Ee>>>23))+((Ee=Be+(pe^Ie&(Xe^pe))+Oe[7]+1735328473&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(Xe^pe&(Be^Xe))+Oe[12]+2368359562&4294967295)<<20&4294967295|Ee>>>12))+((Ee=pe+(Ie^Be^Xe)+Oe[5]+4294588738&4294967295)<<4&4294967295|Ee>>>28))+((Ee=Xe+(pe^Ie^Be)+Oe[8]+2272392833&4294967295)<<11&4294967295|Ee>>>21))+((Ee=Be+(Xe^pe^Ie)+Oe[11]+1839030562&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(Be^Xe^pe)+Oe[14]+4259657740&4294967295)<<23&4294967295|Ee>>>9))+((Ee=pe+(Ie^Be^Xe)+Oe[1]+2763975236&4294967295)<<4&4294967295|Ee>>>28))+((Ee=Xe+(pe^Ie^Be)+Oe[4]+1272893353&4294967295)<<11&4294967295|Ee>>>21))+((Ee=Be+(Xe^pe^Ie)+Oe[7]+4139469664&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(Be^Xe^pe)+Oe[10]+3200236656&4294967295)<<23&4294967295|Ee>>>9))+((Ee=pe+(Ie^Be^Xe)+Oe[13]+681279174&4294967295)<<4&4294967295|Ee>>>28))+((Ee=Xe+(pe^Ie^Be)+Oe[0]+3936430074&4294967295)<<11&4294967295|Ee>>>21))+((Ee=Be+(Xe^pe^Ie)+Oe[3]+3572445317&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(Be^Xe^pe)+Oe[6]+76029189&4294967295)<<23&4294967295|Ee>>>9))+((Ee=pe+(Ie^Be^Xe)+Oe[9]+3654602809&4294967295)<<4&4294967295|Ee>>>28))+((Ee=Xe+(pe^Ie^Be)+Oe[12]+3873151461&4294967295)<<11&4294967295|Ee>>>21))+((Ee=Be+(Xe^pe^Ie)+Oe[15]+530742520&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(Be^Xe^pe)+Oe[2]+3299628645&4294967295)<<23&4294967295|Ee>>>9))+((Ee=pe+(Be^(Ie|~Xe))+Oe[0]+4096336452&4294967295)<<6&4294967295|Ee>>>26))+((Ee=Xe+(Ie^(pe|~Be))+Oe[7]+1126891415&4294967295)<<10&4294967295|Ee>>>22))+((Ee=Be+(pe^(Xe|~Ie))+Oe[14]+2878612391&4294967295)<<15&4294967295|Ee>>>17))+((Ee=Ie+(Xe^(Be|~pe))+Oe[5]+4237533241&4294967295)<<21&4294967295|Ee>>>11))+((Ee=pe+(Be^(Ie|~Xe))+Oe[12]+1700485571&4294967295)<<6&4294967295|Ee>>>26))+((Ee=Xe+(Ie^(pe|~Be))+Oe[3]+2399980690&4294967295)<<10&4294967295|Ee>>>22))+((Ee=Be+(pe^(Xe|~Ie))+Oe[10]+4293915773&4294967295)<<15&4294967295|Ee>>>17))+((Ee=Ie+(Xe^(Be|~pe))+Oe[1]+2240044497&4294967295)<<21&4294967295|Ee>>>11))+((Ee=pe+(Be^(Ie|~Xe))+Oe[8]+1873313359&4294967295)<<6&4294967295|Ee>>>26))+((Ee=Xe+(Ie^(pe|~Be))+Oe[15]+4264355552&4294967295)<<10&4294967295|Ee>>>22))+((Ee=Be+(pe^(Xe|~Ie))+Oe[6]+2734768916&4294967295)<<15&4294967295|Ee>>>17))+((Ee=Ie+(Xe^(Be|~pe))+Oe[13]+1309151649&4294967295)<<21&4294967295|Ee>>>11))+((Xe=(pe=Ie+((Ee=pe+(Be^(Ie|~Xe))+Oe[4]+4149444226&4294967295)<<6&4294967295|Ee>>>26))+((Ee=Xe+(Ie^(pe|~Be))+Oe[11]+3174756917&4294967295)<<10&4294967295|Ee>>>22))^((Be=Xe+((Ee=Be+(pe^(Xe|~Ie))+Oe[2]+718787259&4294967295)<<15&4294967295|Ee>>>17))|~pe))+Oe[9]+3951481745&4294967295,Pe.g[0]=Pe.g[0]+pe&4294967295,Pe.g[1]=Pe.g[1]+(Be+(Ee<<21&4294967295|Ee>>>11))&4294967295,Pe.g[2]=Pe.g[2]+Be&4294967295,Pe.g[3]=Pe.g[3]+Xe&4294967295}function m(Pe,pe){this.h=pe;for(var Ie=[],Oe=!0,Be=Pe.length-1;0<=Be;Be--){var Xe=0|Pe[Be];Oe&&Xe==pe||(Ie[Be]=Xe,Oe=!1)}this.g=Ie}(function e(Pe,pe){function Ie(){}Ie.prototype=pe.prototype,Pe.D=pe.prototype,Pe.prototype=new Ie,Pe.prototype.constructor=Pe,Pe.C=function(Oe,Be,Xe){for(var Ee=Array(arguments.length-2),Ha=2;Ha<arguments.length;Ha++)Ee[Ha-2]=arguments[Ha];return pe.prototype[Be].apply(Oe,Ee)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(Pe,pe){void 0===pe&&(pe=Pe.length);for(var Ie=pe-this.blockSize,Oe=this.B,Be=this.h,Xe=0;Xe<pe;){if(0==Be)for(;Xe<=Ie;)u(this,Pe,Xe),Xe+=this.blockSize;if("string"==typeof Pe){for(;Xe<pe;)if(Oe[Be++]=Pe.charCodeAt(Xe++),Be==this.blockSize){u(this,Oe),Be=0;break}}else for(;Xe<pe;)if(Oe[Be++]=Pe[Xe++],Be==this.blockSize){u(this,Oe),Be=0;break}}this.h=Be,this.o+=pe},s.prototype.v=function(){var Pe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Pe[0]=128;for(var pe=1;pe<Pe.length-8;++pe)Pe[pe]=0;var Ie=8*this.o;for(pe=Pe.length-8;pe<Pe.length;++pe)Pe[pe]=255&Ie,Ie/=256;for(this.u(Pe),Pe=Array(16),pe=Ie=0;4>pe;++pe)for(var Oe=0;32>Oe;Oe+=8)Pe[Ie++]=this.g[pe]>>>Oe&255;return Pe};var A={};function S(Pe){return-128<=Pe&&128>Pe?function h(Pe,pe){var Ie=A;return Object.prototype.hasOwnProperty.call(Ie,Pe)?Ie[Pe]:Ie[Pe]=pe(Pe)}(Pe,function(pe){return new m([0|pe],0>pe?-1:0)}):new m([0|Pe],0>Pe?-1:0)}function V(Pe){if(isNaN(Pe)||!isFinite(Pe))return te;if(0>Pe)return At(V(-Pe));for(var pe=[],Ie=1,Oe=0;Pe>=Ie;Oe++)pe[Oe]=Pe/Ie|0,Ie*=4294967296;return new m(pe,0)}var te=S(0),ge=S(1),$e=S(16777216);function ht(Pe){if(0!=Pe.h)return!1;for(var pe=0;pe<Pe.g.length;pe++)if(0!=Pe.g[pe])return!1;return!0}function St(Pe){return-1==Pe.h}function At(Pe){for(var pe=Pe.g.length,Ie=[],Oe=0;Oe<pe;Oe++)Ie[Oe]=~Pe.g[Oe];return new m(Ie,~Pe.h).add(ge)}function en(Pe,pe){return Pe.add(At(pe))}function un(Pe,pe){for(;(65535&Pe[pe])!=Pe[pe];)Pe[pe+1]+=Pe[pe]>>>16,Pe[pe]&=65535,pe++}function Jt(Pe,pe){this.g=Pe,this.h=pe}function wn(Pe,pe){if(ht(pe))throw Error("division by zero");if(ht(Pe))return new Jt(te,te);if(St(Pe))return pe=wn(At(Pe),pe),new Jt(At(pe.g),At(pe.h));if(St(pe))return pe=wn(Pe,At(pe)),new Jt(At(pe.g),pe.h);if(30<Pe.g.length){if(St(Pe)||St(pe))throw Error("slowDivide_ only works with positive integers.");for(var Ie=ge,Oe=pe;0>=Oe.l(Pe);)Ie=tr(Ie),Oe=tr(Oe);var Be=Vn(Ie,1),Xe=Vn(Oe,1);for(Oe=Vn(Oe,2),Ie=Vn(Ie,2);!ht(Oe);){var Ee=Xe.add(Oe);0>=Ee.l(Pe)&&(Be=Be.add(Ie),Xe=Ee),Oe=Vn(Oe,1),Ie=Vn(Ie,1)}return pe=en(Pe,Be.j(pe)),new Jt(Be,pe)}for(Be=te;0<=Pe.l(pe);){for(Ie=Math.max(1,Math.floor(Pe.m()/pe.m())),Oe=48>=(Oe=Math.ceil(Math.log(Ie)/Math.LN2))?1:Math.pow(2,Oe-48),Ee=(Xe=V(Ie)).j(pe);St(Ee)||0<Ee.l(Pe);)Ee=(Xe=V(Ie-=Oe)).j(pe);ht(Xe)&&(Xe=ge),Be=Be.add(Xe),Pe=en(Pe,Ee)}return new Jt(Be,Pe)}function tr(Pe){for(var pe=Pe.g.length+1,Ie=[],Oe=0;Oe<pe;Oe++)Ie[Oe]=Pe.i(Oe)<<1|Pe.i(Oe-1)>>>31;return new m(Ie,Pe.h)}function Vn(Pe,pe){var Ie=pe>>5;pe%=32;for(var Oe=Pe.g.length-Ie,Be=[],Xe=0;Xe<Oe;Xe++)Be[Xe]=0<pe?Pe.i(Xe+Ie)>>>pe|Pe.i(Xe+Ie+1)<<32-pe:Pe.i(Xe+Ie);return new m(Be,Pe.h)}(a=m.prototype).m=function(){if(St(this))return-At(this).m();for(var Pe=0,pe=1,Ie=0;Ie<this.g.length;Ie++){var Oe=this.i(Ie);Pe+=(0<=Oe?Oe:4294967296+Oe)*pe,pe*=4294967296}return Pe},a.toString=function(Pe){if(2>(Pe=Pe||10)||36<Pe)throw Error("radix out of range: "+Pe);if(ht(this))return"0";if(St(this))return"-"+At(this).toString(Pe);for(var pe=V(Math.pow(Pe,6)),Ie=this,Oe="";;){var Be=wn(Ie,pe).g,Xe=((0<(Ie=en(Ie,Be.j(pe))).g.length?Ie.g[0]:Ie.h)>>>0).toString(Pe);if(ht(Ie=Be))return Xe+Oe;for(;6>Xe.length;)Xe="0"+Xe;Oe=Xe+Oe}},a.i=function(Pe){return 0>Pe?0:Pe<this.g.length?this.g[Pe]:this.h},a.l=function(Pe){return St(Pe=en(this,Pe))?-1:ht(Pe)?0:1},a.abs=function(){return St(this)?At(this):this},a.add=function(Pe){for(var pe=Math.max(this.g.length,Pe.g.length),Ie=[],Oe=0,Be=0;Be<=pe;Be++){var Xe=Oe+(65535&this.i(Be))+(65535&Pe.i(Be)),Ee=(Xe>>>16)+(this.i(Be)>>>16)+(Pe.i(Be)>>>16);Oe=Ee>>>16,Ie[Be]=(Ee&=65535)<<16|(Xe&=65535)}return new m(Ie,-2147483648&Ie[Ie.length-1]?-1:0)},a.j=function(Pe){if(ht(this)||ht(Pe))return te;if(St(this))return St(Pe)?At(this).j(At(Pe)):At(At(this).j(Pe));if(St(Pe))return At(this.j(At(Pe)));if(0>this.l($e)&&0>Pe.l($e))return V(this.m()*Pe.m());for(var pe=this.g.length+Pe.g.length,Ie=[],Oe=0;Oe<2*pe;Oe++)Ie[Oe]=0;for(Oe=0;Oe<this.g.length;Oe++)for(var Be=0;Be<Pe.g.length;Be++){var Xe=this.i(Oe)>>>16,Ee=65535&this.i(Oe),Ha=Pe.i(Be)>>>16,jd=65535&Pe.i(Be);Ie[2*Oe+2*Be]+=Ee*jd,un(Ie,2*Oe+2*Be),Ie[2*Oe+2*Be+1]+=Xe*jd,un(Ie,2*Oe+2*Be+1),Ie[2*Oe+2*Be+1]+=Ee*Ha,un(Ie,2*Oe+2*Be+1),Ie[2*Oe+2*Be+2]+=Xe*Ha,un(Ie,2*Oe+2*Be+2)}for(Oe=0;Oe<pe;Oe++)Ie[Oe]=Ie[2*Oe+1]<<16|Ie[2*Oe];for(Oe=pe;Oe<2*pe;Oe++)Ie[Oe]=0;return new m(Ie,0)},a.A=function(Pe){return wn(this,Pe).h},a.and=function(Pe){for(var pe=Math.max(this.g.length,Pe.g.length),Ie=[],Oe=0;Oe<pe;Oe++)Ie[Oe]=this.i(Oe)&Pe.i(Oe);return new m(Ie,this.h&Pe.h)},a.or=function(Pe){for(var pe=Math.max(this.g.length,Pe.g.length),Ie=[],Oe=0;Oe<pe;Oe++)Ie[Oe]=this.i(Oe)|Pe.i(Oe);return new m(Ie,this.h|Pe.h)},a.xor=function(Pe){for(var pe=Math.max(this.g.length,Pe.g.length),Ie=[],Oe=0;Oe<pe;Oe++)Ie[Oe]=this.i(Oe)^Pe.i(Oe);return new m(Ie,this.h^Pe.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Je=vt.Md5=s,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=V,m.fromString=function q(Pe,pe){if(0==Pe.length)throw Error("number format error: empty string");if(2>(pe=pe||10)||36<pe)throw Error("radix out of range: "+pe);if("-"==Pe.charAt(0))return At(q(Pe.substring(1),pe));if(0<=Pe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ie=V(Math.pow(pe,8)),Oe=te,Be=0;Be<Pe.length;Be+=8){var Xe=Math.min(8,Pe.length-Be),Ee=parseInt(Pe.substring(Be,Be+Xe),pe);8>Xe?(Xe=V(Math.pow(pe,Xe)),Oe=Oe.j(Xe).add(V(Ee))):Oe=(Oe=Oe.j(Ie)).add(V(Ee))}return Oe},Lt=vt.Integer=m}).apply(typeof nt<"u"?nt:typeof self<"u"?self:typeof window<"u"?window:{});var an,Wn,Dn,Ft,Vt,de,ye,ke,Me,Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,P,U){return p==Array.prototype||p==Object.prototype||(p[P]=U.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Zt&&Zt];for(var P=0;P<p.length;++P){var U=p[P];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}(this);!function u(p,P){if(P)e:{var U=s;p=p.split(".");for(var ee=0;ee<p.length-1;ee++){var je=p[ee];if(!(je in U))break e;U=U[je]}(P=P(ee=U[p=p[p.length-1]]))!=ee&&null!=P&&e(U,p,{configurable:!0,writable:!0,value:P})}}("Array.prototype.values",function(p){return p||function(){return function h(p,P){p instanceof String&&(p+="");var U=0,ee=!1,je={next:function(){if(!ee&&U<p.length){var rt=U++;return{value:P(rt,p[rt]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return je[Symbol.iterator]=function(){return je},je}(this,function(P,U){return U})}});var m=m||{},A=this||self;function S(p){var P=typeof p;return"array"==(P="object"!=P?P:p?Array.isArray(p)?"array":P:"null")||"object"==P&&"number"==typeof p.length}function V(p){var P=typeof p;return"object"==P&&null!=p||"function"==P}function q(p,P,U){return p.call.apply(p.bind,arguments)}function te(p,P,U){if(!p)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var je=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(je,ee),p.apply(P,je)}}return function(){return p.apply(P,arguments)}}function ge(p,P,U){return(ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?q:te).apply(null,arguments)}function $e(p,P){var U=Array.prototype.slice.call(arguments,1);return function(){var ee=U.slice();return ee.push.apply(ee,arguments),p.apply(this,ee)}}function ht(p,P){function U(){}U.prototype=P.prototype,p.aa=P.prototype,p.prototype=new U,p.prototype.constructor=p,p.Qb=function(ee,je,rt){for(var jt=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)jt[Br-2]=arguments[Br];return P.prototype[je].apply(ee,jt)}}function St(p){const P=p.length;if(0<P){const U=Array(P);for(let ee=0;ee<P;ee++)U[ee]=p[ee];return U}return[]}function At(p,P){for(let U=1;U<arguments.length;U++){const ee=arguments[U];if(S(ee)){const je=p.length||0,rt=ee.length||0;p.length=je+rt;for(let jt=0;jt<rt;jt++)p[je+jt]=ee[jt]}else p.push(ee)}}function un(p){return/^[\s\xa0]*$/.test(p)}function Jt(){var p=A.navigator;return p&&(p=p.userAgent)?p:""}function wn(p){return wn[" "](p),p}wn[" "]=function(){};var tr=!(-1==Jt().indexOf("Gecko")||-1!=Jt().toLowerCase().indexOf("webkit")&&-1==Jt().indexOf("Edge")||-1!=Jt().indexOf("Trident")||-1!=Jt().indexOf("MSIE")||-1!=Jt().indexOf("Edge"));function Vn(p,P,U){for(const ee in p)P.call(U,p[ee],ee,p)}function pe(p){const P={};for(const U in p)P[U]=p[U];return P}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oe(p,P){let U,ee;for(let je=1;je<arguments.length;je++){for(U in ee=arguments[je],ee)p[U]=ee[U];for(let rt=0;rt<Ie.length;rt++)U=Ie[rt],Object.prototype.hasOwnProperty.call(ee,U)&&(p[U]=ee[U])}}function Be(p){var P=1;p=p.split(":");const U=[];for(;0<P&&p.length;)U.push(p.shift()),P--;return p.length&&U.push(p.join(":")),U}function Xe(p){A.setTimeout(()=>{throw p},0)}function Ee(){var p=Fp;let P=null;return p.g&&(P=p.g,p.g=p.g.next,p.g||(p.h=null),P.next=null),P}var jd=new class en{constructor(P,U){this.i=P,this.j=U,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}(()=>new eE,p=>p.reset());class eE{constructor(){this.next=this.g=this.h=null}set(P,U){this.h=P,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let kp,$d=!1,Fp=new class Ha{constructor(){this.h=this.g=null}add(P,U){const ee=jd.get();ee.set(P,U),this.h?this.h.next=ee:this.g=ee,this.h=ee}},tE=()=>{const p=A.Promise.resolve(void 0);kp=()=>{p.then(Vp)}};var Vp=()=>{for(var p;p=Ee();){try{p.h.call(p.g)}catch(U){Xe(U)}var P=jd;P.j(p),100>P.h&&(P.h++,p.next=P.g,P.g=p)}$d=!1};function Tl(){this.s=this.s,this.C=this.C}function Ns(p,P){this.type=p,this.g=this.target=P,this.defaultPrevented=!1}Tl.prototype.s=!1,Tl.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tl.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ns.prototype.h=function(){this.defaultPrevented=!0};var Nm=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var p=!1,P=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const U=()=>{};A.addEventListener("test",U,P),A.removeEventListener("test",U,P)}catch{}return p}();function ef(p,P){if(Ns.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var U=this.type=p.type,ee=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=P,P=p.relatedTarget){if(tr){e:{try{wn(P.nodeName);var je=!0;break e}catch{}je=!1}je||(P=null)}}else"mouseover"==U?P=p.fromElement:"mouseout"==U&&(P=p.toElement);this.relatedTarget=P,ee?(this.clientX=void 0!==ee.clientX?ee.clientX:ee.pageX,this.clientY=void 0!==ee.clientY?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:Ga[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&ef.aa.h.call(this)}}ht(ef,Ns);var Ga={2:"touch",3:"pen",4:"mouse"};ef.prototype.h=function(){ef.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ru="closure_listenable_"+(1e6*Math.random()|0),xs=0;function yc(p,P,U,ee,je){this.listener=p,this.proxy=null,this.src=P,this.type=U,this.capture=!!ee,this.ha=je,this.key=++xs,this.da=this.fa=!1}function vc(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Gs(p){this.src=p,this.g={},this.h=0}function tf(p,P){var U=P.type;if(U in p.g){var rt,ee=p.g[U],je=Array.prototype.indexOf.call(ee,P,void 0);(rt=0<=je)&&Array.prototype.splice.call(ee,je,1),rt&&(vc(P),0==p.g[U].length&&(delete p.g[U],p.h--))}}function Cl(p,P,U,ee){for(var je=0;je<p.length;++je){var rt=p[je];if(!rt.da&&rt.listener==P&&rt.capture==!!U&&rt.ha==ee)return je}return-1}Gs.prototype.add=function(p,P,U,ee,je){var rt=p.toString();(p=this.g[rt])||(p=this.g[rt]=[],this.h++);var jt=Cl(p,P,ee,je);return-1<jt?(P=p[jt],U||(P.fa=!1)):((P=new yc(P,this.src,rt,!!ee,je)).fa=U,p.push(P)),P};var bl="closure_lm_"+(1e6*Math.random()|0),Sl={};function Ec(p,P,U,ee,je){if(ee&&ee.once)return wc(p,P,U,ee,je);if(Array.isArray(P)){for(var rt=0;rt<P.length;rt++)Ec(p,P[rt],U,ee,je);return null}return U=Bp(U),p&&p[Ru]?p.K(P,U,V(ee)?!!ee.capture:!!ee,je):Ic(p,P,U,!1,ee,je)}function Ic(p,P,U,ee,je,rt){if(!P)throw Error("Invalid event type");var jt=V(je)?!!je.capture:!!je,Br=Lp(p);if(Br||(p[bl]=Br=new Gs(p)),(U=Br.add(P,U,ee,jt,rt)).proxy)return U;if(ee=function Hd(){const P=Cy;return function p(U){return P.call(p.src,p.listener,U)}}(),U.proxy=ee,ee.src=p,ee.listener=U,p.addEventListener)Nm||(je=jt),void 0===je&&(je=!1),p.addEventListener(P.toString(),ee,je);else if(p.attachEvent)p.attachEvent(xm(P.toString()),ee);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(ee)}return U}function wc(p,P,U,ee,je){if(Array.isArray(P)){for(var rt=0;rt<P.length;rt++)wc(p,P[rt],U,ee,je);return null}return U=Bp(U),p&&p[Ru]?p.L(P,U,V(ee)?!!ee.capture:!!ee,je):Ic(p,P,U,!0,ee,je)}function Ac(p,P,U,ee,je){if(Array.isArray(P))for(var rt=0;rt<P.length;rt++)Ac(p,P[rt],U,ee,je);else ee=V(ee)?!!ee.capture:!!ee,U=Bp(U),p&&p[Ru]?(p=p.i,(P=String(P).toString())in p.g&&-1<(U=Cl(rt=p.g[P],U,ee,je))&&(vc(rt[U]),Array.prototype.splice.call(rt,U,1),0==rt.length&&(delete p.g[P],p.h--))):p&&(p=Lp(p))&&(P=p.g[P.toString()],p=-1,P&&(p=Cl(P,U,ee,je)),(U=-1<p?P[p]:null)&&Rl(U))}function Rl(p){if("number"!=typeof p&&p&&!p.da){var P=p.src;if(P&&P[Ru])tf(P.i,p);else{var U=p.type,ee=p.proxy;P.removeEventListener?P.removeEventListener(U,ee,p.capture):P.detachEvent?P.detachEvent(xm(U),ee):P.addListener&&P.removeListener&&P.removeListener(ee),(U=Lp(P))?(tf(U,p),0==U.h&&(U.src=null,P[bl]=null)):vc(p)}}}function xm(p){return p in Sl?Sl[p]:Sl[p]="on"+p}function Cy(p,P){if(p.da)p=!0;else{P=new ef(P,this);var U=p.listener,ee=p.ha||p.src;p.fa&&Rl(p),p=U.call(ee,P)}return p}function Lp(p){return(p=p[bl])instanceof Gs?p:null}var Up="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bp(p){return"function"==typeof p?p:(p[Up]||(p[Up]=function(P){return p.handleEvent(P)}),p[Up])}function _s(){Tl.call(this),this.i=new Gs(this),this.M=this,this.F=null}function Os(p,P){var U,ee=p.F;if(ee)for(U=[];ee;ee=ee.F)U.push(ee);if(p=p.M,ee=P.type||P,"string"==typeof P)P=new Ns(P,p);else if(P instanceof Ns)P.target=P.target||p;else{var je=P;Oe(P=new Ns(ee,p),je)}if(je=!0,U)for(var rt=U.length-1;0<=rt;rt--){var jt=P.g=U[rt];je=nf(jt,ee,!0,P)&&je}if(je=nf(jt=P.g=p,ee,!0,P)&&je,je=nf(jt,ee,!1,P)&&je,U)for(rt=0;rt<U.length;rt++)je=nf(jt=P.g=U[rt],ee,!1,P)&&je}function nf(p,P,U,ee){if(!(P=p.i.g[String(P)]))return!0;P=P.concat();for(var je=!0,rt=0;rt<P.length;++rt){var jt=P[rt];if(jt&&!jt.da&&jt.capture==U){var Br=jt.listener,ys=jt.ha||jt.src;jt.fa&&tf(p.i,jt),je=!1!==Br.call(ys,ee)&&je}}return je&&!ee.defaultPrevented}function Om(p,P,U){if("function"==typeof p)U&&(p=ge(p,U));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=ge(p.handleEvent,p)}return 2147483647<Number(P)?-1:A.setTimeout(p,P||0)}function jp(p){p.g=Om(()=>{p.g=null,p.i&&(p.i=!1,jp(p))},p.l);const P=p.h;p.h=null,p.m.apply(null,P)}ht(_s,Tl),_s.prototype[Ru]=!0,_s.prototype.removeEventListener=function(p,P,U,ee){Ac(this,p,P,U,ee)},_s.prototype.N=function(){if(_s.aa.N.call(this),this.i){var P,p=this.i;for(P in p.g){for(var U=p.g[P],ee=0;ee<U.length;ee++)vc(U[ee]);delete p.g[P],p.h--}}this.F=null},_s.prototype.K=function(p,P,U,ee){return this.i.add(String(p),P,!1,U,ee)},_s.prototype.L=function(p,P,U,ee){return this.i.add(String(p),P,!0,U,ee)};class nE extends Tl{constructor(P,U){super(),this.m=P,this.l=U,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:jp(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $p(p){Tl.call(this),this.h=p,this.g={}}ht($p,Tl);var rE=[];function by(p){Vn(p.g,function(P,U){this.g.hasOwnProperty(U)&&Rl(P)},p),p.g={}}$p.prototype.N=function(){$p.aa.N.call(this),by(this)},$p.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=A.JSON.stringify,II=A.JSON.parse,iE=class{stringify(p){return A.JSON.stringify(p,void 0)}parse(p){return A.JSON.parse(p,void 0)}};function Sy(){}function Py(){}Sy.prototype.h=null;var rf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sf(){Ns.call(this,"d")}function Dc(){Ns.call(this,"c")}ht(sf,Ns),ht(Dc,Ns);var Pu={},af=null;function uf(){return af=af||new _s}function Gd(p){Ns.call(this,Pu.La,p)}function zd(p){const P=uf();Os(P,new Gd(P))}function My(p,P){Ns.call(this,Pu.STAT_EVENT,p),this.stat=P}function Ki(p){const P=uf();Os(P,new My(P,p))}function Ny(p,P){Ns.call(this,Pu.Ma,p),this.size=P}function lf(p,P){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){p()},P)}function cf(){this.g=!0}function Mu(p,P,U,ee){p.info(function(){return"XMLHTTP TEXT ("+P+"): "+function wI(p,P){if(!p.g)return P;if(!P)return null;try{var U=JSON.parse(P);if(U)for(p=0;p<U.length;p++)if(Array.isArray(U[p])){var ee=U[p];if(!(2>ee.length)){var je=ee[1];if(Array.isArray(je)&&!(1>je.length)){var rt=je[0];if("noop"!=rt&&"stop"!=rt&&"close"!=rt)for(var jt=1;jt<je.length;jt++)je[jt]=""}}}return km(U)}catch{return P}}(p,U)+(ee?" "+ee:"")})}Pu.La="serverreachability",ht(Gd,Ns),Pu.STAT_EVENT="statevent",ht(My,Ns),Pu.Ma="timingevent",ht(Ny,Ns),cf.prototype.xa=function(){this.g=!1},cf.prototype.info=function(){};var df,Gp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function zp(){}function Nu(p,P,U,ee){this.j=p,this.i=P,this.l=U,this.R=ee||1,this.U=new $p(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oy}function Oy(){this.i=null,this.g="",this.h=!1}ht(zp,Sy),zp.prototype.g=function(){return new XMLHttpRequest},zp.prototype.i=function(){return{}},df=new zp;var ky={},Wp={};function Kp(p,P,U){p.L=1,p.v=pf(za(P)),p.m=U,p.P=!0,Vm(p,null)}function Vm(p,P){p.F=Date.now(),qp(p),p.A=za(p.v);var U=p.A,ee=p.R;Array.isArray(ee)||(ee=[String(ee)]),zm(U.i,"t",ee),p.C=0,U=p.j.J,p.h=new Oy,p.g=rv(p.j,U?P:null,!p.m),0<p.O&&(p.M=new nE(ge(p.Y,p,p.g),p.O)),P=p.U,U=p.g,ee=p.ca;var je="readystatechange";Array.isArray(je)||(je&&(rE[0]=je.toString()),je=rE);for(var rt=0;rt<je.length;rt++){var jt=Ec(U,je[rt],ee||P.handleEvent,!1,P.h||P);if(!jt)break;P.g[jt.key]=jt}P=p.H?pe(p.H):{},p.m?(p.u||(p.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,P)):(p.u="GET",p.g.ea(p.A,p.u,null,P)),zd(),function sE(p,P,U,ee,je,rt){p.info(function(){if(p.g)if(rt)for(var jt="",Br=rt.split("&"),ys=0;ys<Br.length;ys++){var dr=Br[ys].split("=");if(1<dr.length){var qi=dr[0];dr=dr[1];var vs=qi.split("_");jt=2<=vs.length&&"type"==vs[1]?jt+(qi+"=")+dr+"&":jt+(qi+"=redacted&")}}else jt=null;else jt=rt;return"XMLHTTP REQ ("+ee+") [attempt "+je+"]: "+P+"\n"+U+"\n"+jt})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Fy(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function oE(p,P){var U=p.C,ee=P.indexOf("\n",U);return-1==ee?Wp:(U=Number(P.substring(U,ee)),isNaN(U)?ky:(ee+=1)+U>P.length?Wp:(P=P.slice(ee,ee+U),p.C=ee+U,P))}function qp(p){p.S=Date.now()+p.I,Vy(p,p.I)}function Vy(p,P){if(null!=p.B)throw Error("WatchDog timer not null");p.B=lf(ge(p.ba,p),P)}function hf(p){p.B&&(A.clearTimeout(p.B),p.B=null)}function Tc(p){0==p.j.G||p.J||Zm(p.j,p)}function Cc(p){hf(p);var P=p.M;P&&"function"==typeof P.ma&&P.ma(),p.M=null,by(p.U),p.g&&(P=p.g,p.g=null,P.abort(),P.ma())}function Wd(p,P){try{var U=p.j;if(0!=U.G&&(U.g==p||Um(U.h,p)))if(!p.K&&Um(U.h,p)&&3==U.G){try{var ee=U.Da.g.parse(P)}catch{ee=null}if(Array.isArray(ee)&&3==ee.length){var je=ee;if(0==je[0]){e:if(!U.u){if(U.g){if(!(U.g.F+3e3<p.F))break e;ro(U),gf(U)}Jm(U),Ki(18)}}else U.za=je[1],0<U.za-U.T&&37500>je[2]&&U.F&&0==U.v&&!U.C&&(U.C=lf(ge(U.Za,U),6e3));if(1>=Ly(U.h)&&U.ca){try{U.ca()}catch{}U.ca=void 0}}else Pc(U,11)}else if((p.K||U.g==p)&&ro(U),!un(P))for(je=U.Da.g.parse(P),P=0;P<je.length;P++){let dr=je[P];if(U.T=dr[0],dr=dr[1],2==U.G)if("c"==dr[0]){U.K=dr[1],U.ia=dr[2];const qi=dr[3];null!=qi&&(U.la=qi,U.j.info("VER="+U.la));const vs=dr[4];null!=vs&&(U.Aa=vs,U.j.info("SVER="+U.Aa));const Mc=dr[5];null!=Mc&&"number"==typeof Mc&&0<Mc&&(U.L=ee=1.5*Mc,U.j.info("backChannelRequestTimeoutMs_="+ee)),ee=U;const Qo=p.g;if(Qo){const _f=Qo.g?Qo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_f){var rt=ee.h;rt.g||-1==_f.indexOf("spdy")&&-1==_f.indexOf("quic")&&-1==_f.indexOf("h2")||(rt.j=rt.l,rt.g=new Set,rt.h&&(Bm(rt,rt.h),rt.h=null))}if(ee.D){const ig=Qo.g?Qo.g.getResponseHeader("X-HTTP-Session-Id"):null;ig&&(ee.ya=ig,Wr(ee.I,ee.D,ig))}}U.G=3,U.l&&U.l.ua(),U.ba&&(U.R=Date.now()-p.F,U.j.info("Handshake RTT: "+U.R+"ms"));var jt=p;if((ee=U).qa=nv(ee,ee.J?ee.ia:null,ee.W),jt.K){Xp(ee.h,jt);var Br=jt,ys=ee.L;ys&&(Br.I=ys),Br.B&&(hf(Br),qp(Br)),ee.g=jt}else ev(ee);0<U.i.length&&mf(U)}else"stop"!=dr[0]&&"close"!=dr[0]||Pc(U,7);else 3==U.G&&("stop"==dr[0]||"close"==dr[0]?"stop"==dr[0]?Pc(U,7):Xm(U):"noop"!=dr[0]&&U.l&&U.l.ta(dr),U.v=0)}zd()}catch{}}function Yp(p){this.l=p||10,p=A.PerformanceNavigationTiming?0<(p=A.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lm(p){return!!p.h||!!p.g&&p.g.size>=p.j}function Ly(p){return p.h?1:p.g?p.g.size:0}function Um(p,P){return p.h?p.h==P:!!p.g&&p.g.has(P)}function Bm(p,P){p.g?p.g.add(P):p.h=P}function Xp(p,P){p.h&&p.h==P?p.h=null:p.g&&p.g.has(P)&&p.g.delete(P)}function Jp(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let P=p.i;for(const U of p.g.values())P=P.concat(U.D);return P}return St(p.i)}function jy(p,P){if(p.forEach&&"function"==typeof p.forEach)p.forEach(P,void 0);else if(S(p)||"string"==typeof p)Array.prototype.forEach.call(p,P,void 0);else for(var U=function By(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(S(p)||"string"==typeof p){var P=[];p=p.length;for(var U=0;U<p;U++)P.push(U);return P}P=[],U=0;for(const ee in p)P[U++]=ee;return P}}}(p),ee=function Uy(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(S(p)){for(var P=[],U=p.length,ee=0;ee<U;ee++)P.push(p[ee]);return P}for(ee in P=[],U=0,p)P[U++]=p[ee];return P}(p),je=ee.length,rt=0;rt<je;rt++)P.call(void 0,ee[rt],U&&U[rt],p)}Nu.prototype.ca=function(p){p=p.target;const P=this.M;P&&3==ku(p)?P.j():this.Y(p)},Nu.prototype.Y=function(p){try{if(p==this.g)e:{const vs=ku(this.g);var P=this.g.Ba();if(this.g.Z(),!(3>vs)&&(3!=vs||this.g&&(this.h.h||this.g.oa()||Ym(this.g)))){this.J||4!=vs||7==P||zd(),hf(this);var U=this.g.Z();this.X=U;t:if(Fy(this)){var ee=Ym(this.g);p="";var je=ee.length,rt=4==ku(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cc(this),Tc(this);var jt="";break t}this.h.i=new A.TextDecoder}for(P=0;P<je;P++)this.h.h=!0,p+=this.h.i.decode(ee[P],{stream:!(rt&&P==je-1)});ee.length=0,this.h.g+=p,this.C=0,jt=this.h.g}else jt=this.g.oa();if(this.o=200==U,function Fm(p,P,U,ee,je,rt,jt){p.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+je+"]: "+P+"\n"+U+"\n"+rt+" "+jt})}(this.i,this.u,this.A,this.l,this.R,vs,U),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,ys=this.g;if((Br=ys.g?ys.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!un(Br)){var dr=Br;break t}}dr=null}if(!(U=dr)){this.o=!1,this.s=3,Ki(12),Cc(this),Tc(this);break e}Mu(this.i,this.l,U,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wd(this,U)}if(this.P){let Qo;for(U=!0;!this.J&&this.C<jt.length;){if(Qo=oE(this,jt),Qo==Wp){4==vs&&(this.s=4,Ki(14),U=!1),Mu(this.i,this.l,null,"[Incomplete Response]");break}if(Qo==ky){this.s=4,Ki(15),Mu(this.i,this.l,jt,"[Invalid Chunk]"),U=!1;break}Mu(this.i,this.l,Qo,null),Wd(this,Qo)}if(Fy(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=vs||0!=jt.length||this.h.h||(this.s=1,Ki(16),U=!1),this.o=this.o&&U,U){if(0<jt.length&&!this.W){this.W=!0;var qi=this.j;qi.g==this&&qi.ba&&!qi.M&&(qi.j.info("Great, no buffering proxy detected. Bytes received: "+jt.length),Ko(qi),qi.M=!0,Ki(11))}}else Mu(this.i,this.l,jt,"[Invalid Chunked Response]"),Cc(this),Tc(this)}else Mu(this.i,this.l,jt,null),Wd(this,jt);4==vs&&Cc(this),this.o&&!this.J&&(4==vs?Zm(this.j,this):(this.o=!1,qp(this)))}else(function Xy(p){const P={};p=(p.g&&2<=ku(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let ee=0;ee<p.length;ee++){if(un(p[ee]))continue;var U=Be(p[ee]);const je=U[0];if("string"!=typeof(U=U[1]))continue;U=U.trim();const rt=P[je]||[];P[je]=rt,rt.push(U)}!function Pe(p,P){for(const U in p)P.call(void 0,p[U],U,p)}(P,function(ee){return ee.join(", ")})})(this.g),400==U&&0<jt.indexOf("Unknown SID")?(this.s=3,Ki(12)):(this.s=0,Ki(13)),Cc(this),Tc(this)}}}catch{}},Nu.prototype.cancel=function(){this.J=!0,Cc(this)},Nu.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function Hp(p,P){p.info(function(){return"TIMEOUT: "+P})}(this.i,this.A),2!=this.L&&(zd(),Ki(17)),Cc(this),this.s=2,Tc(this)):Vy(this,this.S-p)},Yp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var $y=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xu(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof xu){this.h=p.h,Kd(this,p.j),this.o=p.o,this.g=p.g,ff(this,p.s),this.l=p.l;var P=p.i,U=new Yd;U.i=P.i,P.g&&(U.g=new Map(P.g),U.h=P.h),Gy(this,U),this.m=p.m}else p&&(P=String(p).match($y))?(this.h=!1,Kd(this,P[1]||"",!0),this.o=qd(P[2]||""),this.g=qd(P[3]||"",!0),ff(this,P[4]),this.l=qd(P[5]||"",!0),Gy(this,P[6]||"",!0),this.m=qd(P[7]||"")):(this.h=!1,this.i=new Yd(null,this.h))}function za(p){return new xu(p)}function Kd(p,P,U){p.j=U?qd(P,!0):P,p.j&&(p.j=p.j.replace(/:$/,""))}function ff(p,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);p.s=P}else p.s=null}function Gy(p,P,U){P instanceof Yd?(p.i=P,function Ky(p,P){P&&!p.j&&(Ou(p),p.i=null,p.g.forEach(function(U,ee){var je=ee.toLowerCase();ee!=je&&(Hm(this,ee),zm(this,je,U))},p)),p.j=P}(p.i,p.h)):(U||(P=Qd(P,$m)),p.i=new Yd(P,p.h))}function Wr(p,P,U){p.i.set(P,U)}function pf(p){return Wr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function qd(p,P){return p?P?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Qd(p,P,U){return"string"==typeof p?(p=encodeURI(p).replace(P,aE),U&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function aE(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}xu.prototype.toString=function(){var p=[],P=this.j;P&&p.push(Qd(P,zy,!0),":");var U=this.g;return(U||"file"==P)&&(p.push("//"),(P=this.o)&&p.push(Qd(P,zy,!0),"@"),p.push(encodeURIComponent(String(U)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(U=this.s)&&p.push(":",String(U))),(U=this.l)&&(this.g&&"/"!=U.charAt(0)&&p.push("/"),p.push(Qd(U,"/"==U.charAt(0)?jm:uE,!0))),(U=this.i.toString())&&p.push("?",U),(U=this.m)&&p.push("#",Qd(U,Wy)),p.join("")};var p,zy=/[#\/\?@]/g,uE=/[#\?:]/g,jm=/[#\?]/g,$m=/[#\?@]/g,Wy=/#/g;function Yd(p,P){this.h=this.g=null,this.i=p||null,this.j=!!P}function Ou(p){p.g||(p.g=new Map,p.h=0,p.i&&function Hy(p,P){if(p){p=p.split("&");for(var U=0;U<p.length;U++){var ee=p[U].indexOf("="),je=null;if(0<=ee){var rt=p[U].substring(0,ee);je=p[U].substring(ee+1)}else rt=p[U];P(rt,je?decodeURIComponent(je.replace(/\+/g," ")):"")}}}(p.i,function(P,U){p.add(decodeURIComponent(P.replace(/\+/g," ")),U)}))}function Hm(p,P){Ou(p),P=bc(p,P),p.g.has(P)&&(p.i=null,p.h-=p.g.get(P).length,p.g.delete(P))}function Gm(p,P){return Ou(p),P=bc(p,P),p.g.has(P)}function zm(p,P,U){Hm(p,P),0<U.length&&(p.i=null,p.g.set(bc(p,P),St(U)),p.h+=U.length)}function bc(p,P){return P=String(P),p.j&&(P=P.toLowerCase()),P}function Ml(p,P,U,ee,je){try{je&&(je.onload=null,je.onerror=null,je.onabort=null,je.ontimeout=null),ee(U)}catch{}}function lE(){this.g=new iE}function Wm(p,P,U){const ee=U||"";try{jy(p,function(je,rt){let jt=je;V(je)&&(jt=km(je)),P.push(ee+rt+"="+encodeURIComponent(jt))})}catch(je){throw P.push(ee+"type="+encodeURIComponent("_badmap")),je}}function ya(p){this.l=p.Ub||null,this.j=p.eb||!1}function Xd(p,P){_s.call(this),this.D=p,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qy(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Sc(p){p.readyState=4,p.l=null,p.j=null,p.v=null,eg(p)}function eg(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function cE(p){let P="";return Vn(p,function(U,ee){P+=ee,P+=":",P+=U,P+="\r\n"}),P}function Km(p,P,U){e:{for(ee in U){var ee=!1;break e}ee=!0}ee||(U=cE(U),"string"==typeof p?null!=U&&encodeURIComponent(String(U)):Wr(p,P,U))}function gi(p){_s.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=Yd.prototype).add=function(p,P){Ou(this),this.i=null,p=bc(this,p);var U=this.g.get(p);return U||this.g.set(p,U=[]),U.push(P),this.h+=1,this},a.forEach=function(p,P){Ou(this),this.g.forEach(function(U,ee){U.forEach(function(je){p.call(P,je,ee,this)},this)},this)},a.na=function(){Ou(this);const p=Array.from(this.g.values()),P=Array.from(this.g.keys()),U=[];for(let ee=0;ee<P.length;ee++){const je=p[ee];for(let rt=0;rt<je.length;rt++)U.push(P[ee])}return U},a.V=function(p){Ou(this);let P=[];if("string"==typeof p)Gm(this,p)&&(P=P.concat(this.g.get(bc(this,p))));else{p=Array.from(this.g.values());for(let U=0;U<p.length;U++)P=P.concat(p[U])}return P},a.set=function(p,P){return Ou(this),this.i=null,Gm(this,p=bc(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[P]),this.h+=1,this},a.get=function(p,P){return p&&0<(p=this.V(p)).length?String(p[0]):P},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],P=Array.from(this.g.keys());for(var U=0;U<P.length;U++){var ee=P[U];const rt=encodeURIComponent(String(ee)),jt=this.V(ee);for(ee=0;ee<jt.length;ee++){var je=rt;""!==jt[ee]&&(je+="="+encodeURIComponent(String(jt[ee]))),p.push(je)}}return this.i=p.join("&")},ht(ya,Sy),ya.prototype.g=function(){return new Xd(this.l,this.j)},ya.prototype.i=(p={},function(){return p}),ht(Xd,_s),(a=Xd.prototype).open=function(p,P){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=P,this.readyState=1,eg(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(P.body=p),(this.D||A).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sc(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,eg(this)),this.g&&(this.readyState=3,eg(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qy(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var P=p.value?p.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!p.done}))&&(this.response=this.responseText+=P)}p.done?Sc(this):eg(this),3==this.readyState&&qy(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,Sc(this))},a.Qa=function(p){this.g&&(this.response=p,Sc(this))},a.ga=function(){this.g&&Sc(this)},a.setRequestHeader=function(p,P){this.u.append(p,P)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],P=this.h.entries();for(var U=P.next();!U.done;)p.push((U=U.value)[0]+": "+U[1]),U=P.next();return p.join("\r\n")},Object.defineProperty(Xd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),ht(gi,_s);var Qy=/^https?$/i,dE=["POST","PUT"];function Ui(p,P){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=P,p.m=5,qm(p),tg(p)}function qm(p){p.A||(p.A=!0,Os(p,"complete"),Os(p,"error"))}function Yy(p){if(p.h&&typeof m<"u"&&(!p.v[1]||4!=ku(p)||2!=p.Z()))if(p.u&&4==ku(p))Om(p.Ea,0,p);else if(Os(p,"readystatechange"),4==ku(p)){p.h=!1;try{const jt=p.Z();e:switch(jt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var U;if(!(U=P)){var ee;if(ee=0===jt){var je=String(p.D).match($y)[1]||null;!je&&A.self&&A.self.location&&(je=A.self.location.protocol.slice(0,-1)),ee=!Qy.test(je?je.toLowerCase():"")}U=ee}if(U)Os(p,"complete"),Os(p,"success");else{p.m=6;try{var rt=2<ku(p)?p.g.statusText:""}catch{rt=""}p.l=rt+" ["+p.Z()+"]",qm(p)}}finally{tg(p)}}}function tg(p,P){if(p.g){Qm(p);const U=p.g,ee=p.v[0]?()=>{}:null;p.g=null,p.v=null,P||Os(p,"ready");try{U.onreadystatechange=ee}catch{}}}function Qm(p){p.I&&(A.clearTimeout(p.I),p.I=null)}function ku(p){return p.g?p.g.readyState:0}function Ym(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Wa(p,P,U){return U&&U.internalChannelParams&&U.internalChannelParams[p]||P}function Jy(p){this.Aa=0,this.i=[],this.j=new cf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wa("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wa("baseRetryDelayMs",5e3,p),this.cb=Wa("retryDelaySeedMs",1e4,p),this.Wa=Wa("forwardChannelMaxRetries",2,p),this.wa=Wa("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Yp(p&&p.concurrentRequestLimit),this.Da=new lE,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xm(p){if(Zy(p),3==p.G){var P=p.U++,U=za(p.I);if(Wr(U,"SID",p.K),Wr(U,"RID",P),Wr(U,"TYPE","terminate"),Rc(p,U),(P=new Nu(p,p.j,P)).L=2,P.v=pf(za(U)),U=!1,A.navigator&&A.navigator.sendBeacon)try{U=A.navigator.sendBeacon(P.v.toString(),"")}catch{}!U&&A.Image&&((new Image).src=P.v,U=!0),U||(P.g=rv(P.j,null),P.g.ea(P.v)),P.F=Date.now(),qp(P)}tv(p)}function gf(p){p.g&&(Ko(p),p.g.cancel(),p.g=null)}function Zy(p){gf(p),p.u&&(A.clearTimeout(p.u),p.u=null),ro(p),p.h.cancel(),p.s&&("number"==typeof p.s&&A.clearTimeout(p.s),p.s=null)}function mf(p){if(!Lm(p.h)&&!p.s){p.s=!0;var P=p.Ga;kp||tE(),$d||(kp(),$d=!0),Fp.add(P,p),p.B=0}}function ng(p,P){var U;U=P?P.l:p.U++;const ee=za(p.I);Wr(ee,"SID",p.K),Wr(ee,"RID",U),Wr(ee,"AID",p.T),Rc(p,ee),p.m&&p.o&&Km(ee,p.m,p.o),U=new Nu(p,p.j,U,p.B+1),null===p.m&&(U.H=p.o),P&&(p.i=P.D.concat(p.i)),P=va(p,U,1e3),U.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Bm(p.h,U),Kp(U,ee,P)}function Rc(p,P){p.H&&Vn(p.H,function(U,ee){Wr(P,ee,U)}),p.l&&jy({},function(U,ee){Wr(P,ee,U)})}function va(p,P,U){U=Math.min(p.i.length,U);var ee=p.l?ge(p.l.Na,p.l,p):null;e:{var je=p.i;let rt=-1;for(;;){const jt=["count="+U];-1==rt?0<U?(rt=je[0].g,jt.push("ofs="+rt)):rt=0:jt.push("ofs="+rt);let Br=!0;for(let ys=0;ys<U;ys++){let dr=je[ys].g;const qi=je[ys].map;if(dr-=rt,0>dr)rt=Math.max(0,je[ys].g-100),Br=!1;else try{Wm(qi,jt,"req"+dr+"_")}catch{ee&&ee(qi)}}if(Br){ee=jt.join("&");break e}}}return p=p.i.splice(0,U),P.D=p,ee}function ev(p){if(!p.g&&!p.u){p.Y=1;var P=p.Fa;kp||tE(),$d||(kp(),$d=!0),Fp.add(P,p),p.v=0}}function Jm(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=lf(ge(p.Fa,p),e_(p,p.v)),p.v++,0))}function Ko(p){null!=p.A&&(A.clearTimeout(p.A),p.A=null)}function qo(p){p.g=new Nu(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var P=za(p.qa);Wr(P,"RID","rpc"),Wr(P,"SID",p.K),Wr(P,"AID",p.T),Wr(P,"CI",p.F?"0":"1"),!p.F&&p.ja&&Wr(P,"TO",p.ja),Wr(P,"TYPE","xmlhttp"),Rc(p,P),p.m&&p.o&&Km(P,p.m,p.o),p.L&&(p.g.I=p.L);var U=p.g;p=p.ia,U.L=1,U.v=pf(za(P)),U.m=null,U.P=!0,Vm(U,p)}function ro(p){null!=p.C&&(A.clearTimeout(p.C),p.C=null)}function Zm(p,P){var U=null;if(p.g==P){ro(p),Ko(p),p.g=null;var ee=2}else{if(!Um(p.h,P))return;U=P.D,Xp(p.h,P),ee=1}if(0!=p.G)if(P.o)if(1==ee){U=P.m?P.m.length:0,P=Date.now()-P.F;var je=p.B;Os(ee=uf(),new Ny(ee,U)),mf(p)}else ev(p);else if(3==(je=P.s)||0==je&&0<P.X||!(1==ee&&function AI(p,P){return!(Ly(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=P.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=lf(ge(p.Ga,p,P),e_(p,p.B)),p.B++,0)))}(p,P)||2==ee&&Jm(p)))switch(U&&0<U.length&&(P=p.h,P.i=P.i.concat(U)),je){case 1:Pc(p,5);break;case 4:Pc(p,10);break;case 3:Pc(p,6);break;default:Pc(p,2)}}function e_(p,P){let U=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(U*=2),U*P}function Pc(p,P){if(p.j.info("Error code "+P),2==P){var U=ge(p.fb,p),ee=p.Xa;const je=!ee;ee=new xu(ee||"//www.google.com/images/cleardot.gif"),A.location&&"http"==A.location.protocol||Kd(ee,"https"),pf(ee),je?function Zp(p,P){const U=new cf;if(A.Image){const ee=new Image;ee.onload=$e(Ml,U,"TestLoadImage: loaded",!0,P,ee),ee.onerror=$e(Ml,U,"TestLoadImage: error",!1,P,ee),ee.onabort=$e(Ml,U,"TestLoadImage: abort",!1,P,ee),ee.ontimeout=$e(Ml,U,"TestLoadImage: timeout",!1,P,ee),A.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=p}else P(!1)}(ee.toString(),U):function Pl(p,P){new cf;const ee=new AbortController,je=setTimeout(()=>{ee.abort(),Ml(0,0,!1,P)},1e4);fetch(p,{signal:ee.signal}).then(rt=>{clearTimeout(je),Ml(0,0,!!rt.ok,P)}).catch(()=>{clearTimeout(je),Ml(0,0,!1,P)})}(ee.toString(),U)}else Ki(2);p.G=0,p.l&&p.l.sa(P),tv(p),Zy(p)}function tv(p){if(p.G=0,p.ka=[],p.l){const P=Jp(p.h);(0!=P.length||0!=p.i.length)&&(At(p.ka,P),At(p.ka,p.i),p.h.i.length=0,St(p.i),p.i.length=0),p.l.ra()}}function nv(p,P,U){var ee=U instanceof xu?za(U):new xu(U);if(""!=ee.g)P&&(ee.g=P+"."+ee.g),ff(ee,ee.s);else{var je=A.location;ee=je.protocol,P=P?P+"."+je.hostname:je.hostname,je=+je.port;var rt=new xu(null);ee&&Kd(rt,ee),P&&(rt.g=P),je&&ff(rt,je),U&&(rt.l=U),ee=rt}return P=p.ya,(U=p.D)&&P&&Wr(ee,U,P),Wr(ee,"VER",p.la),Rc(p,ee),ee}function rv(p,P,U){if(P&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(P=new gi(p.Ca&&!p.pa?new ya({eb:U}):p.pa)).Ha(p.J),P}function rg(){}function Nl(){}function Io(p,P){_s.call(this),this.g=new Jy(P),this.l=p,this.h=P&&P.messageUrlParams||null,p=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(p?p["X-WebChannel-Content-Type"]=P.messageContentType:p={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(p?p["X-WebChannel-Client-Profile"]=P.va:p={"X-WebChannel-Client-Profile":P.va}),this.g.S=p,(p=P&&P.Sb)&&!un(p)&&(this.g.m=p),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!un(P)&&(this.g.D=P,null!==(p=this.h)&&P in p&&P in(p=this.h)&&delete p[P]),this.j=new Jd(this)}function t_(p){sf.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var P=p.__sm__;if(P){e:{for(const U in P){p=U;break e}p=void 0}(this.i=p)&&(p=this.i,P=null!==P&&p in P?P[p]:void 0),this.data=P}else this.data=p}function iv(){Dc.call(this),this.status=1}function Jd(p){this.g=p}(a=gi.prototype).Ha=function(p){this.J=p},a.ea=function(p,P,U,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);P=P?P.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():df.g(),this.v=function Ry(p){return p.h||(p.h=p.i())}(this.o?this.o:df),this.g.onreadystatechange=ge(this.Ea,this);try{this.B=!0,this.g.open(P,String(p),!0),this.B=!1}catch(rt){return void Ui(this,rt)}if(p=U||"",U=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var je in ee)U.set(je,ee[je]);else{if("function"!=typeof ee.keys||"function"!=typeof ee.get)throw Error("Unknown input type for opt_headers: "+String(ee));for(const rt of ee.keys())U.set(rt,ee.get(rt))}ee=Array.from(U.keys()).find(rt=>"content-type"==rt.toLowerCase()),je=A.FormData&&p instanceof A.FormData,!(0<=Array.prototype.indexOf.call(dE,P,void 0))||ee||je||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[rt,jt]of U)this.g.setRequestHeader(rt,jt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qm(this),this.u=!0,this.g.send(p),this.u=!1}catch(rt){Ui(this,rt)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Os(this,"complete"),Os(this,"abort"),tg(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tg(this,!0)),gi.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Yy(this):this.bb())},a.bb=function(){Yy(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<ku(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var P=this.g.responseText;return p&&0==P.indexOf(p)&&(P=P.substring(p.length)),II(P)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Jy.prototype).la=8,a.G=1,a.connect=function(p,P,U,ee){Ki(0),this.W=p,this.H=P||{},U&&void 0!==ee&&(this.H.OSID=U,this.H.OAID=ee),this.F=this.X,this.I=nv(this,null,this.W),mf(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const je=new Nu(this,this.j,p);let rt=this.o;if(this.S&&(rt?(rt=pe(rt),Oe(rt,this.S)):rt=this.S),null!==this.m||this.O||(je.H=rt,rt=null),this.P)e:{for(var P=0,U=0;U<this.i.length;U++){var ee=this.i[U];if(void 0===(ee="__data__"in ee.map&&"string"==typeof(ee=ee.map.__data__)?ee.length:void 0))break;if(4096<(P+=ee)){P=U;break e}if(4096===P||U===this.i.length-1){P=U+1;break e}}P=1e3}else P=1e3;P=va(this,je,P),Wr(U=za(this.I),"RID",p),Wr(U,"CVER",22),this.D&&Wr(U,"X-HTTP-Session-Id",this.D),Rc(this,U),rt&&(this.O?P="headers="+encodeURIComponent(String(cE(rt)))+"&"+P:this.m&&Km(U,this.m,rt)),Bm(this.h,je),this.Ua&&Wr(U,"TYPE","init"),this.P?(Wr(U,"$req",P),Wr(U,"SID","null"),je.T=!0,Kp(je,U,null)):Kp(je,U,P),this.G=2}}else 3==this.G&&(p?ng(this,p):0==this.i.length||Lm(this.h)||ng(this))},a.Fa=function(){if(this.u=null,qo(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=lf(ge(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ki(10),gf(this),qo(this))},a.Za=function(){null!=this.C&&(this.C=null,gf(this),Jm(this),Ki(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Ki(2)):(this.j.info("Failed to ping google.com"),Ki(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=rg.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},Nl.prototype.g=function(p,P){return new Io(p,P)},ht(Io,_s),Io.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Io.prototype.close=function(){Xm(this.g)},Io.prototype.o=function(p){var P=this.g;if("string"==typeof p){var U={};U.__data__=p,p=U}else this.u&&((U={}).__data__=km(p),p=U);P.i.push(new class{constructor(p,P){this.g=p,this.map=P}}(P.Ya++,p)),3==P.G&&mf(P)},Io.prototype.N=function(){this.g.l=null,delete this.j,Xm(this.g),delete this.g,Io.aa.N.call(this)},ht(t_,sf),ht(iv,Dc),ht(Jd,rg),Jd.prototype.ua=function(){Os(this.g,"a")},Jd.prototype.ta=function(p){Os(this.g,new t_(p))},Jd.prototype.sa=function(p){Os(this.g,new iv)},Jd.prototype.ra=function(){Os(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,Io.prototype.send=Io.prototype.o,Io.prototype.open=Io.prototype.m,Io.prototype.close=Io.prototype.close,Me=cn.createWebChannelTransport=function(){return new Nl},ke=cn.getStatEventTarget=function(){return uf()},ye=cn.Event=Pu,de=cn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gp.NO_ERROR=0,Gp.TIMEOUT=8,Gp.HTTP_ERROR=6,Vt=cn.ErrorCode=Gp,xy.COMPLETE="complete",Ft=cn.EventType=xy,Py.EventType=rf,rf.OPEN="a",rf.CLOSE="b",rf.ERROR="c",rf.MESSAGE="d",_s.prototype.listen=_s.prototype.K,Dn=cn.WebChannel=Py,Wn=cn.FetchXmlHttpFactory=ya,gi.prototype.listenOnce=gi.prototype.L,gi.prototype.getLastError=gi.prototype.Ka,gi.prototype.getLastErrorCode=gi.prototype.Ba,gi.prototype.getStatus=gi.prototype.Z,gi.prototype.getResponseJson=gi.prototype.Oa,gi.prototype.getResponseText=gi.prototype.oa,gi.prototype.send=gi.prototype.ea,gi.prototype.setWithCredentials=gi.prototype.Ha,an=cn.XhrIo=gi}).apply(typeof Zt<"u"?Zt:typeof self<"u"?self:typeof window<"u"?window:{});const le="@firebase/firestore";class xe{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xe.UNAUTHENTICATED=new xe(null),xe.GOOGLE_CREDENTIALS=new xe("google-credentials-uid"),xe.FIRST_PARTY=new xe("first-party-uid"),xe.MOCK_USER=new xe("mock-user");let se="10.13.1";const ve=new Te.Vy("@firebase/firestore");function Tt(){return ve.logLevel}function Ke(a,...e){if(ve.logLevel<=Te.$b.DEBUG){const r=e.map(dn);ve.debug(`Firestore (${se}): ${a}`,...r)}}function Ot(a,...e){if(ve.logLevel<=Te.$b.ERROR){const r=e.map(dn);ve.error(`Firestore (${se}): ${a}`,...r)}}function Un(a,...e){if(ve.logLevel<=Te.$b.WARN){const r=e.map(dn);ve.warn(`Firestore (${se}): ${a}`,...r)}}function dn(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function pt(a="Unexpected state"){const e=`FIRESTORE (${se}) INTERNAL ASSERTION FAILED: `+a;throw Ot(e),new Error(e)}function It(a,e){a||pt()}function ut(a,e){return a}const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Fe.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Nr{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(xe.UNAUTHENTICATED))}shutdown(){}}class on{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class We{constructor(e){this.t=e,this.currentUser=xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;let u=this.i;const h=V=>this.i!==u?(u=this.i,r(V)):Promise.resolve();let m=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Rn,e.enqueueRetryable(()=>h(this.currentUser))};const A=()=>{const V=m;e.enqueueRetryable((0,Ce.A)(function*(){yield V.promise,yield h(s.currentUser)}))},S=V=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=V,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(V=>S(V)),setTimeout(()=>{if(!this.auth){const V=this.t.getImmediate({optional:!0});V?S(V):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Rn)}},0),A()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(It("string"==typeof s.accessToken),new Nr(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new xe(e)}}class Mt{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ot{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Mt(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kt{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const s=h=>{null!=h.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const m=h.token!==this.R;return this.R=h.token,Ke("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const u=h=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?u(h):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(It("string"==typeof r.token),this.R=r.token,new rn(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xr(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class Qi{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=xr(40);for(let h=0;h<u.length;++h)s.length<20&&u[h]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[h]%62))}return s}}function mt(a,e){return a<e?-1:a>e?1:0}function Kr(a,e,r){return a.length===e.length&&a.every((s,u)=>r(s,e[u]))}function Pn(a){return a+"\0"}class $n{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new qe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new qe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new $n(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new $n(0,0))}static max(){return new Et(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ai{constructor(e,r,s){void 0===r?r=0:r>e.length&&pt(),void 0===s?s=e.length-r:s>e.length-r&&pt(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===ai.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ai?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let u=0;u<s;u++){const h=e.get(u),m=r.get(u);if(h<m)return-1;if(h>m)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class nn extends ai{construct(e,r,s){return new nn(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new qe(Le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new nn(r)}static emptyPath(){return new nn([])}}const mi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends ai{construct(e,r,s){return new Kn(e,r,s)}static isValidIdentifier(e){return mi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kn(["__name__"])}static fromServerFormat(e){const r=[];let s="",u=0;const h=()=>{if(0===s.length)throw new qe(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let m=!1;for(;u<e.length;){const A=e[u];if("\\"===A){if(u+1===e.length)throw new qe(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new qe(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,u+=2}else"`"===A?(m=!m,u++):"."!==A||m?(s+=A,u++):(h(),u++)}if(h(),m)throw new qe(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(r)}static emptyPath(){return new Kn([])}}class bt{constructor(e){this.path=e}static fromPath(e){return new bt(nn.fromString(e))}static fromName(e){return new bt(nn.fromString(e).popFirst(5))}static empty(){return new bt(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return nn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new nn(e.slice()))}}class qr{constructor(e,r,s,u){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=u}}function _i(a){return a.fields.find(e=>2===e.kind)}function Dr(a){return a.fields.filter(e=>2!==e.kind)}qr.UNKNOWN_ID=-1;class Tr{constructor(e,r){this.fieldPath=e,this.kind=r}}class X{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new X(0,Z.min())}}function W(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=Et.fromTimestamp(1e9===s?new $n(r+1,0):new $n(r,s));return new Z(u,bt.empty(),e)}function G(a){return new Z(a.readTime,a.key,-1)}class Z{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new Z(Et.min(),bt.empty(),-1)}static max(){return new Z(Et.max(),bt.empty(),-1)}}function re(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=bt.comparator(a.documentKey,e.documentKey),0!==r?r:mt(a.largestBatchId,e.largestBatchId))}const et="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ct{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pt(a){return hn.apply(this,arguments)}function hn(){return(hn=(0,Ce.A)(function*(a){if(a.code!==Le.FAILED_PRECONDITION||a.message!==et)throw a;Ke("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new he((s,u)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,u)},this.catchCallback=h=>{this.wrapFailure(r,h).next(s,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof he?r:he.resolve(r)}catch(r){return he.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):he.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):he.reject(r)}static resolve(e){return new he((r,s)=>{r(e)})}static reject(e){return new he((r,s)=>{s(e)})}static waitFor(e){return new he((r,s)=>{let u=0,h=0,m=!1;e.forEach(A=>{++u,A.next(()=>{++h,m&&h===u&&r()},S=>s(S))}),m=!0,h===u&&r()})}static or(e){let r=he.resolve(!1);for(const s of e)r=r.next(u=>u?he.resolve(u):s());return r}static forEach(e,r){const s=[];return e.forEach((u,h)=>{s.push(r.call(this,u,h))}),this.waitFor(s)}static mapArray(e,r){return new he((s,u)=>{const h=e.length,m=new Array(h);let A=0;for(let S=0;S<h;S++){const V=S;r(e[V]).next(q=>{m[V]=q,++A,A===h&&s(m)},q=>u(q))}})}static doWhile(e,r){return new he((s,u)=>{const h=()=>{!0===e()?r().next(()=>{h()},u):s()};h()})}}class Hn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Ei(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=yr(s.target.error);this.V.reject(new Ei(e,u))}}static open(e,r,s,u){try{return new Hn(r,e.transaction(u,s))}catch(h){throw new Ei(r,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Or(r)}}class tn{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===tn.S((0,Fe.ZQ)())&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),Pr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Fe.zW)())return!1;if(tn.v())return!0;const e=(0,Fe.ZQ)(),r=tn.S(e),s=0<r&&r<10,u=ir(e),h=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||h)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,Ce.A)(function*(){return r.db||(Ke("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=m=>{s(m.target.result)},h.onblocked=()=>{u(new Ei(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=m=>{const A=m.target.error;u("VersionError"===A.name?new qe(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new qe(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new Ei(e,A))},h.onupgradeneeded=m=>{Ke("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,h.transaction,m.oldVersion,r.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,u){var h=this;return(0,Ce.A)(function*(){const m="readonly"===r;let A=0;for(;;){++A;try{h.db=yield h.M(e);const S=Hn.open(h.db,e,m?"readonly":"readwrite",s),V=u(S).next(q=>(S.g(),q)).catch(q=>(S.abort(q),he.reject(q))).toPromise();return V.catch(()=>{}),yield S.m,V}catch(S){const V=S,q="FirebaseError"!==V.name&&A<3;if(Ke("SimpleDb","Transaction failed with error:",V.message,"Retrying:",q),h.close(),!q)return Promise.reject(V)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function ir(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class vi{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Pr(this.B.delete())}}class Ei extends qe{constructor(e,r){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ni(a){return"IndexedDbTransactionError"===a.name}class Or{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(Ke("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Pr(s)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),Pr(this.store.add(e))}get(e){return Pr(this.store.get(e)).next(r=>(void 0===r&&(r=null),Ke("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),Pr(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),Pr(this.store.count())}U(e,r){const s=this.options(e,r),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const h=u.getAll(s.range);return new he((m,A)=>{h.onerror=S=>{A(S.target.error)},h.onsuccess=S=>{m(S.target.result)}})}{const h=this.cursor(s),m=[];return this.W(h,(A,S)=>{m.push(S)}).next(()=>m)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new he((u,h)=>{s.onerror=m=>{h(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}j(e,r){Ke("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const u=this.cursor(s);return this.W(u,(h,m,A)=>A.delete())}J(e,r){let s;r?s=e:(s={},r=e);const u=this.cursor(s);return this.W(u,r)}Y(e){const r=this.cursor({});return new he((s,u)=>{r.onerror=h=>{const m=yr(h.target.error);u(m)},r.onsuccess=h=>{const m=h.target.result;m?e(m.primaryKey,m.value).next(A=>{A?m.continue():s()}):s()}})}W(e,r){const s=[];return new he((u,h)=>{e.onerror=m=>{h(m.target.error)},e.onsuccess=m=>{const A=m.target.result;if(!A)return void u();const S=new vi(A),V=r(A.primaryKey,A.value,S);if(V instanceof he){const q=V.catch(te=>(S.done(),he.reject(te)));s.push(q)}S.isDone?u():null===S.K?A.continue():A.continue(S.K)}}).next(()=>he.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Pr(a){return new he((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const u=yr(s.target.error);r(u)}})}let Ri=!1;function yr(a){const e=tn.S((0,Fe.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ri||(Ri=!0,setTimeout(()=>{throw s},0)),s}}return a}class yn{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;Ke("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.A)(function*(){r.task=null;try{Ke("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){ni(s)?Ke("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Pt(s)}yield r.X(6e4)}))}}class Qe{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,Ce.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let u=r,h=!0;return he.doWhile(()=>!0===h&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!s.has(m))return Ke("IndexBackfiller",`Processing collection: ${m}`),this.ne(e,m,u).next(A=>{u-=A,s.add(m)});h=!1})).next(()=>r-u)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,s).next(h=>{const m=h.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.re(u,h)).next(A=>(Ke("IndexBackfiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,r,A))).next(()=>m.size)}))}re(e,r){let s=e;return r.changes.forEach((u,h)=>{const m=G(h);re(m,s)>0&&(s=m)}),new Z(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let be=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function it(a){return null==a}function Nt(a){return 0===a&&1/a==-1/0}function Yt(a){return"number"==typeof a&&Number.isInteger(a)&&!Nt(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Wt(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=rr(e)),e=Tn(a.get(r),e);return rr(e)}function Tn(a,e){let r=e;const s=a.length;for(let u=0;u<s;u++){const h=a.charAt(u);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function rr(a){return a+"\x01\x01"}function bn(a){const e=a.length;if(It(e>=2),2===e)return It("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),nn.emptyPath();const r=e-2,s=[];let u="";for(let h=0;h<e;){const m=a.indexOf("\x01",h);switch((m<0||m>r)&&pt(),a.charAt(m+1)){case"\x01":const A=a.substring(h,m);let S;0===u.length?S=A:(u+=A,S=u,u=""),s.push(S);break;case"\x10":u+=a.substring(h,m),u+="\0";break;case"\x11":u+=a.substring(h,m+1);break;default:pt()}h=m+2}return new nn(s)}const ri=["userId","batchId"];function Yi(a,e){return[a,Wt(e)]}function Gn(a,e,r){return[a,Wt(e),r]}const io={},Xi=["prefixPath","collectionGroup","readTime","documentId"],Ao=["prefixPath","collectionGroup","documentId"],zs=["collectionGroup","readTime","prefixPath","documentId"],Ka=["canonicalId","targetId"],Do=["targetId","path"],$r=["path","targetId"],Es=["collectionId","parent"],Pi=["indexId","uid"],To=["uid","sequenceNumber"],Mi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Co=["indexId","uid","orderedDocumentKey"],ks=["userId","collectionPath","documentId"],is=["userId","collectionPath","largestBatchId"],Ea=["userId","collectionGroup","largestBatchId"],Bi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ia=[...Bi,"documentOverlays"],wa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Aa=wa,so=[...Aa,"indexConfiguration","indexState","indexEntries"],Da=so,bo=[...so,"globals"];class oo extends Ct{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Sr(a,e){const r=ut(a);return tn.F(r._e,e)}function Is(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function Ii(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function kr(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class An{constructor(e,r){this.comparator=e,this.root=r||Bn.EMPTY}insert(e,r){return new An(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}}class ss{constructor(e,r,s,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=r?s(e.key,r):1,r&&u&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,r,s,u,h){this.key=e,this.value=r,this.color=s??Bn.RED,this.left=u??Bn.EMPTY,this.right=h??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,u,h){return new Bn(e??this.key,r??this.value,s??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let u=this;const h=s(e,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(e,r,s),null):0===h?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Bn.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1,Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,r,s,u,h){return this}insert(e,r,s){return new Bn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new os(this.data.getIterator())}getIteratorFrom(e){return new os(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,h=s.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new er(this.comparator);return r.data=e,r}}class os{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wi(a){return a.hasNext()?a.getNext():void 0}class vr{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new vr([])}unionWith(e){let r=new er(Kn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new vr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Kr(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class Ni extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Ni("Invalid base64 string: "+h):h}}(e);return new Dt(r)}static fromUint8Array(e){const r=function(u){let h="";for(let m=0;m<u.length;++m)h+=String.fromCharCode(u[m]);return h}(e);return new Dt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const fn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(a){if(It(!!a),"string"==typeof a){let e=0;const r=fn.exec(a);if(It(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Nn(a.seconds),nanos:Nn(a.nanos)}}function Nn(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function ui(a){return"string"==typeof a?Dt.fromBase64String(a):Dt.fromUint8Array(a)}function Er(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ji(a){const e=a.mapValue.fields.__previous_value__;return Er(e)?Ji(e):e}function qn(a){const e=Cn(a.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class as{constructor(e,r,s,u,h,m,A,S,V){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=A,this.longPollingOptions=S,this.useFetchStreams=V}}class Hr{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Hr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hr&&e.projectId===this.projectId&&e.database===this.database}}const sn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},li={nullValue:"NULL_VALUE"};function ci(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Er(a)?4:ws(a)?9007199254740991:Fs(a)?10:11:pt()}function pr(a,e){if(a===e)return!0;const r=ci(a);if(r!==ci(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return qn(a).isEqual(qn(e));case 3:return function(u,h){if("string"==typeof u.timestampValue&&"string"==typeof h.timestampValue&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const m=Cn(u.timestampValue),A=Cn(h.timestampValue);return m.seconds===A.seconds&&m.nanos===A.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return h=e,ui(a.bytesValue).isEqual(ui(h.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,h){return Nn(u.geoPointValue.latitude)===Nn(h.geoPointValue.latitude)&&Nn(u.geoPointValue.longitude)===Nn(h.geoPointValue.longitude)}(a,e);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return Nn(u.integerValue)===Nn(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const m=Nn(u.doubleValue),A=Nn(h.doubleValue);return m===A?Nt(m)===Nt(A):isNaN(m)&&isNaN(A)}return!1}(a,e);case 9:return Kr(a.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(u,h){const m=u.mapValue.fields||{},A=h.mapValue.fields||{};if(Is(m)!==Is(A))return!1;for(const S in m)if(m.hasOwnProperty(S)&&(void 0===A[S]||!pr(m[S],A[S])))return!1;return!0}(a,e);default:return pt()}var h}function sr(a,e){return void 0!==(a.values||[]).find(r=>pr(r,e))}function ji(a,e){if(a===e)return 0;const r=ci(a),s=ci(e);if(r!==s)return mt(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return mt(a.booleanValue,e.booleanValue);case 2:return function(h,m){const A=Nn(h.integerValue||h.doubleValue),S=Nn(m.integerValue||m.doubleValue);return A<S?-1:A>S?1:A===S?0:isNaN(A)?isNaN(S)?0:-1:1}(a,e);case 3:return Fr(a.timestampValue,e.timestampValue);case 4:return Fr(qn(a),qn(e));case 5:return mt(a.stringValue,e.stringValue);case 6:return function(h,m){const A=ui(h),S=ui(m);return A.compareTo(S)}(a.bytesValue,e.bytesValue);case 7:return function(h,m){const A=h.split("/"),S=m.split("/");for(let V=0;V<A.length&&V<S.length;V++){const q=mt(A[V],S[V]);if(0!==q)return q}return mt(A.length,S.length)}(a.referenceValue,e.referenceValue);case 8:return function(h,m){const A=mt(Nn(h.latitude),Nn(m.latitude));return 0!==A?A:mt(Nn(h.longitude),Nn(m.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return Ai(a.arrayValue,e.arrayValue);case 10:return function(h,m){var A,S,V,q;const $e=null===(A=(h.fields||{}).value)||void 0===A?void 0:A.arrayValue,ht=null===(S=(m.fields||{}).value)||void 0===S?void 0:S.arrayValue,St=mt((null===(V=$e?.values)||void 0===V?void 0:V.length)||0,(null===(q=ht?.values)||void 0===q?void 0:q.length)||0);return 0!==St?St:Ai($e,ht)}(a.mapValue,e.mapValue);case 11:return function(h,m){if(h===sn.mapValue&&m===sn.mapValue)return 0;if(h===sn.mapValue)return 1;if(m===sn.mapValue)return-1;const A=h.fields||{},S=Object.keys(A),V=m.fields||{},q=Object.keys(V);S.sort(),q.sort();for(let te=0;te<S.length&&te<q.length;++te){const ge=mt(S[te],q[te]);if(0!==ge)return ge;const $e=ji(A[S[te]],V[q[te]]);if(0!==$e)return $e}return mt(S.length,q.length)}(a.mapValue,e.mapValue);default:throw pt()}}function Fr(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return mt(a,e);const r=Cn(a),s=Cn(e),u=mt(r.seconds,s.seconds);return 0!==u?u:mt(r.nanos,s.nanos)}function Ai(a,e){const r=a.values||[],s=e.values||[];for(let u=0;u<r.length&&u<s.length;++u){const h=ji(r[u],s[u]);if(h)return h}return mt(r.length,s.length)}function Di(a){return Ws(a)}function Ws(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=Cn(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?ui(a.bytesValue).toBase64():"referenceValue"in a?bt.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",u=!0;for(const h of r.values||[])u?u=!1:s+=",",s+=Ws(h);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of s)h?h=!1:u+=",",u+=`${m}:${Ws(r.fields[m])}`;return u+"}"}(a.mapValue):pt()}function Rr(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function $i(a){return!!a&&"integerValue"in a}function Zi(a){return!!a&&"arrayValue"in a}function xn(a){return!!a&&"nullValue"in a}function So(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Hi(a){return!!a&&"mapValue"in a}function Fs(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function si(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Ii(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=si(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=si(a.arrayValue.values[r]);return e}return Object.assign({},a)}function ws(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Ks={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Vs(a){return"nullValue"in a?li:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Rr(Hr.empty(),bt.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Fs(a)?Ks:{mapValue:{}}:pt()}function Ir(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Rr(Hr.empty(),bt.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Ks:"mapValue"in a?Fs(a)?{mapValue:{}}:sn:pt()}function qs(a,e){const r=ji(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function Cr(a,e){const r=ji(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Hi(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=si(r)}setAll(e){let r=Kn.emptyPath(),s={},u=[];e.forEach((m,A)=>{if(!r.isImmediateParentOf(A)){const S=this.getFieldsMap(r);this.applyChanges(S,s,u),s={},u=[],r=A.popLast()}m?s[A.lastSegment()]=si(m):u.push(A.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,s,u)}delete(e){const r=this.field(e.popLast());Hi(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=r.mapValue.fields[e.get(s)];Hi(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,s){Ii(r,(u,h)=>e[u]=h);for(const u of s)delete e[u]}clone(){return new vn(si(this.value))}}function ao(a){const e=[];return Ii(a.fields,(r,s)=>{const u=new Kn([r]);if(Hi(s)){const h=ao(s.mapValue).fields;if(0===h.length)e.push(u);else for(const m of h)e.push(u.child(m))}else e.push(u)}),new vr(e)}class jn{constructor(e,r,s,u,h,m,A){this.key=e,this.documentType=r,this.version=s,this.readTime=u,this.createTime=h,this.data=m,this.documentState=A}static newInvalidDocument(e){return new jn(e,0,Et.min(),Et.min(),Et.min(),vn.empty(),0)}static newFoundDocument(e,r,s,u){return new jn(e,1,r,Et.min(),s,u,0)}static newNoDocument(e,r){return new jn(e,2,r,Et.min(),Et.min(),vn.empty(),0)}static newUnknownDocument(e,r){return new jn(e,3,r,Et.min(),Et.min(),vn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class As{constructor(e,r){this.position=e,this.inclusive=r}}function ei(a,e,r){let s=0;for(let u=0;u<a.position.length;u++){const h=e[u],m=a.position[u];if(s=h.field.isKeyField()?bt.comparator(bt.fromName(m.referenceValue),r.key):ji(m,r.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function Zo(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!pr(a.position[r],e.position[r]))return!1;return!0}class es{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ro(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Fu{}class On extends Fu{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new M(e,r,s):"array-contains"===r?new pn(e,s):"in"===r?new Yr(e,s):"not-in"===r?new ls(e,s):"array-contains-any"===r?new Ti(e,s):new On(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Y(e,s):new me(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(ji(r,this.value)):null!==r&&ci(this.value)===ci(r)&&this.matchesComparison(ji(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends Fu{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new _n(e,r)}matches(e){return us(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function us(a){return"and"===a.op}function Vu(a){return"or"===a.op}function Ta(a){return or(a)&&us(a)}function or(a){for(const e of a.filters)if(e instanceof _n)return!1;return!0}function Qs(a){if(a instanceof On)return a.field.canonicalString()+a.op.toString()+Di(a.value);if(Ta(a))return a.filters.map(e=>Qs(e)).join(",");{const e=a.filters.map(r=>Qs(r)).join(",");return`${a.op}(${e})`}}function qa(a,e){return a instanceof On?(s=a,(u=e)instanceof On&&s.op===u.op&&s.field.isEqual(u.field)&&pr(s.value,u.value)):a instanceof _n?function(s,u){return u instanceof _n&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((h,m,A)=>h&&qa(m,u.filters[A]),!0)}(a,e):void pt();var s,u}function L(a,e){const r=a.filters.concat(e);return _n.create(r,a.op)}function $(a){return a instanceof On?`${(r=a).field.canonicalString()} ${r.op} ${Di(r.value)}`:a instanceof _n?function(r){return r.op.toString()+" {"+r.getFilters().map($).join(" ,")+"}"}(a):"Filter";var r}class M extends On{constructor(e,r,s){super(e,r,s),this.key=bt.fromName(s.referenceValue)}matches(e){const r=bt.comparator(e.key,this.key);return this.matchesComparison(r)}}class Y extends On{constructor(e,r){super(e,"in",r),this.keys=Xt(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class me extends On{constructor(e,r){super(e,"not-in",r),this.keys=Xt(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Xt(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>bt.fromName(s.referenceValue))}class pn extends On{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Zi(r)&&sr(r.arrayValue,this.value)}}class Yr extends On{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&sr(this.value.arrayValue,r)}}class ls extends On{constructor(e,r){super(e,"not-in",r)}matches(e){if(sr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!sr(this.value.arrayValue,r)}}class Ti extends On{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Zi(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>sr(this.value.arrayValue,s))}}class Ys{constructor(e,r=null,s=[],u=[],h=null,m=null,A=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=h,this.startAt=m,this.endAt=A,this.ue=null}}function Ci(a,e=null,r=[],s=[],u=null,h=null,m=null){return new Ys(a,e,r,s,u,h,m)}function Xr(a){const e=ut(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>Qs(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(h=s).field.canonicalString()+h.dir;var h}).join(","),it(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Di(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Di(s)).join(",")),e.ue=r}return e.ue}function Ds(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Ro(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!qa(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Zo(a.startAt,e.startAt)&&Zo(a.endAt,e.endAt)}function Qa(a){return bt.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Vr(a,e){return a.filters.filter(r=>r instanceof On&&r.field.isEqual(e))}function Po(a,e,r){let s=li,u=!0;for(const h of Vr(a,e)){let m=li,A=!0;switch(h.op){case"<":case"<=":m=Vs(h.value);break;case"==":case"in":case">=":m=h.value;break;case">":m=h.value,A=!1;break;case"!=":case"not-in":m=li}qs({value:s,inclusive:u},{value:m,inclusive:A})<0&&(s=m,u=A)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const m=r.position[h];qs({value:s,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(s=m,u=r.inclusive);break}return{value:s,inclusive:u}}function di(a,e,r){let s=sn,u=!0;for(const h of Vr(a,e)){let m=sn,A=!0;switch(h.op){case">=":case">":m=Ir(h.value),A=!1;break;case"==":case"in":case"<=":m=h.value;break;case"<":m=h.value,A=!1;break;case"!=":case"not-in":m=sn}Cr({value:s,inclusive:u},{value:m,inclusive:A})>0&&(s=m,u=A)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const m=r.position[h];Cr({value:s,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(s=m,u=r.inclusive);break}return{value:s,inclusive:u}}class Ls{constructor(e,r=null,s=[],u=[],h=null,m="F",A=null,S=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=h,this.limitType=m,this.startAt=A,this.endAt=S,this.ce=null,this.le=null,this.he=null}}function ea(a,e,r,s,u,h,m,A){return new Ls(a,e,r,s,u,h,m,A)}function cs(a){return new Ls(a)}function Us(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function uo(a){return null!==a.collectionGroup}function xi(a){const e=ut(a);if(null===e.ce){e.ce=[];const r=new Set;for(const h of e.explicitOrderBy)e.ce.push(h),r.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let A=new er(Kn.comparator);return m.filters.forEach(S=>{S.getFlattenedFilters().forEach(V=>{V.isInequality()&&(A=A.add(V.field))})}),A})(e).forEach(h=>{r.has(h.canonicalString())||h.isKeyField()||e.ce.push(new es(h,s))}),r.has(Kn.keyField().canonicalString())||e.ce.push(new es(Kn.keyField(),s))}return e.ce}function Gr(a){const e=ut(a);return e.le||(e.le=function Lu(a,e){if("F"===a.limitType)return Ci(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(u=>new es(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new As(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new As(a.startAt.position,a.startAt.inclusive):null;return Ci(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,xi(a))),e.le}function na(a,e){const r=a.filters.concat([e]);return new Ls(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Mo(a,e,r){return new Ls(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function Bs(a,e){return Ds(Gr(a),Gr(e))&&a.limitType===e.limitType}function Xs(a){return`${Xr(Gr(a))}|lt:${a.limitType}`}function Gi(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>$(u)).join(", ")}]`),it(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>Di(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>Di(u)).join(",")),`Target(${s})`}(Gr(a))}; limitType=${a.limitType})`}function lo(a,e){return e.isFoundDocument()&&function(s,u){const h=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):bt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(a,e)&&function(s,u){for(const h of xi(s))if(!h.field.isKeyField()&&null===u.data.field(h.field))return!1;return!0}(a,e)&&function(s,u){for(const h of s.filters)if(!h.matches(u))return!1;return!0}(a,e)&&(u=e,!((s=a).startAt&&!function(m,A,S){const V=ei(m,A,S);return m.inclusive?V<=0:V<0}(s.startAt,xi(s),u)||s.endAt&&!function(m,A,S){const V=ei(m,A,S);return m.inclusive?V>=0:V>0}(s.endAt,xi(s),u)));var s,u}function Ya(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function xc(a){return(e,r)=>{let s=!1;for(const u of xi(a)){const h=xl(u,e,r);if(0!==h)return h;s=s||u.field.isKeyField()}return 0}}function xl(a,e,r){const s=a.field.isKeyField()?bt.comparator(e.key,r.key):function(h,m,A){const S=m.data.field(h),V=A.data.field(h);return null!==S&&null!==V?ji(S,V):pt()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return pt()}}class ds{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[u,h]of s)if(this.equalsFn(u,e))return h}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,r]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return void(u[h]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(r,s)=>{for(const[u,h]of s)e(u,h)})}isEmpty(){return kr(this.inner)}size(){return this.innerSize}}const Uu=new An(bt.comparator);function ts(){return Uu}const Bu=new An(bt.comparator);function Js(...a){let e=Bu;for(const r of a)e=e.insert(r.key,r);return e}function Ol(a){let e=Bu;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function hs(){return No()}function Xa(){return No()}function No(){return new ds(a=>a.toString(),(a,e)=>a.isEqual(e))}const Ja=new An(bt.comparator),D=new er(bt.comparator);function H(...a){let e=D;for(const r of a)e=e.add(r);return e}const N=new er(mt);function j(){return N}function ue(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nt(e)?"-0":e}}function Ye(a){return{integerValue:""+a}}function dt(a,e){return Yt(e)?Ye(e):ue(a,e)}class Kt{constructor(){this._=void 0}}function lr(a,e,r){return a instanceof En?function(u,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&Er(h)&&(h=Ji(h)),h&&(m.fields.__previous_value__=h),{mapValue:m}}(r,e):a instanceof cr?ar(a,e):a instanceof gr?hi(a,e):function(u,h){const m=Jn(u,h),A=co(m)+co(u.Pe);return $i(m)&&$i(u.Pe)?Ye(A):ue(u.serializer,A)}(a,e)}function Xn(a,e,r){return a instanceof cr?ar(a,e):a instanceof gr?hi(a,e):r}function Jn(a,e){return a instanceof oi?$i(s=e)||(h=s)&&"doubleValue"in h?e:{integerValue:0}:null;var s,h}class En extends Kt{}class cr extends Kt{constructor(e){super(),this.elements=e}}function ar(a,e){const r=Oi(e);for(const s of a.elements)r.some(u=>pr(u,s))||r.push(s);return{arrayValue:{values:r}}}class gr extends Kt{constructor(e){super(),this.elements=e}}function hi(a,e){let r=Oi(e);for(const s of a.elements)r=r.filter(u=>!pr(u,s));return{arrayValue:{values:r}}}class oi extends Kt{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function co(a){return Nn(a.integerValue||a.doubleValue)}function Oi(a){return Zi(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class fs{constructor(e,r){this.field=e,this.transform=r}}class Ts{constructor(e,r){this.version=e,this.transformResults=r}}class Mr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wr(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class ho{}function xo(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new ps(a.key,Mr.none()):new mr(a.key,a.data,Mr.none());{const r=a.data,s=vn.empty();let u=new er(Kn.comparator);for(let h of e.fields)if(!u.has(h)){let m=r.field(h);null===m&&h.length>1&&(h=h.popLast(),m=r.field(h)),null===m?s.delete(h):s.set(h,m),u=u.add(h)}return new Oo(a.key,s,new vr(u.toArray()),Mr.none())}}function ns(a,e,r){a instanceof mr?function(u,h,m){const A=u.value.clone(),S=ju(u.fieldTransforms,h,m.transformResults);A.setAll(S),h.convertToFoundDocument(m.version,A).setHasCommittedMutations()}(a,e,r):a instanceof Oo?function(u,h,m){if(!wr(u.precondition,h))return void h.convertToUnknownDocument(m.version);const A=ju(u.fieldTransforms,h,m.transformResults),S=h.data;S.setAll(Oc(u)),S.setAll(A),h.convertToFoundDocument(m.version,S).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Za(a,e,r,s){return a instanceof mr?function(h,m,A,S){if(!wr(h.precondition,m))return A;const V=h.value.clone(),q=js(h.fieldTransforms,S,m);return V.setAll(q),m.convertToFoundDocument(m.version,V).setHasLocalMutations(),null}(a,e,r,s):a instanceof Oo?function(h,m,A,S){if(!wr(h.precondition,m))return A;const V=js(h.fieldTransforms,S,m),q=m.data;return q.setAll(Oc(h)),q.setAll(V),m.convertToFoundDocument(m.version,q).setHasLocalMutations(),null===A?null:A.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(te=>te.field))}(a,e,r,s):(A=r,wr(a.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):A);var m,A}function eh(a,e){let r=null;for(const s of a.fieldTransforms){const u=e.data.field(s.field),h=Jn(s.transform,u||null);null!=h&&(null===r&&(r=vn.empty()),r.set(s.field,h))}return r||null}function Ca(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===u||s&&u&&Kr(s,u,(h,m)=>function fi(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(s=a.transform)instanceof cr&&u instanceof cr||s instanceof gr&&u instanceof gr?Kr(s.elements,u.elements,pr):s instanceof oi&&u instanceof oi?pr(s.Pe,u.Pe):s instanceof En&&u instanceof En);var s,u}(h,m))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,u}class mr extends ho{constructor(e,r,s,u=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Oo extends ho{constructor(e,r,s,u,h=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Oc(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function ju(a,e,r){const s=new Map;It(a.length===r.length);for(let u=0;u<r.length;u++){const h=a[u],m=h.transform,A=e.data.field(h.field);s.set(h.field,Xn(m,A,r[u]))}return s}function js(a,e,r){const s=new Map;for(const u of a){const h=u.transform,m=r.data.field(u.field);s.set(u.field,lr(h,m,e))}return s}class ps extends ho{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ba extends ho{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kl{constructor(e,r,s,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(e.key)&&ns(h,e,s[u])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Za(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Za(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Xa();return this.mutations.forEach(u=>{const h=e.get(u.key),m=h.overlayedDocument;let A=this.applyToLocalView(m,h.mutatedFields);A=r.has(u.key)?null:A;const S=xo(m,A);null!==S&&s.set(u.key,S),m.isValidDocument()||m.convertToNoDocument(Et.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),H())}isEqual(e){return this.batchId===e.batchId&&Kr(this.mutations,e.mutations,(r,s)=>Ca(r,s))&&Kr(this.baseMutations,e.baseMutations,(r,s)=>Ca(r,s))}}class Fl{constructor(e,r,s,u){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(e,r,s){It(e.mutations.length===s.length);let u=Ja;const h=e.mutations;for(let m=0;m<h.length;m++)u=u.insert(h[m].key,s[m].version);return new Fl(e,r,s,u)}}class $u{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gn{constructor(e,r){this.count=e,this.unchangedNames=r}}var ti,Qn;function Cs(a){switch(a){default:return pt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function kc(a){if(void 0===a)return Ot("GRPC error has no .code"),Le.UNKNOWN;switch(a){case ti.OK:return Le.OK;case ti.CANCELLED:return Le.CANCELLED;case ti.UNKNOWN:return Le.UNKNOWN;case ti.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case ti.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case ti.INTERNAL:return Le.INTERNAL;case ti.UNAVAILABLE:return Le.UNAVAILABLE;case ti.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case ti.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case ti.NOT_FOUND:return Le.NOT_FOUND;case ti.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case ti.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case ti.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case ti.ABORTED:return Le.ABORTED;case ti.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case ti.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case ti.DATA_LOSS:return Le.DATA_LOSS;default:return pt()}}(Qn=ti||(ti={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";function Ll(){return new TextEncoder}const eu=new Lt([4294967295,4294967295],0);function Ul(a){const e=Ll().encode(a),r=new Je;return r.update(e),new Uint8Array(r.digest())}function Fc(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Lt([r,s],0),new Lt([u,h],0)]}class ko{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Hu(`Invalid padding: ${r}`);if(s<0)throw new Hu(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Hu(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new Hu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Lt.fromNumber(this.Ie)}Ee(e,r,s){let u=e.add(r.multiply(Lt.fromNumber(s)));return 1===u.compare(eu)&&(u=new Lt([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=Ul(e),[s,u]=Fc(r);for(let h=0;h<this.hashCount;h++){const m=this.Ee(s,u,h);if(!this.de(m))return!1}return!0}static create(e,r,s){const u=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),m=new ko(h,u,r);return s.forEach(A=>m.insert(A)),m}insert(e){if(0===this.Ie)return;const r=Ul(e),[s,u]=Fc(r);for(let h=0;h<this.hashCount;h++){const m=this.Ee(s,u,h);this.Ae(m)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bs{constructor(e,r,s,u,h){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const u=new Map;return u.set(e,ft.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new bs(Et.min(),u,new An(mt),ts(),H())}}class ft{constructor(e,r,s,u,h){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ft(s,r,H(),H(),H())}}class zn{constructor(e,r,s,u){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=u}}class ra{constructor(e,r){this.targetId=e,this.me=r}}class Vc{constructor(e,r,s=Dt.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=u}}class Yn{constructor(){this.fe=0,this.ge=Zs(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=H(),r=H(),s=H();return this.ge.forEach((u,h)=>{switch(h){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:pt()}}),new ft(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=Zs()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,It(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class th{constructor(e){this.Le=e,this.Be=new Map,this.ke=ts(),this.qe=Fo(),this.Qe=new An(mt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:pt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,s=e.me.count,u=this.Je(r);if(u){const h=u.target;if(Qa(h))if(0===s){const m=new bt(h.path);this.Ue(r,m,jn.newNoDocument(m,Et.min()))}else It(1===s);else{const m=this.Ye(r);if(m!==s){const A=this.Ze(e),S=A?this.Xe(A,e,m):1;0!==S&&(this.je(r),this.Qe=this.Qe.insert(r,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:h=0}=r;let m,A;try{m=ui(s).toUint8Array()}catch(S){if(S instanceof Ni)return Un("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{A=new ko(m,u,h)}catch(S){return Un(S instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===A.Ie?null:A}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let u=0;return s.forEach(h=>{const m=this.Le.tt(),A=`projects/${m.projectId}/databases/${m.database}/documents/${h.path.canonicalString()}`;e.mightContain(A)||(this.Ue(r,h,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((h,m)=>{const A=this.Je(m);if(A){if(h.current&&Qa(A.target)){const S=new bt(A.target.path);null!==this.ke.get(S)||this.it(m,S)||this.Ue(m,S,jn.newNoDocument(S,e))}h.be&&(r.set(m,h.ve()),h.Ce())}});let s=H();this.qe.forEach((h,m)=>{let A=!0;m.forEachWhile(S=>{const V=this.Je(S);return!V||"TargetPurposeLimboResolution"===V.purpose||(A=!1,!1)}),A&&(s=s.add(h))}),this.ke.forEach((h,m)=>m.setReadTime(e));const u=new bs(e,r,this.Qe,this.ke,s);return this.ke=ts(),this.qe=Fo(),this.Qe=new An(mt),u}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Yn,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new er(mt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||Ke("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yn),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Fo(){return new An(bt.comparator)}function Zs(){return new An(bt.comparator)}const Ra={asc:"ASCENDING",desc:"DESCENDING"},Bl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nh={and:"AND",or:"OR"};class rh{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Gu(a,e){return a.useProto3Json||it(e)?e:{value:e}}function Lr(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $s(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function Pa(a,e){return Lr(a,e.toTimestamp())}function _r(a){return It(!!a),Et.fromTimestamp(function(r){const s=Cn(r);return new $n(s.seconds,s.nanos)}(a))}function Ss(a,e){return tu(a,e).canonicalString()}function tu(a,e){const r=(u=a,new nn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function jl(a){const e=nn.fromString(a);return It(po(e)),e}function Ma(a,e){return Ss(a.databaseId,e.path)}function fo(a,e){const r=jl(e);if(r.get(1)!==a.databaseId.projectId)throw new qe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new qe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new bt(I(r))}function nu(a,e){return Ss(a.databaseId,e)}function zu(a){const e=jl(a);return 4===e.length?nn.emptyPath():I(e)}function $l(a){return new nn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function I(a){return It(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function T(a,e,r){return{name:Ma(a,e),fields:r.value.mapValue.fields}}function E(a,e,r){const s=fo(a,e.name),u=_r(e.updateTime),h=e.createTime?_r(e.createTime):Et.min(),m=new vn({mapValue:{fields:e.fields}}),A=jn.newFoundDocument(s,u,h,m);return r&&A.setHasCommittedMutations(),r?A.setHasCommittedMutations():A}function Q(a,e){let r;if(e instanceof mr)r={update:T(a,e.key,e.value)};else if(e instanceof ps)r={delete:Ma(a,e.key)};else if(e instanceof Oo)r={update:T(a,e.key,e.data),updateMask:Lc(e.fieldMask)};else{if(!(e instanceof ba))return pt();r={verify:Ma(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(h,m){const A=m.transform;if(A instanceof En)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof cr)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof gr)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof oi)return{fieldPath:m.field.canonicalString(),increment:A.Pe};throw pt()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Pa(a,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:pt()),r;var h}function ae(a,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Mr.updateTime(_r(h.updateTime)):void 0!==h.exists?Mr.exists(h.exists):Mr.none():Mr.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(m,A){let S=null;"setToServerValue"in A?(It("REQUEST_TIME"===A.setToServerValue),S=new En):"appendMissingElements"in A?S=new cr(A.appendMissingElements.values||[]):"removeAllFromArray"in A?S=new gr(A.removeAllFromArray.values||[]):"increment"in A?S=new oi(m,A.increment):pt();const V=Kn.fromServerFormat(A.fieldPath);return new fs(V,S)}(a,u)):[];var h;if(e.update){const u=fo(a,e.update.name),h=new vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new vr((e.updateMask.fieldPaths||[]).map(q=>Kn.fromServerFormat(q)));return new Oo(u,h,m,r,s)}return new mr(u,h,r,s)}if(e.delete){const u=fo(a,e.delete);return new ps(u,r)}if(e.verify){const u=fo(a,e.verify);return new ba(u,r)}return pt()}function Ge(a,e){return{documents:[nu(a,e.path)]}}function Bt(a,e){const r={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=nu(a,u);const h=function(V){if(0!==V.length)return ih(_n.create(V,"and"))}(e.filters);h&&(r.structuredQuery.where=h);const m=function(V){if(0!==V.length)return V.map(q=>{return{field:rs((ge=q).field),direction:ru(ge.dir)};var ge})}(e.orderBy);m&&(r.structuredQuery.orderBy=m);const A=Gu(a,e.limit);return null!==A&&(r.structuredQuery.limit=A),e.startAt&&(r.structuredQuery.startAt={before:(V=e.startAt).inclusive,values:V.position}),e.endAt&&(r.structuredQuery.endAt=function(V){return{before:!V.inclusive,values:V.position}}(e.endAt)),{_t:r,parent:u};var V}function kn(a){let e=zu(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){It(1===s);const q=r.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let h=[];r.where&&(h=function(te){const ge=ur(te);return ge instanceof _n&&Ta(ge)?ge.getFilters():[ge]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(ge=>{return new es(ia((ht=ge).field),function(At){switch(At){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ht.direction));var ht}));let A=null;r.limit&&(A=function(te){let ge;return ge="object"==typeof te?te.value:te,it(ge)?null:ge}(r.limit));let S=null;var te;r.startAt&&(S=new As((te=r.startAt).values||[],!!te.before));let V=null;return r.endAt&&(V=function(te){return new As(te.values||[],!te.before)}(r.endAt)),ea(e,u,m,h,A,"F",S,V)}function ur(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=ia(r.unaryFilter.field);return On.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=ia(r.unaryFilter.field);return On.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ia(r.unaryFilter.field);return On.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=ia(r.unaryFilter.field);return On.create(m,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(a):void 0!==a.fieldFilter?On.create(ia((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return _n.create(r.compositeFilter.filters.map(s=>ur(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return pt()}}(r.compositeFilter.op))}(a):pt();var r}function ru(a){return Ra[a]}function iu(a){return Bl[a]}function Hl(a){return nh[a]}function rs(a){return{fieldPath:a.canonicalString()}}function ia(a){return Kn.fromServerFormat(a.fieldPath)}function ih(a){return a instanceof On?function(r){if("=="===r.op){if(So(r.value))return{unaryFilter:{field:rs(r.field),op:"IS_NAN"}};if(xn(r.value))return{unaryFilter:{field:rs(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(So(r.value))return{unaryFilter:{field:rs(r.field),op:"IS_NOT_NAN"}};if(xn(r.value))return{unaryFilter:{field:rs(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(r.field),op:iu(r.op),value:r.value}}}(a):a instanceof _n?function(r){const s=r.getFilters().map(u=>ih(u));return 1===s.length?s[0]:{compositeFilter:{op:Hl(r.op),filters:s}}}(a):pt()}function Lc(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function po(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class sa{constructor(e,r,s,u,h=Et.min(),m=Et.min(),A=Dt.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=A,this.expectedCount=S}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class su{constructor(e){this.ct=e}}function ou(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Wu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Ma(h=a.ct,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Lr(h,m.version.toTimestamp()),createTime:Lr(h,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return pt();s.unknownDocument={path:r.path.toArray(),version:Vo(e.version)}}var h,m;return s}function Wu(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(a){const e=new $n(a.seconds,a.nanoseconds);return Et.fromTimestamp(e)}function oa(a,e){const r=(e.baseMutations||[]).map(h=>ae(a.ct,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const s=e.mutations.map(h=>ae(a.ct,h)),u=$n.fromMillis(e.localWriteTimeMs);return new kl(e.batchId,u,r,s)}function Lo(a){const e=go(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?go(a.lastLimboFreeSnapshotVersion):Et.min();let s;return s=void 0!==a.query.documents?(It(1===(h=a.query).documents.length),Gr(cs(zu(h.documents[0])))):function(h){return Gr(kn(h))}(a.query),new sa(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,Dt.fromBase64String(a.resumeToken));var h}function Na(a,e){const r=Vo(e.snapshotVersion),s=Vo(e.lastLimboFreeSnapshotVersion);let u;u=Qa(e.target)?Ge(a.ct,e.target):Bt(a.ct,e.target)._t;const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xr(e.target),readTime:r,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function au(a){const e=kn({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Mo(e,e.limit,"L"):e}function xa(a,e){return new $u(e.largestBatchId,ae(a.ct,e.overlayMutation))}function Ku(a,e){const r=e.path.lastSegment();return[a,Wt(e.path.popLast()),r]}function hg(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:Vo(s.readTime),documentKey:Wt(s.documentKey.path),largestBatchId:s.largestBatchId}}class fg{getBundleMetadata(e,r){return If(e).get(r).next(s=>{if(s)return{id:(h=s).bundleId,createTime:go(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return If(e).put({bundleId:(u=r).id,createTime:Vo(_r(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return sh(e).get(r).next(s=>{if(s)return{name:(h=s).name,query:au(h.bundledQuery),readTime:go(h.readTime)};var h})}saveNamedQuery(e,r){return sh(e).put({name:(u=r).name,readTime:Vo(_r(u.readTime)),bundledQuery:u.bundledQuery});var u}}function If(a){return Sr(a,"bundles")}function sh(a){return Sr(a,"namedQueries")}class Bc{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new Bc(e,r.uid||"")}getOverlay(e,r){return uu(e).get(Ku(this.userId,r)).next(s=>s?xa(this.serializer,s):null)}getOverlays(e,r){const s=hs();return he.forEach(r,u=>this.getOverlay(e,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(e,r,s){const u=[];return s.forEach((h,m)=>{const A=new $u(r,m);u.push(this.ht(e,A))}),he.waitFor(u)}removeOverlaysForBatchId(e,r,s){const u=new Set;r.forEach(m=>u.add(Wt(m.getCollectionPath())));const h=[];return u.forEach(m=>{const A=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,s+1],!1,!0);h.push(uu(e).j("collectionPathOverlayIndex",A))}),he.waitFor(h)}getOverlaysForCollection(e,r,s){const u=hs(),h=Wt(r),m=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,Number.POSITIVE_INFINITY],!0);return uu(e).U("collectionPathOverlayIndex",m).next(A=>{for(const S of A){const V=xa(this.serializer,S);u.set(V.getKey(),V)}return u})}getOverlaysForCollectionGroup(e,r,s,u){const h=hs();let m;const A=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return uu(e).J({index:"collectionGroupOverlayIndex",range:A},(S,V,q)=>{const te=xa(this.serializer,V);h.size()<u||te.largestBatchId===m?(h.set(te.getKey(),te),m=te.largestBatchId):q.done()}).next(()=>h)}ht(e,r){return uu(e).put(function(u,h,m){const[A,S,V]=Ku(h,m.mutation.key);return{userId:h,collectionPath:S,documentId:V,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Q(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function uu(a){return Sr(a,"documentOverlays")}class Gl{Pt(e){return Sr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?Dt.fromUint8Array(s):Dt.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class aa{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Nn(e.integerValue));else if("doubleValue"in e){const s=Nn(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),Nt(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=Cn(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(ui(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?ws(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Fs(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):pt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const u of Object.keys(s))this.Vt(u,r),this.Tt(s[u],r)}wt(e,r){var s,u;const h=e.fields||{};this.dt(r,53);const m="value",A=(null===(u=null===(s=h[m].arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(Nn(A)),this.Vt(m,r),this.Tt(h[m],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const u of s)this.Tt(u,r)}yt(e,r){this.dt(r,37),bt.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function zl(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function qu(a){const e=64-function(s){let u=0;for(let h=0;h<8;++h){const m=zl(255&s[h]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(e/8)}aa.vt=new aa;class jc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(e){const r=this.qt(e),s=qu(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(e){const r=this.qt(e),s=qu(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let u=1;u<r.length;++u)r[u]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class wf{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class $c{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Qu{constructor(){this.jt=new jc,this.Ht=new wf(this.jt),this.Jt=new $c(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class mo{constructor(e,r,s,u){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=u}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new mo(this.indexId,this.documentKey,this.arrayValue,s)}}function zi(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=Af(a.arrayValue,e.arrayValue),0!==r?r:(r=Af(a.directionalValue,e.directionalValue),0!==r?r:bt.comparator(a.documentKey,e.documentKey)))}function Af(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class lu{constructor(e){this.Xt=new er((r,s)=>Kn.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(It(e.collectionGroup===this.collectionId),this.nn)return!1;const r=_i(e);if(void 0!==r&&!this.sn(r))return!1;const s=Dr(e);let u=new Set,h=0,m=0;for(;h<s.length&&this.sn(s[h]);++h)u=u.add(s[h].fieldPath.canonicalString());if(h===s.length)return!0;if(this.Xt.size>0){const A=this.Xt.getIterator().getNext();if(!u.has(A.field.canonicalString())){const S=s[h];if(!this.on(A,S)||!this._n(this.en[m++],S))return!1}++h}for(;h<s.length;++h)if(m>=this.en.length||!this._n(this.en[m++],s[h]))return!1;return!0}an(){if(this.nn)return null;let e=new er(Kn.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new Tr(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new Tr(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new Tr(s.field,"asc"===s.dir?0:1)));return new qr(qr.UNKNOWN_ID,this.collectionId,r,X.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Yu(a){var e,r;if(It(a instanceof On||a instanceof _n),a instanceof On){if(a instanceof Yr){const u=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(h=>On.create(a.field,"==",h)))||[];return _n.create(u,"or")}return a}const s=a.filters.map(u=>Yu(u));return _n.create(s,a.op)}function Hc(a){if(0===a.getFilters().length)return[];const e=Wl(Yu(a));return It(oh(e)),Xu(e)||cu(e)?[e]:e.getFilters()}function Xu(a){return a instanceof On}function cu(a){return a instanceof _n&&Ta(a)}function oh(a){return Xu(a)||cu(a)||function(r){if(r instanceof _n&&Vu(r)){for(const s of r.getFilters())if(!Xu(s)&&!cu(s))return!1;return!0}return!1}(a)}function Wl(a){if(It(a instanceof On||a instanceof _n),a instanceof On)return a;if(1===a.filters.length)return Wl(a.filters[0]);const e=a.filters.map(s=>Wl(s));let r=_n.create(e,a.op);return r=du(r),oh(r)?r:(It(r instanceof _n),It(us(r)),It(r.filters.length>1),r.filters.reduce((s,u)=>Gc(s,u)))}function Gc(a,e){let r;return It(a instanceof On||a instanceof _n),It(e instanceof On||e instanceof _n),r=a instanceof On?e instanceof On?_n.create([a,e],"and"):ah(a,e):e instanceof On?ah(e,a):function(u,h){if(It(u.filters.length>0&&h.filters.length>0),us(u)&&us(h))return L(u,h.getFilters());const m=Vu(u)?u:h,A=Vu(u)?h:u,S=m.filters.map(V=>Gc(V,A));return _n.create(S,"or")}(a,e),du(r)}function ah(a,e){if(us(e))return L(e,a.getFilters());{const r=e.filters.map(s=>Gc(a,s));return _n.create(r,"or")}}function du(a){if(It(a instanceof On||a instanceof _n),a instanceof On)return a;const e=a.getFilters();if(1===e.length)return du(e[0]);if(or(a))return a;const r=e.map(u=>du(u)),s=[];return r.forEach(u=>{u instanceof On?s.push(u):u instanceof _n&&(u.op===a.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:_n.create(s,a.op)}class pg{constructor(){this.un=new Ju}addToCollectionParentIndex(e,r){return this.un.add(r),he.resolve()}getCollectionParents(e,r){return he.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return he.resolve()}deleteFieldIndex(e,r){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,r){return he.resolve()}getDocumentsMatchingTarget(e,r){return he.resolve(null)}getIndexType(e,r){return he.resolve(0)}getFieldIndexes(e,r){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,r){return he.resolve(Z.min())}getMinOffsetFromCollectionGroup(e,r){return he.resolve(Z.min())}updateCollectionGroup(e,r,s){return he.resolve()}updateIndexEntries(e,r){return he.resolve()}}class Ju{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r]||new er(nn.comparator),h=!u.has(s);return this.index[r]=u.add(s),h}has(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(e){return(this.index[e]||new er(nn.comparator)).toArray()}}const eo=new Uint8Array(0);class gg{constructor(e,r){this.databaseId=r,this.cn=new Ju,this.ln=new ds(s=>Xr(s),(s,u)=>Ds(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const h={collectionId:s,parent:Wt(u)};return uh(e).put(h)}return he.resolve()}getCollectionParents(e,r){const s=[],u=IDBKeyRange.bound([r,""],[Pn(r),""],!1,!0);return uh(e).U(u).next(h=>{for(const m of h){if(m.collectionId!==r)break;s.push(bn(m.parent))}return s})}addFieldIndex(e,r){const s=la(e),u={indexId:(A=r).indexId,collectionGroup:A.collectionGroup,fields:A.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var A;delete u.indexId;const h=s.add(u);if(r.indexState){const m=Oa(e);return h.next(A=>{m.put(hg(A,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return h.next()}deleteFieldIndex(e,r){const s=la(e),u=Oa(e),h=ua(e);return s.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=la(e),s=ua(e),u=Oa(e);return r.j().next(()=>s.j()).next(()=>u.j())}createTargetIndexes(e,r){return he.forEach(this.hn(r),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const h=new lu(s).an();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,r){const s=ua(e);let u=!0;const h=new Map;return he.forEach(this.hn(r),m=>this.Pn(e,m).next(A=>{u&&(u=!!A),h.set(m,A)})).next(()=>{if(u){let m=H();const A=[];return he.forEach(h,(S,V)=>{var Jt;Ke("IndexedDbIndexManager",`Using index ${Jt=S,`id=${Jt.indexId}|cg=${Jt.collectionGroup}|f=${Jt.fields.map(wn=>`${wn.fieldPath}:${wn.kind}`).join(",")}`} to execute ${Xr(r)}`);const q=function(Jt,wn){const tr=_i(wn);if(void 0===tr)return null;for(const Vn of Vr(Jt,tr.fieldPath))switch(Vn.op){case"array-contains-any":return Vn.value.arrayValue.values||[];case"array-contains":return[Vn.value]}return null}(V,S),te=function(Jt,wn){const tr=new Map;for(const Vn of Dr(wn))for(const Pe of Vr(Jt,Vn.fieldPath))switch(Pe.op){case"==":case"in":tr.set(Vn.fieldPath.canonicalString(),Pe.value);break;case"not-in":case"!=":return tr.set(Vn.fieldPath.canonicalString(),Pe.value),Array.from(tr.values())}return null}(V,S),ge=function(Jt,wn){const tr=[];let Vn=!0;for(const Pe of Dr(wn)){const pe=0===Pe.kind?Po(Jt,Pe.fieldPath,Jt.startAt):di(Jt,Pe.fieldPath,Jt.startAt);tr.push(pe.value),Vn&&(Vn=pe.inclusive)}return new As(tr,Vn)}(V,S),$e=function(Jt,wn){const tr=[];let Vn=!0;for(const Pe of Dr(wn)){const pe=0===Pe.kind?di(Jt,Pe.fieldPath,Jt.endAt):Po(Jt,Pe.fieldPath,Jt.endAt);tr.push(pe.value),Vn&&(Vn=pe.inclusive)}return new As(tr,Vn)}(V,S),ht=this.In(S,V,ge),St=this.In(S,V,$e),At=this.Tn(S,V,te),en=this.En(S.indexId,q,ht,ge.inclusive,St,$e.inclusive,At);return he.forEach(en,un=>s.G(un,r.limit).next(Jt=>{Jt.forEach(wn=>{const tr=bt.fromSegments(wn.documentKey);m.has(tr)||(m=m.add(tr),A.push(tr))})}))}).next(()=>A)}return he.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:Hc(_n.create(e.filters,"and")).map(s=>Ci(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,u,h,m,A){const S=(null!=r?r.length:1)*Math.max(s.length,h.length),V=S/(null!=r?r.length:1),q=[];for(let te=0;te<S;++te){const ge=r?this.dn(r[te/V]):eo,$e=this.An(e,ge,s[te%V],u),ht=this.Rn(e,ge,h[te%V],m),St=A.map(At=>this.An(e,ge,At,!0));q.push(...this.createRange($e,ht,St))}return q}An(e,r,s,u){const h=new mo(e,bt.empty(),r,s);return u?h:h.Zt()}Rn(e,r,s,u){const h=new mo(e,bt.empty(),r,s);return u?h.Zt():h}Pn(e,r){const s=new lu(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(h=>{let m=null;for(const A of h)s.rn(A)&&(!m||A.fields.length>m.fields.length)&&(m=A);return m})}getIndexType(e,r){let s=2;const u=this.hn(r);return he.forEach(u,h=>this.Pn(e,h).next(m=>{m?0!==s&&m.fields.length<function(S){let V=new er(Kn.comparator),q=!1;for(const te of S.filters)for(const ge of te.getFlattenedFilters())ge.field.isKeyField()||("array-contains"===ge.op||"array-contains-any"===ge.op?q=!0:V=V.add(ge.field));for(const te of S.orderBy)te.field.isKeyField()||(V=V.add(te.field));return V.size+(q?1:0)}(h)&&(s=1):s=0})).next(()=>null!==r.limit&&u.length>1&&2===s?1:s)}Vn(e,r){const s=new Qu;for(const u of Dr(e)){const h=r.data.field(u.fieldPath);if(null==h)return null;const m=s.Yt(u.kind);aa.vt.It(h,m)}return s.zt()}dn(e){const r=new Qu;return aa.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new Qu;return aa.vt.It(Rr(this.databaseId,r),s.Yt(function(h){const m=Dr(h);return 0===m.length?0:m[m.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let u=[];u.push(new Qu);let h=0;for(const m of Dr(e)){const A=s[h++];for(const S of u)if(this.fn(r,m.fieldPath)&&Zi(A))u=this.gn(u,m,A);else{const V=S.Yt(m.kind);aa.vt.It(A,V)}}return this.pn(u)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const u=[...e],h=[];for(const m of s.arrayValue.values||[])for(const A of u){const S=new Qu;S.seed(A.zt()),aa.vt.It(m,S.Yt(r.kind)),h.push(S)}return h}fn(e,r){return!!e.filters.find(s=>s instanceof On&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=la(e),u=Oa(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(h=>{const m=[];return he.forEach(h,A=>u.get([A.indexId,this.uid]).next(S=>{m.push(function(q,te){const ge=te?new X(te.sequenceNumber,new Z(go(te.readTime),new bt(bn(te.documentKey)),te.largestBatchId)):X.empty(),$e=q.fields.map(([ht,St])=>new Tr(Kn.fromServerFormat(ht),St));return new qr(q.indexId,q.collectionGroup,$e,ge)}(A,S))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,u)=>{const h=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==h?h:mt(s.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const u=la(e),h=Oa(e);return this.yn(e).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(A=>he.forEach(A,S=>h.put(hg(S.indexId,this.uid,m,s)))))}updateIndexEntries(e,r){const s=new Map;return he.forEach(r,(u,h)=>{const m=s.get(u.collectionGroup);return(m?he.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(A=>(s.set(u.collectionGroup,A),he.forEach(A,S=>this.wn(e,u,S).next(V=>{const q=this.Sn(h,S);return V.isEqual(q)?he.resolve():this.bn(e,h,S,V,q)}))))})}Dn(e,r,s,u){return ua(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,u){return ua(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const u=ua(e);let h=new er(zi);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(m,A)=>{h=h.add(new mo(s.indexId,r,A.arrayValue,A.directionalValue))}).next(()=>h)}Sn(e,r){let s=new er(zi);const u=this.Vn(r,e);if(null==u)return s;const h=_i(r);if(null!=h){const m=e.data.field(h.fieldPath);if(Zi(m))for(const A of m.arrayValue.values||[])s=s.add(new mo(r.indexId,e.key,this.dn(A),u))}else s=s.add(new mo(r.indexId,e.key,eo,u));return s}bn(e,r,s,u,h){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(S,V,q,te,ge){const $e=S.getIterator(),ht=V.getIterator();let St=wi($e),At=wi(ht);for(;St||At;){let en=!1,un=!1;if(St&&At){const Jt=q(St,At);Jt<0?un=!0:Jt>0&&(en=!0)}else null!=St?un=!0:en=!0;en?(te(At),At=wi(ht)):un?(ge(St),St=wi($e)):(St=wi($e),At=wi(ht))}}(u,h,zi,A=>{m.push(this.Dn(e,r,s,A))},A=>{m.push(this.vn(e,r,s,A))}),he.waitFor(m)}yn(e){let r=1;return Oa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,h)=>{h.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((m,A)=>zi(m,A)).filter((m,A,S)=>!A||0!==zi(m,S[A-1]));const u=[];u.push(e);for(const m of s){const A=zi(m,e),S=zi(m,r);if(0===A)u[0]=e.Zt();else if(A>0&&S<0)u.push(m),u.push(m.Zt());else if(S>0)break}u.push(r);const h=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];h.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,eo,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,eo,[]]))}return h}Cn(e,r){return zi(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(bi)}getMinOffset(e,r){return he.mapArray(this.hn(r),s=>this.Pn(e,s).next(u=>u||pt())).next(bi)}}function uh(a){return Sr(a,"collectionParents")}function ua(a){return Sr(a,"indexEntries")}function la(a){return Sr(a,"indexConfiguration")}function Oa(a){return Sr(a,"indexState")}function bi(a){It(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const u=a[s].indexState.offset;re(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Z(e.readTime,e.documentKey,r)}const zc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zu(a,e,r){const s=a.store("mutations"),u=a.store("documentMutations"),h=[],m=IDBKeyRange.only(r.batchId);let A=0;const S=s.J({range:m},(q,te,ge)=>(A++,ge.delete()));h.push(S.next(()=>{It(1===A)}));const V=[];for(const q of r.mutations){const te=Gn(e,q.key.path,r.batchId);h.push(u.delete(te)),V.push(q.key)}return he.waitFor(h).next(()=>V)}function Wc(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw pt();e=a.noDocument}return JSON.stringify(e).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class el{constructor(e,r,s,u){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=u,this.Fn={}}static lt(e,r,s,u){It(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new el(h,r,s,u)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rs(e).J({index:"userMutationsIndex",range:s},(u,h,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(e,r,s,u){const h=_o(e),m=Rs(e);return m.add({}).next(A=>{It("number"==typeof A);const S=new kl(A,r,s,u),V=function($e,ht,St){const At=St.baseMutations.map(un=>Q($e.ct,un)),en=St.mutations.map(un=>Q($e.ct,un));return{userId:ht,batchId:St.batchId,localWriteTimeMs:St.localWriteTime.toMillis(),baseMutations:At,mutations:en}}(this.serializer,this.userId,S),q=[];let te=new er((ge,$e)=>mt(ge.canonicalString(),$e.canonicalString()));for(const ge of u){const $e=Gn(this.userId,ge.key.path,A);te=te.add(ge.key.path.popLast()),q.push(m.put(V)),q.push(h.put($e,io))}return te.forEach(ge=>{q.push(this.indexManager.addToCollectionParentIndex(e,ge))}),e.addOnCommittedListener(()=>{this.Fn[A]=S.keys()}),he.waitFor(q).next(()=>S)})}lookupMutationBatch(e,r){return Rs(e).get(r).next(s=>s?(It(s.userId===this.userId),oa(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?he.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const u=s.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let h=null;return Rs(e).J({index:"userMutationsIndex",range:u},(m,A,S)=>{A.userId===this.userId&&(It(A.batchId>=s),h=oa(this.serializer,A)),S.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Rs(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,h,m)=>{s=h.batchId,m.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rs(e).U("userMutationsIndex",r).next(s=>s.map(u=>oa(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=Yi(this.userId,r.path),u=IDBKeyRange.lowerBound(s),h=[];return _o(e).J({range:u},(m,A,S)=>{const[V,q,te]=m,ge=bn(q);if(V===this.userId&&r.path.isEqual(ge))return Rs(e).get(te).next($e=>{if(!$e)throw pt();It($e.userId===this.userId),h.push(oa(this.serializer,$e))});S.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new er(mt);const u=[];return r.forEach(h=>{const m=Yi(this.userId,h.path),A=IDBKeyRange.lowerBound(m),S=_o(e).J({range:A},(V,q,te)=>{const[ge,$e,ht]=V,St=bn($e);ge===this.userId&&h.path.isEqual(St)?s=s.add(ht):te.done()});u.push(S)}),he.waitFor(u).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1,h=Yi(this.userId,s),m=IDBKeyRange.lowerBound(h);let A=new er(mt);return _o(e).J({range:m},(S,V,q)=>{const[te,ge,$e]=S,ht=bn(ge);te===this.userId&&s.isPrefixOf(ht)?ht.length===u&&(A=A.add($e)):q.done()}).next(()=>this.xn(e,A))}xn(e,r){const s=[],u=[];return r.forEach(h=>{u.push(Rs(e).get(h).next(m=>{if(null===m)throw pt();It(m.userId===this.userId),s.push(oa(this.serializer,m))}))}),he.waitFor(u).next(()=>s)}removeMutationBatch(e,r){return Zu(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),he.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return he.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return _o(e).J({range:s},(h,m,A)=>{if(h[0]===this.userId){const S=bn(h[1]);u.push(S)}else A.done()}).next(()=>{It(0===u.length)})})}containsKey(e,r){return Kl(e,this.userId,r)}Nn(e){return ka(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kl(a,e,r){const s=Yi(e,r.path),u=s[1],h=IDBKeyRange.lowerBound(s);let m=!1;return _o(a).J({range:h,H:!0},(A,S,V)=>{const[q,te,ge]=A;q===e&&te===u&&(m=!0),V.done()}).next(()=>m)}function Rs(a){return Sr(a,"mutations")}function _o(a){return Sr(a,"documentMutations")}function ka(a){return Sr(a,"mutationQueues")}class Uo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Uo(0)}static kn(){return new Uo(-1)}}class lh{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new Uo(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Et.fromTimestamp(new $n(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(e,u)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>yo(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(It(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let u=0;const h=[];return yo(e).J((m,A)=>{const S=Lo(A);S.sequenceNumber<=r&&null===s.get(S.targetId)&&(u++,h.push(this.removeTargetData(e,S)))}).next(()=>he.waitFor(h)).next(()=>u)}forEachTarget(e,r){return yo(e).J((s,u)=>{const h=Lo(u);r(h)})}qn(e){return mg(e).get("targetGlobalKey").next(r=>(It(null!==r),r))}Qn(e,r){return mg(e).put("targetGlobalKey",r)}Kn(e,r){return yo(e).put(Na(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=Xr(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let h=null;return yo(e).J({range:u,index:"queryTargetsIndex"},(m,A,S)=>{const V=Lo(A);Ds(r,V.target)&&(h=V,S.done())}).next(()=>h)}addMatchingKeys(e,r,s){const u=[],h=Bo(e);return r.forEach(m=>{const A=Wt(m.path);u.push(h.put({targetId:s,path:A})),u.push(this.referenceDelegate.addReference(e,s,m))}),he.waitFor(u)}removeMatchingKeys(e,r,s){const u=Bo(e);return he.forEach(r,h=>{const m=Wt(h.path);return he.waitFor([u.delete([s,m]),this.referenceDelegate.removeReference(e,s,h)])})}removeMatchingKeysForTargetId(e,r){const s=Bo(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=Bo(e);let h=H();return u.J({range:s,H:!0},(m,A,S)=>{const V=bn(m[1]),q=new bt(V);h=h.add(q)}).next(()=>h)}containsKey(e,r){const s=Wt(r.path),u=IDBKeyRange.bound([s],[Pn(s)],!1,!0);let h=0;return Bo(e).J({index:"documentTargetsIndex",H:!0,range:u},([m,A],S,V)=>{0!==m&&(h++,V.done())}).next(()=>h>0)}ot(e,r){return yo(e).get(r).next(s=>s?Lo(s):null)}}function yo(a){return Sr(a,"targets")}function mg(a){return Sr(a,"targetGlobal")}function Bo(a){return Sr(a,"targetDocuments")}function _g([a,e],[r,s]){const u=mt(a,r);return 0===u?mt(e,s):u}class h_{constructor(e){this.Un=e,this.buffer=new er(_g),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();_g(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Df{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){ni(s)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Pt(s)}yield r.Hn(3e5)}))}}class f_{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return he.resolve(be.oe);const s=new h_(r);return this.Jn.forEachTarget(e,u=>s.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(e,u=>s.zn(u))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(zc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zc):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,u,h,m,A,S,V;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(te=>(te>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${te}`),u=this.params.maximumSequenceNumbersToCollect):u=te,m=Date.now(),this.nthSequenceNumber(e,u))).next(te=>(s=te,A=Date.now(),this.removeTargets(e,s,r))).next(te=>(h=te,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(te=>(V=Date.now(),Tt()<=Te.$b.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-q}ms\n\tDetermined least recently used ${u} in `+(A-m)+`ms\n\tRemoved ${h} targets in `+(S-A)+`ms\n\tRemoved ${te} documents in `+(V-S)+`ms\nTotal Duration: ${V-q}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:h,documentsRemoved:te})))}}class p_{constructor(e,r){this.db=e,this.garbageCollector=function Kc(a,e){return new f_(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(u=>s+u))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,u)=>r(u))}addReference(e,r,s){return ca(e,s)}removeReference(e,r,s){return ca(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return ca(e,r)}nr(e,r){return function(u,h){let m=!1;return ka(u).Y(A=>Kl(u,A,h).next(S=>(S&&(m=!0),he.resolve(!S)))).next(()=>m)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let h=0;return this.tr(e,(m,A)=>{if(A<=r){const S=this.nr(e,m).next(V=>{if(!V)return h++,s.getEntry(e,m).next(()=>(s.removeEntry(m,Et.min()),Bo(e).delete([0,Wt(m.path)])))});u.push(S)}}).next(()=>he.waitFor(u)).next(()=>s.apply(e)).next(()=>h)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return ca(e,r)}tr(e,r){const s=Bo(e);let u,h=be.oe;return s.J({index:"documentTargetsIndex"},([m,A],{path:S,sequenceNumber:V})=>{0===m?(h!==be.oe&&r(new bt(bn(u)),h),h=V,u=S):h=be.oe}).next(()=>{h!==be.oe&&r(new bt(bn(u)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ca(a,e){return Bo(a).put((u=a.currentSequenceNumber,{targetId:0,path:Wt(e.path),sequenceNumber:u}));var u}class Tf{constructor(){this.changes=new ds(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?he.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return hu(e).put(s)}removeEntry(e,r,s){return hu(e).delete(function(h,m){const A=h.path.toArray();return[A.slice(0,A.length-2),A[A.length-2],Wu(m),A[A.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=jn.newInvalidDocument(r);return hu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fi(r))},(u,h)=>{s=this.ir(r,h)}).next(()=>s)}sr(e,r){let s={size:0,document:jn.newInvalidDocument(r)};return hu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fi(r))},(u,h)=>{s={document:this.ir(r,h),size:Wc(h)}}).next(()=>s)}getEntries(e,r){let s=ts();return this._r(e,r,(u,h)=>{const m=this.ir(u,h);s=s.insert(u,m)}).next(()=>s)}ar(e,r){let s=ts(),u=new An(bt.comparator);return this._r(e,r,(h,m)=>{const A=this.ir(h,m);s=s.insert(h,A),u=u.insert(h,Wc(m))}).next(()=>({documents:s,ur:u}))}_r(e,r,s){if(r.isEmpty())return he.resolve();let u=new er(ch);r.forEach(S=>u=u.add(S));const h=IDBKeyRange.bound(Fi(u.first()),Fi(u.last())),m=u.getIterator();let A=m.getNext();return hu(e).J({index:"documentKeyIndex",range:h},(S,V,q)=>{const te=bt.fromSegments([...V.prefixPath,V.collectionGroup,V.documentId]);for(;A&&ch(A,te)<0;)s(A,null),A=m.getNext();A&&A.isEqual(te)&&(s(A,V),A=m.hasNext()?m.getNext():null),A?q.$(Fi(A)):q.done()}).next(()=>{for(;A;)s(A,null),A=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(e,r,s,u,h){const m=r.path,A=[m.popLast().toArray(),m.lastSegment(),Wu(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hu(e).U(IDBKeyRange.bound(A,S,!0)).next(V=>{h?.incrementDocumentReadCount(V.length);let q=ts();for(const te of V){const ge=this.ir(bt.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);ge.isFoundDocument()&&(lo(r,ge)||u.has(ge.key))&&(q=q.insert(ge.key,ge))}return q})}getAllFromCollectionGroup(e,r,s,u){let h=ts();const m=fu(r,s),A=fu(r,Z.max());return hu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,A,!0)},(S,V,q)=>{const te=this.ir(bt.fromSegments(V.prefixPath.concat(V.collectionGroup,V.documentId)),V);h=h.insert(te.key,te),h.size===u&&q.done()}).next(()=>h)}newChangeBuffer(e){return new vg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return tl(e).get("remoteDocumentGlobalKey").next(r=>(It(!!r),r))}rr(e,r){return tl(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function Uc(a,e){let r;if(e.document)r=E(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=bt.fromSegments(e.noDocument.path),u=go(e.noDocument.readTime);r=jn.newNoDocument(s,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const s=bt.fromSegments(e.unknownDocument.path),u=go(e.unknownDocument.version);r=jn.newUnknownDocument(s,u)}}return e.readTime&&r.setReadTime(function(u){const h=new $n(u[0],u[1]);return Et.fromTimestamp(h)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(Et.min()))return s}return jn.newInvalidDocument(e)}}function pi(a){return new yg(a)}class vg extends Tf{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new ds(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const r=[];let s=0,u=new er((h,m)=>mt(h.canonicalString(),m.canonicalString()));return this.changes.forEach((h,m)=>{const A=this.lr.get(h);if(r.push(this.cr.removeEntry(e,h,A.readTime)),m.isValidDocument()){const S=ou(this.cr.serializer,m);u=u.add(h.path.popLast());const V=Wc(S);s+=V-A.size,r.push(this.cr.addEntry(e,h,S))}else if(s-=A.size,this.trackRemovals){const S=ou(this.cr.serializer,m.convertToNoDocument(Et.min()));r.push(this.cr.addEntry(e,h,S))}}),u.forEach(h=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,h))}),r.push(this.cr.updateMetadata(e,s)),he.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:u})=>(u.forEach((h,m)=>{this.lr.set(h,{size:m,readTime:s.get(h).readTime})}),s))}}function tl(a){return Sr(a,"remoteDocumentGlobal")}function hu(a){return Sr(a,"remoteDocumentsV14")}function Fi(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fu(a,e){const r=e.documentKey.path.toArray();return[a,Wu(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function ch(a,e){const r=a.path.toArray(),s=e.path.toArray();let u=0;for(let h=0;h<r.length-2&&h<s.length-2;++h)if(u=mt(r[h],s[h]),u)return u;return u=mt(r.length,s.length),u||(u=mt(r[r.length-2],s[s.length-2]),u||mt(r[r.length-1],s[s.length-1]))}class qc{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class nl{constructor(e,r,s,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==s&&Za(s.mutation,u,vr.empty(),$n.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,H()).next(()=>s))}getLocalViewOfDocuments(e,r,s=H()){const u=hs();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,s).next(h=>{let m=Js();return h.forEach((A,S)=>{m=m.insert(A,S.overlayedDocument)}),m}))}getOverlayedDocuments(e,r){const s=hs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,H()))}populateOverlays(e,r,s){const u=[];return s.forEach(h=>{r.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(e,u).next(h=>{h.forEach((m,A)=>{r.set(m,A)})})}computeViews(e,r,s,u){let h=ts();const m=No(),A=No();return r.forEach((S,V)=>{const q=s.get(V.key);u.has(V.key)&&(void 0===q||q.mutation instanceof Oo)?h=h.insert(V.key,V):void 0!==q?(m.set(V.key,q.mutation.getFieldMask()),Za(q.mutation,V,q.mutation.getFieldMask(),$n.now())):m.set(V.key,vr.empty())}),this.recalculateAndSaveOverlays(e,h).next(S=>(S.forEach((V,q)=>m.set(V,q)),r.forEach((V,q)=>{var te;return A.set(V,new qc(q,null!==(te=m.get(V))&&void 0!==te?te:null))}),A))}recalculateAndSaveOverlays(e,r){const s=No();let u=new An((m,A)=>m-A),h=H();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(m=>{for(const A of m)A.keys().forEach(S=>{const V=r.get(S);if(null===V)return;let q=s.get(S)||vr.empty();q=A.applyToLocalView(V,q),s.set(S,q);const te=(u.get(A.batchId)||H()).add(S);u=u.insert(A.batchId,te)})}).next(()=>{const m=[],A=u.getReverseIterator();for(;A.hasNext();){const S=A.getNext(),V=S.key,q=S.value,te=Xa();q.forEach(ge=>{if(!h.has(ge)){const $e=xo(r.get(ge),s.get(ge));null!==$e&&te.set(ge,$e),h=h.add(ge)}}),m.push(this.documentOverlayCache.saveOverlays(e,V,te))}return he.waitFor(m)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,u){return bt.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):uo(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,u):this.getDocumentsMatchingCollectionQuery(e,r,s,u);var m}getNextDocuments(e,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,u).next(h=>{const m=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,u-h.size):he.resolve(hs());let A=-1,S=h;return m.next(V=>he.forEach(V,(q,te)=>(A<te.largestBatchId&&(A=te.largestBatchId),h.get(q)?he.resolve():this.remoteDocumentCache.getEntry(e,q).next(ge=>{S=S.insert(q,ge)}))).next(()=>this.populateOverlays(e,V,h)).next(()=>this.computeViews(e,S,V,H())).next(q=>({batchId:A,changes:Ol(q)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bt(r)).next(s=>{let u=Js();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,s,u){const h=r.collectionGroup;let m=Js();return this.indexManager.getCollectionParents(e,h).next(A=>he.forEach(A,S=>{const V=(te=r,ge=S.child(h),new Ls(ge,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));var te,ge;return this.getDocumentsMatchingCollectionQuery(e,V,s,u).next(q=>{q.forEach((te,ge)=>{m=m.insert(te,ge)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,r,s,u){let h;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(m=>(h=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,h,u))).next(m=>{h.forEach((S,V)=>{const q=V.getKey();null===m.get(q)&&(m=m.insert(q,jn.newInvalidDocument(q)))});let A=Js();return m.forEach((S,V)=>{const q=h.get(S);void 0!==q&&Za(q.mutation,V,vr.empty(),$n.now()),lo(r,V)&&(A=A.insert(S,V))}),A})}}class Eg{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return he.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:_r(u.createTime)}),he.resolve();var u}getNamedQuery(e,r){return he.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(u=r).name,query:au(u.bundledQuery),readTime:_r(u.readTime)}),he.resolve();var u}}class Ig{constructor(){this.overlays=new An(bt.comparator),this.Ir=new Map}getOverlay(e,r){return he.resolve(this.overlays.get(r))}getOverlays(e,r){const s=hs();return he.forEach(r,u=>this.getOverlay(e,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((u,h)=>{this.ht(e,r,h)}),he.resolve()}removeOverlaysForBatchId(e,r,s){const u=this.Ir.get(s);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.Ir.delete(s)),he.resolve()}getOverlaysForCollection(e,r,s){const u=hs(),h=r.length+1,m=new bt(r.child("")),A=this.overlays.getIteratorFrom(m);for(;A.hasNext();){const S=A.getNext().value,V=S.getKey();if(!r.isPrefixOf(V.path))break;V.path.length===h&&S.largestBatchId>s&&u.set(S.getKey(),S)}return he.resolve(u)}getOverlaysForCollectionGroup(e,r,s,u){let h=new An((V,q)=>V-q);const m=this.overlays.getIterator();for(;m.hasNext();){const V=m.getNext().value;if(V.getKey().getCollectionGroup()===r&&V.largestBatchId>s){let q=h.get(V.largestBatchId);null===q&&(q=hs(),h=h.insert(V.largestBatchId,q)),q.set(V.getKey(),V)}}const A=hs(),S=h.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((V,q)=>A.set(V,q)),!(A.size()>=u)););return he.resolve(A)}ht(e,r,s){const u=this.overlays.get(s.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(s.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new $u(r,s));let h=this.Ir.get(r);void 0===h&&(h=H(),this.Ir.set(r,h)),this.Ir.set(r,h.add(s.key))}}class wg{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,he.resolve()}}class Cf{constructor(){this.Tr=new er(Ar.Er),this.dr=new er(Ar.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new Ar(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new Ar(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new bt(new nn([])),s=new Ar(r,e),u=new Ar(r,e+1),h=[];return this.dr.forEachInRange([s,u],m=>{this.Vr(m),h.push(m.key)}),h}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new bt(new nn([])),s=new Ar(r,e),u=new Ar(r,e+1);let h=H();return this.dr.forEachInRange([s,u],m=>{h=h.add(m.key)}),h}containsKey(e){const r=new Ar(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class Ar{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return bt.comparator(e.key,r.key)||mt(e.wr,r.wr)}static Ar(e,r){return mt(e.wr,r.wr)||bt.comparator(e.key,r.key)}}class dh{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new er(Ar.Er)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,u){const h=this.Sr;this.Sr++;const m=new kl(h,r,s,u);this.mutationQueue.push(m);for(const A of u)this.br=this.br.add(new Ar(A.key,h)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return he.resolve(m)}lookupMutationBatch(e,r){return he.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.vr(r+1),h=u<0?0:u;return he.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new Ar(r,0),u=new Ar(r,Number.POSITIVE_INFINITY),h=[];return this.br.forEachInRange([s,u],m=>{const A=this.Dr(m.wr);h.push(A)}),he.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new er(mt);return r.forEach(u=>{const h=new Ar(u,0),m=new Ar(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([h,m],A=>{s=s.add(A.wr)})}),he.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1;let h=s;bt.isDocumentKey(h)||(h=h.child(""));const m=new Ar(new bt(h),0);let A=new er(mt);return this.br.forEachWhile(S=>{const V=S.key.path;return!!s.isPrefixOf(V)&&(V.length===u&&(A=A.add(S.wr)),!0)},m),he.resolve(this.Cr(A))}Cr(e){const r=[];return e.forEach(s=>{const u=this.Dr(s);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){It(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return he.forEach(r.mutations,u=>{const h=new Ar(u.key,r.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new Ar(r,0),u=this.br.firstAfterOrEqual(s);return he.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return he.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class rl{constructor(e){this.Mr=e,this.docs=new An(bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,u=this.docs.get(s),h=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:m}),this.size+=m-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return he.resolve(s?s.document.mutableCopy():jn.newInvalidDocument(r))}getEntries(e,r){let s=ts();return r.forEach(u=>{const h=this.docs.get(u);s=s.insert(u,h?h.document.mutableCopy():jn.newInvalidDocument(u))}),he.resolve(s)}getDocumentsMatchingQuery(e,r,s,u){let h=ts();const m=r.path,A=new bt(m.child("")),S=this.docs.getIteratorFrom(A);for(;S.hasNext();){const{key:V,value:{document:q}}=S.getNext();if(!m.isPrefixOf(V.path))break;V.path.length>m.length+1||re(G(q),s)<=0||(u.has(q.key)||lo(r,q))&&(h=h.insert(q.key,q.mutableCopy()))}return he.resolve(h)}getAllFromCollectionGroup(e,r,s,u){pt()}Or(e,r){return he.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new bf(this)}getSize(e){return he.resolve(this.size)}}class bf extends Tf{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(e,u)):this.cr.removeEntry(s)}),he.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class Qc{constructor(e){this.persistence=e,this.Nr=new ds(r=>Xr(r),Ds),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cf,this.targetCount=0,this.kr=Uo.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,u)=>r(u)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),he.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Uo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,he.resolve()}updateTargetData(e,r){return this.Kn(r),he.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,r,s){let u=0;const h=[];return this.Nr.forEach((m,A)=>{A.sequenceNumber<=r&&null===s.get(A.targetId)&&(this.Nr.delete(m),h.push(this.removeMatchingKeysForTargetId(e,A.targetId)),u++)}),he.waitFor(h).next(()=>u)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return he.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),he.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const u=this.persistence.referenceDelegate,h=[];return u&&r.forEach(m=>{h.push(u.markPotentiallyOrphaned(e,m))}),he.waitFor(h)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),he.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return he.resolve(s)}containsKey(e,r){return he.resolve(this.Br.containsKey(r))}}class hh{constructor(e,r){this.qr={},this.overlays={},this.Qr=new be(0),this.Kr=!1,this.Kr=!0,this.$r=new wg,this.referenceDelegate=e(this),this.Ur=new Qc(this),this.indexManager=new pg,this.remoteDocumentCache=new rl(s=>this.referenceDelegate.Wr(s)),this.serializer=new su(r),this.Gr=new Eg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Ig,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new dh(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){Ke("MemoryPersistence","Starting transaction:",e);const u=new fh(this.Qr.next());return this.referenceDelegate.zr(),s(u).next(h=>this.referenceDelegate.jr(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Hr(e,r){return he.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class fh extends Ct{constructor(e){super(),this.currentSequenceNumber=e}}class Yc{constructor(e){this.persistence=e,this.Jr=new Cf,this.Yr=null}static Zr(e){return new Yc(e)}get Xr(){if(this.Yr)return this.Yr;throw pt()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),he.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),he.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),he.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(h=>this.Xr.add(h.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xr,s=>{const u=bt.fromPath(s);return this.ei(e,u).next(h=>{h||r.removeEntry(u,Et.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return he.or([()=>he.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Sf{constructor(e){this.serializer=e}O(e,r,s,u){const h=new Hn("createOrUpgrade",r);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ri,{unique:!0}),S.createObjectStore("documentMutations"),Xc(e),function(S){S.createObjectStore("remoteDocuments")}(e));let m=he.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),Xc(e)),m=m.next(()=>function(S){const V=S.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return V.put("targetGlobalKey",q)}(h))),s<4&&u>=4&&(0!==s&&(m=m.next(()=>function(S,V){return V.store("mutations").U().next(q=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ri,{unique:!0});const te=V.store("mutations"),ge=q.map($e=>te.put($e));return he.waitFor(ge)})}(e,h))),m=m.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(m=m.next(()=>this.ni(h))),s<6&&u>=6&&(m=m.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ri(h)))),s<7&&u>=7&&(m=m.next(()=>this.ii(h))),s<8&&u>=8&&(m=m.next(()=>this.si(e,h))),s<9&&u>=9&&(m=m.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(m=m.next(()=>this.oi(h))),s<11&&u>=11&&(m=m.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(m=m.next(()=>{!function(S){const V=S.createObjectStore("documentOverlays",{keyPath:ks});V.createIndex("collectionPathOverlayIndex",is,{unique:!1}),V.createIndex("collectionGroupOverlayIndex",Ea,{unique:!1})}(e)})),s<13&&u>=13&&(m=m.next(()=>function(S){const V=S.createObjectStore("remoteDocumentsV14",{keyPath:Xi});V.createIndex("documentKeyIndex",Ao),V.createIndex("collectionGroupIndex",zs)}(e)).next(()=>this._i(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(m=m.next(()=>this.ai(e,h))),s<15&&u>=15&&(m=m.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:Pi}).createIndex("sequenceNumberIndex",To,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:Mi}).createIndex("documentKeyIndex",Co,{unique:!1})}(e))),s<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&u>=17&&(m=m.next(()=>{!function(S){S.createObjectStore("globals",{keyPath:"name"})}(e)})),m}ri(e){let r=0;return e.store("remoteDocuments").J((s,u)=>{r+=Wc(u)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(u=>he.forEach(u,h=>{const m=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",m).next(A=>he.forEach(A,S=>{It(S.userId===h.userId);const V=oa(this.serializer,S);return Zu(e,h.userId,V).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const h=[];return s.J((m,A)=>{const S=new nn(m),V=[0,Wt(S)];h.push(r.get(V).next(q=>q?he.resolve():r.put({targetId:0,path:Wt(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>he.waitFor(h))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Es});const s=r.store("collectionParents"),u=new Ju,h=m=>{if(u.add(m)){const A=m.lastSegment(),S=m.popLast();return s.put({collectionId:A,parent:Wt(S)})}};return r.store("remoteDocuments").J({H:!0},(m,A)=>{const S=new nn(m);return h(S.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,A,S],V)=>{const q=bn(A);return h(q.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,u)=>{const h=Lo(u),m=Na(this.serializer,h);return r.put(m)})}_i(e,r){const s=r.store("remoteDocuments"),u=[];return s.J((h,m)=>{const A=r.store("remoteDocumentsV14"),S=(te=m,te.document?new bt(nn.fromString(te.document.name).popFirst(5)):te.noDocument?bt.fromSegments(te.noDocument.path):te.unknownDocument?bt.fromSegments(te.unknownDocument.path):pt()).path.toArray(),V={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var te;u.push(A.put(V))}).next(()=>he.waitFor(u))}ai(e,r){const s=r.store("mutations"),u=pi(this.serializer),h=new hh(Yc.Zr,this.serializer.ct);return s.U().next(m=>{const A=new Map;return m.forEach(S=>{var V;let q=null!==(V=A.get(S.userId))&&void 0!==V?V:H();oa(this.serializer,S).keys().forEach(te=>q=q.add(te)),A.set(S.userId,q)}),he.forEach(A,(S,V)=>{const q=new xe(V),te=Bc.lt(this.serializer,q),ge=h.getIndexManager(q),$e=el.lt(q,this.serializer,ge,h.referenceDelegate);return new nl(u,$e,te,ge).recalculateAndSaveOverlaysForDocumentKeys(new oo(r,be.oe),S).next()})})}}function Xc(a){a.createObjectStore("targetDocuments",{keyPath:Do}).createIndex("documentTargetsIndex",$r,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ka,{unique:!0}),a.createObjectStore("targetGlobal")}const Ql="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yl{constructor(e,r,s,u,h,m,A,S,V,q,te=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=h,this.window=m,this.document=A,this.ci=V,this.li=q,this.hi=te,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=ge=>Promise.resolve(),!Yl.D())throw new qe(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p_(this,u),this.Ai=r+"main",this.serializer=new su(S),this.Ri=new tn(this.Ai,this.hi,new Sf(this.serializer)),this.$r=new Gl,this.Ur=new lh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pi(this.serializer),this.Gr=new fg,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===q&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Le.FAILED_PRECONDITION,Ql);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new be(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,Ce.A)(function*(u){if(r.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,Ce.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,Ce.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fa(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ni(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pu(e).get("owner").next(r=>he.resolve(this.vi(r)))}Ci(e){return Fa(e).delete(this.clientId)}Fi(){var e=this;return(0,Ce.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Sr(s,"clientMetadata");return u.U().next(h=>{const m=e.xi(h,18e5),A=h.filter(S=>-1===m.indexOf(S));return he.forEach(A,S=>u.delete(S.clientId)).next(()=>A)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?he.resolve(!0):pu(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new qe(Le.FAILED_PRECONDITION,Ql);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fa(e).U().next(s=>void 0===this.xi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&Ke("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ce.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new oo(r,be.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Fa(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return el.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gg(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bc.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){Ke("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",h=17===(S=this.hi)?bo:16===S?Da:15===S?so:14===S?Aa:13===S?wa:12===S?Ia:11===S?Bi:void pt();var S;let m;return this.Ri.runTransaction(e,u,h,A=>(m=new oo(A,this.Qr?this.Qr.next():be.oe),"readwrite-primary"===r?this.wi(m).next(S=>!!S||this.Si(m)).next(S=>{if(!S)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new qe(Le.FAILED_PRECONDITION,et);return s(m)}).next(S=>this.Di(m).next(()=>S)):this.Ki(m).next(()=>s(m)))).then(A=>(m.raiseOnCommittedEvent(),A))}Ki(e){return pu(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new qe(Le.FAILED_PRECONDITION,Ql)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pu(e).put("owner",r)}static D(){return tn.D()}bi(e){const r=pu(e);return r.get("owner").next(s=>this.vi(s)?(Ke("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):he.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(Ot(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,Fe.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ot("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pu(a){return Sr(a,"owner")}function Fa(a){return Sr(a,"clientMetadata")}function il(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class gu{constructor(e,r,s,u){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=u}static Wi(e,r){let s=H(),u=H();for(const h of r.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new gu(e,r.fromCache,s,u)}}class Rf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ph{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Fe.nr)()?8:ir((0,Fe.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,u){const h={result:null};return this.Yi(e,r).next(m=>{h.result=m}).next(()=>{if(!h.result)return this.Zi(e,r,u,s).next(m=>{h.result=m})}).next(()=>{if(h.result)return;const m=new Rf;return this.Xi(e,r,m).next(A=>{if(h.result=A,this.zi)return this.es(e,r,m,A.size)})}).next(()=>h.result)}es(e,r,s,u){return s.documentReadCount<this.ji?(Tt()<=Te.$b.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",Gi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),he.resolve()):(Tt()<=Te.$b.DEBUG&&Ke("QueryEngine","Query:",Gi(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Hi*u?(Tt()<=Te.$b.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",Gi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(r))):he.resolve())}Yi(e,r){if(Us(r))return he.resolve(null);let s=Gr(r);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=Mo(r,null,"F"),s=Gr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const m=H(...h);return this.Ji.getDocuments(e,m).next(A=>this.indexManager.getMinOffset(e,s).next(S=>{const V=this.ts(r,A);return this.ns(r,V,m,S.readTime)?this.Yi(e,Mo(r,null,"F")):this.rs(e,V,r,S)}))})))}Zi(e,r,s,u){return Us(r)||u.isEqual(Et.min())?he.resolve(null):this.Ji.getDocuments(e,s).next(h=>{const m=this.ts(r,h);return this.ns(r,m,s,u)?he.resolve(null):(Tt()<=Te.$b.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Gi(r)),this.rs(e,m,r,W(u,-1)).next(A=>A))})}ts(e,r){let s=new er(xc(e));return r.forEach((u,h)=>{lo(e,h)&&(s=s.add(h))}),s}ns(e,r,s,u){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const h="F"===e.limitType?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Xi(e,r,s){return Tt()<=Te.$b.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Gi(r)),this.Ji.getDocumentsMatchingQuery(e,r,Z.min(),s)}rs(e,r,s,u){return this.Ji.getDocumentsMatchingQuery(e,s,u).next(h=>(r.forEach(m=>{h=h.insert(m.key,m)}),h))}}class gh{constructor(e,r,s,u){this.persistence=e,this.ss=r,this.serializer=u,this.os=new An(mt),this._s=new ds(h=>Xr(h),Ds),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nl(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Xl(a,e,r,s){return new gh(a,e,r,s)}function mh(a,e){return _h.apply(this,arguments)}function _h(){return(_h=(0,Ce.A)(function*(a,e){const r=ut(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(h=>(u=h,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(h=>{const m=[],A=[];let S=H();for(const V of u){m.push(V.batchId);for(const q of V.mutations)S=S.add(q.key)}for(const V of h){A.push(V.batchId);for(const q of V.mutations)S=S.add(q.key)}return r.localDocuments.getDocuments(s,S).next(V=>({hs:V,removedBatchIds:m,addedBatchIds:A}))})})})).apply(this,arguments)}function mu(a){const e=ut(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Mf(a,e,r){let s=H(),u=H();return r.forEach(h=>s=s.add(h)),e.getEntries(a,s).next(h=>{let m=ts();return r.forEach((A,S)=>{const V=h.get(A);S.isFoundDocument()!==V.isFoundDocument()&&(u=u.add(A)),S.isNoDocument()&&S.version.isEqual(Et.min())?(e.removeEntry(A,S.readTime),m=m.insert(A,S)):!V.isValidDocument()||S.version.compareTo(V.version)>0||0===S.version.compareTo(V.version)&&V.hasPendingWrites?(e.addEntry(S),m=m.insert(A,S)):Ke("LocalStore","Ignoring outdated watch update for ",A,". Current version:",V.version," Watch version:",S.version)}),{Ps:m,Is:u}})}function sl(a,e){const r=ut(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function _u(a,e){const r=ut(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.Ur.getTargetData(s,e).next(h=>h?(u=h,he.resolve(u)):r.Ur.allocateTargetId(s).next(m=>(u=new sa(e,m,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.os.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function ol(a,e,r){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,Ce.A)(function*(a,e,r){const s=ut(a),u=s.os.get(e),h=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",h,m=>s.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!ni(m))throw m;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}s.os=s.os.remove(e),s._s.delete(u.target)})).apply(this,arguments)}function ed(a,e,r){const s=ut(a);let u=Et.min(),h=H();return s.persistence.runTransaction("Execute query","readwrite",m=>function(S,V,q){const te=ut(S),ge=te._s.get(q);return void 0!==ge?he.resolve(te.os.get(ge)):te.Ur.getTargetData(V,q)}(s,m,Gr(e)).next(A=>{if(A)return u=A.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(m,A.targetId).next(S=>{h=S})}).next(()=>s.ss.getDocumentsMatchingQuery(m,e,r?u:Et.min(),r?h:H())).next(A=>(Jl(s,Ya(e),A),{documents:A,Ts:h})))}function td(a,e){const r=ut(a),s=ut(r.Ur),u=r.os.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",h=>s.ot(h,e).next(m=>m?m.target:null))}function Nf(a,e){const r=ut(a),s=r.us.get(e)||Et.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,e,W(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jl(r,e,u),u))}function Jl(a,e,r){let s=a.us.get(e)||Et.min();r.forEach((u,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),a.us.set(e,s)}function yh(){return(yh=(0,Ce.A)(function*(a,e,r,s){const u=ut(a);let h=H(),m=ts();for(const V of r){const q=e.Es(V.metadata.name);V.document&&(h=h.add(q));const te=e.ds(V);te.setReadTime(e.As(V.metadata.readTime)),m=m.insert(q,te)}const A=u.cs.newChangeBuffer({trackRemovals:!0}),S=yield _u(u,(q=s,Gr(cs(nn.fromString(`__bundle__/docs/${q}`)))));var q;return u.persistence.runTransaction("Apply bundle documents","readwrite",V=>Mf(V,A,m).next(q=>(A.apply(V),q)).next(q=>u.Ur.removeMatchingKeysForTargetId(V,S.targetId).next(()=>u.Ur.addMatchingKeys(V,h,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(V,q.Ps,q.Is)).next(()=>q.Ps)))})).apply(this,arguments)}function xf(a,e){return rd.apply(this,arguments)}function rd(){return(rd=(0,Ce.A)(function*(a,e,r=H()){const s=yield _u(a,Gr(au(e.bundledQuery))),u=ut(a);return u.persistence.runTransaction("Save named query","readwrite",h=>{const m=_r(e.readTime);if(s.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(h,e);const A=s.withResumeToken(Dt.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(A.targetId,A),u.Ur.updateTargetData(h,A).next(()=>u.Ur.removeMatchingKeysForTargetId(h,s.targetId)).next(()=>u.Ur.addMatchingKeys(h,r,s.targetId)).next(()=>u.Gr.saveNamedQuery(h,e))})})).apply(this,arguments)}function vh(a,e){return`firestore_clients_${a}_${e}`}function Ag(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Eh(a,e){return`firestore_targets_${a}_${e}`}class id{constructor(e,r,s,u){this.user=e,this.batchId=r,this.state=s,this.error=u}static Rs(e,r,s){const u=JSON.parse(s);let h,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(h=new qe(u.error.code,u.error.message))),m?new id(e,r,u.state,h):(Ot("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yu{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let u,h="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(u=new qe(s.error.code,s.error.message))),h?new yu(e,s.state,u):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sd{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,h=j();for(let m=0;u&&m<s.activeTargetIds.length;++m)u=Yt(s.activeTargetIds[m]),h=h.add(s.activeTargetIds[m]);return u?new sd(e,h):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class od{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new od(r.clientId,r.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zl{constructor(){this.activeTargetIds=j()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Of{constructor(e,r,s,u,h){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new An(mt),this.started=!1,this.bs=[];const m=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.Ds=vh(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Zl),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.A)(function*(){const r=yield e.syncEngine.Qi();for(const u of r){if(u===e.ps)continue;const h=e.getItem(vh(e.persistenceKey,u));if(h){const m=sd.Rs(u,h);m&&(e.Ss=e.Ss.insert(m.clientId,m))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const u=e.Ls(s);u&&e.Bs(u)}for(const u of e.bs)e.ws(u);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Eh(this.persistenceKey,e));if(s){const u=yu.Rs(e,s);u&&(r=u.state)}}return this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Eh(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(u=>{this.Qs(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ke("SharedClientState","READ",e,r),r}setItem(e,r){Ke("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if(Ke("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,Ce.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const u=r.Gs(s.key);return r.zs(u,null)}{const u=r.js(s.key,s.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const u=r.Hs(s.key,s.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const u=r.Ys(s.key,s.newValue);if(u)return r.Zs(u)}}else if(s.key===r.xs){if(null!==s.newValue){const u=r.Ls(s.newValue);if(u)return r.Bs(u)}}else if(s.key===r.vs){const u=function(m){let A=be.oe;if(null!=m)try{const S=JSON.parse(m);It("number"==typeof S),A=S}catch(S){Ot("SharedClientState","Failed to read sequence number from WebStorage",S)}return A}(s.newValue);u!==be.oe&&r.sequenceNumberHandler(u)}else if(s.key===r.Os){const u=r.Xs(s.newValue);yield Promise.all(u.map(h=>r.syncEngine.eo(h)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const u=new id(this.currentUser,e,r,s),h=Ag(this.persistenceKey,this.currentUser,e);this.setItem(h,u.Vs())}Qs(e){const r=Ag(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const u=Eh(this.persistenceKey,e),h=new yu(e,r,s);this.setItem(u,h.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return sd.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),u=Number(s[1]);return id.Rs(new xe(void 0!==s[2]?s[2]:null),u,r)}Ys(e,r){const s=this.Ms.exec(e),u=Number(s[1]);return yu.Rs(u,r)}Ls(e){return od.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,Ce.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),u=this.ks(this.Ss),h=this.ks(s),m=[],A=[];return h.forEach(S=>{u.has(S)||m.push(S)}),u.forEach(S=>{h.has(S)||A.push(S)}),this.syncEngine.io(m,A).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=j();return e.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class Ih{constructor(){this.so=new Zl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zl,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kf{_o(e){}shutdown(){}}class Dg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wh=null;function al(){return null===wh?wh=268435456+Math.round(2147483648*Math.random()):wh++,"0x"+wh.toString(16)}const ad={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ud{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Wi="WebChannelConnection";class Ah extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${u}/databases/${h}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${h}`}get Fo(){return!1}Mo(r,s,u,h,m){const A=al(),S=this.xo(r,s.toUriEncodedString());Ke("RestConnection",`Sending RPC '${r}' ${A}:`,S,u);const V={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(V,h,m),this.No(r,S,V,u).then(q=>(Ke("RestConnection",`Received RPC '${r}' ${A}: `,q),q),q=>{throw Un("RestConnection",`RPC '${r}' ${A} failed with error: `,q,"url: ",S,"request:",u),q})}Lo(r,s,u,h,m,A){return this.Mo(r,s,u,h,m)}Oo(r,s,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+se,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((h,m)=>r[m]=h),u&&u.headers.forEach((h,m)=>r[m]=h)}xo(r,s){return`${this.Do}/v1/${s}:${ad[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,u){const h=al();return new Promise((m,A)=>{const S=new an;S.setWithCredentials(!0),S.listenOnce(Ft.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Vt.NO_ERROR:const q=S.getResponseJson();Ke(Wi,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(q)),m(q);break;case Vt.TIMEOUT:Ke(Wi,`RPC '${e}' ${h} timed out`),A(new qe(Le.DEADLINE_EXCEEDED,"Request time out"));break;case Vt.HTTP_ERROR:const te=S.getStatus();if(Ke(Wi,`RPC '${e}' ${h} failed with status:`,te,"response text:",S.getResponseText()),te>0){let ge=S.getResponseJson();Array.isArray(ge)&&(ge=ge[0]);const $e=ge?.error;if($e&&$e.status&&$e.message){const ht=function(At){const en=At.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(en)>=0?en:Le.UNKNOWN}($e.status);A(new qe(ht,$e.message))}else A(new qe(Le.UNKNOWN,"Server responded with status "+S.getStatus()))}else A(new qe(Le.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Ke(Wi,`RPC '${e}' ${h} completed.`)}});const V=JSON.stringify(u);Ke(Wi,`RPC '${e}' ${h} sending request:`,u),S.send(r,"POST",V,s,15)})}Bo(e,r,s){const u=al(),h=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Me(),A=ke(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},V=this.longPollingOptions.timeoutSeconds;void 0!==V&&(S.longPollingTimeout=Math.round(1e3*V)),this.useFetchStreams&&(S.xmlHttpFactory=new Wn({})),this.Oo(S.initMessageHeaders,r,s),S.encodeInitMessageHeaders=!0;const q=h.join("");Ke(Wi,`Creating RPC '${e}' stream ${u}: ${q}`,S);const te=m.createWebChannel(q,S);let ge=!1,$e=!1;const ht=new ud({Io:At=>{$e?Ke(Wi,`Not sending because RPC '${e}' stream ${u} is closed:`,At):(ge||(Ke(Wi,`Opening RPC '${e}' stream ${u} transport.`),te.open(),ge=!0),Ke(Wi,`RPC '${e}' stream ${u} sending:`,At),te.send(At))},To:()=>te.close()}),St=(At,en,un)=>{At.listen(en,Jt=>{try{un(Jt)}catch(wn){setTimeout(()=>{throw wn},0)}})};return St(te,Dn.EventType.OPEN,()=>{$e||(Ke(Wi,`RPC '${e}' stream ${u} transport opened.`),ht.yo())}),St(te,Dn.EventType.CLOSE,()=>{$e||($e=!0,Ke(Wi,`RPC '${e}' stream ${u} transport closed`),ht.So())}),St(te,Dn.EventType.ERROR,At=>{$e||($e=!0,Un(Wi,`RPC '${e}' stream ${u} transport errored:`,At),ht.So(new qe(Le.UNAVAILABLE,"The operation could not be completed")))}),St(te,Dn.EventType.MESSAGE,At=>{var en;if(!$e){const un=At.data[0];It(!!un);const wn=un.error||(null===(en=un[0])||void 0===en?void 0:en.error);if(wn){Ke(Wi,`RPC '${e}' stream ${u} received error:`,wn);const tr=wn.status;let Vn=function(Ie){const Oe=ti[Ie];if(void 0!==Oe)return kc(Oe)}(tr),Pe=wn.message;void 0===Vn&&(Vn=Le.INTERNAL,Pe="Unknown error status: "+tr+" with message "+wn.message),$e=!0,ht.So(new qe(Vn,Pe)),te.close()}else Ke(Wi,`RPC '${e}' stream ${u} received:`,un),ht.bo(un)}}),St(A,ye.STAT_EVENT,At=>{At.stat===de.PROXY?Ke(Wi,`RPC '${e}' stream ${u} detected buffering proxy`):At.stat===de.NOPROXY&&Ke(Wi,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{ht.wo()},0),ht}}function Dh(){return typeof window<"u"?window:null}function da(){return typeof document<"u"?document:null}function ul(a){return new rh(a,!0)}class ld{constructor(e,r,s=1e3,u=1.5,h=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=u,this.Qo=h,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-s);u>0&&Ke("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ha{constructor(e,r,s,u,h,m,A,S){this.ui=e,this.Ho=s,this.Jo=u,this.connection=h,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=A,this.listener=S,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ld(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Ce.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Ce.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,Ce.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===Le.RESOURCE_EXHAUSTED?(Ot(r.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===Le.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Yo===r&&this.P_(s,u)},s=>{e(()=>{const u=new qe(Le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(u)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{s(()=>this.I_(u))}),this.stream.onMessage(u=>{s(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var e=this;this.state=5,this.t_.Go((0,Ce.A)(function*(){e.state=0,e.start()}))}I_(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cd extends ha{constructor(e,r,s,u,h,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,u,m),this.serializer=h}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function O(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(V=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===V?1:"REMOVE"===V?2:"CURRENT"===V?3:"RESET"===V?4:pt(),u=e.targetChange.targetIds||[],h=function(V,q){return V.useProto3Json?(It(void 0===q||"string"==typeof q),Dt.fromBase64String(q||"")):(It(void 0===q||q instanceof Buffer||q instanceof Uint8Array),Dt.fromUint8Array(q||new Uint8Array))}(a,e.targetChange.resumeToken),m=e.targetChange.cause,A=m&&function(V){const q=void 0===V.code?Le.UNKNOWN:kc(V.code);return new qe(q,V.message||"")}(m);r=new Vc(s,u,h,A||null)}else if("documentChange"in e){const s=e.documentChange,u=fo(a,s.document.name),h=_r(s.document.updateTime),m=s.document.createTime?_r(s.document.createTime):Et.min(),A=new vn({mapValue:{fields:s.document.fields}}),S=jn.newFoundDocument(u,h,m,A);r=new zn(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=fo(a,s.document),h=s.readTime?_r(s.readTime):Et.min(),m=jn.newNoDocument(u,h);r=new zn([],s.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const s=e.documentRemove,u=fo(a,s.document);r=new zn([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return pt();{const s=e.filter,{count:u=0,unchangedNames:h}=s,m=new gn(u,h);r=new ra(s.targetId,m)}}var V;return r}(this.serializer,e),s=function(h){if(!("targetChange"in h))return Et.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?Et.min():m.readTime?_r(m.readTime):Et.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=$l(this.serializer),r.addTarget=function(h,m){let A;const S=m.target;if(A=Qa(S)?{documents:Ge(h,S)}:{query:Bt(h,S)._t},A.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){A.resumeToken=$s(h,m.resumeToken);const V=Gu(h,m.expectedCount);null!==V&&(A.expectedCount=V)}else if(m.snapshotVersion.compareTo(Et.min())>0){A.readTime=Lr(h,m.snapshotVersion.toTimestamp());const V=Gu(h,m.expectedCount);null!==V&&(A.expectedCount=V)}return A}(this.serializer,e);const s=function Fn(a,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=$l(this.serializer),r.removeTarget=e,this.a_(r)}}class ec extends ha{constructor(e,r,s,u,h,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,m),this.serializer=h}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return It(!!e.streamToken),this.lastStreamToken=e.streamToken,It(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function Ze(a,e){return a&&a.length>0?(It(void 0!==e),a.map(r=>function(u,h){let m=_r(u.updateTime?u.updateTime:h);return m.isEqual(Et.min())&&(m=_r(h)),new Ts(m,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=_r(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=$l(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>Q(this.serializer,s))};this.a_(r)}}class Tg extends class{}{constructor(e,r,s,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new qe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Mo(e,tu(r,s),u,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new qe(Le.UNKNOWN,h.toString())})}Lo(e,r,s,u,h){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,A])=>this.connection.Lo(e,tu(r,s),u,m,A,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new qe(Le.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Cg{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ot(r),this.D_=!1):Ke("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class bg{constructor(e,r,s,u,h){var m=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=h,this.k_._o(A=>{s.enqueueAndForget((0,Ce.A)(function*(){var S;jo(m)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,Ce.A)(function*(q){const te=ut(q);te.L_.add(4),yield Va(te),te.q_.set("Unknown"),te.L_.delete(4),yield ll(te)}),function V(q){return S.apply(this,arguments)})(m))}))}),this.q_=new Cg(s,u)}}function ll(a){return cl.apply(this,arguments)}function cl(){return(cl=(0,Ce.A)(function*(a){if(jo(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function Va(a){return tc.apply(this,arguments)}function tc(){return(tc=(0,Ce.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function nc(a,e){const r=ut(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),fa(r)?br(r):x(r).r_()&&rc(r,e))}function vu(a,e){const r=ut(a),s=x(r);r.N_.delete(e),s.r_()&&Ff(r,e),0===r.N_.size&&(s.r_()?s.o_():jo(r)&&r.q_.set("Unknown"))}function rc(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}x(a).A_(e)}function Ff(a,e){a.Q_.xe(e),x(a).R_(e)}function br(a){a.Q_=new th({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),x(a).start(),a.q_.v_()}function fa(a){return jo(a)&&!x(a).n_()&&a.N_.size>0}function jo(a){return 0===ut(a).L_.size}function dd(a){a.Q_=void 0}function Vi(a){return pa.apply(this,arguments)}function pa(){return(pa=(0,Ce.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function Vf(a){return ic.apply(this,arguments)}function ic(){return(ic=(0,Ce.A)(function*(a){a.N_.forEach((e,r)=>{rc(a,e)})})).apply(this,arguments)}function Sg(a,e){return vo.apply(this,arguments)}function vo(){return(vo=(0,Ce.A)(function*(a,e){dd(a),fa(a)?(a.q_.M_(e),br(a)):a.q_.set("Unknown")})).apply(this,arguments)}function Lf(a,e,r){return hd.apply(this,arguments)}function hd(){return hd=(0,Ce.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof Vc&&2===e.state&&e.cause)try{yield(s=(0,Ce.A)(function*(h,m){const A=m.cause;for(const S of m.targetIds)h.N_.has(S)&&(yield h.remoteSyncer.rejectListen(S,A),h.N_.delete(S),h.Q_.removeTarget(S))}),function u(h,m){return s.apply(this,arguments)})(a,e)}catch(s){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield fd(a,s)}else if(e instanceof zn?a.Q_.Ke(e):e instanceof ra?a.Q_.He(e):a.Q_.We(e),!r.isEqual(Et.min()))try{const s=yield mu(a.localStore);r.compareTo(s)>=0&&(yield function(h,m){const A=h.Q_.rt(m);return A.targetChanges.forEach((S,V)=>{if(S.resumeToken.approximateByteSize()>0){const q=h.N_.get(V);q&&h.N_.set(V,q.withResumeToken(S.resumeToken,m))}}),A.targetMismatches.forEach((S,V)=>{const q=h.N_.get(S);if(!q)return;h.N_.set(S,q.withResumeToken(Dt.EMPTY_BYTE_STRING,q.snapshotVersion)),Ff(h,S);const te=new sa(q.target,S,V,q.sequenceNumber);rc(h,te)}),h.remoteSyncer.applyRemoteEvent(A)}(a,r))}catch(s){Ke("RemoteStore","Failed to raise snapshot:",s),yield fd(a,s)}var s}),hd.apply(this,arguments)}function fd(a,e,r){return pd.apply(this,arguments)}function pd(){return(pd=(0,Ce.A)(function*(a,e,r){if(!ni(e))throw e;a.L_.add(1),yield Va(a),a.q_.set("Offline"),r||(r=()=>mu(a.localStore)),a.asyncQueue.enqueueRetryable((0,Ce.A)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield ll(a)}))})).apply(this,arguments)}function Th(a,e){return e().catch(r=>fd(a,r,e))}function Si(a){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,Ce.A)(function*(a){const e=ut(a),r=z(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sc(e);)try{const u=yield sl(e.localStore,s);if(null===u){0===e.O_.length&&r.o_();break}s=u.batchId,Rg(e,u)}catch(u){yield fd(e,u)}Ps(e)&&dl(e)})).apply(this,arguments)}function sc(a){return jo(a)&&a.O_.length<10}function Rg(a,e){a.O_.push(e);const r=z(a);r.r_()&&r.V_&&r.m_(e.mutations)}function Ps(a){return jo(a)&&!z(a).n_()&&a.O_.length>0}function dl(a){z(a).start()}function Uf(a){return oc.apply(this,arguments)}function oc(){return(oc=(0,Ce.A)(function*(a){z(a).p_()})).apply(this,arguments)}function Bf(a){return hl.apply(this,arguments)}function hl(){return(hl=(0,Ce.A)(function*(a){const e=z(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function fl(a,e,r){return pl.apply(this,arguments)}function pl(){return(pl=(0,Ce.A)(function*(a,e,r){const s=a.O_.shift(),u=Fl.from(s,e,r);yield Th(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield Si(a)})).apply(this,arguments)}function jf(a,e){return ac.apply(this,arguments)}function ac(){return ac=(0,Ce.A)(function*(a,e){var r;e&&z(a).V_&&(yield(r=(0,Ce.A)(function*(u,h){if(Cs(A=h.code)&&A!==Le.ABORTED){const m=u.O_.shift();z(u).s_(),yield Th(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,h)),yield Si(u)}var A}),function s(u,h){return r.apply(this,arguments)})(a,e)),Ps(a)&&dl(a)}),ac.apply(this,arguments)}function _(a,e){return c.apply(this,arguments)}function c(){return(c=(0,Ce.A)(function*(a,e){const r=ut(a);r.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const s=jo(r);r.L_.add(3),yield Va(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield ll(r)})).apply(this,arguments)}function d(a,e){return v.apply(this,arguments)}function v(){return(v=(0,Ce.A)(function*(a,e){const r=ut(a);e?(r.L_.delete(2),yield ll(r)):e||(r.L_.add(2),yield Va(r),r.q_.set("Unknown"))})).apply(this,arguments)}function x(a){return a.K_||(a.K_=function(r,s,u){const h=ut(r);return h.w_(),new cd(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Vi.bind(null,a),Ro:Vf.bind(null,a),mo:Sg.bind(null,a),d_:Lf.bind(null,a)}),a.B_.push(function(){var e=(0,Ce.A)(function*(r){r?(a.K_.s_(),fa(a)?br(a):a.q_.set("Unknown")):(yield a.K_.stop(),dd(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function z(a){return a.U_||(a.U_=function(r,s,u){const h=ut(r);return h.w_(),new ec(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Uf.bind(null,a),mo:jf.bind(null,a),f_:Bf.bind(null,a),g_:fl.bind(null,a)}),a.B_.push(function(){var e=(0,Ce.A)(function*(r){r?(a.U_.s_(),yield Si(a)):(yield a.U_.stop(),a.O_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class fe{constructor(e,r,s,u,h){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=h,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,u,h){const m=Date.now()+s,A=new fe(e,r,m,u,h);return A.start(s),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qe(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ne(a,e){if(Ot("AsyncQueue",`${e}: ${a}`),ni(a))return new qe(Le.UNAVAILABLE,`${e}: ${a}`);throw a}class st{constructor(e){this.comparator=e?(r,s)=>e(r,s)||bt.comparator(r.key,s.key):(r,s)=>bt.comparator(r.key,s.key),this.keyedMap=Js(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new st(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,h=s.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new st;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Ut{constructor(){this.W_=new An(bt.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):pt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class Ht{constructor(e,r,s,u,h,m,A,S,V){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=A,this.excludesMetadataChanges=S,this.hasCachedResults=V}static fromInitialDocuments(e,r,s,u,h){const m=[];return r.forEach(A=>{m.push({type:0,doc:A})}),new Ht(e,r,st.emptySet(r),m,s,u,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class Qt{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Jr{constructor(){this.queries=Ms(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const u=ut(r),h=u.queries;u.queries=Ms(),h.forEach((m,A)=>{for(const S of A.j_)S.onError(s)})}(this,new qe(Le.ABORTED,"Firestore shutting down"))}}function Ms(){return new ds(a=>Xs(a),Bs)}function Iu(a,e){return $o.apply(this,arguments)}function $o(){return($o=(0,Ce.A)(function*(a,e){const r=ut(a);let s=3;const u=e.query;let h=r.queries.get(u);h?!h.H_()&&e.J_()&&(s=2):(h=new Qt,s=e.J_()?0:1);try{switch(s){case 0:h.z_=yield r.onListen(u,!0);break;case 1:h.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const A=Ne(m,`Initialization of query '${Gi(e.query)}' failed`);return void e.onError(A)}r.queries.set(u,h),h.j_.push(e),e.Z_(r.onlineState),h.z_&&e.X_(h.z_)&&wu(r)})).apply(this,arguments)}function gl(a,e){return uc.apply(this,arguments)}function uc(){return(uc=(0,Ce.A)(function*(a,e){const r=ut(a),s=e.query;let u=3;const h=r.queries.get(s);if(h){const m=h.j_.indexOf(e);m>=0&&(h.j_.splice(m,1),0===h.j_.length?u=e.J_()?0:1:!h.H_()&&e.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function $f(a,e){const r=ut(a);let s=!1;for(const u of e){const m=r.queries.get(u.query);if(m){for(const A of m.j_)A.X_(u)&&(s=!0);m.z_=u}}s&&wu(r)}function Hf(a,e,r){const s=ut(a),u=s.queries.get(e);if(u)for(const h of u.j_)h.onError(r);s.queries.delete(e)}function wu(a){a.Y_.forEach(e=>{e.next()})}var gd,lc;(lc=gd||(gd={})).ea="default",lc.Cache="cache";class cc{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Ht(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Ht.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gd.Cache}}class Gf{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class ml{constructor(e){this.serializer=e}Es(e){return fo(this.serializer,e)}ds(e){return e.metadata.exists?E(this.serializer,e.document,!1):jn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return _r(e)}}class zf{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ch(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=nn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new ml(this.serializer);for(const u of e)if(u.metadata.queries){const h=s.Es(u.metadata.name);for(const m of u.metadata.queries){const A=(r.get(m)||H()).add(h);r.set(m,A)}}return r}complete(){var e=this;return(0,Ce.A)(function*(){const r=yield function nd(a,e,r,s){return yh.apply(this,arguments)}(e.localStore,new ml(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const u of e.queries)yield xf(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function Ch(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class md{constructor(e){this.key=e}}class Pg{constructor(e){this.key=e}}class Wf{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=H(),this.mutatedKeys=H(),this.Aa=xc(e),this.Ra=new st(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new Ut,u=r?r.Ra:this.Ra;let h=r?r.mutatedKeys:this.mutatedKeys,m=u,A=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,V="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,te)=>{const ge=u.get(q),$e=lo(this.query,te)?te:null,ht=!!ge&&this.mutatedKeys.has(ge.key),St=!!$e&&($e.hasLocalMutations||this.mutatedKeys.has($e.key)&&$e.hasCommittedMutations);let At=!1;ge&&$e?ge.data.isEqual($e.data)?ht!==St&&(s.track({type:3,doc:$e}),At=!0):this.ga(ge,$e)||(s.track({type:2,doc:$e}),At=!0,(S&&this.Aa($e,S)>0||V&&this.Aa($e,V)<0)&&(A=!0)):!ge&&$e?(s.track({type:0,doc:$e}),At=!0):ge&&!$e&&(s.track({type:1,doc:ge}),At=!0,(S||V)&&(A=!0)),At&&($e?(m=m.add($e),h=St?h.add(q):h.delete(q)):(m=m.delete(q),h=h.delete(q)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const q="F"===this.query.limitType?m.last():m.first();m=m.delete(q.key),h=h.delete(q.key),s.track({type:1,doc:q})}return{Ra:m,fa:s,ns:A,mutatedKeys:h}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,u){const h=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const m=e.fa.G_();m.sort((q,te)=>function($e,ht){const St=At=>{switch(At){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return St($e)-St(ht)}(q.type,te.type)||this.Aa(q.doc,te.doc)),this.pa(s),u=null!=u&&u;const A=r&&!u?this.ya():[],S=0===this.da.size&&this.current&&!u?1:0,V=S!==this.Ea;return this.Ea=S,0!==m.length||V?{snapshot:new Ht(this.query,e.Ra,h,m,e.mutatedKeys,0===S,V,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:A}:{wa:A}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ut,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=H(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new Pg(s))}),this.da.forEach(s=>{e.has(s)||r.push(new md(s))}),r}ba(e){this.Ta=e.Ts,this.da=H();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ht.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Kf{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class g_{constructor(e){this.key=e,this.va=!1}}class Mg{constructor(e,r,s,u,h,m){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new ds(A=>Xs(A),Bs),this.Ma=new Map,this.xa=new Set,this.Oa=new An(bt.comparator),this.Na=new Map,this.La=new Cf,this.Ba={},this.ka=new Map,this.qa=Uo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function bh(a,e){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,Ce.A)(function*(a,e,r=!0){const s=Wg(a);let u;const h=s.Fa.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),u=h.view.Da()):u=yield __(s,e,r,!0),u})).apply(this,arguments)}function m_(a,e){return xg.apply(this,arguments)}function xg(){return(xg=(0,Ce.A)(function*(a,e){const r=Wg(a);yield __(r,e,!0,!1)})).apply(this,arguments)}function __(a,e,r,s){return Og.apply(this,arguments)}function Og(){return(Og=(0,Ce.A)(function*(a,e,r,s){const u=yield _u(a.localStore,Gr(e)),h=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(h):"not-current";let A;return s&&(A=yield qf(a,e,h,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&nc(a.remoteStore,u),A})).apply(this,arguments)}function qf(a,e,r,s,u){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,Ce.A)(function*(a,e,r,s,u){a.Ka=(te,ge,$e)=>{return(ht=(0,Ce.A)(function*(At,en,un,Jt){let wn=en.view.ma(un);wn.ns&&(wn=yield ed(At.localStore,en.query,!1).then(({documents:pe})=>en.view.ma(pe,wn)));const tr=Jt&&Jt.targetChanges.get(en.targetId),Vn=Jt&&null!=Jt.targetMismatches.get(en.targetId),Pe=en.view.applyChanges(wn,At.isPrimaryClient,tr,Vn);return La(At,en.targetId,Pe.wa),Pe.snapshot}),function St(At,en,un,Jt){return ht.apply(this,arguments)})(a,te,ge,$e);var ht};const h=yield ed(a.localStore,e,!0),m=new Wf(e,h.Ts),A=m.ma(h.documents),S=ft.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,u),V=m.applyChanges(A,a.isPrimaryClient,S);La(a,r,V.wa);const q=new Kf(e,r,m);return a.Fa.set(e,q),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),V.snapshot}),Qf.apply(this,arguments)}function Yf(a,e,r){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,Ce.A)(function*(a,e,r){const s=ut(a),u=s.Fa.get(e),h=s.Ma.get(u.targetId);if(h.length>1)return s.Ma.set(u.targetId,h.filter(m=>!Bs(m,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield ol(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),r&&vu(s.remoteStore,u.targetId),Ed(s,u.targetId)}).catch(Pt))):(Ed(s,u.targetId),yield ol(s.localStore,u.targetId,!0))})).apply(this,arguments)}function _d(a,e){return kg.apply(this,arguments)}function kg(){return(kg=(0,Ce.A)(function*(a,e){const r=ut(a),s=r.Fa.get(e),u=r.Ma.get(s.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),vu(r.remoteStore,s.targetId))})).apply(this,arguments)}function y_(){return(y_=(0,Ce.A)(function*(a,e,r){const s=S_(a);try{const u=yield function(m,A){const S=ut(m),V=$n.now(),q=A.reduce(($e,ht)=>$e.add(ht.key),H());let te,ge;return S.persistence.runTransaction("Locally write mutations","readwrite",$e=>{let ht=ts(),St=H();return S.cs.getEntries($e,q).next(At=>{ht=At,ht.forEach((en,un)=>{un.isValidDocument()||(St=St.add(en))})}).next(()=>S.localDocuments.getOverlayedDocuments($e,ht)).next(At=>{te=At;const en=[];for(const un of A){const Jt=eh(un,te.get(un.key).overlayedDocument);null!=Jt&&en.push(new Oo(un.key,Jt,ao(Jt.value.mapValue),Mr.exists(!0)))}return S.mutationQueue.addMutationBatch($e,V,en,A)}).next(At=>{ge=At;const en=At.applyToLocalDocumentSet(te,St);return S.documentOverlayCache.saveOverlays($e,At.batchId,en)})}).then(()=>({batchId:ge.batchId,changes:Ol(te)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(m,A,S){let V=m.Ba[m.currentUser.toKey()];V||(V=new An(mt)),V=V.insert(A,S),m.Ba[m.currentUser.toKey()]=V}(s,u.batchId,r),yield _l(s,u.changes),yield Si(s.remoteStore)}catch(u){const h=Ne(u,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function v_(a,e){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,Ce.A)(function*(a,e){const r=ut(a);try{const s=yield function Jc(a,e){const r=ut(a),s=e.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const A=[];e.targetChanges.forEach((q,te)=>{const ge=u.get(te);if(!ge)return;A.push(r.Ur.removeMatchingKeys(h,q.removedDocuments,te).next(()=>r.Ur.addMatchingKeys(h,q.addedDocuments,te)));let $e=ge.withSequenceNumber(h.currentSequenceNumber);var St,At,en;null!==e.targetMismatches.get(te)?$e=$e.withResumeToken(Dt.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):q.resumeToken.approximateByteSize()>0&&($e=$e.withResumeToken(q.resumeToken,s)),u=u.insert(te,$e),At=$e,en=q,(0===(St=ge).resumeToken.approximateByteSize()||At.snapshotVersion.toMicroseconds()-St.snapshotVersion.toMicroseconds()>=3e8||en.addedDocuments.size+en.modifiedDocuments.size+en.removedDocuments.size>0)&&A.push(r.Ur.updateTargetData(h,$e))});let S=ts(),V=H();if(e.documentUpdates.forEach(q=>{e.resolvedLimboDocuments.has(q)&&A.push(r.persistence.referenceDelegate.updateLimboDocument(h,q))}),A.push(Mf(h,m,e.documentUpdates).next(q=>{S=q.Ps,V=q.Is})),!s.isEqual(Et.min())){const q=r.Ur.getLastRemoteSnapshotVersion(h).next(te=>r.Ur.setTargetsMetadata(h,h.currentSequenceNumber,s));A.push(q)}return he.waitFor(A).next(()=>m.apply(h)).next(()=>r.localDocuments.getLocalViewOfDocuments(h,S,V)).next(()=>S)}).then(h=>(r.os=u,h))}(r.localStore,e);e.targetChanges.forEach((u,h)=>{const m=r.Na.get(h);m&&(It(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?It(m.va):u.removedDocuments.size>0&&(It(m.va),m.va=!1))}),yield _l(r,s,e)}catch(s){yield Pt(s)}})).apply(this,arguments)}function E_(a,e,r){const s=ut(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.Fa.forEach((h,m)=>{const A=m.view.Z_(e);A.snapshot&&u.push(A.snapshot)}),function(m,A){const S=ut(m);S.onlineState=A;let V=!1;S.queries.forEach((q,te)=>{for(const ge of te.j_)ge.Z_(A)&&(V=!0)}),V&&wu(S)}(s.eventManager,e),u.length&&s.Ca.d_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function yd(a,e,r){return vd.apply(this,arguments)}function vd(){return(vd=(0,Ce.A)(function*(a,e,r){const s=ut(a);s.sharedClientState.updateQueryState(e,"rejected",r);const u=s.Na.get(e),h=u&&u.key;if(h){let m=new An(bt.comparator);m=m.insert(h,jn.newNoDocument(h,Et.min()));const A=H().add(h),S=new bs(Et.min(),new Map,new An(mt),m,A);yield v_(s,S),s.Oa=s.Oa.remove(h),s.Na.delete(e),Bg(s)}else yield ol(s.localStore,e,!1).then(()=>Ed(s,e,r)).catch(Pt)})).apply(this,arguments)}function Fg(a,e){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,Ce.A)(function*(a,e){const r=ut(a),s=e.batch.batchId;try{const u=yield function Pf(a,e){const r=ut(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),h=r.cs.newChangeBuffer({trackRemovals:!0});return function(A,S,V,q){const te=V.batch,ge=te.keys();let $e=he.resolve();return ge.forEach(ht=>{$e=$e.next(()=>q.getEntry(S,ht)).next(St=>{const At=V.docVersions.get(ht);It(null!==At),St.version.compareTo(At)<0&&(te.applyToRemoteDocument(St,V),St.isValidDocument()&&(St.setReadTime(V.commitVersion),q.addEntry(St)))})}),$e.next(()=>A.mutationQueue.removeMutationBatch(S,te))}(r,s,e,h).next(()=>h.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(A){let S=H();for(let V=0;V<A.mutationResults.length;++V)A.mutationResults[V].transformResults.length>0&&(S=S.add(A.batch.mutations[V].key));return S}(e))).next(()=>r.localDocuments.getDocuments(s,u))})}(r.localStore,e);Ug(r,s,null),Lg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield _l(r,u)}catch(u){yield Pt(u)}})).apply(this,arguments)}function I_(a,e,r){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,Ce.A)(function*(a,e,r){const s=ut(a);try{const u=yield function(m,A){const S=ut(m);return S.persistence.runTransaction("Reject batch","readwrite-primary",V=>{let q;return S.mutationQueue.lookupMutationBatch(V,A).next(te=>(It(null!==te),q=te.keys(),S.mutationQueue.removeMutationBatch(V,te))).next(()=>S.mutationQueue.performConsistencyCheck(V)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(V,q,A)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(V,q)).next(()=>S.localDocuments.getDocuments(V,q))})}(s.localStore,e);Ug(s,e,r),Lg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield _l(s,u)}catch(u){yield Pt(u)}})).apply(this,arguments)}function Vg(){return(Vg=(0,Ce.A)(function*(a,e){const r=ut(a);jo(r.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const A=ut(m);return A.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>A.mutationQueue.getHighestUnacknowledgedBatchId(S))}(r.localStore);if(-1===s)return void e.resolve();const u=r.ka.get(s)||[];u.push(e),r.ka.set(s,u)}catch(s){const u=Ne(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function Lg(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function Ug(a,e,r){const s=ut(a);let u=s.Ba[s.currentUser.toKey()];if(u){const h=u.get(e);h&&(r?h.reject(r):h.resolve(),u=u.remove(e)),s.Ba[s.currentUser.toKey()]=u}}function Ed(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||A_(a,s)})}function A_(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(vu(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),Bg(a))}function La(a,e,r){for(const s of r)s instanceof md?(a.La.addReference(s.key,e),Ph(a,s)):s instanceof Pg?(Ke("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||A_(a,s.key)):pt()}function Ph(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||(Ke("SyncEngine","New document in limbo: "+r),a.xa.add(s),Bg(a))}function Bg(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new bt(nn.fromString(e)),s=a.qa.next();a.Na.set(s,new g_(r)),a.Oa=a.Oa.insert(r,s),nc(a.remoteStore,new sa(Gr(cs(r.path)),s,"TargetPurposeLimboResolution",be.oe))}}function _l(a,e,r){return D_.apply(this,arguments)}function D_(){return D_=(0,Ce.A)(function*(a,e,r){const s=ut(a),u=[],h=[],m=[];var A;s.Fa.isEmpty()||(s.Fa.forEach((A,S)=>{m.push(s.Ka(S,e,r).then(V=>{var q;if((V||r)&&s.isPrimaryClient){const te=V?!V.fromCache:null===(q=r?.targetChanges.get(S.targetId))||void 0===q?void 0:q.current;s.sharedClientState.updateQueryState(S.targetId,te?"current":"not-current")}if(V){u.push(V);const te=gu.Wi(S.targetId,V);h.push(te)}}))}),yield Promise.all(m),s.Ca.d_(u),yield(A=(0,Ce.A)(function*(V,q){const te=ut(V);try{yield te.persistence.runTransaction("notifyLocalViewChanges","readwrite",ge=>he.forEach(q,$e=>he.forEach($e.$i,ht=>te.persistence.referenceDelegate.addReference(ge,$e.targetId,ht)).next(()=>he.forEach($e.Ui,ht=>te.persistence.referenceDelegate.removeReference(ge,$e.targetId,ht)))))}catch(ge){if(!ni(ge))throw ge;Ke("LocalStore","Failed to update sequence numbers: "+ge)}for(const ge of q){const $e=ge.targetId;if(!ge.fromCache){const ht=te.os.get($e),At=ht.withLastLimboFreeSnapshotVersion(ht.snapshotVersion);te.os=te.os.insert($e,At)}}}),function S(V,q){return A.apply(this,arguments)})(s.localStore,h))}),D_.apply(this,arguments)}function QE(a,e){return T_.apply(this,arguments)}function T_(){return(T_=(0,Ce.A)(function*(a,e){const r=ut(a);if(!r.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const s=yield mh(r.localStore,e);r.currentUser=e,(h=r).ka.forEach(A=>{A.forEach(S=>{S.reject(new qe(Le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield _l(r,s.hs)}var h})).apply(this,arguments)}function YE(a,e){const r=ut(a),s=r.Na.get(e);if(s&&s.va)return H().add(s.key);{let u=H();const h=r.Ma.get(e);if(!h)return u;for(const m of h){const A=r.Fa.get(m);u=u.unionWith(A.view.Va)}return u}}function C_(a,e){return jg.apply(this,arguments)}function jg(){return(jg=(0,Ce.A)(function*(a,e){const r=ut(a),s=yield ed(r.localStore,e.query,!0),u=e.view.ba(s);return r.isPrimaryClient&&La(r,e.targetId,u.wa),u})).apply(this,arguments)}function Ev(a,e){return $g.apply(this,arguments)}function $g(){return($g=(0,Ce.A)(function*(a,e){const r=ut(a);return Nf(r.localStore,e).then(s=>_l(r,s))})).apply(this,arguments)}function Iv(a,e,r,s){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,Ce.A)(function*(a,e,r,s){const u=ut(a),h=yield function(A,S){const V=ut(A),q=ut(V.mutationQueue);return V.persistence.runTransaction("Lookup mutation documents","readonly",te=>q.Mn(te,S).next(ge=>ge?V.localDocuments.getDocuments(te,ge):he.resolve(null)))}(u.localStore,e);var S;null!==h?("pending"===r?yield Si(u.remoteStore):"acknowledged"===r||"rejected"===r?(Ug(u,e,s||null),Lg(u,e),S=e,ut(ut(u.localStore).mutationQueue).On(S)):pt(),yield _l(u,h)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function dc(){return(dc=(0,Ce.A)(function*(a,e){const r=ut(a);if(Wg(r),S_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield Hg(r,s.toArray());r.Qa=!0,yield d(r.remoteStore,!0);for(const h of u)nc(r.remoteStore,h)}else if(!1===e&&!1!==r.Qa){const s=[];let u=Promise.resolve();r.Ma.forEach((h,m)=>{r.sharedClientState.isLocalQueryTarget(m)?s.push(m):u=u.then(()=>(Ed(r,m),ol(r.localStore,m,!0))),vu(r.remoteStore,m)}),yield u,yield Hg(r,s),function(m){const A=ut(m);A.Na.forEach((S,V)=>{vu(A.remoteStore,V)}),A.La.pr(),A.Na=new Map,A.Oa=new An(bt.comparator)}(r),r.Qa=!1,yield d(r.remoteStore,!1)}})).apply(this,arguments)}function Hg(a,e,r){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,Ce.A)(function*(a,e,r){const s=ut(a),u=[],h=[];for(const m of e){let A;const S=s.Ma.get(m);if(S&&0!==S.length){A=yield _u(s.localStore,Gr(S[0]));for(const V of S){const q=s.Fa.get(V),te=yield C_(s,q);te.snapshot&&h.push(te.snapshot)}}else{const V=yield td(s.localStore,m);A=yield _u(s.localStore,V),yield qf(s,Gg(V),m,!1,A.resumeToken)}u.push(A)}return s.Ca.d_(h),u})).apply(this,arguments)}function Gg(a){return ea(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function XE(a){return r=ut(a).localStore,ut(ut(r).persistence).Qi();var r}function JE(a,e,r,s){return b_.apply(this,arguments)}function b_(){return(b_=(0,Ce.A)(function*(a,e,r,s){const u=ut(a);if(u.Qa)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const h=u.Ma.get(e);if(h&&h.length>0)switch(r){case"current":case"not-current":{const m=yield Nf(u.localStore,Ya(h[0])),A=bs.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Dt.EMPTY_BYTE_STRING);yield _l(u,m,A);break}case"rejected":yield ol(u.localStore,e,!0),Ed(u,e,s);break;default:pt()}})).apply(this,arguments)}function zg(a,e,r){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,Ce.A)(function*(a,e,r){const s=Wg(a);if(s.Qa){for(const u of e){if(s.Ma.has(u)&&s.sharedClientState.isActiveQueryTarget(u)){Ke("SyncEngine","Adding an already active target "+u);continue}const h=yield td(s.localStore,u),m=yield _u(s.localStore,h);yield qf(s,Gg(h),m.targetId,!1,m.resumeToken),nc(s.remoteStore,m)}for(const u of r)s.Ma.has(u)&&(yield ol(s.localStore,u,!1).then(()=>{vu(s.remoteStore,u),Ed(s,u)}).catch(Pt))}})).apply(this,arguments)}function Wg(a){const e=ut(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=v_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yd.bind(null,e),e.Ca.d_=$f.bind(null,e.eventManager),e.Ca.$a=Hf.bind(null,e.eventManager),e}function S_(a){const e=ut(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I_.bind(null,e),e}class Id{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,Ce.A)(function*(){r.serializer=ul(e.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(e),r.persistence=r.createPersistence(e),yield r.persistence.start(),r.localStore=r.createLocalStore(e),r.gcScheduler=r.createGarbageCollectionScheduler(e,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(e,r.localStore)})()}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return Xl(this.persistence,new ph,e.initialUser,this.serializer)}createPersistence(e){return new hh(Yc.Zr,this.serializer)}createSharedClientState(e){return new Ih}terminate(){var e=this;return(0,Ce.A)(function*(){var r,s;null===(r=e.gcScheduler)||void 0===r||r.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Kg extends Id{constructor(e,r,s){super(),this.Wa=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,Ce.A)(function*(){yield r().call(s,e),yield s.Wa.initialize(s,e),yield S_(s.Wa.syncEngine),yield Si(s.Wa.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Xl(this.persistence,new ph,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,r){return new Df(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}createIndexBackfillerScheduler(e,r){const s=new Qe(r,this.persistence);return new yn(e.asyncQueue,s)}createPersistence(e){const r=il(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new Yl(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,Dh(),da(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ih}}class P_ extends Kg{constructor(e,r){super(e,r,!1),this.Wa=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,Ce.A)(function*(){yield r().call(s,e);const u=s.Wa.syncEngine;s.sharedClientState instanceof Of&&(s.sharedClientState.syncEngine={no:Iv.bind(null,u),ro:JE.bind(null,u),io:zg.bind(null,u),Qi:XE.bind(null,u),eo:Ev.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var h=(0,Ce.A)(function*(m){yield function Au(a,e){return dc.apply(this,arguments)}(s.Wa.syncEngine,m),s.gcScheduler&&(m&&!s.gcScheduler.started?s.gcScheduler.start():m||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(m&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():m||s.indexBackfillerScheduler.stop())});return function(m){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const r=Dh();if(!Of.D(r))throw new qe(Le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=il(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Of(r,e.asyncQueue,s,e.clientId,e.initialUser)}}class hc{initialize(e,r){var s=this;return(0,Ce.A)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>E_(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=QE.bind(null,s.syncEngine),yield d(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Jr}createDatastore(e){const r=ul(e.databaseInfo.databaseId),s=new Ah(e.databaseInfo);return new Tg(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return s=this.localStore,u=this.datastore,h=e.asyncQueue,m=r=>E_(this.syncEngine,r,0),A=Dg.D()?new Dg:new kf,new bg(s,u,h,m,A);var s,u,h,m,A}createSyncEngine(e,r){return function(u,h,m,A,S,V,q){const te=new Mg(u,h,m,A,S,V);return q&&(te.Qa=!0),te}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){var e=this;return(0,Ce.A)(function*(){var r,s,u;yield(u=(0,Ce.A)(function*(m){const A=ut(m);Ke("RemoteStore","RemoteStore shutting down."),A.L_.add(5),yield Va(A),A.k_.shutdown(),A.q_.set("Unknown")}),function h(m){return u.apply(this,arguments)})(e.remoteStore),null===(r=e.datastore)||void 0===r||r.terminate(),null===(s=e.eventManager)||void 0===s||s.terminate()})()}}function xh(a,e=10240){let r=0;return{read:()=>(0,Ce.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,Ce.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class qg{constructor(e,r){this.ja=e,this.serializer=r,this.metadata=new Rn,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.ja.cancel()}getMetadata(){var e=this;return(0,Ce.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,Ce.A)(function*(){return yield e.getMetadata(),e.Ja()})()}Ja(){var e=this;return(0,Ce.A)(function*(){const r=yield e.Ya();if(null===r)return null;const s=e.Ha.decode(r),u=Number(s);isNaN(u)&&e.Za(`length string (${s}) is not valid number`);const h=yield e.Xa(u);return new Gf(JSON.parse(h),r.length+u)})()}eu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ya(){var e=this;return(0,Ce.A)(function*(){for(;e.eu()<0&&!(yield e.tu()););if(0===e.buffer.length)return null;const r=e.eu();r<0&&e.Za("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}Xa(e){var r=this;return(0,Ce.A)(function*(){for(;r.buffer.length<e;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const s=r.Ha.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){var e=this;return(0,Ce.A)(function*(){const r=yield e.ja.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class Av{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ce.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new qe(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(u=(0,Ce.A)(function*(m,A){const S=ut(m),V={documents:A.map($e=>Ma(S.serializer,$e))},q=yield S.Lo("BatchGetDocuments",S.serializer.databaseId,nn.emptyPath(),V,A.length),te=new Map;q.forEach($e=>{const ht=function b(a,e){return"found"in e?function(s,u){It(!!u.found);const h=fo(s,u.found.name),m=_r(u.found.updateTime),A=u.found.createTime?_r(u.found.createTime):Et.min(),S=new vn({mapValue:{fields:u.found.fields}});return jn.newFoundDocument(h,m,A,S)}(a,e):"missing"in e?function(s,u){It(!!u.missing),It(!!u.readTime);const h=fo(s,u.missing),m=_r(u.readTime);return jn.newNoDocument(h,m)}(a,e):pt()}(S.serializer,$e);te.set(ht.key.toString(),ht)});const ge=[];return A.forEach($e=>{const ht=te.get($e.toString());It(!!ht),ge.push(ht)}),ge}),function h(m,A){return u.apply(this,arguments)})(r.datastore,e);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ps(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const h=bt.fromPath(u);e.mutations.push(new ba(h,e.precondition(h)))}),yield(s=(0,Ce.A)(function*(h,m){const A=ut(h),S={writes:m.map(V=>Q(A.serializer,V))};yield A.Mo("Commit",A.serializer.databaseId,nn.emptyPath(),S)}),function u(h,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw pt();r=Et.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new qe(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Et.min())?Mr.exists(!1):Mr.updateTime(r):Mr.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Et.min()))throw new qe(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(r)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wd{constructor(e,r,s,u,h){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=u,this.deferred=h,this.nu=s.maxAttempts,this.t_=new ld(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var e=this;this.t_.Go((0,Ce.A)(function*(){const r=new Av(e.datastore),s=e.su(r);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(h=>{e.ou(h)}))}).catch(u=>{e.ou(u)})}))}su(e){try{const r=this.updateFunction(e);return!it(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Cs(r)}return!1}}class Dv{constructor(e,r,s,u){var h=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=xe.UNAUTHENTICATED,this.clientId=Qi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var m=(0,Ce.A)(function*(A){Ke("FirestoreClient","Received user=",A.uid),yield h.authCredentialListener(A),h.user=A});return function(A){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(s,m=>(Ke("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const u=Ne(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function tp(a,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,Ce.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,Ce.A)(function*(h){s.isEqual(h)||(yield mh(e.localStore,h),s=h)});return function(h){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),Oh.apply(this,arguments)}function np(a,e){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,Ce.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Yg(a);Ke("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>_(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>_(e.remoteStore,u)),a._onlineComponents=e})).apply(this,arguments)}function M_(a){return"FirebaseError"===a.name?a.code===Le.FAILED_PRECONDITION||a.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Yg(a){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,Ce.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tp(a,a._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!M_(r))throw r;Un("Error using user provided cache. Falling back to memory cache: "+r),yield tp(a,new Id)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield tp(a,new Id);return a._offlineComponents})).apply(this,arguments)}function kh(a){return N_.apply(this,arguments)}function N_(){return(N_=(0,Ce.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield np(a,a._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield np(a,new hc))),a._onlineComponents})).apply(this,arguments)}function Tv(a){return Yg(a).then(e=>e.persistence)}function Ua(a){return Yg(a).then(e=>e.localStore)}function Ad(a){return kh(a).then(e=>e.remoteStore)}function rp(a){return kh(a).then(e=>e.syncEngine)}function yl(a){return ip.apply(this,arguments)}function ip(){return(ip=(0,Ce.A)(function*(a){const e=yield kh(a),r=e.eventManager;return r.onListen=bh.bind(null,e.syncEngine),r.onUnlisten=Yf.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=m_.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=_d.bind(null,e.syncEngine),r})).apply(this,arguments)}function Fh(a,e,r={}){const s=new Rn;return a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function(h,m,A,S,V){const q=new ep({next:ge=>{m.enqueueAndForget(()=>gl(h,te));const $e=ge.docs.has(A);!$e&&ge.fromCache?V.reject(new qe(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):$e&&ge.fromCache&&S&&"server"===S.source?V.reject(new qe(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):V.resolve(ge)},error:ge=>V.reject(ge)}),te=new cc(cs(A.path),q,{includeMetadataChanges:!0,_a:!0});return Iu(h,te)}(yield yl(a),a.asyncQueue,e,r,s)})),s.promise}function sp(a,e,r={}){const s=new Rn;return a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function(h,m,A,S,V){const q=new ep({next:ge=>{m.enqueueAndForget(()=>gl(h,te)),ge.fromCache&&"server"===S.source?V.reject(new qe(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):V.resolve(ge)},error:ge=>V.reject(ge)}),te=new cc(A,q,{includeMetadataChanges:!0,_a:!0});return Iu(h,te)}(yield yl(a),a.asyncQueue,e,r,s)})),s.promise}function Vh(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const V_=new Map;function Lh(a,e,r){if(!r)throw new qe(Le.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Uh(a,e,r,s){if(!0===e&&!0===s)throw new qe(Le.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function ga(a){if(!bt.isDocumentKey(a))throw new qe(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function pc(a){if(bt.isDocumentKey(a))throw new qe(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Dd(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":pt()}function Zn(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new qe(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Dd(a);throw new qe(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function L_(a,e){if(e<=0)throw new qe(Le.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class tm{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new qe(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qe(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Vh(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new qe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new qe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new qe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ba{constructor(e,r,s,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new qe(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qe(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tm(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new hr;switch(s.type){case"firstParty":return new ot(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new qe(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=V_.get(r);s&&(Ke("ComponentProvider","Removing Datastore"),V_.delete(r),s.terminate())}(this),Promise.resolve()}}class gs{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Zr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zr(this.firestore,e,this._key)}}class Ho extends gs{constructor(e,r,s){super(e,r,cs(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zr(this.firestore,null,new bt(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function nm(a,e,...r){if(a=(0,Fe.Ku)(a),Lh("collection","path",e),a instanceof Ba){const s=nn.fromString(e,...r);return pc(s),new Ho(a,null,s)}{if(!(a instanceof Zr||a instanceof Ho))throw new qe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(nn.fromString(e,...r));return pc(s),new Ho(a.firestore,null,s)}}function Bh(a,e,...r){if(a=(0,Fe.Ku)(a),1===arguments.length&&(e=Qi.newId()),Lh("doc","path",e),a instanceof Ba){const s=nn.fromString(e,...r);return ga(s),new Zr(a,null,new bt(s))}{if(!(a instanceof Zr||a instanceof Ho))throw new qe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(nn.fromString(e,...r));return ga(s),new Zr(a.firestore,a instanceof Ho?a.converter:null,new bt(s))}}function op(a,e){return a=(0,Fe.Ku)(a),e=(0,Fe.Ku)(e),(a instanceof Zr||a instanceof Ho)&&(e instanceof Zr||e instanceof Ho)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function B_(a,e){return a=(0,Fe.Ku)(a),e=(0,Fe.Ku)(e),a instanceof gs&&e instanceof gs&&a.firestore===e.firestore&&Bs(a._query,e._query)&&a.converter===e.converter}class eI{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ld(this,"async_queue_retry"),this.Eu=()=>{const r=da();r&&Ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const e=da();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const r=da();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const r=new Rn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){var e=this;return(0,Ce.A)(function*(){if(0!==e.uu.length){try{yield e.uu[0](),e.uu.shift(),e.t_.reset()}catch(r){if(!ni(r))throw r;Ke("AsyncQueue","Operation failed with retryable error: "+r)}e.uu.length>0&&e.t_.Go(()=>e.Ru())}})()}Au(e){const r=this.au.then(()=>(this.Pu=!0,e().catch(s=>{throw this.hu=s,this.Pu=!1,Ot("INTERNAL UNHANDLED ERROR: ",function(m){let A=m.message||"";return m.stack&&(A=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),A}(s)),s}).then(s=>(this.Pu=!1,s))));return this.au=r,r}enqueueAfterDelay(e,r,s){this.du(),this.Tu.indexOf(e)>-1&&(r=0);const u=fe.createAndSchedule(this,e,r,s,h=>this.Vu(h));return this.lu.push(u),u}du(){this.hu&&pt()}verifyOperationInProgress(){}mu(){var e=this;return(0,Ce.A)(function*(){let r;do{r=e.au,yield r}while(r!==e.au)})()}fu(e){for(const r of this.lu)if(r.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const r=this.lu.indexOf(e);this.lu.splice(r,1)}}function rm(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const u=r;for(const h of["next","error","complete"])if(h in u&&"function"==typeof u[h])return!0;return!1}(a)}class Pv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ur extends Ba{constructor(e,r,s,u){super(e,r,s,u),this.type="firestore",this._queue=new eI,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ap(this),this._firestoreClient.terminate()}}function zr(a){return a._firestoreClient||ap(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function ap(a){var e,r,s;const u=a._freezeSettings(),h=(S=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new as(a._databaseId,S,a._persistenceKey,(q=u).host,q.ssl,q.experimentalForceLongPolling,q.experimentalAutoDetectLongPolling,Vh(q.experimentalLongPollingOptions),q.useFetchStreams));var S,q;a._firestoreClient=new Dv(a._authCredentials,a._appCheckCredentials,a._queue,h),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(s=u.localCache)&&void 0!==s&&s._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function up(a,e,r){const s=new Rn;return a.asyncQueue.enqueue((0,Ce.A)(function*(){try{yield tp(a,r),yield np(a,e),s.resolve()}catch(u){const h=u;if(!M_(h))throw h;Un("Error enabling indexeddb cache. Falling back to memory cache: "+h),s.reject(h)}})).then(()=>s.promise)}function dp(a){if(a._initialized||a._terminated)throw new qe(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(Dt.fromBase64String(e))}catch(r){throw new qe(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ma(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new qe(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class $h{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new qe(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new qe(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}}class hp{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,u){if(s.length!==u.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==u[h])return!1;return!0}(this._values,e._values)}}const Nv=/^__.*__$/;class sI{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new Oo(e,this.data,this.fieldMask,r,this.fieldTransforms):new mr(e,this.data,r,this.fieldTransforms)}}class $_{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new Oo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Hh(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class bd{constructor(e,r,s,u,h,m){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===h&&this.yu(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new bd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Su({path:s,Du:!1});return u.vu(e),u}Cu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Su({path:s,Du:!1});return u.yu(),u}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return zh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(0===e.length)throw this.Mu("Document fields must not be empty");if(Hh(this.wu)&&Nv.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class xv{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||ul(e)}Nu(e,r,s,u=!1){return new bd({wu:e,methodName:r,Ou:s,path:Kn.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(a){const e=a._freezeSettings(),r=ul(a._databaseId);return new xv(a._databaseId,!!e.ignoreUndefinedProperties,r)}function Sd(a,e,r,s,u,h={}){const m=a.Nu(h.merge||h.mergeFields?2:0,e,r,u);gp("Data must be an object, but it was:",m,s);const A=Pd(s,m);let S,V;if(h.merge)S=new vr(m.fieldMask),V=m.fieldTransforms;else if(h.mergeFields){const q=[];for(const te of h.mergeFields){const ge=Gh(e,te,r);if(!m.contains(ge))throw new qe(Le.INVALID_ARGUMENT,`Field '${ge}' is specified in your field mask but missing from your input data.`);lm(q,ge)||q.push(ge)}S=new vr(q),V=m.fieldTransforms.filter(te=>S.covers(te.field))}else S=null,V=m.fieldTransforms;return new sI(new vn(A),S,V)}class El extends Cu{_toFieldTransform(e){if(2!==e.wu)throw e.Mu(1===e.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof El}}function H_(a,e,r){return new bd({wu:3,Ou:e.settings.Ou,methodName:a._methodName,Du:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fp extends Cu{_toFieldTransform(e){return new fs(e.path,new En)}isEqual(e){return e instanceof fp}}class am extends Cu{constructor(e,r){super(e),this.Lu=r}_toFieldTransform(e){const r=H_(this,e,!0),s=this.Lu.map(h=>Go(h,r)),u=new cr(s);return new fs(e.path,u)}isEqual(e){return e instanceof am&&(0,Fe.bD)(this.Lu,e.Lu)}}class pp extends Cu{constructor(e,r){super(e),this.Lu=r}_toFieldTransform(e){const r=H_(this,e,!0),s=this.Lu.map(h=>Go(h,r)),u=new gr(s);return new fs(e.path,u)}isEqual(e){return e instanceof pp&&(0,Fe.bD)(this.Lu,e.Lu)}}class G_ extends Cu{constructor(e,r){super(e),this.Bu=r}_toFieldTransform(e){const r=new oi(e.serializer,dt(e.serializer,this.Bu));return new fs(e.path,r)}isEqual(e){return e instanceof G_&&this.Bu===e.Bu}}function um(a,e,r,s){const u=a.Nu(1,e,r);gp("Data must be an object, but it was:",u,s);const h=[],m=vn.empty();Ii(s,(S,V)=>{const q=mp(e,S,r);V=(0,Fe.Ku)(V);const te=u.Cu(q);if(V instanceof El)h.push(q);else{const ge=Go(V,te);null!=ge&&(h.push(q),m.set(q,ge))}});const A=new vr(h);return new $_(m,A,u.fieldTransforms)}function Rd(a,e,r,s,u,h){const m=a.Nu(1,e,r),A=[Gh(e,s,r)],S=[u];if(h.length%2!=0)throw new qe(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ge=0;ge<h.length;ge+=2)A.push(Gh(e,h[ge])),S.push(h[ge+1]);const V=[],q=vn.empty();for(let ge=A.length-1;ge>=0;--ge)if(!lm(V,A[ge])){const $e=A[ge];let ht=S[ge];ht=(0,Fe.Ku)(ht);const St=m.Cu($e);if(ht instanceof El)V.push($e);else{const At=Go(ht,St);null!=At&&(V.push($e),q.set($e,At))}}const te=new vr(V);return new $_(q,te,m.fieldTransforms)}function z_(a,e,r,s=!1){return Go(r,a.Nu(s?4:3,e))}function Go(a,e){if(W_(a=(0,Fe.Ku)(a)))return gp("Unsupported field value:",e,a),Pd(a,e);if(a instanceof Cu)return function(s,u){if(!Hh(u.wu))throw u.Mu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.Du&&4!==e.wu)throw e.Mu("Nested arrays are not supported");return function(s,u){const h=[];let m=0;for(const A of s){let S=Go(A,u.Fu(m));null==S&&(S={nullValue:"NULL_VALUE"}),h.push(S),m++}return{arrayValue:{values:h}}}(a,e)}return function(s,u){if(null===(s=(0,Fe.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return dt(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const h=$n.fromDate(s);return{timestampValue:Lr(u.serializer,h)}}if(s instanceof $n){const h=new $n(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lr(u.serializer,h)}}if(s instanceof $h)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ma)return{bytesValue:$s(u.serializer,s._byteString)};if(s instanceof Zr){const h=u.databaseId,m=s.firestore._databaseId;if(!m.isEqual(h))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ss(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof hp)return A=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(S=>{if("number"!=typeof S)throw A.Mu("VectorValues must only contain numeric values.");return ue(A.serializer,S)})}}}}};var A;throw u.Mu(`Unsupported field value: ${Dd(s)}`)}(a,e)}function Pd(a,e){const r={};return kr(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(a,(s,u)=>{const h=Go(u,e.bu(s));null!=h&&(r[s]=h)}),{mapValue:{fields:r}}}function W_(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof $n||a instanceof $h||a instanceof ma||a instanceof Zr||a instanceof Cu||a instanceof hp)}function gp(a,e,r){if(!W_(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=Dd(r);throw e.Mu("an object"===s?a+" a custom object":a+" "+s)}var u}function Gh(a,e,r){if((e=(0,Fe.Ku)(e))instanceof Tu)return e._internalPath;if("string"==typeof e)return mp(a,e);throw zh("Field path arguments must be of type string or ",a,!1,void 0,r)}const Ov=new RegExp("[~\\*/\\[\\]]");function mp(a,e,r){if(e.search(Ov)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Tu(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function zh(a,e,r,s,u){const h=s&&!s.isEmpty(),m=void 0!==u;let A=`Function ${e}() called with invalid data`;r&&(A+=" (via `toFirestore()`)"),A+=". ";let S="";return(h||m)&&(S+=" (found",h&&(S+=` in field ${s}`),m&&(S+=` in document ${u}`),S+=")"),new qe(Le.INVALID_ARGUMENT,A+a+S)}function lm(a,e){return a.some(r=>r.isEqual(e))}class gc{constructor(e,r,s,u,h){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Md("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class oI extends gc{data(){return super.data()}}function Md(a,e){return"string"==typeof e?mp(a,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}function cm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new qe(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dm{}class Wh extends dm{}function bu(a,e,...r){let s=[];e instanceof dm&&s.push(e),s=s.concat(r),function(h){const m=h.filter(S=>S instanceof Nd).length,A=h.filter(S=>S instanceof Kh).length;if(m>1||m>0&&A>0)throw new qe(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class Kh extends Wh{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new Kh(e,r,s)}_apply(e){const r=this._parse(e);return Y_(e._query,r),new gs(e.firestore,e.converter,na(e._query,r))}_parse(e){const r=vl(e.firestore);return function(h,m,A,S,V,q,te){let ge;if(V.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new qe(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){hm(te,q);const $e=[];for(const ht of te)$e.push(_a(S,h,ht));ge={arrayValue:{values:$e}}}else ge=_a(S,h,te)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||hm(te,q),ge=z_(A,"where",te,"in"===q||"not-in"===q);return On.create(V,q,ge)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class Nd extends dm{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Nd(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:_n.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,h){let m=u;const A=h.getFlattenedFilters();for(const S of A)Y_(m,S),m=na(m,S)}(e._query,r),new gs(e.firestore,e.converter,na(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _p extends Wh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new _p(e,r)}_apply(e){const r=function(u,h,m){if(null!==u.startAt)throw new qe(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new qe(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new es(h,m)}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(u,h){const m=u.explicitOrderBy.concat([h]);return new Ls(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}class to extends Wh{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new to(e,r,s)}_apply(e){return new gs(e.firestore,e.converter,Mo(e._query,this._limit,this._limitType))}}class xd extends Wh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new xd(e,r,s)}_apply(e){const r=Ep(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(h=r,new Ls((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,h,u.endAt)));var u,h}}class vp extends Wh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new vp(e,r,s)}_apply(e){const r=Ep(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(h=r,new Ls((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,h)));var u,h}}function Ep(a,e,r,s){if(r[0]=(0,Fe.Ku)(r[0]),r[0]instanceof gc)return function(h,m,A,S,V){if(!S)throw new qe(Le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${A}().`);const q=[];for(const te of xi(h))if(te.field.isKeyField())q.push(Rr(m,S.key));else{const ge=S.data.field(te.field);if(Er(ge))throw new qe(Le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+te.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ge){const $e=te.field.canonicalString();throw new qe(Le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$e}' (used as the orderBy) does not exist.`)}q.push(ge)}return new As(q,V)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const u=vl(a.firestore);return function(m,A,S,V,q,te){const ge=m.explicitOrderBy;if(q.length>ge.length)throw new qe(Le.INVALID_ARGUMENT,`Too many arguments provided to ${V}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $e=[];for(let ht=0;ht<q.length;ht++){const St=q[ht];if(ge[ht].field.isKeyField()){if("string"!=typeof St)throw new qe(Le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${V}(), but got a ${typeof St}`);if(!uo(m)&&-1!==St.indexOf("/"))throw new qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${V}() must be a plain document ID, but '${St}' contains a slash.`);const At=m.path.child(nn.fromString(St));if(!bt.isDocumentKey(At))throw new qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${V}() must result in a valid document path, but '${At}' is not because it contains an odd number of segments.`);const en=new bt(At);$e.push(Rr(A,en))}else{const At=z_(S,V,St);$e.push(At)}}return new As($e,te)}(a._query,a.firestore._databaseId,u,e,r,s)}}function _a(a,e,r){if("string"==typeof(r=(0,Fe.Ku)(r))){if(""===r)throw new qe(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uo(e)&&-1!==r.indexOf("/"))throw new qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(nn.fromString(r));if(!bt.isDocumentKey(s))throw new qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Rr(a,new bt(s))}if(r instanceof Zr)return Rr(a,r._key);throw new qe(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(r)}.`)}function hm(a,e){if(!Array.isArray(a)||0===a.length)throw new qe(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y_(a,e){const r=function(u,h){for(const m of u)for(const A of m.getFlattenedFilters())if(h.indexOf(A.op)>=0)return A.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new qe(Le.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Li{convertValue(e,r="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw pt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return Ii(e,(u,h)=>{s[u]=this.convertValue(h,r)}),s}convertVectorValue(e){var r,s,u;const h=null===(u=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.map(m=>Nn(m.doubleValue));return new hp(h)}convertGeoPoint(e){return new $h(Nn(e.latitude),Nn(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Ji(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(qn(e));default:return null}}convertTimestamp(e){const r=Cn(e);return new $n(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=nn.fromString(e);It(po(s));const u=new Hr(s.get(1),s.get(3)),h=new bt(s.popFirst(5));return u.isEqual(r)||Ot(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function Ip(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class fm extends Li{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Zr(this.firestore,null,r)}}class mc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ja extends gc{constructor(e,r,s,u,h,m){super(e,r,s,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Md("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Od extends ja{data(e={}){return super.data(e)}}class wl{constructor(e,r,s,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new mc(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Od(this._firestore,this._userDataWriter,s.key,s,new mc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qe(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,h){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(A=>({type:"added",doc:new Od(u._firestore,u._userDataWriter,A.doc.key,A.doc,new mc(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(A=>h||3!==A.type).map(A=>{const S=new Od(u._firestore,u._userDataWriter,A.doc.key,A.doc,new mc(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);let V=-1,q=-1;return 0!==A.type&&(V=m.indexOf(A.doc.key),m=m.delete(A.doc.key)),1!==A.type&&(m=m.add(A.doc),q=m.indexOf(A.doc.key)),{type:Bv(A.type),doc:S,oldIndex:V,newIndex:q}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Bv(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function X_(a,e){return a instanceof ja&&e instanceof ja?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof wl&&e instanceof wl&&a._firestore===e._firestore&&B_(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class Eo extends Li{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Zr(this.firestore,null,r)}}function gm(a,e,r){a=Zn(a,Zr);const s=Zn(a.firestore,Ur),u=Ip(a.converter,e,r);return Fd(s,[Sd(vl(s),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,Mr.none())])}function wp(a,e,r,...s){a=Zn(a,Zr);const u=Zn(a.firestore,Ur),h=vl(u);let m;return m="string"==typeof(e=(0,Fe.Ku)(e))||e instanceof Tu?Rd(h,"updateDoc",a._key,e,r,s):um(h,"updateDoc",a._key,e),Fd(u,[m.toMutation(a._key,Mr.exists(!0))])}function mm(a,...e){var r,s,u;a=(0,Fe.Ku)(a);let h={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof e[m]||rm(e[m])||(h=e[m],m++);const A={includeMetadataChanges:h.includeMetadataChanges,source:h.source};if(rm(e[m])){const te=e[m];e[m]=null===(r=te.next)||void 0===r?void 0:r.bind(te),e[m+1]=null===(s=te.error)||void 0===s?void 0:s.bind(te),e[m+2]=null===(u=te.complete)||void 0===u?void 0:u.bind(te)}let S,V,q;if(a instanceof Zr)V=Zn(a.firestore,Ur),q=cs(a._key.path),S={next:te=>{e[m]&&e[m](_m(V,a,te))},error:e[m+1],complete:e[m+2]};else{const te=Zn(a,gs);V=Zn(te.firestore,Ur),q=te._query;const ge=new Eo(V);S={next:$e=>{e[m]&&e[m](new wl(V,ge,te,$e))},error:e[m+1],complete:e[m+2]},cm(a._query)}return function(ge,$e,ht,St){const At=new ep(St),en=new cc($e,At,ht);return ge.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return Iu(yield yl(ge),en)})),()=>{At.za(),ge.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return gl(yield yl(ge),en)}))}}(zr(V),q,A,S)}function Fd(a,e){return function(s,u){const h=new Rn;return s.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function vv(a,e,r){return y_.apply(this,arguments)}(yield rp(s),u,h)})),h.promise}(zr(a),e)}function _m(a,e,r){const s=r.docs.get(e._key),u=new Eo(a);return new ja(a,u,e._key,s,new mc(r.hasPendingWrites,r.fromCache),e.converter)}const iy={maxAttempts:5};class ym{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=vl(e)}set(e,r,s){this._verifyNotCommitted();const u=In(e,this._firestore),h=Ip(u.converter,r,s),m=Sd(this._dataReader,"WriteBatch.set",u._key,h,null!==u.converter,s);return this._mutations.push(m.toMutation(u._key,Mr.none())),this}update(e,r,s,...u){this._verifyNotCommitted();const h=In(e,this._firestore);let m;return m="string"==typeof(r=(0,Fe.Ku)(r))||r instanceof Tu?Rd(this._dataReader,"WriteBatch.update",h._key,r,s,u):um(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(m.toMutation(h._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=In(e,this._firestore);return this._mutations=this._mutations.concat(new ps(r._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function In(a,e){if((a=(0,Fe.Ku)(a)).firestore!==e)throw new qe(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class sy extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=vl(r)}get(r){const s=In(r,this._firestore),u=new fm(this._firestore);return this._transaction.lookup([s._key]).then(h=>{if(!h||1!==h.length)return pt();const m=h[0];if(m.isFoundDocument())return new gc(this._firestore,u,m.key,m,s.converter);if(m.isNoDocument())return new gc(this._firestore,u,s._key,null,s.converter);throw pt()})}set(r,s,u){const h=In(r,this._firestore),m=Ip(h.converter,s,u),A=Sd(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,u);return this._transaction.set(h._key,A),this}update(r,s,u,...h){const m=In(r,this._firestore);let A;return A="string"==typeof(s=(0,Fe.Ku)(s))||s instanceof Tu?Rd(this._dataReader,"Transaction.update",m._key,s,u,h):um(this._dataReader,"Transaction.update",m._key,s),this._transaction.update(m._key,A),this}delete(r){const s=In(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=In(e,this._firestore),s=new Eo(this._firestore);return super.get(e).then(u=>new ja(this._firestore,s,r._key,u._document,new mc(!1,!1),r.converter))}}function Im(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qe("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function gy(){if(typeof Uint8Array>"u")throw new qe("unimplemented","Uint8Arrays are not available in this environment.")}function no(){if(!function fr(){return typeof atob<"u"}())throw new qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){se=Re.SDK_VERSION,(0,Re._registerComponent)(new tt.uA("firestore",(s,{instanceIdentifier:u,options:h})=>{const m=s.getProvider("app").getImmediate(),A=new Ur(new We(s.getProvider("auth-internal")),new kt(s.getProvider("app-check-internal")),function(V,q){if(!Object.prototype.hasOwnProperty.apply(V.options,["projectId"]))throw new qe(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hr(V.options.projectId,q)}(m,u),m);return h=Object.assign({useFetchStreams:r},h),A._setSettings(h),A},"PUBLIC").setMultipleInstances(!0)),(0,Re.registerVersion)(le,"4.7.1",e),(0,Re.registerVersion)(le,"4.7.1","esm2017")}();class Qh{constructor(e){this._delegate=e}static fromBase64String(e){return no(),new Qh(ma.fromBase64String(e))}static fromUint8Array(e){return gy(),new Qh(ma.fromUint8Array(e))}toBase64(){return no(),this._delegate.toBase64()}toUint8Array(){return gy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wm(a){return function yI(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class Am{enableIndexedDbPersistence(e,r){return function Td(a,e){dp(a=Zn(a,Ur));const r=zr(a);if(r._uninitializedComponentsProvider)throw new qe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");Un("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=a._freezeSettings(),u=new hc;return up(r,u,new Kg(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function sm(a){dp(a=Zn(a,Ur));const e=zr(a);if(e._uninitializedComponentsProvider)throw new qe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");Un("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),s=new hc;return up(e,s,new P_(s,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jh(a){if(a._initialized&&!a._terminated)throw new qe(Le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.A)(function*(){try{yield(r=(0,Ce.A)(function*(u){if(!tn.D())return Promise.resolve();const h=u+"main";yield tn.delete(h)}),function s(u){return r.apply(this,arguments)})(il(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Dm{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Un("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function U_(a,e,r,s={}){var u;const h=(a=Zn(a,Ba))._getSettings(),m=`${e}:${r}`;if("firestore.googleapis.com"!==h.host&&h.host!==m&&Un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},h),{host:m,ssl:!1})),s.mockUserToken){let A,S;if("string"==typeof s.mockUserToken)A=s.mockUserToken,S=xe.MOCK_USER;else{A=(0,Fe.Fy)(s.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const V=s.mockUserToken.sub||s.mockUserToken.user_id;if(!V)throw new qe(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new xe(V)}a._authCredentials=new on(new Nr(A,S))}}(this._delegate,e,r,s)}enableNetwork(){return function Cd(a){return function Cv(a){return a.asyncQueue.enqueue((0,Ce.A)(function*(){const e=yield Tv(a),r=yield Ad(a);return e.setNetworkEnabled(!0),function(u){const h=ut(u);return h.L_.delete(0),ll(h)}(r)}))}(zr(a=Zn(a,Ur)))}(this._delegate)}disableNetwork(){return function om(a){return function x_(a){return a.asyncQueue.enqueue((0,Ce.A)(function*(){const e=yield Tv(a),r=yield Ad(a);return e.setNetworkEnabled(!1),(s=(0,Ce.A)(function*(h){const m=ut(h);m.L_.add(0),yield Va(m),m.q_.set("Offline")}),function u(h){return s.apply(this,arguments)})(r);var s}))}(zr(a=Zn(a,Ur)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Uh("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lp(a){return function(r){const s=new Rn;return r.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function w_(a,e){return Vg.apply(this,arguments)}(yield rp(r),s)})),s.promise}(zr(a=Zn(a,Ur)))}(this._delegate)}onSnapshotsInSync(e){return function ey(a,e){return function Zg(a,e){const r=new ep(e);return a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return u=yield yl(a),h=r,ut(u).Y_.add(h),void h.next();var u,h})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return u=yield yl(a),h=r,void ut(u).Y_.delete(h);var u,h}))}}(zr(a=Zn(a,Ur)),rm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ud(this,nm(this._delegate,e))}catch(r){throw ms(r,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,Bh(this._delegate,e))}catch(r){throw ms(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,function Rv(a,e){if(a=Zn(a,Ba),Lh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qe(Le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(a,null,(s=e,new Ls(nn.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw ms(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function oy(a,e,r){a=Zn(a,Ur);const s=Object.assign(Object.assign({},iy),r);return function(h){if(h.maxAttempts<1)throw new qe(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(h,m,A){const S=new Rn;return h.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){const V=yield function Jg(a){return kh(a).then(e=>e.datastore)}(h);new wd(h.asyncQueue,V,A,m,S).ru()})),S.promise}(zr(a),u=>e(new sy(a,u)),s)}(this._delegate,r=>e(new my(this,r)))}batch(){return zr(this._delegate),new Tm(new ym(this._delegate,e=>Fd(this._delegate,e)))}loadBundle(e){return function cp(a,e){const r=zr(a=Zn(a,Ur)),s=new Pv;return function k_(a,e,r,s){const u=function(m,A){let S;return S="string"==typeof m?Ll().encode(m):m,q=function(q,te){if(q instanceof Uint8Array)return xh(q,void 0);if(q instanceof ArrayBuffer)return xh(new Uint8Array(q),void 0);if(q instanceof ReadableStream)return q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new qg(q,A);var q}(r,ul(e));a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){!function R_(a,e,r){const s=ut(a);var u;(u=(0,Ce.A)(function*(m,A,S){try{const V=yield A.getMetadata();if(yield function(ht,St){const At=ut(ht),en=_r(St.createTime);return At.persistence.runTransaction("hasNewerBundle","readonly",un=>At.Gr.getBundleMetadata(un,St.id)).then(un=>!!un&&un.createTime.compareTo(en)>=0)}(m.localStore,V))return yield A.close(),S._completeWith({taskState:"Success",documentsLoaded:(ht=V).totalDocuments,bytesLoaded:ht.totalBytes,totalDocuments:ht.totalDocuments,totalBytes:ht.totalBytes}),Promise.resolve(new Set);S._updateProgress(Ch(V));const q=new zf(V,m.localStore,A.serializer);let te=yield A.Ua();for(;te;){const $e=yield q.la(te);$e&&S._updateProgress($e),te=yield A.Ua()}const ge=yield q.complete();return yield _l(m,ge.Ia,void 0),yield function(ht,St){const At=ut(ht);return At.persistence.runTransaction("Save bundle","readwrite",en=>At.Gr.saveBundleMetadata(en,St))}(m.localStore,V),S._completeWith(ge.progress),Promise.resolve(ge.Pa)}catch(V){return Un("SyncEngine",`Loading bundle failed with ${V}`),S._failWith(V),Promise.resolve(new Set)}var ht}),function h(m,A,S){return u.apply(this,arguments)})(s,e,r).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield rp(a),u,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function rI(a,e){return function F_(a,e){return a.asyncQueue.enqueue((0,Ce.A)(function*(){return function(s,u){const h=ut(s);return h.persistence.runTransaction("Get named query","readonly",m=>h.Gr.getNamedQuery(m,u))}(yield Ua(a),e)}))}(zr(a=Zn(a,Ur)),e).then(r=>r?new gs(a,null,r.query):null)}(this._delegate,e).then(r=>r?new Hs(this,r):null)}}class Rp extends Li{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qh(new ma(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(r,this.firestore,null)}}class my{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new Rp(e)}get(e){const r=Al(e);return this._delegate.get(r).then(s=>new Yh(this._firestore,new ja(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const u=Al(e);return s?(Im("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const h=Al(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,s,...u),this}delete(e){const r=Al(e);return this._delegate.delete(r),this}}class Tm{constructor(e){this._delegate=e}set(e,r,s){const u=Al(e);return s?(Im("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const h=Al(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,s,...u),this}delete(e){const r=Al(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class _c{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new Od(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xh(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=_c.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let h=u.get(r);return h||(h=new _c(e,new Rp(e),r),u.set(r,h)),h}}_c.INSTANCES=new WeakMap;class zo{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Rp(e)}static forPath(e,r,s){if(e.length%2!=0)throw new qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(r,new Zr(r._delegate,s,new bt(e)))}static forKey(e,r,s){return new zo(r,new Zr(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ud(this.firestore,nm(this._delegate,e))}catch(r){throw ms(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Fe.Ku)(e))instanceof Zr&&op(this._delegate,e)}set(e,r){r=Im("DocumentReference.set",r);try{return r?gm(this._delegate,e,r):gm(this._delegate,e)}catch(s){throw ms(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?wp(this._delegate,e):wp(this._delegate,e,r,...s)}catch(u){throw ms(u,"updateDoc()","DocumentReference.update()")}}delete(){return function qh(a){return Fd(Zn(a.firestore,Ur),[new ps(a._key,Mr.none())])}(this._delegate)}onSnapshot(...e){const r=_y(e),s=yy(e,u=>new Yh(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return mm(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function Su(a){a=Zn(a,Zr);const e=Zn(a.firestore,Ur),r=zr(e),s=new Eo(e);return function O_(a,e){const r=new Rn;return a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return(s=(0,Ce.A)(function*(h,m,A){try{const S=yield function(q,te){const ge=ut(q);return ge.persistence.runTransaction("read document","readonly",$e=>ge.localDocuments.getDocument($e,te))}(h,m);S.isFoundDocument()?A.resolve(S):S.isNoDocument()?A.resolve(null):A.reject(new qe(Le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const V=Ne(S,`Failed to get document '${m} from cache`);A.reject(V)}}),function u(h,m,A){return s.apply(this,arguments)})(yield Ua(a),e,r);var s})),r.promise}(r,a._key).then(u=>new ja(e,s,a._key,u,new mc(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function kd(a){a=Zn(a,Zr);const e=Zn(a.firestore,Ur);return Fh(zr(e),a._key,{source:"server"}).then(r=>_m(e,a,r))}(this._delegate):function J_(a){a=Zn(a,Zr);const e=Zn(a.firestore,Ur);return Fh(zr(e),a._key).then(r=>_m(e,a,r))}(this._delegate),r.then(s=>new Yh(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?_c.getInstance(this.firestore,e):null))}}function ms(a,e,r){return a.message=a.message.replace(e,r),a}function _y(a){for(const e of a)if("object"==typeof e&&!wm(e))return e;return{}}function yy(a,e){var r,s;let u;return u=wm(a[0])?a[0]:wm(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:h=>{u.next&&u.next(e(h))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Yh{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return X_(this._delegate,e._delegate)}}class Xh extends Yh{data(e){const r=this._delegate.data(e);return this._delegate._converter||function Gt(a,e){a||pt()}(void 0!==r),r}}class Hs{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Rp(e)}where(e,r,s){try{return new Hs(this.firestore,bu(this._delegate,function K_(a,e,r){const s=e,u=Md("where",a);return Kh._create(u,s,r)}(e,r,s)))}catch(u){throw ms(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new Hs(this.firestore,bu(this._delegate,function q_(a,e="asc"){const r=e,s=Md("orderBy",a);return _p._create(s,r)}(e,r)))}catch(s){throw ms(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,bu(this._delegate,function Q_(a){return L_("limit",a),to._create("limit",a,"F")}(e)))}catch(r){throw ms(r,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,bu(this._delegate,function uI(a){return L_("limitToLast",a),to._create("limitToLast",a,"L")}(e)))}catch(r){throw ms(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,bu(this._delegate,function Il(...a){return xd._create("startAt",a,!0)}(...e)))}catch(r){throw ms(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,bu(this._delegate,function yp(...a){return xd._create("startAfter",a,!1)}(...e)))}catch(r){throw ms(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,bu(this._delegate,function kv(...a){return vp._create("endBefore",a,!1)}(...e)))}catch(r){throw ms(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,bu(this._delegate,function Fv(...a){return vp._create("endAt",a,!0)}(...e)))}catch(r){throw ms(r,"endAt()","Query.endAt()")}}isEqual(e){return B_(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function $v(a){a=Zn(a,gs);const e=Zn(a.firestore,Ur),r=zr(e),s=new Eo(e);return function ZE(a,e){const r=new Rn;return a.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return(s=(0,Ce.A)(function*(h,m,A){try{const S=yield ed(h,m,!0),V=new Wf(m,S.Ts),q=V.ma(S.documents),te=V.applyChanges(q,!1);A.resolve(te.snapshot)}catch(S){const V=Ne(S,`Failed to execute query '${m} against cache`);A.reject(V)}}),function u(h,m,A){return s.apply(this,arguments)})(yield Ua(a),e,r);var s})),r.promise}(r,a._query).then(u=>new wl(e,s,a,u))}(this._delegate):"server"===e?.source?function Z_(a){a=Zn(a,gs);const e=Zn(a.firestore,Ur),r=zr(e),s=new Eo(e);return sp(r,a._query,{source:"server"}).then(u=>new wl(e,s,a,u))}(this._delegate):function jv(a){a=Zn(a,gs);const e=Zn(a.firestore,Ur),r=zr(e),s=new Eo(e);return cm(a._query),sp(r,a._query).then(u=>new wl(e,s,a,u))}(this._delegate),r.then(s=>new Jh(this.firestore,new wl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=_y(e),s=yy(e,u=>new Jh(this.firestore,new wl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return mm(this._delegate,r,s)}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?_c.getInstance(this.firestore,e):null))}}class $a{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Xh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Jh{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new $a(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new Xh(this._firestore,s))})}isEqual(e){return X_(this._delegate,e._delegate)}}class Ud extends Hs{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?Bh(this._delegate):Bh(this._delegate,e))}catch(r){throw ms(r,"doc()","CollectionReference.doc()")}}add(e){return function Ap(a,e){const r=Zn(a.firestore,Ur),s=Bh(a),u=Ip(a.converter,e);return Fd(r,[Sd(vl(a.firestore),"addDoc",s._key,u,null!==a.converter,{}).toMutation(s._key,Mr.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new zo(this.firestore,r))}isEqual(e){return op(this._delegate,e._delegate)}withConverter(e){return new Ud(this.firestore,this._delegate.withConverter(e?_c.getInstance(this.firestore,e):null))}}function Al(a){return Zn(a,Zr)}class Cm{constructor(...e){this._delegate=new Tu(...e)}static documentId(){return new Cm(Kn.keyField().canonicalString())}isEqual(e){return(e=(0,Fe.Ku)(e))instanceof Tu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ay(){return new fp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dl(e)}static delete(){const e=function Vd(){return new El("deleteField")}();return e._methodName="FieldValue.delete",new Dl(e)}static arrayUnion(...e){const r=function Kv(...a){return new am("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new Dl(r)}static arrayRemove(...e){const r=function Tp(...a){return new pp("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new Dl(r)}static increment(e){const r=function Ld(a){return new G_("increment",a)}(e);return r._methodName="FieldValue.increment",new Dl(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vy={Firestore:Dm,GeoPoint:$h,Timestamp:$n,Blob:Qh,Transaction:my,WriteBatch:Tm,DocumentReference:zo,DocumentSnapshot:Yh,Query:Hs,QueryDocumentSnapshot:Xh,QuerySnapshot:Jh,CollectionReference:Ud,FieldPath:Cm,FieldValue:Dl,setLogLevel:function Xv(a){!function xt(a){ve.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function bm(a){(function Pp(a,e){a.INTERNAL.registerComponent(new tt.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},vy)))})(a,(e,r)=>new Dm(e,r,new Am)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(qt.A);var vI=B(7935);function Sm(a,e){return function Ey(a,e=_e.E){return new Se.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Mp(a,e){return Sm(a,e).pipe((0,He.T)(r=>({payload:r,type:"query"})))}class Np{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:u,query:h}=Dy(s,r);return new Ay(u,h,this.afs)}snapshotChanges(){return function Iy(a,e){return Sm(a,e).pipe((0,ie.Z)(void 0),at(),(0,He.T)(r=>{const[s,u]=r;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(R.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,He.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,Ae.H)(this.ref.get(e)).pipe(R.U0)}}function Wo(a,e){return Mp(a,e).pipe((0,ie.Z)(void 0),at(),(0,He.T)(r=>{const[s,u]=r,h=u.payload.docChanges(),m=h.map(A=>({type:A.type,payload:A}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((A,S)=>{const V=h.find(te=>te.doc.ref.isEqual(A.ref)),q=s?.payload.docs.find(te=>te.ref.isEqual(A.ref));V&&JSON.stringify(V.doc.metadata)===JSON.stringify(A.metadata)||!V&&q&&JSON.stringify(q.metadata)===JSON.stringify(A.metadata)||m.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:A}})}),m}))}function wy(a,e,r){return Wo(a,r).pipe((0,_t.S)((s,u)=>function Jv(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function Zv(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zh(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Zh(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zh(a,e.oldIndex,1)}return a}(a,s))}),a}(s,u.map(h=>h.payload),e),[]),(0,lt.F)(),(0,He.T)(s=>s.map(u=>({type:u.type,payload:u}))))}function Zh(a,e,r,...s){const u=a.slice();return u.splice(e,r,...s),u}function Rm(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Ay{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Wo(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,He.T)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),r.pipe((0,ie.Z)(void 0),at(),(0,yt.p)(([s,u])=>u.length>0||!s),(0,He.T)(([,s])=>s),R.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,_t.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Rm(e);return wy(this.query,r,this.afs.schedulers.outsideAngular).pipe(R.U0)}valueChanges(e={}){return Mp(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),R.U0)}get(e){return(0,Ae.H)(this.query.get(e)).pipe(R.U0)}add(e){return this.ref.add(e)}doc(e){return new Np(this.ref.doc(e),this.afs)}}class xp{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Wo(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,yt.p)(r=>r.length>0),R.U0):Wo(this.query,this.afs.schedulers.outsideAngular).pipe(R.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,_t.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Rm(e);return wy(this.query,r,this.afs.schedulers.outsideAngular).pipe(R.U0)}valueChanges(e={}){return Mp(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.T)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),R.U0)}get(e){return(0,Ae.H)(this.query.get(e)).pipe(R.U0)}}const Bd=new oe.nKC("angularfire2.enableFirestorePersistence"),Pm=new oe.nKC("angularfire2.firestore.persistenceSettings"),Op=new oe.nKC("angularfire2.firestore.settings"),EI=new oe.nKC("angularfire2.firestore.use-emulator");function Dy(a,e=(r=>r)){return{query:e(a),ref:a}}let Mm=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,u,h,m,A,S,V,q,te,ge,$e,ht,St,At,en,un){this.schedulers=S;const Jt=(0,J.iB)(r,A,s),wn=q;te&&(0,F.gF)(Jt,A,ge,ht,St,At,$e,en),[this.firestore,this.persistenceEnabled$]=(0,J.BM)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const tr=A.runOutsideAngular(()=>Jt.firestore());if(h&&tr.settings(h),wn&&tr.useEmulator(...wn),u&&!(0,g.Vy)(m)){const Vn=()=>{try{return(0,Ae.H)(tr.enablePersistence(V||void 0).then(()=>!0,()=>!1))}catch(Pe){return typeof console<"u"&&console.warn(Pe),(0,Ve.of)(!1)}};return[tr,A.runOutsideAngular(Vn)]}return[tr,(0,Ve.of)(!1)]},[h,wn,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:m}=Dy(u,s),A=this.schedulers.ngZone.run(()=>h);return new Ay(A,m,this)}collectionGroup(r,s){const u=s||(m=>m),h=this.firestore.collectionGroup(r);return new xp(u(h),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new Np(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(oe.KVO(J.rx),oe.KVO(J.uP,8),oe.KVO(Bd,8),oe.KVO(Op,8),oe.KVO(oe.Agw),oe.KVO(oe.SKi),oe.KVO(R.u0),oe.KVO(Pm,8),oe.KVO(EI,8),oe.KVO(F.DS,8),oe.KVO(F.CP,8),oe.KVO(F.yy,8),oe.KVO(F.ZP,8),oe.KVO(F.$z,8),oe.KVO(F.AU,8),oe.KVO(F.UB,8),oe.KVO(R.Jv,8))};static \u0275prov=oe.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Ty=(()=>{class a{constructor(){vI.A.registerVersion("angularfire",R.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Bd,useValue:!0},{provide:Pm,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=oe.$C({type:a});static \u0275inj=oe.G2t({providers:[Mm]})}return a})()},9253:($t,ze,B)=>{B.d(ze,{BM:()=>He,Gt:()=>F,bf:()=>at,e7:()=>_e,iB:()=>ie,rx:()=>Ae,uP:()=>Ve});var g=B(7705),oe=B(1825),R=B(7935);const J=["ngOnDestroy"],F=(gt,qt,Ce,Re={})=>new Proxy(gt,{get:(tt,Te)=>Ce.runOutsideAngular(()=>{if(gt[Te])return Re?.spy?.get&&Re.spy.get(Te,gt[Te]),gt[Te];if(J.indexOf(Te)>-1)return()=>{};const Fe=qt.toPromise().then(nt=>{const vt=nt?.[Te];return"function"==typeof vt?vt.bind(nt):vt?.then?vt.then(Lt=>Ce.run(()=>Lt)):Ce.run(()=>vt)});return new Proxy(()=>{},{get:(nt,vt)=>Fe[vt],apply:(nt,vt,Lt)=>Fe.then(Je=>{const Zt=Je?.(...Lt);return Re?.spy?.apply&&Re.spy.apply(Te,Lt,Zt),Zt})})})}),_e=(gt,qt)=>{qt.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(Re=>{Object.defineProperty(gt.prototype,Re,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,Re))})})};class Se{constructor(qt){return qt}}const Ae=new g.nKC("angularfire2.app.options"),Ve=new g.nKC("angularfire2.app.name");function ie(gt,qt,Ce){const tt="object"==typeof Ce&&Ce||{};tt.name=tt.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const Fe=R.A.apps.filter(nt=>nt&&nt.name===tt.name)[0]||qt.runOutsideAngular(()=>R.A.initializeApp(gt,tt));try{if(JSON.stringify(gt)!==JSON.stringify(Fe.options)){const nt=!!module.hot;ce("error",`${Fe.name} Firebase App already initialized with different options${nt?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Se(Fe)}const ce=(gt,...qt)=>{(0,g.naY)()&&typeof console<"u"&&console[gt](...qt)},we={provide:Se,useFactory:ie,deps:[Ae,g.SKi,[new g.Xx1,Ve]]};let at=(()=>{class gt{static initializeApp(Ce,Re){return{ngModule:gt,providers:[{provide:Ae,useValue:Ce},{provide:Ve,useValue:Re}]}}constructor(Ce){R.A.registerVersion("angularfire",oe.xv.full,"core"),R.A.registerVersion("angularfire",oe.xv.full,"app-compat"),R.A.registerVersion("angular",g.xvI.full,Ce.toString())}static \u0275fac=function(Re){return new(Re||gt)(g.KVO(g.Agw))};static \u0275mod=g.$C({type:gt});static \u0275inj=g.G2t({providers:[we]})}return gt})();function He(gt,qt,Ce,Re,tt){const[,Te,Fe]=globalThis.\u0275AngularfireInstanceCache.find(nt=>nt[0]===gt)||[];if(Te)return function _t(gt,qt){try{return gt.toString()===qt.toString()}catch{return gt===qt}}(tt,Fe)||(yt("error",`${qt} was already initialized on the ${Ce} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:tt,was:Fe})),Te;{const nt=Re();return globalThis.\u0275AngularfireInstanceCache.push([gt,nt,tt]),nt}}const lt=typeof module<"u"&&!!module.hot,yt=(gt,...qt)=>{(0,g.naY)()&&typeof console<"u"&&console[gt](...qt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:($t,ze,B)=>{B.d(ze,{xv:()=>_t,U0:()=>cn,u0:()=>Fe,Jv:()=>qt});var g=B(7705),oe=B(7852);(0,oe.registerVersion)("firebase","10.13.1","app");var F=B(6780),Se=B(9687);const Ve=new class Ae extends Se.q{}(class _e extends F.R{constructor(Vt,de){super(Vt,de),this.scheduler=Vt,this.work=de}schedule(Vt,de=0){return de>0?super.schedule(Vt,de):(this.delay=de,this.state=Vt,this.scheduler.flush(this),this)}execute(Vt,de){return de>0||this.closed?super.execute(Vt,de):this._execute(Vt,de)}requestAsyncId(Vt,de,ye=0){return null!=ye&&ye>0||null==ye&&this.delay>0?super.requestAsyncId(Vt,de,ye):(Vt.flush(this),0)}});var ce=B(3236),we=B(8141),at=B(6745),He=B(941);const _t=new g.RxE("ANGULARFIRE2_VERSION");class qt{constructor(){return((Ft,Vt)=>{const de=(0,oe.getApps)(),ye=[];return de.forEach(ke=>{ke.container.getProvider(Ft).instances.forEach(le=>{ye.includes(le)||ye.push(le)})}),ye})(Ce)}}const Ce="app-check";function Re(){}class tt{zone;delegate;constructor(Vt,de=Ve){this.zone=Vt,this.delegate=de}now(){return this.delegate.now()}schedule(Vt,de,ye){const ke=this.zone;return this.delegate.schedule(function(le){ke.runGuarded(()=>{Vt.apply(this,[le])})},de,ye)}}class Te{zone;task=null;constructor(Vt){this.zone=Vt}call(Vt,de){const ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Re,{},Re,Re)),de.pipe((0,we.M)({next:ye,complete:ye,error:ye})).subscribe(Vt).add(ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fe=(()=>{class Ft{ngZone;outsideAngular;insideAngular;constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new tt(Zone.current)),this.insideAngular=de.run(()=>new tt(Zone.current,ce.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(ye){return new(ye||Ft)(g.KVO(g.SKi))};static \u0275prov=g.jDH({token:Ft,factory:Ft.\u0275fac,providedIn:"root"})}return Ft})();function cn(Ft){return function an(Ft){return function(de){return(de=de.lift(new Te(Ft.ngZone))).pipe((0,at._)(Ft.outsideAngular),(0,He.Q)(Ft.insideAngular))}}(function nt(){const Ft=globalThis.\u0275AngularFireScheduler;if(!Ft)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ft}())(Ft)}},4341:($t,ze,B)=>{B.d(ze,{me:()=>Re,MJ:()=>Mi,JD:()=>qn,gE:()=>Pt,j4:()=>Dt,YN:()=>Qs,BC:()=>We,cb:()=>Mt,xH:()=>ci,Q0:()=>Ii,MR:()=>os,X1:()=>qa,wz:()=>li,k0:()=>Lt,qT:()=>Sr,y7:()=>Di});var g=B(7705),oe=B(177),R=B(8455),J=B(1985),F=B(3073),_e=B(8750),Se=B(9326),Ae=B(4360),Ve=B(6450),ie=B(8496),we=B(6354);let at=(()=>{class L{constructor(M,Y){this._renderer=M,this._elementRef=Y,this.onChange=me=>{},this.onTouched=()=>{}}setProperty(M,Y){this._renderer.setProperty(this._elementRef.nativeElement,M,Y)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(g.sFG),g.rXU(g.aKT))};static#t=this.\u0275dir=g.FsC({type:L})}return L})(),He=(()=>{class L extends at{static#e=this.\u0275fac=function(){let M;return function(me){return(M||(M=g.xGo(L)))(me||L)}}();static#t=this.\u0275dir=g.FsC({type:L,features:[g.Vt3]})}return L})();const _t=new g.nKC("NgValueAccessor"),gt={provide:_t,useExisting:(0,g.Rfq)(()=>Re),multi:!0},Ce=new g.nKC("CompositionEventMode");let Re=(()=>{class L extends at{constructor(M,Y,me){super(M,Y),this._compositionMode=me,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qt(){const L=(0,oe.QT)()?(0,oe.QT)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(g.sFG),g.rXU(g.aKT),g.rXU(Ce,8))};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Y,me){1&Y&&g.bIt("input",function(pn){return me._handleInput(pn.target.value)})("blur",function(){return me.onTouched()})("compositionstart",function(){return me._compositionStart()})("compositionend",function(pn){return me._compositionEnd(pn.target.value)})},features:[g.Jv_([gt]),g.Vt3]})}return L})();function tt(L){return null==L||("string"==typeof L||Array.isArray(L))&&0===L.length}function Te(L){return null!=L&&"number"==typeof L.length}const Fe=new g.nKC("NgValidators"),nt=new g.nKC("NgAsyncValidators"),vt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Lt{static min($){return function Je(L){return $=>{if(tt($.value)||tt(L))return null;const M=parseFloat($.value);return!isNaN(M)&&M<L?{min:{min:L,actual:$.value}}:null}}($)}static max($){return function Zt(L){return $=>{if(tt($.value)||tt(L))return null;const M=parseFloat($.value);return!isNaN(M)&&M>L?{max:{max:L,actual:$.value}}:null}}($)}static required($){return function cn(L){return tt(L.value)?{required:!0}:null}($)}static requiredTrue($){return function an(L){return!0===L.value?null:{required:!0}}($)}static email($){return function Wn(L){return tt(L.value)||vt.test(L.value)?null:{email:!0}}($)}static minLength($){return function Dn(L){return $=>tt($.value)||!Te($.value)?null:$.value.length<L?{minlength:{requiredLength:L,actualLength:$.value.length}}:null}($)}static maxLength($){return function Ft(L){return $=>Te($.value)&&$.value.length>L?{maxlength:{requiredLength:L,actualLength:$.value.length}}:null}($)}static pattern($){return function Vt(L){if(!L)return de;let $,M;return"string"==typeof L?(M="","^"!==L.charAt(0)&&(M+="^"),M+=L,"$"!==L.charAt(L.length-1)&&(M+="$"),$=new RegExp(M)):(M=L.toString(),$=L),Y=>{if(tt(Y.value))return null;const me=Y.value;return $.test(me)?null:{pattern:{requiredPattern:M,actualValue:me}}}}($)}static nullValidator($){return null}static compose($){return ve($)}static composeAsync($){return xt($)}}function de(L){return null}function ye(L){return null!=L}function ke(L){return(0,g.jNT)(L)?(0,R.H)(L):L}function Me(L){let $={};return L.forEach(M=>{$=null!=M?{...$,...M}:$}),0===Object.keys($).length?null:$}function le(L,$){return $.map(M=>M(L))}function se(L){return L.map($=>function xe(L){return!L.validate}($)?$:M=>$.validate(M))}function ve(L){if(!L)return null;const $=L.filter(ye);return 0==$.length?null:function(M){return Me(le(M,$))}}function Tt(L){return null!=L?ve(se(L)):null}function xt(L){if(!L)return null;const $=L.filter(ye);return 0==$.length?null:function(M){return function ce(...L){const $=(0,Se.ms)(L),{args:M,keys:Y}=(0,F.D)(L),me=new J.c(Xt=>{const{length:pn}=M;if(!pn)return void Xt.complete();const Yr=new Array(pn);let ls=pn,Ti=pn;for(let Ys=0;Ys<pn;Ys++){let Ci=!1;(0,_e.Tg)(M[Ys]).subscribe((0,Ae._)(Xt,Xr=>{Ci||(Ci=!0,Ti--),Yr[Ys]=Xr},()=>ls--,void 0,()=>{(!ls||!Ci)&&(Ti||Xt.next(Y?(0,ie.e)(Y,Yr):Yr),Xt.complete())}))}});return $?me.pipe((0,Ve.I)($)):me}(le(M,$).map(ke)).pipe((0,we.T)(Me))}}function Ke(L){return null!=L?xt(se(L)):null}function Ot(L,$){return null===L?[$]:Array.isArray(L)?[...L,$]:[L,$]}function Un(L){return L._rawValidators}function dn(L){return L._rawAsyncValidators}function pt(L){return L?Array.isArray(L)?L:[L]:[]}function It(L,$){return Array.isArray(L)?L.includes($):L===$}function Gt(L,$){const M=pt($);return pt(L).forEach(me=>{It(M,me)||M.push(me)}),M}function ut(L,$){return pt($).filter(M=>!It(L,M))}class Le{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators($){this._rawValidators=$||[],this._composedValidatorFn=Tt(this._rawValidators)}_setAsyncValidators($){this._rawAsyncValidators=$||[],this._composedAsyncValidatorFn=Ke(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy($){this._onDestroyCallbacks.push($)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach($=>$()),this._onDestroyCallbacks=[]}reset($=void 0){this.control&&this.control.reset($)}hasError($,M){return!!this.control&&this.control.hasError($,M)}getError($,M){return this.control?this.control.getError($,M):null}}class qe extends Le{get formDirective(){return null}get path(){return null}}class Rn extends Le{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nr{constructor($){this._cd=$}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let We=(()=>{class L extends Nr{constructor(M){super(M)}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(Rn,2))};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Y,me){2&Y&&g.AVh("ng-untouched",me.isUntouched)("ng-touched",me.isTouched)("ng-pristine",me.isPristine)("ng-dirty",me.isDirty)("ng-valid",me.isValid)("ng-invalid",me.isInvalid)("ng-pending",me.isPending)},features:[g.Vt3]})}return L})(),Mt=(()=>{class L extends Nr{constructor(M){super(M)}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(qe,10))};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Y,me){2&Y&&g.AVh("ng-untouched",me.isUntouched)("ng-touched",me.isTouched)("ng-pristine",me.isPristine)("ng-dirty",me.isDirty)("ng-valid",me.isValid)("ng-invalid",me.isInvalid)("ng-pending",me.isPending)("ng-submitted",me.isSubmitted)},features:[g.Vt3]})}return L})();const _i="VALID",Dr="INVALID",Qr="PENDING",Tr="DISABLED";function yi(L){return(Z(L)?L.validators:L)||null}function W(L,$){return(Z($)?$.asyncValidators:L)||null}function Z(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}class Ct{constructor($,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators($),this._assignAsyncValidators(M)}get validator(){return this._composedValidatorFn}set validator($){this._rawValidators=this._composedValidatorFn=$}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator($){this._rawAsyncValidators=this._composedAsyncValidatorFn=$}get parent(){return this._parent}get valid(){return this.status===_i}get invalid(){return this.status===Dr}get pending(){return this.status==Qr}get disabled(){return this.status===Tr}get enabled(){return this.status!==Tr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators($){this._assignValidators($)}setAsyncValidators($){this._assignAsyncValidators($)}addValidators($){this.setValidators(Gt($,this._rawValidators))}addAsyncValidators($){this.setAsyncValidators(Gt($,this._rawAsyncValidators))}removeValidators($){this.setValidators(ut($,this._rawValidators))}removeAsyncValidators($){this.setAsyncValidators(ut($,this._rawAsyncValidators))}hasValidator($){return It(this._rawValidators,$)}hasAsyncValidator($){return It(this._rawAsyncValidators,$)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched($={}){this.touched=!0,this._parent&&!$.onlySelf&&this._parent.markAsTouched($)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild($=>$.markAllAsTouched())}markAsUntouched($={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}markAsDirty($={}){this.pristine=!1,this._parent&&!$.onlySelf&&this._parent.markAsDirty($)}markAsPristine($={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}markAsPending($={}){this.status=Qr,!1!==$.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!$.onlySelf&&this._parent.markAsPending($)}disable($={}){const M=this._parentMarkedDirty($.onlySelf);this.status=Tr,this.errors=null,this._forEachChild(Y=>{Y.disable({...$,onlySelf:!0})}),this._updateValue(),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...$,skipPristineCheck:M}),this._onDisabledChange.forEach(Y=>Y(!0))}enable($={}){const M=this._parentMarkedDirty($.onlySelf);this.status=_i,this._forEachChild(Y=>{Y.enable({...$,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent}),this._updateAncestors({...$,skipPristineCheck:M}),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors($){this._parent&&!$.onlySelf&&(this._parent.updateValueAndValidity($),$.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent($){this._parent=$}getRawValue(){return this.value}updateValueAndValidity($={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_i||this.status===Qr)&&this._runAsyncValidator($.emitEvent)),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.updateValueAndValidity($)}_updateTreeValidity($={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity($)),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tr:_i}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator($){if(this.asyncValidator){this.status=Qr,this._hasOwnPendingAsyncValidator=!0;const M=ke(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:$})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors($,M={}){this.errors=$,this._updateControlsErrors(!1!==M.emitEvent)}get($){let M=$;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((Y,me)=>Y&&Y._find(me),this)}getError($,M){const Y=M?this.get(M):this;return Y&&Y.errors?Y.errors[$]:null}hasError($,M){return!!this.getError($,M)}get root(){let $=this;for(;$._parent;)$=$._parent;return $}_updateControlsErrors($){this.status=this._calculateStatus(),$&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors($)}_initObservables(){this.valueChanges=new g.bkB,this.statusChanges=new g.bkB}_calculateStatus(){return this._allControlsDisabled()?Tr:this.errors?Dr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qr)?Qr:this._anyControlsHaveStatus(Dr)?Dr:_i}_anyControlsHaveStatus($){return this._anyControls(M=>M.status===$)}_anyControlsDirty(){return this._anyControls($=>$.dirty)}_anyControlsTouched(){return this._anyControls($=>$.touched)}_updatePristine($={}){this.pristine=!this._anyControlsDirty(),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}_updateTouched($={}){this.touched=this._anyControlsTouched(),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}_registerOnCollectionChange($){this._onCollectionChange=$}_setUpdateStrategy($){Z($)&&null!=$.updateOn&&(this._updateOn=$.updateOn)}_parentMarkedDirty($){return!$&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find($){return null}_assignValidators($){this._rawValidators=Array.isArray($)?$.slice():$,this._composedValidatorFn=function X(L){return Array.isArray(L)?Tt(L):L||null}(this._rawValidators)}_assignAsyncValidators($){this._rawAsyncValidators=Array.isArray($)?$.slice():$,this._composedAsyncValidatorFn=function G(L){return Array.isArray(L)?Ke(L):L||null}(this._rawAsyncValidators)}}class Pt extends Ct{constructor($,M,Y){super(yi(M),W(Y,M)),this.controls=$,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl($,M){return this.controls[$]?this.controls[$]:(this.controls[$]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl($,M,Y={}){this.registerControl($,M),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl($,M={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl($,M,Y={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],M&&this.registerControl($,M),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains($){return this.controls.hasOwnProperty($)&&this.controls[$].enabled}setValue($,M={}){(function et(L,$,M){L._forEachChild((Y,me)=>{if(void 0===M[me])throw new g.wOt(1002,"")})})(this,0,$),Object.keys($).forEach(Y=>{(function re(L,$,M){const Y=L.controls;if(!($?Object.keys(Y):Y).length)throw new g.wOt(1e3,"");if(!Y[M])throw new g.wOt(1001,"")})(this,!0,Y),this.controls[Y].setValue($[Y],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue($,M={}){null!=$&&(Object.keys($).forEach(Y=>{const me=this.controls[Y];me&&me.patchValue($[Y],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset($={},M={}){this._forEachChild((Y,me)=>{Y.reset($?$[me]:null,{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},($,M,Y)=>($[Y]=M.getRawValue(),$))}_syncPendingControls(){let $=this._reduceChildren(!1,(M,Y)=>!!Y._syncPendingControls()||M);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_forEachChild($){Object.keys(this.controls).forEach(M=>{const Y=this.controls[M];Y&&$(Y,M)})}_setUpControls(){this._forEachChild($=>{$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls($){for(const[M,Y]of Object.entries(this.controls))if(this.contains(M)&&$(Y))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,Y,me)=>((Y.enabled||this.disabled)&&(M[me]=Y.value),M))}_reduceChildren($,M){let Y=$;return this._forEachChild((me,Xt)=>{Y=M(Y,me,Xt)}),Y}_allControlsDisabled(){for(const $ of Object.keys(this.controls))if(this.controls[$].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find($){return this.controls.hasOwnProperty($)?this.controls[$]:null}}const ir=new g.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>vi}),vi="always";function ni(L,$,M=vi){yr(L,$),$.valueAccessor.writeValue(L.value),(L.disabled||"always"===M)&&$.valueAccessor.setDisabledState?.(L.disabled),function Qe(L,$){$.valueAccessor.registerOnChange(M=>{L._pendingValue=M,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&it(L,$)})}(L,$),function Nt(L,$){const M=(Y,me)=>{$.valueAccessor.writeValue(Y),me&&$.viewToModelUpdate(Y)};L.registerOnChange(M),$._registerOnDestroy(()=>{L._unregisterOnChange(M)})}(L,$),function be(L,$){$.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&it(L,$),"submit"!==L.updateOn&&L.markAsTouched()})}(L,$),function Ri(L,$){if($.valueAccessor.setDisabledState){const M=Y=>{$.valueAccessor.setDisabledState(Y)};L.registerOnDisabledChange(M),$._registerOnDestroy(()=>{L._unregisterOnDisabledChange(M)})}}(L,$)}function Or(L,$,M=!0){const Y=()=>{};$.valueAccessor&&($.valueAccessor.registerOnChange(Y),$.valueAccessor.registerOnTouched(Y)),yn(L,$),L&&($._invokeOnDestroyCallbacks(),L._registerOnCollectionChange(()=>{}))}function Pr(L,$){L.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange($)})}function yr(L,$){const M=Un(L);null!==$.validator?L.setValidators(Ot(M,$.validator)):"function"==typeof M&&L.setValidators([M]);const Y=dn(L);null!==$.asyncValidator?L.setAsyncValidators(Ot(Y,$.asyncValidator)):"function"==typeof Y&&L.setAsyncValidators([Y]);const me=()=>L.updateValueAndValidity();Pr($._rawValidators,me),Pr($._rawAsyncValidators,me)}function yn(L,$){let M=!1;if(null!==L){if(null!==$.validator){const me=Un(L);if(Array.isArray(me)&&me.length>0){const Xt=me.filter(pn=>pn!==$.validator);Xt.length!==me.length&&(M=!0,L.setValidators(Xt))}}if(null!==$.asyncValidator){const me=dn(L);if(Array.isArray(me)&&me.length>0){const Xt=me.filter(pn=>pn!==$.asyncValidator);Xt.length!==me.length&&(M=!0,L.setAsyncValidators(Xt))}}}const Y=()=>{};return Pr($._rawValidators,Y),Pr($._rawAsyncValidators,Y),M}function it(L,$){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),$.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function Pi(L,$){const M=L.indexOf($);M>-1&&L.splice(M,1)}function To(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}const Mi=class extends Ct{constructor($=null,M,Y){super(yi(M),W(Y,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState($),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Z(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=To($)?$.value:$)}setValue($,M={}){this.value=this._pendingValue=$,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue($,M={}){this.setValue($,M)}reset($=this.defaultValue,M={}){this._applyFormState($),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls($){return!1}_allControlsDisabled(){return this.disabled}registerOnChange($){this._onChange.push($)}_unregisterOnChange($){Pi(this._onChange,$)}registerOnDisabledChange($){this._onDisabledChange.push($)}_unregisterOnDisabledChange($){Pi(this._onDisabledChange,$)}_forEachChild($){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState($){To($)?(this.value=this._pendingValue=$.value,$.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=$}};let Sr=(()=>{class L{static#e=this.\u0275fac=function(Y){return new(Y||L)};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return L})();const Is={provide:_t,useExisting:(0,g.Rfq)(()=>Ii),multi:!0};let Ii=(()=>{class L extends He{writeValue(M){this.setProperty("value",M??"")}registerOnChange(M){this.onChange=Y=>{M(""==Y?null:parseFloat(Y))}}static#e=this.\u0275fac=function(){let M;return function(me){return(M||(M=g.xGo(L)))(me||L)}}();static#t=this.\u0275dir=g.FsC({type:L,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Y,me){1&Y&&g.bIt("input",function(pn){return me.onChange(pn.target.value)})("blur",function(){return me.onTouched()})},features:[g.Jv_([Is]),g.Vt3]})}return L})(),An=(()=>{class L{static#e=this.\u0275fac=function(Y){return new(Y||L)};static#t=this.\u0275mod=g.$C({type:L});static#n=this.\u0275inj=g.G2t({})}return L})();const er={provide:_t,useExisting:(0,g.Rfq)(()=>os),multi:!0};let os=(()=>{class L extends He{writeValue(M){this.setProperty("value",parseFloat(M))}registerOnChange(M){this.onChange=Y=>{M(""==Y?null:parseFloat(Y))}}static#e=this.\u0275fac=function(){let M;return function(me){return(M||(M=g.xGo(L)))(me||L)}}();static#t=this.\u0275dir=g.FsC({type:L,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(Y,me){1&Y&&g.bIt("change",function(pn){return me.onChange(pn.target.value)})("input",function(pn){return me.onChange(pn.target.value)})("blur",function(){return me.onTouched()})},features:[g.Jv_([er]),g.Vt3]})}return L})();const wi=new g.nKC("NgModelWithFormControlWarning"),fr={provide:qe,useExisting:(0,g.Rfq)(()=>Dt)};let Dt=(()=>{class L extends qe{constructor(M,Y,me){super(),this.callSetDisabledState=me,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.bkB,this._setValidators(M),this._setAsyncValidators(Y)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const Y=this.form.get(M.path);return ni(Y,M,this.callSetDisabledState),Y.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),Y}getControl(M){return this.form.get(M.path)}removeControl(M){Or(M.control||null,M,!1),function zs(L,$){const M=L.indexOf($);M>-1&&L.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,Y){this.form.get(M.path).setValue(Y)}onSubmit(M){return this.submitted=!0,function Xi(L,$){L._syncPendingControls(),$.forEach(M=>{const Y=M.control;"submit"===Y.updateOn&&Y._pendingChange&&(M.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M=void 0){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const Y=M.control,me=this.form.get(M.path);Y!==me&&(Or(Y||null,M),(L=>L instanceof Mi)(me)&&(ni(me,M,this.callSetDisabledState),M.control=me))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const Y=this.form.get(M.path);(function Yt(L,$){yr(L,$)})(Y,M),Y.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const Y=this.form.get(M.path);Y&&function Wt(L,$){return yn(L,$)}(Y,M)&&Y.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yr(this.form,this),this._oldForm&&yn(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(Fe,10),g.rXU(nt,10),g.rXU(ir,8))};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["","formGroup",""]],hostBindings:function(Y,me){1&Y&&g.bIt("submit",function(pn){return me.onSubmit(pn)})("reset",function(){return me.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g.Jv_([fr]),g.Vt3,g.OA$]})}return L})();const Ji={provide:Rn,useExisting:(0,g.Rfq)(()=>qn)};let qn=(()=>{class L extends Rn{set isDisabled(M){}static#e=this._ngModelWarningSentOnce=!1;constructor(M,Y,me,Xt,pn){super(),this._ngModelWarningConfig=pn,this._added=!1,this.name=null,this.update=new g.bkB,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(Y),this._setAsyncValidators(me),this.valueAccessor=function Ao(L,$){if(!$)return null;let M,Y,me;return Array.isArray($),$.forEach(Xt=>{Xt.constructor===Re?M=Xt:function io(L){return Object.getPrototypeOf(L.constructor)===He}(Xt)?Y=Xt:me=Xt}),me||Y||M||null}(0,Xt)}ngOnChanges(M){this._added||this._setUpControl(),function Gn(L,$){if(!L.hasOwnProperty("model"))return!1;const M=L.model;return!!M.isFirstChange()||!Object.is($,M.currentValue)}(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return function Ei(L,$){return[...$.path,L]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(qe,13),g.rXU(Fe,10),g.rXU(nt,10),g.rXU(_t,10),g.rXU(wi,8))};static#n=this.\u0275dir=g.FsC({type:L,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g.Jv_([Ji]),g.Vt3,g.OA$]})}return L})();const as={provide:_t,useExisting:(0,g.Rfq)(()=>li),multi:!0};function Hr(L,$){return null==L?`${$}`:($&&"object"==typeof $&&($="Object"),`${L}: ${$}`.slice(0,50))}let li=(()=>{class L extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const me=Hr(this._getOptionId(M),M);this.setProperty("value",me)}registerOnChange(M){this.onChange=Y=>{this.value=this._getOptionValue(Y),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const Y of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Y),M))return Y;return null}_getOptionValue(M){const Y=function sn(L){return L.split(":")[0]}(M);return this._optionMap.has(Y)?this._optionMap.get(Y):M}static#e=this.\u0275fac=function(){let M;return function(me){return(M||(M=g.xGo(L)))(me||L)}}();static#t=this.\u0275dir=g.FsC({type:L,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Y,me){1&Y&&g.bIt("change",function(pn){return me.onChange(pn.target.value)})("blur",function(){return me.onTouched()})},inputs:{compareWith:"compareWith"},features:[g.Jv_([as]),g.Vt3]})}return L})(),ci=(()=>{class L{constructor(M,Y,me){this._element=M,this._renderer=Y,this._select=me,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(Hr(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(g.aKT),g.rXU(g.sFG),g.rXU(li,9))};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return L})();const pr={provide:_t,useExisting:(0,g.Rfq)(()=>Ai),multi:!0};function sr(L,$){return null==L?`${$}`:("string"==typeof $&&($=`'${$}'`),$&&"object"==typeof $&&($="Object"),`${L}: ${$}`.slice(0,50))}let Ai=(()=>{class L extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let Y;if(this.value=M,Array.isArray(M)){const me=M.map(Xt=>this._getOptionId(Xt));Y=(Xt,pn)=>{Xt._setSelected(me.indexOf(pn.toString())>-1)}}else Y=(me,Xt)=>{me._setSelected(!1)};this._optionMap.forEach(Y)}registerOnChange(M){this.onChange=Y=>{const me=[],Xt=Y.selectedOptions;if(void 0!==Xt){const pn=Xt;for(let Yr=0;Yr<pn.length;Yr++){const Ti=this._getOptionValue(pn[Yr].value);me.push(Ti)}}else{const pn=Y.options;for(let Yr=0;Yr<pn.length;Yr++){const ls=pn[Yr];if(ls.selected){const Ti=this._getOptionValue(ls.value);me.push(Ti)}}}this.value=me,M(me)}}_registerOption(M){const Y=(this._idCounter++).toString();return this._optionMap.set(Y,M),Y}_getOptionId(M){for(const Y of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Y)._value,M))return Y;return null}_getOptionValue(M){const Y=function ji(L){return L.split(":")[0]}(M);return this._optionMap.has(Y)?this._optionMap.get(Y)._value:M}static#e=this.\u0275fac=function(){let M;return function(me){return(M||(M=g.xGo(L)))(me||L)}}();static#t=this.\u0275dir=g.FsC({type:L,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Y,me){1&Y&&g.bIt("change",function(pn){return me.onChange(pn.target)})("blur",function(){return me.onTouched()})},inputs:{compareWith:"compareWith"},features:[g.Jv_([pr]),g.Vt3]})}return L})(),Di=(()=>{class L{constructor(M,Y,me){this._element=M,this._renderer=Y,this._select=me,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue(sr(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue(sr(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Y){return new(Y||L)(g.rXU(g.aKT),g.rXU(g.sFG),g.rXU(Ai,9))};static#t=this.\u0275dir=g.FsC({type:L,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return L})(),es=(()=>{class L{static#e=this.\u0275fac=function(Y){return new(Y||L)};static#t=this.\u0275mod=g.$C({type:L});static#n=this.\u0275inj=g.G2t({imports:[An]})}return L})(),Qs=(()=>{class L{static withConfig(M){return{ngModule:L,providers:[{provide:ir,useValue:M.callSetDisabledState??vi}]}}static#e=this.\u0275fac=function(Y){return new(Y||L)};static#t=this.\u0275mod=g.$C({type:L});static#n=this.\u0275inj=g.G2t({imports:[es]})}return L})(),qa=(()=>{class L{static withConfig(M){return{ngModule:L,providers:[{provide:wi,useValue:M.warnOnNgModelWithFormControl??"always"},{provide:ir,useValue:M.callSetDisabledState??vi}]}}static#e=this.\u0275fac=function(Y){return new(Y||L)};static#t=this.\u0275mod=g.$C({type:L});static#n=this.\u0275inj=g.G2t({imports:[es]})}return L})()},345:($t,ze,B)=>{B.d(ze,{Bb:()=>It,hE:()=>Rn,sG:()=>Ot});var g=B(7705),oe=B(177);class R extends oe.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class J extends R{static makeCurrent(){(0,oe.ZD)(new J)}onAndCancel(W,G,Z){return W.addEventListener(G,Z),()=>{W.removeEventListener(G,Z)}}dispatchEvent(W,G){W.dispatchEvent(G)}remove(W){W.parentNode&&W.parentNode.removeChild(W)}createElement(W,G){return(G=G||this.getDefaultDocument()).createElement(W)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(W){return W.nodeType===Node.ELEMENT_NODE}isShadowRoot(W){return W instanceof DocumentFragment}getGlobalEventTarget(W,G){return"window"===G?window:"document"===G?W:"body"===G?W.body:null}getBaseHref(W){const G=function _e(){return F=F||document.querySelector("base"),F?F.getAttribute("href"):null}();return null==G?null:function Ae(X){Se=Se||document.createElement("a"),Se.setAttribute("href",X);const W=Se.pathname;return"/"===W.charAt(0)?W:`/${W}`}(G)}resetBaseElement(){F=null}getUserAgent(){return window.navigator.userAgent}getCookie(W){return(0,oe._b)(document.cookie,W)}}let Se,F=null,ie=(()=>{class X{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Z){return new(Z||X)};static#t=this.\u0275prov=g.jDH({token:X,factory:X.\u0275fac})}return X})();const ce=new g.nKC("EventManagerPlugins");let we=(()=>{class X{constructor(G,Z){this._zone=Z,this._eventNameToPlugin=new Map,G.forEach(re=>{re.manager=this}),this._plugins=G.slice().reverse()}addEventListener(G,Z,re){return this._findPluginFor(Z).addEventListener(G,Z,re)}getZone(){return this._zone}_findPluginFor(G){let Z=this._eventNameToPlugin.get(G);if(Z)return Z;if(Z=this._plugins.find(et=>et.supports(G)),!Z)throw new g.wOt(5101,!1);return this._eventNameToPlugin.set(G,Z),Z}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(ce),g.KVO(g.SKi))};static#t=this.\u0275prov=g.jDH({token:X,factory:X.\u0275fac})}return X})();class at{constructor(W){this._doc=W}}const He="ng-app-id";let _t=(()=>{class X{constructor(G,Z,re,et={}){this.doc=G,this.appId=Z,this.nonce=re,this.platformId=et,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,oe.Vy)(et),this.resetHostNodes()}addStyles(G){for(const Z of G)1===this.changeUsageCount(Z,1)&&this.onStyleAdded(Z)}removeStyles(G){for(const Z of G)this.changeUsageCount(Z,-1)<=0&&this.onStyleRemoved(Z)}ngOnDestroy(){const G=this.styleNodesInDOM;G&&(G.forEach(Z=>Z.remove()),G.clear());for(const Z of this.getAllStyles())this.onStyleRemoved(Z);this.resetHostNodes()}addHost(G){this.hostNodes.add(G);for(const Z of this.getAllStyles())this.addStyleToHost(G,Z)}removeHost(G){this.hostNodes.delete(G)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(G){for(const Z of this.hostNodes)this.addStyleToHost(Z,G)}onStyleRemoved(G){const Z=this.styleRef;Z.get(G)?.elements?.forEach(re=>re.remove()),Z.delete(G)}collectServerRenderedStyles(){const G=this.doc.head?.querySelectorAll(`style[${He}="${this.appId}"]`);if(G?.length){const Z=new Map;return G.forEach(re=>{null!=re.textContent&&Z.set(re.textContent,re)}),Z}return null}changeUsageCount(G,Z){const re=this.styleRef;if(re.has(G)){const et=re.get(G);return et.usage+=Z,et.usage}return re.set(G,{usage:Z,elements:[]}),Z}getStyleElement(G,Z){const re=this.styleNodesInDOM,et=re?.get(Z);if(et?.parentNode===G)return re.delete(Z),et.removeAttribute(He),et;{const Ct=this.doc.createElement("style");return this.nonce&&Ct.setAttribute("nonce",this.nonce),Ct.textContent=Z,this.platformIsServer&&Ct.setAttribute(He,this.appId),Ct}}addStyleToHost(G,Z){const re=this.getStyleElement(G,Z);G.appendChild(re);const et=this.styleRef,Ct=et.get(Z)?.elements;Ct?Ct.push(re):et.set(Z,{elements:[re],usage:1})}resetHostNodes(){const G=this.hostNodes;G.clear(),G.add(this.doc.head)}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(oe.qQ),g.KVO(g.sZ2),g.KVO(g.BIS,8),g.KVO(g.Agw))};static#t=this.\u0275prov=g.jDH({token:X,factory:X.\u0275fac})}return X})();const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yt=/%COMP%/g,tt=new g.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function nt(X,W){return W.map(G=>G.replace(yt,X))}let vt=(()=>{class X{constructor(G,Z,re,et,Ct,Pt,hn,he=null){this.eventManager=G,this.sharedStylesHost=Z,this.appId=re,this.removeStylesOnCompDestroy=et,this.doc=Ct,this.platformId=Pt,this.ngZone=hn,this.nonce=he,this.rendererByCompId=new Map,this.platformIsServer=(0,oe.Vy)(Pt),this.defaultRenderer=new Lt(G,Ct,hn,this.platformIsServer)}createRenderer(G,Z){if(!G||!Z)return this.defaultRenderer;this.platformIsServer&&Z.encapsulation===g.gXe.ShadowDom&&(Z={...Z,encapsulation:g.gXe.Emulated});const re=this.getOrCreateRenderer(G,Z);return re instanceof Dn?re.applyToHost(G):re instanceof Wn&&re.applyStyles(),re}getOrCreateRenderer(G,Z){const re=this.rendererByCompId;let et=re.get(Z.id);if(!et){const Ct=this.doc,Pt=this.ngZone,hn=this.eventManager,he=this.sharedStylesHost,Hn=this.removeStylesOnCompDestroy,tn=this.platformIsServer;switch(Z.encapsulation){case g.gXe.Emulated:et=new Dn(hn,he,Z,this.appId,Hn,Ct,Pt,tn);break;case g.gXe.ShadowDom:return new an(hn,he,G,Z,Ct,Pt,this.nonce,tn);default:et=new Wn(hn,he,Z,Hn,Ct,Pt,tn)}re.set(Z.id,et)}return et}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(we),g.KVO(_t),g.KVO(g.sZ2),g.KVO(tt),g.KVO(oe.qQ),g.KVO(g.Agw),g.KVO(g.SKi),g.KVO(g.BIS))};static#t=this.\u0275prov=g.jDH({token:X,factory:X.\u0275fac})}return X})();class Lt{constructor(W,G,Z,re){this.eventManager=W,this.doc=G,this.ngZone=Z,this.platformIsServer=re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(W,G){return G?this.doc.createElementNS(lt[G]||G,W):this.doc.createElement(W)}createComment(W){return this.doc.createComment(W)}createText(W){return this.doc.createTextNode(W)}appendChild(W,G){(cn(W)?W.content:W).appendChild(G)}insertBefore(W,G,Z){W&&(cn(W)?W.content:W).insertBefore(G,Z)}removeChild(W,G){W&&W.removeChild(G)}selectRootElement(W,G){let Z="string"==typeof W?this.doc.querySelector(W):W;if(!Z)throw new g.wOt(-5104,!1);return G||(Z.textContent=""),Z}parentNode(W){return W.parentNode}nextSibling(W){return W.nextSibling}setAttribute(W,G,Z,re){if(re){G=re+":"+G;const et=lt[re];et?W.setAttributeNS(et,G,Z):W.setAttribute(G,Z)}else W.setAttribute(G,Z)}removeAttribute(W,G,Z){if(Z){const re=lt[Z];re?W.removeAttributeNS(re,G):W.removeAttribute(`${Z}:${G}`)}else W.removeAttribute(G)}addClass(W,G){W.classList.add(G)}removeClass(W,G){W.classList.remove(G)}setStyle(W,G,Z,re){re&(g.czy.DashCase|g.czy.Important)?W.style.setProperty(G,Z,re&g.czy.Important?"important":""):W.style[G]=Z}removeStyle(W,G,Z){Z&g.czy.DashCase?W.style.removeProperty(G):W.style[G]=""}setProperty(W,G,Z){W[G]=Z}setValue(W,G){W.nodeValue=G}listen(W,G,Z){if("string"==typeof W&&!(W=(0,oe.QT)().getGlobalEventTarget(this.doc,W)))throw new Error(`Unsupported event target ${W} for event ${G}`);return this.eventManager.addEventListener(W,G,this.decoratePreventDefault(Z))}decoratePreventDefault(W){return G=>{if("__ngUnwrap__"===G)return W;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>W(G)):W(G))&&G.preventDefault()}}}function cn(X){return"TEMPLATE"===X.tagName&&void 0!==X.content}class an extends Lt{constructor(W,G,Z,re,et,Ct,Pt,hn){super(W,et,Ct,hn),this.sharedStylesHost=G,this.hostEl=Z,this.shadowRoot=Z.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const he=nt(re.id,re.styles);for(const Hn of he){const tn=document.createElement("style");Pt&&tn.setAttribute("nonce",Pt),tn.textContent=Hn,this.shadowRoot.appendChild(tn)}}nodeOrShadowRoot(W){return W===this.hostEl?this.shadowRoot:W}appendChild(W,G){return super.appendChild(this.nodeOrShadowRoot(W),G)}insertBefore(W,G,Z){return super.insertBefore(this.nodeOrShadowRoot(W),G,Z)}removeChild(W,G){return super.removeChild(this.nodeOrShadowRoot(W),G)}parentNode(W){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(W)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wn extends Lt{constructor(W,G,Z,re,et,Ct,Pt,hn){super(W,et,Ct,Pt),this.sharedStylesHost=G,this.removeStylesOnCompDestroy=re,this.styles=hn?nt(hn,Z.styles):Z.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Dn extends Wn{constructor(W,G,Z,re,et,Ct,Pt,hn){const he=re+"-"+Z.id;super(W,G,Z,et,Ct,Pt,hn,he),this.contentAttr=function Te(X){return"_ngcontent-%COMP%".replace(yt,X)}(he),this.hostAttr=function Fe(X){return"_nghost-%COMP%".replace(yt,X)}(he)}applyToHost(W){this.applyStyles(),this.setAttribute(W,this.hostAttr,"")}createElement(W,G){const Z=super.createElement(W,G);return super.setAttribute(Z,this.contentAttr,""),Z}}let Ft=(()=>{class X extends at{constructor(G){super(G)}supports(G){return!0}addEventListener(G,Z,re){return G.addEventListener(Z,re,!1),()=>this.removeEventListener(G,Z,re)}removeEventListener(G,Z,re){return G.removeEventListener(Z,re)}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(oe.qQ))};static#t=this.\u0275prov=g.jDH({token:X,factory:X.\u0275fac})}return X})();const Vt=["alt","control","meta","shift"],de={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ye={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let ke=(()=>{class X extends at{constructor(G){super(G)}supports(G){return null!=X.parseEventName(G)}addEventListener(G,Z,re){const et=X.parseEventName(Z),Ct=X.eventCallback(et.fullKey,re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,oe.QT)().onAndCancel(G,et.domEventName,Ct))}static parseEventName(G){const Z=G.toLowerCase().split("."),re=Z.shift();if(0===Z.length||"keydown"!==re&&"keyup"!==re)return null;const et=X._normalizeKey(Z.pop());let Ct="",Pt=Z.indexOf("code");if(Pt>-1&&(Z.splice(Pt,1),Ct="code."),Vt.forEach(he=>{const Hn=Z.indexOf(he);Hn>-1&&(Z.splice(Hn,1),Ct+=he+".")}),Ct+=et,0!=Z.length||0===et.length)return null;const hn={};return hn.domEventName=re,hn.fullKey=Ct,hn}static matchEventFullKeyCode(G,Z){let re=de[G.key]||G.key,et="";return Z.indexOf("code.")>-1&&(re=G.code,et="code."),!(null==re||!re)&&(re=re.toLowerCase()," "===re?re="space":"."===re&&(re="dot"),Vt.forEach(Ct=>{Ct!==re&&(0,ye[Ct])(G)&&(et+=Ct+".")}),et+=re,et===Z)}static eventCallback(G,Z,re){return et=>{X.matchEventFullKeyCode(et,G)&&re.runGuarded(()=>Z(et))}}static _normalizeKey(G){return"esc"===G?"escape":G}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(oe.qQ))};static#t=this.\u0275prov=g.jDH({token:X,factory:X.\u0275fac})}return X})();const Ot=(0,g.oH4)(g.fpN,"browser",[{provide:g.Agw,useValue:oe.AJ},{provide:g.PLl,useValue:function ve(){J.makeCurrent()},multi:!0},{provide:oe.qQ,useFactory:function xt(){return(0,g.TL$)(document),document},deps:[]}]),Un=new g.nKC(""),dn=[{provide:g.e01,useClass:class Ve{addToWindow(W){g.JZv.getAngularTestability=(Z,re=!0)=>{const et=W.findTestabilityInTree(Z,re);if(null==et)throw new g.wOt(5103,!1);return et},g.JZv.getAllAngularTestabilities=()=>W.getAllTestabilities(),g.JZv.getAllAngularRootElements=()=>W.getAllRootElements(),g.JZv.frameworkStabilizers||(g.JZv.frameworkStabilizers=[]),g.JZv.frameworkStabilizers.push(Z=>{const re=g.JZv.getAllAngularTestabilities();let et=re.length,Ct=!1;const Pt=function(hn){Ct=Ct||hn,et--,0==et&&Z(Ct)};re.forEach(hn=>{hn.whenStable(Pt)})})}findTestabilityInTree(W,G,Z){return null==G?null:W.getTestability(G)??(Z?(0,oe.QT)().isShadowRoot(G)?this.findTestabilityInTree(W,G.host,!0):this.findTestabilityInTree(W,G.parentElement,!0):null)}},deps:[]},{provide:g.WHO,useClass:g.NYb,deps:[g.SKi,g.giA,g.e01]},{provide:g.NYb,useClass:g.NYb,deps:[g.SKi,g.giA,g.e01]}],pt=[{provide:g.H8p,useValue:"root"},{provide:g.zcH,useFactory:function Tt(){return new g.zcH},deps:[]},{provide:ce,useClass:Ft,multi:!0,deps:[oe.qQ,g.SKi,g.Agw]},{provide:ce,useClass:ke,multi:!0,deps:[oe.qQ]},vt,_t,we,{provide:g._9s,useExisting:vt},{provide:oe.N0,useClass:ie,deps:[]},[]];let It=(()=>{class X{constructor(G){}static withServerTransition(G){return{ngModule:X,providers:[{provide:g.sZ2,useValue:G.appId}]}}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(Un,12))};static#t=this.\u0275mod=g.$C({type:X});static#n=this.\u0275inj=g.G2t({providers:[...pt,...dn],imports:[oe.MD,g.Hbi]})}return X})(),Rn=(()=>{class X{constructor(G){this._doc=G}getTitle(){return this._doc.title}setTitle(G){this._doc.title=G||""}static#e=this.\u0275fac=function(Z){return new(Z||X)(g.KVO(oe.qQ))};static#t=this.\u0275prov=g.jDH({token:X,factory:function(Z){let re=null;return re=Z?new Z:function qe(){return new Rn((0,g.KVO)(oe.qQ))}(),re},providedIn:"root"})}return X})();typeof window<"u"&&window},945:($t,ze,B)=>{B.d(ze,{Ix:()=>mr,Wk:()=>ju,iI:()=>rh,n3:()=>li});var g=B(7705),oe=B(1985),R=B(8071),F=B(8455),_e=B(7673),Se=B(4412),Ae=B(3073),Ve=B(3669),ie=B(6450),ce=B(9326),we=B(8496),at=B(4360),He=B(5225);function _t(...I){const T=(0,ce.lI)(I),E=(0,ce.ms)(I),{args:b,keys:O}=(0,Ae.D)(I);if(0===b.length)return(0,F.H)([],T);const Q=new oe.c(function lt(I,T,E=Ve.D){return b=>{yt(T,()=>{const{length:O}=I,Q=new Array(O);let ae=O,Ze=O;for(let Ge=0;Ge<O;Ge++)yt(T,()=>{const Bt=(0,F.H)(I[Ge],T);let Sn=!1;Bt.subscribe((0,at._)(b,kn=>{Q[Ge]=kn,Sn||(Sn=!0,Ze--),Ze||b.next(E(Q.slice()))},()=>{--ae||b.complete()}))},b)},b)}}(b,T,O?ae=>(0,we.e)(O,ae):Ve.D));return E?Q.pipe((0,ie.I)(E)):Q}function yt(I,T,E){I?(0,He.N)(E,I,T):T()}var gt=B(9350),qt=B(8793),Ce=B(8750);function Re(I){return new oe.c(T=>{(0,Ce.Tg)(I()).subscribe(T)})}var tt=B(1203);function Te(I,T){const E=(0,R.T)(I)?I:()=>I,b=O=>O.error(E());return new oe.c(T?O=>T.schedule(b,0,O):b)}var Fe=B(983),nt=B(8359),vt=B(9974);function Lt(){return(0,vt.N)((I,T)=>{let E=null;I._refCount++;const b=(0,at._)(T,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(E=null);const O=I._connection,Q=E;E=null,O&&(!Q||O===Q)&&O.unsubscribe(),T.unsubscribe()});I.subscribe(b),b.closed||(E=I.connect())})}class Je extends oe.c{constructor(T,E){super(),this.source=T,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,vt.S)(T)&&(this.lift=T.lift)}_subscribe(T){return this.getSubject().subscribe(T)}getSubject(){const T=this._subject;return(!T||T.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:T}=this;this._subject=this._connection=null,T?.unsubscribe()}connect(){let T=this._connection;if(!T){T=this._connection=new nt.yU;const E=this.getSubject();T.add(this.source.subscribe((0,at._)(E,void 0,()=>{this._teardown(),E.complete()},b=>{this._teardown(),E.error(b)},()=>this._teardown()))),T.closed&&(this._connection=null,T=nt.yU.EMPTY)}return T}refCount(){return Lt()(this)}}var Zt=B(1413),cn=B(177),an=B(6354),Wn=B(5558),Dn=B(6697),Ft=B(9172),Vt=B(5964),de=B(1397),ye=B(1594);function ke(I,T){return(0,R.T)(T)?(0,de.Z)(I,T,1):(0,de.Z)(I,1)}var Me=B(8141);function le(I){return(0,vt.N)((T,E)=>{let Q,b=null,O=!1;b=T.subscribe((0,at._)(E,void 0,void 0,ae=>{Q=(0,Ce.Tg)(I(ae,le(I)(T))),b?(b.unsubscribe(),b=null,Q.subscribe(E)):O=!0})),O&&(b.unsubscribe(),b=null,Q.subscribe(E))})}var xe=B(2816),se=B(9901);function ve(I){return I<=0?()=>Fe.w:(0,vt.N)((T,E)=>{let b=[];T.subscribe((0,at._)(E,O=>{b.push(O),I<b.length&&b.shift()},()=>{for(const O of b)E.next(O);E.complete()},void 0,()=>{b=null}))})}var Tt=B(3774),Ke=B(3703);function Ot(I){return(0,vt.N)((T,E)=>{try{T.subscribe(E)}finally{E.add(I)}})}var Un=B(5343),pt=B(6365),It=B(345);const Gt="primary",ut=Symbol("RouteTitle");class Le{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const E=this.params[T];return Array.isArray(E)?E[0]:E}return null}getAll(T){if(this.has(T)){const E=this.params[T];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function qe(I){return new Le(I)}function Rn(I,T,E){const b=E.path.split("/");if(b.length>I.length||"full"===E.pathMatch&&(T.hasChildren()||b.length<I.length))return null;const O={};for(let Q=0;Q<b.length;Q++){const ae=b[Q],Ze=I[Q];if(ae.startsWith(":"))O[ae.substring(1)]=Ze;else if(ae!==Ze.path)return null}return{consumed:I.slice(0,b.length),posParams:O}}function hr(I,T){const E=I?Object.keys(I):void 0,b=T?Object.keys(T):void 0;if(!E||!b||E.length!=b.length)return!1;let O;for(let Q=0;Q<E.length;Q++)if(O=E[Q],!on(I[O],T[O]))return!1;return!0}function on(I,T){if(Array.isArray(I)&&Array.isArray(T)){if(I.length!==T.length)return!1;const E=[...I].sort(),b=[...T].sort();return E.every((O,Q)=>b[Q]===O)}return I===T}function We(I){return I.length>0?I[I.length-1]:null}function Mt(I){return function J(I){return!!I&&(I instanceof oe.c||(0,R.T)(I.lift)&&(0,R.T)(I.subscribe))}(I)?I:(0,g.jNT)(I)?(0,F.H)(Promise.resolve(I)):(0,_e.of)(I)}const ot={exact:function xr(I,T,E){if(!mi(I.segments,T.segments)||!Pn(I.segments,T.segments,E)||I.numberOfChildren!==T.numberOfChildren)return!1;for(const b in T.children)if(!I.children[b]||!xr(I.children[b],T.children[b],E))return!1;return!0},subset:mt},rn={exact:function mn(I,T){return hr(I,T)},subset:function Qi(I,T){return Object.keys(T).length<=Object.keys(I).length&&Object.keys(T).every(E=>on(I[E],T[E]))},ignored:()=>!0};function kt(I,T,E){return ot[E.paths](I.root,T.root,E.matrixParams)&&rn[E.queryParams](I.queryParams,T.queryParams)&&!("exact"===E.fragment&&I.fragment!==T.fragment)}function mt(I,T,E){return Kr(I,T,T.segments,E)}function Kr(I,T,E,b){if(I.segments.length>E.length){const O=I.segments.slice(0,E.length);return!(!mi(O,E)||T.hasChildren()||!Pn(O,E,b))}if(I.segments.length===E.length){if(!mi(I.segments,E)||!Pn(I.segments,E,b))return!1;for(const O in T.children)if(!I.children[O]||!mt(I.children[O],T.children[O],b))return!1;return!0}{const O=E.slice(0,I.segments.length),Q=E.slice(I.segments.length);return!!(mi(I.segments,O)&&Pn(I.segments,O,b)&&I.children[Gt])&&Kr(I.children[Gt],T,Q,b)}}function Pn(I,T,E){return T.every((b,O)=>rn[E](I[O].parameters,b.parameters))}class $n{constructor(T=new Et([],{}),E={},b=null){this.root=T,this.queryParams=E,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return _i.serialize(this)}}class Et{constructor(T,E){this.segments=T,this.children=E,this.parent=null,Object.values(E).forEach(b=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dr(this)}}class ai{constructor(T,E){this.path=T,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=qe(this.parameters)),this._parameterMap}toString(){return re(this)}}function mi(I,T){return I.length===T.length&&I.every((E,b)=>E.path===T[b].path)}let bt=(()=>{class I{static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:function(){return new qr},providedIn:"root"})}return I})();class qr{parse(T){const E=new ni(T);return new $n(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(T){const E=`/${Qr(T.root,!0)}`,b=function Ct(I){const T=Object.keys(I).map(E=>{const b=I[E];return Array.isArray(b)?b.map(O=>`${yi(E)}=${yi(O)}`).join("&"):`${yi(E)}=${yi(b)}`}).filter(E=>!!E);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${E}${b}${"string"==typeof T.fragment?`#${function X(I){return encodeURI(I)}(T.fragment)}`:""}`}}const _i=new qr;function Dr(I){return I.segments.map(T=>re(T)).join("/")}function Qr(I,T){if(!I.hasChildren())return Dr(I);if(T){const E=I.children[Gt]?Qr(I.children[Gt],!1):"",b=[];return Object.entries(I.children).forEach(([O,Q])=>{O!==Gt&&b.push(`${O}:${Qr(Q,!1)}`)}),b.length>0?`${E}(${b.join("//")})`:E}{const E=function Kn(I,T){let E=[];return Object.entries(I.children).forEach(([b,O])=>{b===Gt&&(E=E.concat(T(O,b)))}),Object.entries(I.children).forEach(([b,O])=>{b!==Gt&&(E=E.concat(T(O,b)))}),E}(I,(b,O)=>O===Gt?[Qr(I.children[Gt],!1)]:[`${O}:${Qr(b,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Gt]?`${Dr(I)}/${E[0]}`:`${Dr(I)}/(${E.join("//")})`}}function Tr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yi(I){return Tr(I).replace(/%3B/gi,";")}function W(I){return Tr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function G(I){return decodeURIComponent(I)}function Z(I){return G(I.replace(/\+/g,"%20"))}function re(I){return`${W(I.path)}${function et(I){return Object.keys(I).map(T=>`;${W(T)}=${W(I[T])}`).join("")}(I.parameters)}`}const Pt=/^[^\/()?;#]+/;function hn(I){const T=I.match(Pt);return T?T[0]:""}const he=/^[^\/()?;=#]+/,tn=/^[^=?&#]+/,vi=/^[^&#]+/;class ni{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(T.length>0||Object.keys(E).length>0)&&(b[Gt]=new Et(T,E)),b}parseSegment(){const T=hn(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new g.wOt(4009,!1);return this.capture(T),new ai(G(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const E=function Hn(I){const T=I.match(he);return T?T[0]:""}(this.remaining);if(!E)return;this.capture(E);let b="";if(this.consumeOptional("=")){const O=hn(this.remaining);O&&(b=O,this.capture(b))}T[G(E)]=G(b)}parseQueryParam(T){const E=function ir(I){const T=I.match(tn);return T?T[0]:""}(this.remaining);if(!E)return;this.capture(E);let b="";if(this.consumeOptional("=")){const ae=function Ei(I){const T=I.match(vi);return T?T[0]:""}(this.remaining);ae&&(b=ae,this.capture(b))}const O=Z(E),Q=Z(b);if(T.hasOwnProperty(O)){let ae=T[O];Array.isArray(ae)||(ae=[ae],T[O]=ae),ae.push(Q)}else T[O]=Q}parseParens(T){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=hn(this.remaining),O=this.remaining[b.length];if("/"!==O&&")"!==O&&";"!==O)throw new g.wOt(4010,!1);let Q;b.indexOf(":")>-1?(Q=b.slice(0,b.indexOf(":")),this.capture(Q),this.capture(":")):T&&(Q=Gt);const ae=this.parseChildren();E[Q]=1===Object.keys(ae).length?ae[Gt]:new Et([],ae),this.consumeOptional("//")}return E}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new g.wOt(4011,!1)}}function Or(I){return I.segments.length>0?new Et([],{[Gt]:I}):I}function Pr(I){const T={};for(const b of Object.keys(I.children)){const Q=Pr(I.children[b]);if(b===Gt&&0===Q.segments.length&&Q.hasChildren())for(const[ae,Ze]of Object.entries(Q.children))T[ae]=Ze;else(Q.segments.length>0||Q.hasChildren())&&(T[b]=Q)}return function Ri(I){if(1===I.numberOfChildren&&I.children[Gt]){const T=I.children[Gt];return new Et(I.segments.concat(T.segments),T.children)}return I}(new Et(I.segments,T))}function yr(I){return I instanceof $n}function Qe(I){let T;const O=Or(function E(Q){const ae={};for(const Ge of Q.children){const Bt=E(Ge);ae[Ge.outlet]=Bt}const Ze=new Et(Q.url,ae);return Q===I&&(T=Ze),Ze}(I.root));return T??O}function be(I,T,E,b){let O=I;for(;O.parent;)O=O.parent;if(0===T.length)return Yt(O,O,O,E,b);const Q=function rr(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Tn(!0,0,I);let T=0,E=!1;const b=I.reduce((O,Q,ae)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const Ze={};return Object.entries(Q.outlets).forEach(([Ge,Bt])=>{Ze[Ge]="string"==typeof Bt?Bt.split("/"):Bt}),[...O,{outlets:Ze}]}if(Q.segmentPath)return[...O,Q.segmentPath]}return"string"!=typeof Q?[...O,Q]:0===ae?(Q.split("/").forEach((Ze,Ge)=>{0==Ge&&"."===Ze||(0==Ge&&""===Ze?E=!0:".."===Ze?T++:""!=Ze&&O.push(Ze))}),O):[...O,Q]},[]);return new Tn(E,T,b)}(T);if(Q.toRoot())return Yt(O,O,new Et([],{}),E,b);const ae=function ri(I,T,E){if(I.isAbsolute)return new bn(T,!0,0);if(!E)return new bn(T,!1,NaN);if(null===E.parent)return new bn(E,!0,0);const b=it(I.commands[0])?0:1;return function Yi(I,T,E){let b=I,O=T,Q=E;for(;Q>O;){if(Q-=O,b=b.parent,!b)throw new g.wOt(4005,!1);O=b.segments.length}return new bn(b,!1,O-Q)}(E,E.segments.length-1+b,I.numberOfDoubleDots)}(Q,O,I),Ze=ae.processChildren?Xi(ae.segmentGroup,ae.index,Q.commands):io(ae.segmentGroup,ae.index,Q.commands);return Yt(O,ae.segmentGroup,Ze,E,b)}function it(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Nt(I){return"object"==typeof I&&null!=I&&I.outlets}function Yt(I,T,E,b,O){let ae,Q={};b&&Object.entries(b).forEach(([Ge,Bt])=>{Q[Ge]=Array.isArray(Bt)?Bt.map(Sn=>`${Sn}`):`${Bt}`}),ae=I===T?E:Wt(I,T,E);const Ze=Or(Pr(ae));return new $n(Ze,Q,O)}function Wt(I,T,E){const b={};return Object.entries(I.children).forEach(([O,Q])=>{b[O]=Q===T?E:Wt(Q,T,E)}),new Et(I.segments,b)}class Tn{constructor(T,E,b){if(this.isAbsolute=T,this.numberOfDoubleDots=E,this.commands=b,T&&b.length>0&&it(b[0]))throw new g.wOt(4003,!1);const O=b.find(Nt);if(O&&O!==We(b))throw new g.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bn{constructor(T,E,b){this.segmentGroup=T,this.processChildren=E,this.index=b}}function io(I,T,E){if(I||(I=new Et([],{})),0===I.segments.length&&I.hasChildren())return Xi(I,T,E);const b=function Ao(I,T,E){let b=0,O=T;const Q={match:!1,pathIndex:0,commandIndex:0};for(;O<I.segments.length;){if(b>=E.length)return Q;const ae=I.segments[O],Ze=E[b];if(Nt(Ze))break;const Ge=`${Ze}`,Bt=b<E.length-1?E[b+1]:null;if(O>0&&void 0===Ge)break;if(Ge&&Bt&&"object"==typeof Bt&&void 0===Bt.outlets){if(!$r(Ge,Bt,ae))return Q;b+=2}else{if(!$r(Ge,{},ae))return Q;b++}O++}return{match:!0,pathIndex:O,commandIndex:b}}(I,T,E),O=E.slice(b.commandIndex);if(b.match&&b.pathIndex<I.segments.length){const Q=new Et(I.segments.slice(0,b.pathIndex),{});return Q.children[Gt]=new Et(I.segments.slice(b.pathIndex),I.children),Xi(Q,0,O)}return b.match&&0===O.length?new Et(I.segments,{}):b.match&&!I.hasChildren()?zs(I,T,E):b.match?Xi(I,0,O):zs(I,T,E)}function Xi(I,T,E){if(0===E.length)return new Et(I.segments,{});{const b=function Gn(I){return Nt(I[0])?I[0].outlets:{[Gt]:I}}(E),O={};if(Object.keys(b).some(Q=>Q!==Gt)&&I.children[Gt]&&1===I.numberOfChildren&&0===I.children[Gt].segments.length){const Q=Xi(I.children[Gt],T,E);return new Et(I.segments,Q.children)}return Object.entries(b).forEach(([Q,ae])=>{"string"==typeof ae&&(ae=[ae]),null!==ae&&(O[Q]=io(I.children[Q],T,ae))}),Object.entries(I.children).forEach(([Q,ae])=>{void 0===b[Q]&&(O[Q]=ae)}),new Et(I.segments,O)}}function zs(I,T,E){const b=I.segments.slice(0,T);let O=0;for(;O<E.length;){const Q=E[O];if(Nt(Q)){const Ge=Ka(Q.outlets);return new Et(b,Ge)}if(0===O&&it(E[0])){b.push(new ai(I.segments[T].path,Do(E[0]))),O++;continue}const ae=Nt(Q)?Q.outlets[Gt]:`${Q}`,Ze=O<E.length-1?E[O+1]:null;ae&&Ze&&it(Ze)?(b.push(new ai(ae,Do(Ze))),O+=2):(b.push(new ai(ae,{})),O++)}return new Et(b,{})}function Ka(I){const T={};return Object.entries(I).forEach(([E,b])=>{"string"==typeof b&&(b=[b]),null!==b&&(T[E]=zs(new Et([],{}),0,b))}),T}function Do(I){const T={};return Object.entries(I).forEach(([E,b])=>T[E]=`${b}`),T}function $r(I,T,E){return I==E.path&&hr(T,E.parameters)}const Es="imperative";class Pi{constructor(T,E){this.id=T,this.url=E}}class To extends Pi{constructor(T,E,b="imperative",O=null){super(T,E),this.type=0,this.navigationTrigger=b,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mi extends Pi{constructor(T,E,b){super(T,E),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Co extends Pi{constructor(T,E,b,O){super(T,E),this.reason=b,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ks extends Pi{constructor(T,E,b,O){super(T,E),this.reason=b,this.code=O,this.type=16}}class is extends Pi{constructor(T,E,b,O){super(T,E),this.error=b,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ea extends Pi{constructor(T,E,b,O){super(T,E),this.urlAfterRedirects=b,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi extends Pi{constructor(T,E,b,O){super(T,E),this.urlAfterRedirects=b,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends Pi{constructor(T,E,b,O,Q){super(T,E),this.urlAfterRedirects=b,this.state=O,this.shouldActivate=Q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wa extends Pi{constructor(T,E,b,O){super(T,E),this.urlAfterRedirects=b,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Aa extends Pi{constructor(T,E,b,O){super(T,E),this.urlAfterRedirects=b,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class so{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Da{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bo{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oo{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sr{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Is{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ii{constructor(T,E,b){this.routerEvent=T,this.position=E,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Mn{}class kr{constructor(T){this.url=T}}class ss{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bn,this.attachRef=null}}let Bn=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(E,b){const O=this.getOrCreateContext(E);O.outlet=b,this.contexts.set(E,O)}onChildOutletDestroyed(E){const b=this.getContext(E);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let b=this.getContext(E);return b||(b=new ss,this.contexts.set(E,b)),b}getContext(E){return this.contexts.get(E)||null}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();class er{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const E=this.pathFromRoot(T);return E.length>1?E[E.length-2]:null}children(T){const E=os(T,this._root);return E?E.children.map(b=>b.value):[]}firstChild(T){const E=os(T,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(T){const E=wi(T,this._root);return E.length<2?[]:E[E.length-2].children.map(O=>O.value).filter(O=>O!==T)}pathFromRoot(T){return wi(T,this._root).map(E=>E.value)}}function os(I,T){if(I===T.value)return T;for(const E of T.children){const b=os(I,E);if(b)return b}return null}function wi(I,T){if(I===T.value)return[T];for(const E of T.children){const b=wi(I,E);if(b.length)return b.unshift(T),b}return[]}class vr{constructor(T,E){this.value=T,this.children=E}toString(){return`TreeNode(${this.value})`}}function Ni(I){const T={};return I&&I.children.forEach(E=>T[E.value.outlet]=E),T}class fr extends er{constructor(T,E){super(T),this.snapshot=E,qn(this,T)}toString(){return this.snapshot.toString()}}function Dt(I,T){const E=function fn(I,T){const ae=new Er([],{},{},"",{},Gt,T,null,{});return new Ji("",new vr(ae,[]))}(0,T),b=new Se.t([new ai("",{})]),O=new Se.t({}),Q=new Se.t({}),ae=new Se.t({}),Ze=new Se.t(""),Ge=new Cn(b,O,ae,Ze,Q,Gt,T,E.root);return Ge.snapshot=E.root,new fr(new vr(Ge,[]),E)}class Cn{constructor(T,E,b,O,Q,ae,Ze,Ge){this.urlSubject=T,this.paramsSubject=E,this.queryParamsSubject=b,this.fragmentSubject=O,this.dataSubject=Q,this.outlet=ae,this.component=Ze,this._futureSnapshot=Ge,this.title=this.dataSubject?.pipe((0,an.T)(Bt=>Bt[ut]))??(0,_e.of)(void 0),this.url=T,this.params=E,this.queryParams=b,this.fragment=O,this.data=Q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,an.T)(T=>qe(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,an.T)(T=>qe(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nn(I,T="emptyOnly"){const E=I.pathFromRoot;let b=0;if("always"!==T)for(b=E.length-1;b>=1;){const O=E[b],Q=E[b-1];if(O.routeConfig&&""===O.routeConfig.path)b--;else{if(Q.component)break;b--}}return function ui(I){return I.reduce((T,E)=>({params:{...T.params,...E.params},data:{...T.data,...E.data},resolve:{...E.data,...T.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(b))}class Er{get title(){return this.data?.[ut]}constructor(T,E,b,O,Q,ae,Ze,Ge,Bt){this.url=T,this.params=E,this.queryParams=b,this.fragment=O,this.data=Q,this.outlet=ae,this.component=Ze,this.routeConfig=Ge,this._resolve=Bt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ji extends er{constructor(T,E){super(E),this.url=T,qn(this,E)}toString(){return as(this._root)}}function qn(I,T){T.value._routerState=I,T.children.forEach(E=>qn(I,E))}function as(I){const T=I.children.length>0?` { ${I.children.map(as).join(", ")} } `:"";return`${I.value}${T}`}function Hr(I){if(I.snapshot){const T=I.snapshot,E=I._futureSnapshot;I.snapshot=E,hr(T.queryParams,E.queryParams)||I.queryParamsSubject.next(E.queryParams),T.fragment!==E.fragment&&I.fragmentSubject.next(E.fragment),hr(T.params,E.params)||I.paramsSubject.next(E.params),function Nr(I,T){if(I.length!==T.length)return!1;for(let E=0;E<I.length;++E)if(!hr(I[E],T[E]))return!1;return!0}(T.url,E.url)||I.urlSubject.next(E.url),hr(T.data,E.data)||I.dataSubject.next(E.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function sn(I,T){const E=hr(I.params,T.params)&&function nn(I,T){return mi(I,T)&&I.every((E,b)=>hr(E.parameters,T[b].parameters))}(I.url,T.url);return E&&!(!I.parent!=!T.parent)&&(!I.parent||sn(I.parent,T.parent))}let li=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new g.bkB,this.deactivateEvents=new g.bkB,this.attachEvents=new g.bkB,this.detachEvents=new g.bkB,this.parentContexts=(0,g.WQX)(Bn),this.location=(0,g.WQX)(g.c1b),this.changeDetector=(0,g.WQX)(g.gRc),this.environmentInjector=(0,g.WQX)(g.uvJ),this.inputBinder=(0,g.WQX)(pr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(E){if(E.name){const{firstChange:b,previousValue:O}=E.name;if(b)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(E){return this.parentContexts.getContext(E)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const E=this.parentContexts.getContext(this.name);E?.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.wOt(4012,!1);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,b){this.activated=E,this._activatedRoute=b,this.location.insert(E.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,b){if(this.isActivated)throw new g.wOt(4013,!1);this._activatedRoute=E;const O=this.location,ae=E.snapshot.component,Ze=this.parentContexts.getOrCreateContext(this.name).children,Ge=new ci(E,Ze,O.injector);this.activated=O.createComponent(ae,{index:O.length,injector:Ge,environmentInjector:b??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275dir=g.FsC({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.OA$]})}return I})();class ci{constructor(T,E,b){this.route=T,this.childContexts=E,this.parent=b}get(T,E){return T===Cn?this.route:T===Bn?this.childContexts:this.parent.get(T,E)}}const pr=new g.nKC("");let sr=(()=>{class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(E){this.unsubscribeFromRouteData(E),this.subscribeToRouteData(E)}unsubscribeFromRouteData(E){this.outletDataSubscriptions.get(E)?.unsubscribe(),this.outletDataSubscriptions.delete(E)}subscribeToRouteData(E){const{activatedRoute:b}=E,O=_t([b.queryParams,b.params,b.data]).pipe((0,Wn.n)(([Q,ae,Ze],Ge)=>(Ze={...Q,...ae,...Ze},0===Ge?(0,_e.of)(Ze):Promise.resolve(Ze)))).subscribe(Q=>{if(!E.isActivated||!E.activatedComponentRef||E.activatedRoute!==b||null===b.component)return void this.unsubscribeFromRouteData(E);const ae=(0,g.HJs)(b.component);if(ae)for(const{templateName:Ze}of ae.inputs)E.activatedComponentRef.setInput(Ze,Q[Ze]);else this.unsubscribeFromRouteData(E)});this.outletDataSubscriptions.set(E,O)}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac})}return I})();function Fr(I,T,E){if(E&&I.shouldReuseRoute(T.value,E.value.snapshot)){const b=E.value;b._futureSnapshot=T.value;const O=function Ai(I,T,E){return T.children.map(b=>{for(const O of E.children)if(I.shouldReuseRoute(b.value,O.value.snapshot))return Fr(I,b,O);return Fr(I,b)})}(I,T,E);return new vr(b,O)}{if(I.shouldAttach(T.value)){const Q=I.retrieve(T.value);if(null!==Q){const ae=Q.route;return ae.value._futureSnapshot=T.value,ae.children=T.children.map(Ze=>Fr(I,Ze)),ae}}const b=function Di(I){return new Cn(new Se.t(I.url),new Se.t(I.params),new Se.t(I.queryParams),new Se.t(I.fragment),new Se.t(I.data),I.outlet,I.component,I)}(T.value),O=T.children.map(Q=>Fr(I,Q));return new vr(b,O)}}const Ws="ngNavigationCancelingError";function ii(I,T){const{redirectTo:E,navigationBehaviorOptions:b}=yr(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,O=Rr(!1,0,T);return O.url=E,O.navigationBehaviorOptions=b,O}function Rr(I,T,E){const b=new Error("NavigationCancelingError: "+(I||""));return b[Ws]=!0,b.cancellationCode=T,E&&(b.url=E),b}function Zi(I){return I&&I[Ws]}let xn=(()=>{class I{static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275cmp=g.VBU({type:I,selectors:[["ng-component"]],standalone:!0,features:[g.aNF],decls:1,vars:0,template:function(b,O){1&b&&g.nrm(0,"router-outlet")},dependencies:[li],encapsulation:2})}return I})();function Cr(I){const T=I.children&&I.children.map(Cr),E=T?{...I,children:T}:{...I};return!E.component&&!E.loadComponent&&(T||E.loadChildren)&&E.outlet&&E.outlet!==Gt&&(E.component=xn),E}function vn(I){return I.outlet||Gt}function jn(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let T=I.parent;T;T=T.parent){const E=T.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class Zo{constructor(T,E,b,O,Q){this.routeReuseStrategy=T,this.futureState=E,this.currState=b,this.forwardEvent=O,this.inputBindingEnabled=Q}activate(T){const E=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,b,T),Hr(this.futureState.root),this.activateChildRoutes(E,b,T)}deactivateChildRoutes(T,E,b){const O=Ni(E);T.children.forEach(Q=>{const ae=Q.value.outlet;this.deactivateRoutes(Q,O[ae],b),delete O[ae]}),Object.values(O).forEach(Q=>{this.deactivateRouteAndItsChildren(Q,b)})}deactivateRoutes(T,E,b){const O=T.value,Q=E?E.value:null;if(O===Q)if(O.component){const ae=b.getContext(O.outlet);ae&&this.deactivateChildRoutes(T,E,ae.children)}else this.deactivateChildRoutes(T,E,b);else Q&&this.deactivateRouteAndItsChildren(E,b)}deactivateRouteAndItsChildren(T,E){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,E):this.deactivateRouteAndOutlet(T,E)}detachAndStoreRouteSubtree(T,E){const b=E.getContext(T.value.outlet),O=b&&T.value.component?b.children:E,Q=Ni(T);for(const ae of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[ae],O);if(b&&b.outlet){const ae=b.outlet.detach(),Ze=b.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:ae,route:T,contexts:Ze})}}deactivateRouteAndOutlet(T,E){const b=E.getContext(T.value.outlet),O=b&&T.value.component?b.children:E,Q=Ni(T);for(const ae of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[ae],O);b&&(b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated()),b.attachRef=null,b.route=null)}activateChildRoutes(T,E,b){const O=Ni(E);T.children.forEach(Q=>{this.activateRoutes(Q,O[Q.value.outlet],b),this.forwardEvent(new Is(Q.value.snapshot))}),T.children.length&&this.forwardEvent(new oo(T.value.snapshot))}activateRoutes(T,E,b){const O=T.value,Q=E?E.value:null;if(Hr(O),O===Q)if(O.component){const ae=b.getOrCreateContext(O.outlet);this.activateChildRoutes(T,E,ae.children)}else this.activateChildRoutes(T,E,b);else if(O.component){const ae=b.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const Ze=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),ae.children.onOutletReAttached(Ze.contexts),ae.attachRef=Ze.componentRef,ae.route=Ze.route.value,ae.outlet&&ae.outlet.attach(Ze.componentRef,Ze.route.value),Hr(Ze.route.value),this.activateChildRoutes(T,null,ae.children)}else{const Ze=jn(O.snapshot);ae.attachRef=null,ae.route=O,ae.injector=Ze,ae.outlet&&ae.outlet.activateWith(O,ae.injector),this.activateChildRoutes(T,null,ae.children)}}else this.activateChildRoutes(T,null,b)}}class es{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class Ro{constructor(T,E){this.component=T,this.route=E}}function Fu(I,T,E){const b=I._root;return us(b,T?T._root:null,E,[b.value])}function _n(I,T){const E=Symbol(),b=T.get(I,E);return b===E?"function"!=typeof I||(0,g.LfX)(I)?T.get(I):I:b}function us(I,T,E,b,O={canDeactivateChecks:[],canActivateChecks:[]}){const Q=Ni(T);return I.children.forEach(ae=>{(function Vu(I,T,E,b,O={canDeactivateChecks:[],canActivateChecks:[]}){const Q=I.value,ae=T?T.value:null,Ze=E?E.getContext(I.value.outlet):null;if(ae&&Q.routeConfig===ae.routeConfig){const Ge=function Ta(I,T,E){if("function"==typeof E)return E(I,T);switch(E){case"pathParamsChange":return!mi(I.url,T.url);case"pathParamsOrQueryParamsChange":return!mi(I.url,T.url)||!hr(I.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sn(I,T)||!hr(I.queryParams,T.queryParams);default:return!sn(I,T)}}(ae,Q,Q.routeConfig.runGuardsAndResolvers);Ge?O.canActivateChecks.push(new es(b)):(Q.data=ae.data,Q._resolvedData=ae._resolvedData),us(I,T,Q.component?Ze?Ze.children:null:E,b,O),Ge&&Ze&&Ze.outlet&&Ze.outlet.isActivated&&O.canDeactivateChecks.push(new Ro(Ze.outlet.component,ae))}else ae&&or(T,Ze,O),O.canActivateChecks.push(new es(b)),us(I,null,Q.component?Ze?Ze.children:null:E,b,O)})(ae,Q[ae.value.outlet],E,b.concat([ae.value]),O),delete Q[ae.value.outlet]}),Object.entries(Q).forEach(([ae,Ze])=>or(Ze,E.getContext(ae),O)),O}function or(I,T,E){const b=Ni(I),O=I.value;Object.entries(b).forEach(([Q,ae])=>{or(ae,O.component?T?T.children.getContext(Q):null:T,E)}),E.canDeactivateChecks.push(new Ro(O.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,O))}function Qs(I){return"function"==typeof I}function Yr(I){return I instanceof gt.G||"EmptyError"===I?.name}const ls=Symbol("INITIAL_VALUE");function Ti(){return(0,Wn.n)(I=>_t(I.map(T=>T.pipe((0,Dn.s)(1),(0,Ft.Z)(ls)))).pipe((0,an.T)(T=>{for(const E of T)if(!0!==E){if(E===ls)return ls;if(!1===E||E instanceof $n)return E}return!0}),(0,Vt.p)(T=>T!==ls),(0,Dn.s)(1)))}function ea(I){return(0,tt.F)((0,Me.M)(T=>{if(yr(T))throw ii(0,T)}),(0,an.T)(T=>!0===T))}class Us{constructor(T){this.segmentGroup=T||null}}class uo{constructor(T){this.urlTree=T}}function xi(I){return Te(new Us(I))}function Gr(I){return Te(new uo(I))}class na{constructor(T,E){this.urlSerializer=T,this.urlTree=E}noMatchError(T){return new g.wOt(4002,!1)}lineralizeSegments(T,E){let b=[],O=E.root;for(;;){if(b=b.concat(O.segments),0===O.numberOfChildren)return(0,_e.of)(b);if(O.numberOfChildren>1||!O.children[Gt])return Te(new g.wOt(4e3,!1));O=O.children[Gt]}}applyRedirectCommands(T,E,b){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),T,b)}applyRedirectCreateUrlTree(T,E,b,O){const Q=this.createSegmentGroup(T,E.root,b,O);return new $n(Q,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(T,E){const b={};return Object.entries(T).forEach(([O,Q])=>{if("string"==typeof Q&&Q.startsWith(":")){const Ze=Q.substring(1);b[O]=E[Ze]}else b[O]=Q}),b}createSegmentGroup(T,E,b,O){const Q=this.createSegments(T,E.segments,b,O);let ae={};return Object.entries(E.children).forEach(([Ze,Ge])=>{ae[Ze]=this.createSegmentGroup(T,Ge,b,O)}),new Et(Q,ae)}createSegments(T,E,b,O){return E.map(Q=>Q.path.startsWith(":")?this.findPosParam(T,Q,O):this.findOrReturn(Q,b))}findPosParam(T,E,b){const O=b[E.path.substring(1)];if(!O)throw new g.wOt(4001,!1);return O}findOrReturn(T,E){let b=0;for(const O of E){if(O.path===T.path)return E.splice(b),O;b++}return T}}const Mo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bs(I,T,E,b,O){const Q=Xs(I,T,E);return Q.matched?(b=function So(I,T){return I.providers&&!I._injector&&(I._injector=(0,g.Ol2)(I.providers,T,`Route: ${I.path}`)),I._injector??T}(T,b),function cs(I,T,E,b){const O=T.canMatch;if(!O||0===O.length)return(0,_e.of)(!0);const Q=O.map(ae=>{const Ze=_n(ae,I);return Mt(function me(I){return I&&Qs(I.canMatch)}(Ze)?Ze.canMatch(T,E):I.runInContext(()=>Ze(T,E)))});return(0,_e.of)(Q).pipe(Ti(),ea())}(b,T,E).pipe((0,an.T)(ae=>!0===ae?Q:{...Mo}))):(0,_e.of)(Q)}function Xs(I,T,E){if(""===T.path)return"full"===T.pathMatch&&(I.hasChildren()||E.length>0)?{...Mo}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const O=(T.matcher||Rn)(E,I,T);if(!O)return{...Mo};const Q={};Object.entries(O.posParams??{}).forEach(([Ze,Ge])=>{Q[Ze]=Ge.path});const ae=O.consumed.length>0?{...Q,...O.consumed[O.consumed.length-1].parameters}:Q;return{matched:!0,consumedSegments:O.consumed,remainingSegments:E.slice(O.consumed.length),parameters:ae,positionalParamSegments:O.posParams??{}}}function Gi(I,T,E,b){return E.length>0&&function xc(I,T,E){return E.some(b=>ds(I,T,b)&&vn(b)!==Gt)}(I,E,b)?{segmentGroup:new Et(T,Ya(b,new Et(E,I.children))),slicedSegments:[]}:0===E.length&&function xl(I,T,E){return E.some(b=>ds(I,T,b))}(I,E,b)?{segmentGroup:new Et(I.segments,lo(I,0,E,b,I.children)),slicedSegments:E}:{segmentGroup:new Et(I.segments,I.children),slicedSegments:E}}function lo(I,T,E,b,O){const Q={};for(const ae of b)if(ds(I,E,ae)&&!O[vn(ae)]){const Ze=new Et([],{});Q[vn(ae)]=Ze}return{...O,...Q}}function Ya(I,T){const E={};E[Gt]=T;for(const b of I)if(""===b.path&&vn(b)!==Gt){const O=new Et([],{});E[vn(b)]=O}return E}function ds(I,T,E){return(!(I.hasChildren()||T.length>0)||"full"!==E.pathMatch)&&""===E.path}class Js{constructor(T,E,b,O,Q,ae,Ze){this.injector=T,this.configLoader=E,this.rootComponentType=b,this.config=O,this.urlTree=Q,this.paramsInheritanceStrategy=ae,this.urlSerializer=Ze,this.allowRedirects=!0,this.applyRedirects=new na(this.urlSerializer,this.urlTree)}noMatchError(T){return new g.wOt(4002,!1)}recognize(){const T=Gi(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,Gt).pipe(le(E=>{if(E instanceof uo)return this.allowRedirects=!1,this.urlTree=E.urlTree,this.match(E.urlTree);throw E instanceof Us?this.noMatchError(E):E}),(0,an.T)(E=>{const b=new Er([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,{}),O=new vr(b,E),Q=new Ji("",O),ae=function yn(I,T,E=null,b=null){return be(Qe(I),T,E,b)}(b,[],this.urlTree.queryParams,this.urlTree.fragment);return ae.queryParams=this.urlTree.queryParams,Q.url=this.urlSerializer.serialize(ae),this.inheritParamsAndData(Q._root),{state:Q,tree:ae}}))}match(T){return this.processSegmentGroup(this.injector,this.config,T.root,Gt).pipe(le(b=>{throw b instanceof Us?this.noMatchError(b):b}))}inheritParamsAndData(T){const E=T.value,b=Nn(E,this.paramsInheritanceStrategy);E.params=Object.freeze(b.params),E.data=Object.freeze(b.data),T.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(T,E,b,O){return 0===b.segments.length&&b.hasChildren()?this.processChildren(T,E,b):this.processSegment(T,E,b,b.segments,O,!0)}processChildren(T,E,b){const O=[];for(const Q of Object.keys(b.children))"primary"===Q?O.unshift(Q):O.push(Q);return(0,F.H)(O).pipe(ke(Q=>{const ae=b.children[Q],Ze=function ao(I,T){const E=I.filter(b=>vn(b)===T);return E.push(...I.filter(b=>vn(b)!==T)),E}(E,Q);return this.processSegmentGroup(T,Ze,ae,Q)}),(0,xe.S)((Q,ae)=>(Q.push(...ae),Q)),(0,se.U)(null),function xt(I,T){const E=arguments.length>=2;return b=>b.pipe(I?(0,Vt.p)((O,Q)=>I(O,Q,b)):Ve.D,ve(1),E?(0,se.U)(T):(0,Tt.v)(()=>new gt.G))}(),(0,de.Z)(Q=>{if(null===Q)return xi(b);const ae=Xa(Q);return function Ol(I){I.sort((T,E)=>T.value.outlet===Gt?-1:E.value.outlet===Gt?1:T.value.outlet.localeCompare(E.value.outlet))}(ae),(0,_e.of)(ae)}))}processSegment(T,E,b,O,Q,ae){return(0,F.H)(E).pipe(ke(Ze=>this.processSegmentAgainstRoute(Ze._injector??T,E,Ze,b,O,Q,ae).pipe(le(Ge=>{if(Ge instanceof Us)return(0,_e.of)(null);throw Ge}))),(0,ye.$)(Ze=>!!Ze),le(Ze=>{if(Yr(Ze))return function ts(I,T,E){return 0===T.length&&!I.children[E]}(b,O,Q)?(0,_e.of)([]):xi(b);throw Ze}))}processSegmentAgainstRoute(T,E,b,O,Q,ae,Ze){return function Uu(I,T,E,b){return!!(vn(I)===b||b!==Gt&&ds(T,E,I))&&("**"===I.path||Xs(T,I,E).matched)}(b,O,Q,ae)?void 0===b.redirectTo?this.matchSegmentAgainstRoute(T,O,b,Q,ae,Ze):Ze&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,O,E,b,Q,ae):xi(O):xi(O)}expandSegmentAgainstRouteUsingRedirect(T,E,b,O,Q,ae){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,b,O,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(T,E,b,O,Q,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,E,b,O){const Q=this.applyRedirects.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Gr(Q):this.applyRedirects.lineralizeSegments(b,Q).pipe((0,de.Z)(ae=>{const Ze=new Et(ae,{});return this.processSegment(T,E,Ze,ae,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,E,b,O,Q,ae){const{matched:Ze,consumedSegments:Ge,remainingSegments:Bt,positionalParamSegments:Sn}=Xs(E,O,Q);if(!Ze)return xi(E);const kn=this.applyRedirects.applyRedirectCommands(Ge,O.redirectTo,Sn);return O.redirectTo.startsWith("/")?Gr(kn):this.applyRedirects.lineralizeSegments(O,kn).pipe((0,de.Z)(Fn=>this.processSegment(T,b,E,Fn.concat(Bt),ae,!1)))}matchSegmentAgainstRoute(T,E,b,O,Q,ae){let Ze;if("**"===b.path){const Ge=O.length>0?We(O).parameters:{},Bt=new Er(O,Ge,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ja(b),vn(b),b.component??b._loadedComponent??null,b,D(b));Ze=(0,_e.of)({snapshot:Bt,consumedSegments:[],remainingSegments:[]}),E.children={}}else Ze=Bs(E,b,O,T).pipe((0,an.T)(({matched:Ge,consumedSegments:Bt,remainingSegments:Sn,parameters:kn})=>Ge?{snapshot:new Er(Bt,kn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ja(b),vn(b),b.component??b._loadedComponent??null,b,D(b)),consumedSegments:Bt,remainingSegments:Sn}:null));return Ze.pipe((0,Wn.n)(Ge=>null===Ge?xi(E):this.getChildConfig(T=b._injector??T,b,O).pipe((0,Wn.n)(({routes:Bt})=>{const Sn=b._loadedInjector??T,{snapshot:kn,consumedSegments:Fn,remainingSegments:ur}=Ge,{segmentGroup:ru,slicedSegments:iu}=Gi(E,Fn,ur,Bt);if(0===iu.length&&ru.hasChildren())return this.processChildren(Sn,Bt,ru).pipe((0,an.T)(rs=>null===rs?null:[new vr(kn,rs)]));if(0===Bt.length&&0===iu.length)return(0,_e.of)([new vr(kn,[])]);const Hl=vn(b)===Q;return this.processSegment(Sn,Bt,ru,iu,Hl?Gt:Q,!0).pipe((0,an.T)(rs=>[new vr(kn,rs)]))}))))}getChildConfig(T,E,b){return E.children?(0,_e.of)({routes:E.children,injector:T}):E.loadChildren?void 0!==E._loadedRoutes?(0,_e.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function Ls(I,T,E,b){const O=T.canLoad;if(void 0===O||0===O.length)return(0,_e.of)(!0);const Q=O.map(ae=>{const Ze=_n(ae,I);return Mt(function L(I){return I&&Qs(I.canLoad)}(Ze)?Ze.canLoad(T,E):I.runInContext(()=>Ze(T,E)))});return(0,_e.of)(Q).pipe(Ti(),ea())}(T,E,b).pipe((0,de.Z)(O=>O?this.configLoader.loadChildren(T,E).pipe((0,Me.M)(Q=>{E._loadedRoutes=Q.routes,E._loadedInjector=Q.injector})):function Lu(I){return Te(Rr(!1,3))}())):(0,_e.of)({routes:[],injector:T})}}function hs(I){const T=I.value.routeConfig;return T&&""===T.path}function Xa(I){const T=[],E=new Set;for(const b of I){if(!hs(b)){T.push(b);continue}const O=T.find(Q=>b.value.routeConfig===Q.value.routeConfig);void 0!==O?(O.children.push(...b.children),E.add(O)):T.push(b)}for(const b of E){const O=Xa(b.children);T.push(new vr(b.value,O))}return T.filter(b=>!E.has(b))}function Ja(I){return I.data||{}}function D(I){return I.resolve||{}}function Kt(I){return"string"==typeof I.title||null===I.title}function lr(I){return(0,Wn.n)(T=>{const E=I(T);return E?(0,F.H)(E).pipe((0,an.T)(()=>T)):(0,_e.of)(T)})}const Xn=new g.nKC("ROUTES");let Jn=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,g.WQX)(g.Ql9)}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,_e.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const b=Mt(E.loadComponent()).pipe((0,an.T)(ar),(0,Me.M)(Q=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=Q}),Ot(()=>{this.componentLoaders.delete(E)})),O=new Je(b,()=>new Zt.B).pipe(Lt());return this.componentLoaders.set(E,O),O}loadChildren(E,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,_e.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const Q=function En(I,T,E,b){return Mt(I.loadChildren()).pipe((0,an.T)(ar),(0,de.Z)(O=>O instanceof g.Co$||Array.isArray(O)?(0,_e.of)(O):(0,F.H)(T.compileModuleAsync(O))),(0,an.T)(O=>{b&&b(I);let Q,ae,Ze=!1;return Array.isArray(O)?(ae=O,!0):(Q=O.create(E).injector,ae=Q.get(Xn,[],{optional:!0,self:!0}).flat()),{routes:ae.map(Cr),injector:Q}}))}(b,this.compiler,E,this.onLoadEndListener).pipe(Ot(()=>{this.childrenLoaders.delete(b)})),ae=new Je(Q,()=>new Zt.B).pipe(Lt());return this.childrenLoaders.set(b,ae),ae}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function ar(I){return function cr(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let gr=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt.B,this.transitionAbortSubject=new Zt.B,this.configLoader=(0,g.WQX)(Jn),this.environmentInjector=(0,g.WQX)(g.uvJ),this.urlSerializer=(0,g.WQX)(bt),this.rootContexts=(0,g.WQX)(Bn),this.inputBindingEnabled=null!==(0,g.WQX)(pr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_e.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new Da(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new so(O))}complete(){this.transitions?.complete()}handleNavigationRequest(E){const b=++this.navigationId;this.transitions?.next({...this.transitions.value,...E,id:b})}setupNavigations(E,b,O){return this.transitions=new Se.t({id:0,currentUrlTree:b,currentRawUrl:b,currentBrowserUrl:b,extractedUrl:E.urlHandlingStrategy.extract(b),urlAfterRedirects:E.urlHandlingStrategy.extract(b),rawUrl:b,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Es,restoredState:null,currentSnapshot:O.snapshot,targetSnapshot:null,currentRouterState:O,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Vt.p)(Q=>0!==Q.id),(0,an.T)(Q=>({...Q,extractedUrl:E.urlHandlingStrategy.extract(Q.rawUrl)})),(0,Wn.n)(Q=>{this.currentTransition=Q;let ae=!1,Ze=!1;return(0,_e.of)(Q).pipe((0,Me.M)(Ge=>{this.currentNavigation={id:Ge.id,initialUrl:Ge.rawUrl,extractedUrl:Ge.extractedUrl,trigger:Ge.source,extras:Ge.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Wn.n)(Ge=>{const Bt=Ge.currentBrowserUrl.toString(),Sn=!E.navigated||Ge.extractedUrl.toString()!==Bt||Bt!==Ge.currentUrlTree.toString();if(!Sn&&"reload"!==(Ge.extras.onSameUrlNavigation??E.onSameUrlNavigation)){const Fn="";return this.events.next(new ks(Ge.id,this.urlSerializer.serialize(Ge.rawUrl),Fn,0)),Ge.resolve(null),Fe.w}if(E.urlHandlingStrategy.shouldProcessUrl(Ge.rawUrl))return(0,_e.of)(Ge).pipe((0,Wn.n)(Fn=>{const ur=this.transitions?.getValue();return this.events.next(new To(Fn.id,this.urlSerializer.serialize(Fn.extractedUrl),Fn.source,Fn.restoredState)),ur!==this.transitions?.getValue()?Fe.w:Promise.resolve(Fn)}),function H(I,T,E,b,O,Q){return(0,de.Z)(ae=>function Bu(I,T,E,b,O,Q,ae="emptyOnly"){return new Js(I,T,E,b,O,ae,Q).recognize()}(I,T,E,b,ae.extractedUrl,O,Q).pipe((0,an.T)(({state:Ze,tree:Ge})=>({...ae,targetSnapshot:Ze,urlAfterRedirects:Ge}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,E.config,this.urlSerializer,E.paramsInheritanceStrategy),(0,Me.M)(Fn=>{Q.targetSnapshot=Fn.targetSnapshot,Q.urlAfterRedirects=Fn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Fn.urlAfterRedirects};const ur=new Ea(Fn.id,this.urlSerializer.serialize(Fn.extractedUrl),this.urlSerializer.serialize(Fn.urlAfterRedirects),Fn.targetSnapshot);this.events.next(ur)}));if(Sn&&E.urlHandlingStrategy.shouldProcessUrl(Ge.currentRawUrl)){const{id:Fn,extractedUrl:ur,source:ru,restoredState:iu,extras:Hl}=Ge,rs=new To(Fn,this.urlSerializer.serialize(ur),ru,iu);this.events.next(rs);const ia=Dt(0,this.rootComponentType).snapshot;return this.currentTransition=Q={...Ge,targetSnapshot:ia,urlAfterRedirects:ur,extras:{...Hl,skipLocationChange:!1,replaceUrl:!1}},(0,_e.of)(Q)}{const Fn="";return this.events.next(new ks(Ge.id,this.urlSerializer.serialize(Ge.extractedUrl),Fn,1)),Ge.resolve(null),Fe.w}}),(0,Me.M)(Ge=>{const Bt=new Bi(Ge.id,this.urlSerializer.serialize(Ge.extractedUrl),this.urlSerializer.serialize(Ge.urlAfterRedirects),Ge.targetSnapshot);this.events.next(Bt)}),(0,an.T)(Ge=>(this.currentTransition=Q={...Ge,guards:Fu(Ge.targetSnapshot,Ge.currentSnapshot,this.rootContexts)},Q)),function Ys(I,T){return(0,de.Z)(E=>{const{targetSnapshot:b,currentSnapshot:O,guards:{canActivateChecks:Q,canDeactivateChecks:ae}}=E;return 0===ae.length&&0===Q.length?(0,_e.of)({...E,guardsResult:!0}):function Ci(I,T,E,b){return(0,F.H)(I).pipe((0,de.Z)(O=>function di(I,T,E,b,O){const Q=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!Q||0===Q.length)return(0,_e.of)(!0);const ae=Q.map(Ze=>{const Ge=jn(T)??O,Bt=_n(Ze,Ge);return Mt(function Y(I){return I&&Qs(I.canDeactivate)}(Bt)?Bt.canDeactivate(I,T,E,b):Ge.runInContext(()=>Bt(I,T,E,b))).pipe((0,ye.$)())});return(0,_e.of)(ae).pipe(Ti())}(O.component,O.route,E,T,b)),(0,ye.$)(O=>!0!==O,!0))}(ae,b,O,I).pipe((0,de.Z)(Ze=>Ze&&function qa(I){return"boolean"==typeof I}(Ze)?function Xr(I,T,E,b){return(0,F.H)(T).pipe(ke(O=>(0,qt.x)(function Qa(I,T){return null!==I&&T&&T(new bo(I)),(0,_e.of)(!0)}(O.route.parent,b),function Ds(I,T){return null!==I&&T&&T(new Sr(I)),(0,_e.of)(!0)}(O.route,b),function Po(I,T,E){const b=T[T.length-1],Q=T.slice(0,T.length-1).reverse().map(ae=>function On(I){const T=I.routeConfig?I.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:I,guards:T}:null}(ae)).filter(ae=>null!==ae).map(ae=>Re(()=>{const Ze=ae.guards.map(Ge=>{const Bt=jn(ae.node)??E,Sn=_n(Ge,Bt);return Mt(function M(I){return I&&Qs(I.canActivateChild)}(Sn)?Sn.canActivateChild(b,I):Bt.runInContext(()=>Sn(b,I))).pipe((0,ye.$)())});return(0,_e.of)(Ze).pipe(Ti())}));return(0,_e.of)(Q).pipe(Ti())}(I,O.path,E),function Vr(I,T,E){const b=T.routeConfig?T.routeConfig.canActivate:null;if(!b||0===b.length)return(0,_e.of)(!0);const O=b.map(Q=>Re(()=>{const ae=jn(T)??E,Ze=_n(Q,ae);return Mt(function $(I){return I&&Qs(I.canActivate)}(Ze)?Ze.canActivate(T,I):ae.runInContext(()=>Ze(T,I))).pipe((0,ye.$)())}));return(0,_e.of)(O).pipe(Ti())}(I,O.route,E))),(0,ye.$)(O=>!0!==O,!0))}(b,Q,I,T):(0,_e.of)(Ze)),(0,an.T)(Ze=>({...E,guardsResult:Ze})))})}(this.environmentInjector,Ge=>this.events.next(Ge)),(0,Me.M)(Ge=>{if(Q.guardsResult=Ge.guardsResult,yr(Ge.guardsResult))throw ii(0,Ge.guardsResult);const Bt=new Ia(Ge.id,this.urlSerializer.serialize(Ge.extractedUrl),this.urlSerializer.serialize(Ge.urlAfterRedirects),Ge.targetSnapshot,!!Ge.guardsResult);this.events.next(Bt)}),(0,Vt.p)(Ge=>!!Ge.guardsResult||(this.cancelNavigationTransition(Ge,"",3),!1)),lr(Ge=>{if(Ge.guards.canActivateChecks.length)return(0,_e.of)(Ge).pipe((0,Me.M)(Bt=>{const Sn=new wa(Bt.id,this.urlSerializer.serialize(Bt.extractedUrl),this.urlSerializer.serialize(Bt.urlAfterRedirects),Bt.targetSnapshot);this.events.next(Sn)}),(0,Wn.n)(Bt=>{let Sn=!1;return(0,_e.of)(Bt).pipe(function N(I,T){return(0,de.Z)(E=>{const{targetSnapshot:b,guards:{canActivateChecks:O}}=E;if(!O.length)return(0,_e.of)(E);let Q=0;return(0,F.H)(O).pipe(ke(ae=>function j(I,T,E,b){const O=I.routeConfig,Q=I._resolve;return void 0!==O?.title&&!Kt(O)&&(Q[ut]=O.title),function ue(I,T,E,b){const O=function Ye(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===O.length)return(0,_e.of)({});const Q={};return(0,F.H)(O).pipe((0,de.Z)(ae=>function dt(I,T,E,b){const O=jn(T)??b,Q=_n(I,O);return Mt(Q.resolve?Q.resolve(T,E):O.runInContext(()=>Q(T,E)))}(I[ae],T,E,b).pipe((0,ye.$)(),(0,Me.M)(Ze=>{Q[ae]=Ze}))),ve(1),(0,Ke.u)(Q),le(ae=>Yr(ae)?Fe.w:Te(ae)))}(Q,I,T,b).pipe((0,an.T)(ae=>(I._resolvedData=ae,I.data=Nn(I,E).resolve,O&&Kt(O)&&(I.data[ut]=O.title),null)))}(ae.route,b,I,T)),(0,Me.M)(()=>Q++),ve(1),(0,de.Z)(ae=>Q===O.length?(0,_e.of)(E):Fe.w))})}(E.paramsInheritanceStrategy,this.environmentInjector),(0,Me.M)({next:()=>Sn=!0,complete:()=>{Sn||this.cancelNavigationTransition(Bt,"",2)}}))}),(0,Me.M)(Bt=>{const Sn=new Aa(Bt.id,this.urlSerializer.serialize(Bt.extractedUrl),this.urlSerializer.serialize(Bt.urlAfterRedirects),Bt.targetSnapshot);this.events.next(Sn)}))}),lr(Ge=>{const Bt=Sn=>{const kn=[];Sn.routeConfig?.loadComponent&&!Sn.routeConfig._loadedComponent&&kn.push(this.configLoader.loadComponent(Sn.routeConfig).pipe((0,Me.M)(Fn=>{Sn.component=Fn}),(0,an.T)(()=>{})));for(const Fn of Sn.children)kn.push(...Bt(Fn));return kn};return _t(Bt(Ge.targetSnapshot.root)).pipe((0,se.U)(),(0,Dn.s)(1))}),lr(()=>this.afterPreactivation()),(0,an.T)(Ge=>{const Bt=function ji(I,T,E){const b=Fr(I,T._root,E?E._root:void 0);return new fr(b,T)}(E.routeReuseStrategy,Ge.targetSnapshot,Ge.currentRouterState);return this.currentTransition=Q={...Ge,targetRouterState:Bt},Q}),(0,Me.M)(()=>{this.events.next(new Mn)}),((I,T,E,b)=>(0,an.T)(O=>(new Zo(T,O.targetRouterState,O.currentRouterState,E,b).activate(I),O)))(this.rootContexts,E.routeReuseStrategy,Ge=>this.events.next(Ge),this.inputBindingEnabled),(0,Dn.s)(1),(0,Me.M)({next:Ge=>{ae=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mi(Ge.id,this.urlSerializer.serialize(Ge.extractedUrl),this.urlSerializer.serialize(Ge.urlAfterRedirects))),E.titleStrategy?.updateTitle(Ge.targetRouterState.snapshot),Ge.resolve(!0)},complete:()=>{ae=!0}}),function dn(I){return(0,vt.N)((T,E)=>{(0,Ce.Tg)(I).subscribe((0,at._)(E,()=>E.complete(),Un.l)),!E.closed&&T.subscribe(E)})}(this.transitionAbortSubject.pipe((0,Me.M)(Ge=>{throw Ge}))),Ot(()=>{ae||Ze||this.cancelNavigationTransition(Q,"",1),this.currentNavigation?.id===Q.id&&(this.currentNavigation=null)}),le(Ge=>{if(Ze=!0,Zi(Ge))this.events.next(new Co(Q.id,this.urlSerializer.serialize(Q.extractedUrl),Ge.message,Ge.cancellationCode)),function $i(I){return Zi(I)&&yr(I.url)}(Ge)?this.events.next(new kr(Ge.url)):Q.resolve(!1);else{this.events.next(new is(Q.id,this.urlSerializer.serialize(Q.extractedUrl),Ge,Q.targetSnapshot??void 0));try{Q.resolve(E.errorHandler(Ge))}catch(Bt){Q.reject(Bt)}}return Fe.w}))}))}cancelNavigationTransition(E,b,O){const Q=new Co(E.id,this.urlSerializer.serialize(E.extractedUrl),b,O);this.events.next(Q),E.resolve(!1)}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function hi(I){return I!==Es}let oi=(()=>{class I{buildTitle(E){let b,O=E.root;for(;void 0!==O;)b=this.getResolvedTitleForRoute(O)??b,O=O.children.find(Q=>Q.outlet===Gt);return b}getResolvedTitleForRoute(E){return E.data[ut]}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:function(){return(0,g.WQX)(co)},providedIn:"root"})}return I})(),co=(()=>{class I extends oi{constructor(E){super(),this.title=E}updateTitle(E){const b=this.buildTitle(E);void 0!==b&&this.title.setTitle(b)}static#e=this.\u0275fac=function(b){return new(b||I)(g.KVO(It.hE))};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),Oi=(()=>{class I{static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:function(){return(0,g.WQX)(fi)},providedIn:"root"})}return I})();class fs{shouldDetach(T){return!1}store(T,E){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,E){return T.routeConfig===E.routeConfig}}let fi=(()=>{class I extends fs{static#e=this.\u0275fac=function(){let E;return function(O){return(E||(E=g.xGo(I)))(O||I)}}();static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const Ts=new g.nKC("",{providedIn:"root",factory:()=>({})});let Mr=(()=>{class I{static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:function(){return(0,g.WQX)(wr)},providedIn:"root"})}return I})(),wr=(()=>{class I{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,b){return E}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();var ho=function(I){return I[I.COMPLETE=0]="COMPLETE",I[I.FAILED=1]="FAILED",I[I.REDIRECTING=2]="REDIRECTING",I}(ho||{});function xo(I,T){I.events.pipe((0,Vt.p)(E=>E instanceof Mi||E instanceof Co||E instanceof is||E instanceof ks),(0,an.T)(E=>E instanceof Mi||E instanceof ks?ho.COMPLETE:E instanceof Co&&(0===E.code||1===E.code)?ho.REDIRECTING:ho.FAILED),(0,Vt.p)(E=>E!==ho.REDIRECTING),(0,Dn.s)(1)).subscribe(()=>{T()})}function ns(I){throw I}function Za(I,T,E){return T.parse("/")}const eh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ca={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mr=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.WQX)(g.H3F),this.isNgZoneEnabled=!1,this._events=new Zt.B,this.options=(0,g.WQX)(Ts,{optional:!0})||{},this.pendingTasks=(0,g.WQX)(g.$K3),this.errorHandler=this.options.errorHandler||ns,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Za,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.WQX)(Mr),this.routeReuseStrategy=(0,g.WQX)(Oi),this.titleStrategy=(0,g.WQX)(oi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,g.WQX)(Xn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,g.WQX)(gr),this.urlSerializer=(0,g.WQX)(bt),this.location=(0,g.WQX)(cn.aZ),this.componentInputBindingEnabled=!!(0,g.WQX)(pr,{optional:!0}),this.eventsSubscription=new nt.yU,this.isNgZoneEnabled=(0,g.WQX)(g.SKi)instanceof g.SKi&&g.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new $n,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Dt(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(E=>{this.lastSuccessfulId=E.id,this.currentPageId=this.browserPageId},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const E=this.navigationTransitions.events.subscribe(b=>{try{const{currentTransition:O}=this.navigationTransitions;if(null===O)return void(Oc(b)&&this._events.next(b));if(b instanceof To)hi(O.source)&&(this.browserUrlTree=O.extractedUrl);else if(b instanceof ks)this.rawUrlTree=O.rawUrl;else if(b instanceof Ea){if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(Q,O)}this.browserUrlTree=O.urlAfterRedirects}}else if(b instanceof Mn)this.currentUrlTree=O.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O),this.browserUrlTree=O.urlAfterRedirects);else if(b instanceof Co)0!==b.code&&1!==b.code&&(this.navigated=!0),(3===b.code||2===b.code)&&this.restoreHistory(O);else if(b instanceof kr){const Q=this.urlHandlingStrategy.merge(b.url,O.currentRawUrl),ae={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hi(O.source)};this.scheduleNavigation(Q,Es,null,ae,{resolve:O.resolve,reject:O.reject,promise:O.promise})}b instanceof is&&this.restoreHistory(O,!0),b instanceof Mi&&(this.navigated=!0),Oc(b)&&this._events.next(b)}catch(O){this.navigationTransitions.transitionAbortSubject.next(O)}});this.eventsSubscription.add(E)}resetRootComponentType(E){this.routerState.root.component=E,this.navigationTransitions.rootComponentType=E}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const E=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Es,E)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const b="popstate"===E.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{this.navigateToSyncWithBrowser(E.url,b,E.state)},0)}))}navigateToSyncWithBrowser(E,b,O){const Q={replaceUrl:!0},ae=O?.navigationId?O:null;if(O){const Ge={...O};delete Ge.navigationId,delete Ge.\u0275routerPageId,0!==Object.keys(Ge).length&&(Q.state=Ge)}const Ze=this.parseUrl(E);this.scheduleNavigation(Ze,b,ae,Q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(E){this.config=E.map(Cr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(E,b={}){const{relativeTo:O,queryParams:Q,fragment:ae,queryParamsHandling:Ze,preserveFragment:Ge}=b,Bt=Ge?this.currentUrlTree.fragment:ae;let kn,Sn=null;switch(Ze){case"merge":Sn={...this.currentUrlTree.queryParams,...Q};break;case"preserve":Sn=this.currentUrlTree.queryParams;break;default:Sn=Q||null}null!==Sn&&(Sn=this.removeEmptyProps(Sn));try{kn=Qe(O?O.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof E[0]||!E[0].startsWith("/"))&&(E=[]),kn=this.currentUrlTree.root}return be(kn,E,Sn,Bt??null)}navigateByUrl(E,b={skipLocationChange:!1}){const O=yr(E)?E:this.parseUrl(E),Q=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(Q,Es,null,b)}navigate(E,b={skipLocationChange:!1}){return function Oo(I){for(let T=0;T<I.length;T++)if(null==I[T])throw new g.wOt(4008,!1)}(E),this.navigateByUrl(this.createUrlTree(E,b),b)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let b;try{b=this.urlSerializer.parse(E)}catch(O){b=this.malformedUriErrorHandler(O,this.urlSerializer,E)}return b}isActive(E,b){let O;if(O=!0===b?{...eh}:!1===b?{...Ca}:b,yr(E))return kt(this.currentUrlTree,E,O);const Q=this.parseUrl(E);return kt(this.currentUrlTree,Q,O)}removeEmptyProps(E){return Object.keys(E).reduce((b,O)=>{const Q=E[O];return null!=Q&&(b[O]=Q),b},{})}scheduleNavigation(E,b,O,Q,ae){if(this.disposed)return Promise.resolve(!1);let Ze,Ge,Bt;ae?(Ze=ae.resolve,Ge=ae.reject,Bt=ae.promise):Bt=new Promise((kn,Fn)=>{Ze=kn,Ge=Fn});const Sn=this.pendingTasks.add();return xo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Sn))}),this.navigationTransitions.handleNavigationRequest({source:b,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:E,extras:Q,resolve:Ze,reject:Ge,promise:Bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bt.catch(kn=>Promise.reject(kn))}setBrowserUrl(E,b){const O=this.urlSerializer.serialize(E);if(this.location.isCurrentPathEqualTo(O)||b.extras.replaceUrl){const ae={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId)};this.location.replaceState(O,"",ae)}else{const Q={...b.extras.state,...this.generateNgRouterState(b.id,this.browserPageId+1)};this.location.go(O,"",Q)}}restoreHistory(E,b=!1){if("computed"===this.canceledNavigationResolution){const Q=this.currentPageId-this.browserPageId;0!==Q?this.location.historyGo(Q):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Q&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(E,b){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:b}:{navigationId:E}}static#e=this.\u0275fac=function(b){return new(b||I)};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Oc(I){return!(I instanceof Mn||I instanceof kr)}let ju=(()=>{class I{constructor(E,b,O,Q,ae,Ze){this.router=E,this.route=b,this.tabIndexAttribute=O,this.renderer=Q,this.el=ae,this.locationStrategy=Ze,this.href=null,this.commands=null,this.onChanges=new Zt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ge=ae.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ge||"area"===Ge,this.isAnchorElement?this.subscription=E.events.subscribe(Bt=>{Bt instanceof Mi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(E){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",E)}ngOnChanges(E){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(E,b,O,Q,ae){return!!(null===this.urlTree||this.isAnchorElement&&(0!==E||b||O||Q||ae||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const E=null===this.href?null:(0,g.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",E)}applyAttributeValue(E,b){const O=this.renderer,Q=this.el.nativeElement;null!==b?O.setAttribute(Q,E,b):O.removeAttribute(Q,E)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(b){return new(b||I)(g.rXU(mr),g.rXU(Cn),g.kS0("tabindex"),g.rXU(g.sFG),g.rXU(g.aKT),g.rXU(cn.hb))};static#t=this.\u0275dir=g.FsC({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,O){1&b&&g.bIt("click",function(ae){return O.onClick(ae.button,ae.ctrlKey,ae.shiftKey,ae.altKey,ae.metaKey)}),2&b&&g.BMQ("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",g.L39],skipLocationChange:["skipLocationChange","skipLocationChange",g.L39],replaceUrl:["replaceUrl","replaceUrl",g.L39],routerLink:"routerLink"},standalone:!0,features:[g.GFd,g.OA$]})}return I})();class ba{}let $u=(()=>{class I{constructor(E,b,O,Q,ae){this.router=E,this.injector=O,this.preloadingStrategy=Q,this.loader=ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,Vt.p)(E=>E instanceof Mi),ke(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,b){const O=[];for(const Q of b){Q.providers&&!Q._injector&&(Q._injector=(0,g.Ol2)(Q.providers,E,`Route: ${Q.path}`));const ae=Q._injector??E,Ze=Q._loadedInjector??ae;(Q.loadChildren&&!Q._loadedRoutes&&void 0===Q.canLoad||Q.loadComponent&&!Q._loadedComponent)&&O.push(this.preloadConfig(ae,Q)),(Q.children||Q._loadedRoutes)&&O.push(this.processRoutes(Ze,Q.children??Q._loadedRoutes))}return(0,F.H)(O).pipe((0,pt.U)())}preloadConfig(E,b){return this.preloadingStrategy.preload(b,()=>{let O;O=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(E,b):(0,_e.of)(null);const Q=O.pipe((0,de.Z)(ae=>null===ae?(0,_e.of)(void 0):(b._loadedRoutes=ae.routes,b._loadedInjector=ae.injector,this.processRoutes(ae.injector??E,ae.routes))));if(b.loadComponent&&!b._loadedComponent){const ae=this.loader.loadComponent(b);return(0,F.H)([Q,ae]).pipe((0,pt.U)())}return Q})}static#e=this.\u0275fac=function(b){return new(b||I)(g.KVO(mr),g.KVO(g.Ql9),g.KVO(g.uvJ),g.KVO(ba),g.KVO(Jn))};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const Vl=new g.nKC("");let gn=(()=>{class I{constructor(E,b,O,Q,ae={}){this.urlSerializer=E,this.transitions=b,this.viewportScroller=O,this.zone=Q,this.options=ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ae.scrollPositionRestoration=ae.scrollPositionRestoration||"disabled",ae.anchorScrolling=ae.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof Mi?(this.lastId=E.id,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.urlAfterRedirects).fragment)):E instanceof ks&&0===E.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof Ii&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,b){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ii(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(b){g.QTQ()};static#t=this.\u0275prov=g.jDH({token:I,factory:I.\u0275fac})}return I})();function Cs(I,T){return{\u0275kind:I,\u0275providers:T}}function Ul(){const I=(0,g.WQX)(g.zZn);return T=>{const E=I.get(g.o8S);if(T!==E.components[0])return;const b=I.get(mr),O=I.get(Fc);1===I.get(ko)&&b.initialNavigation(),I.get(zn,null,g.$GK.Optional)?.setUpPreloading(),I.get(Vl,null,g.$GK.Optional)?.init(),b.resetRootComponentType(E.componentTypes[0]),O.closed||(O.next(),O.complete(),O.unsubscribe())}}const Fc=new g.nKC("",{factory:()=>new Zt.B}),ko=new g.nKC("",{providedIn:"root",factory:()=>1}),zn=new g.nKC("");function ra(I){return Cs(0,[{provide:zn,useExisting:$u},{provide:ba,useExisting:I}])}const Ra=new g.nKC("ROUTER_FORROOT_GUARD"),Bl=[cn.aZ,{provide:bt,useClass:qr},mr,Bn,{provide:Cn,useFactory:function Qn(I){return I.routerState.root},deps:[mr]},Jn,[]];function nh(){return new g.NEm("Router",mr)}let rh=(()=>{class I{constructor(E){}static forRoot(E,b){return{ngModule:I,providers:[Bl,[],{provide:Xn,multi:!0,useValue:E},{provide:Ra,useFactory:Pa,deps:[[mr,new g.Xx1,new g.kdw]]},{provide:Ts,useValue:b||{}},b?.useHash?{provide:cn.hb,useClass:cn.fw}:{provide:cn.hb,useClass:cn.Sm},{provide:Vl,useFactory:()=>{const I=(0,g.WQX)(cn.Xr),T=(0,g.WQX)(g.SKi),E=(0,g.WQX)(Ts),b=(0,g.WQX)(gr),O=(0,g.WQX)(bt);return E.scrollOffset&&I.setOffset(E.scrollOffset),new gn(O,b,I,T,E)}},b?.preloadingStrategy?ra(b.preloadingStrategy).\u0275providers:[],{provide:g.NEm,multi:!0,useFactory:nh},b?.initialNavigation?_r(b):[],b?.bindToComponentInputs?Cs(8,[sr,{provide:pr,useExisting:sr}]).\u0275providers:[],[{provide:Ss,useFactory:Ul},{provide:g.iLQ,multi:!0,useExisting:Ss}]]}}static forChild(E){return{ngModule:I,providers:[{provide:Xn,multi:!0,useValue:E}]}}static#e=this.\u0275fac=function(b){return new(b||I)(g.KVO(Ra,8))};static#t=this.\u0275mod=g.$C({type:I});static#n=this.\u0275inj=g.G2t({})}return I})();function Pa(I){return"guarded"}function _r(I){return["disabled"===I.initialNavigation?Cs(3,[{provide:g.hnV,multi:!0,useFactory:()=>{const T=(0,g.WQX)(mr);return()=>{T.setUpLocationChangeListener()}}},{provide:ko,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Cs(2,[{provide:ko,useValue:0},{provide:g.hnV,multi:!0,deps:[g.zZn],useFactory:T=>{const E=T.get(cn.hj,Promise.resolve());return()=>E.then(()=>new Promise(b=>{const O=T.get(mr),Q=T.get(Fc);xo(O,()=>{b(!0)}),T.get(gr).afterPreactivation=()=>(b(!0),Q.closed?(0,_e.of)(void 0):Q),O.initialNavigation()}))}}]).\u0275providers:[]]}const Ss=new g.nKC("")},3345:($t,ze,B)=>{B.d(ze,{A:()=>_t});var g=B(1076),oe=B(1362),R=B(7852),J=B(8041);class F{constructor(yt,gt){this._delegate=yt,this.firebase=gt,(0,R._addComponent)(yt,new oe.uA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(yt,gt=R._DEFAULT_ENTRY_NAME){var qt;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(yt);return!Ce.isInitialized()&&"EXPLICIT"===(null===(qt=Ce.getComponent())||void 0===qt?void 0:qt.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:gt})}_removeServiceInstance(yt,gt=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(gt)}_addComponent(yt){(0,R._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,R._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new g.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function Ve(){const lt=function Ae(lt){const yt={},gt={__esModule:!0,initializeApp:function Re(nt,vt={}){const Lt=R.initializeApp(nt,vt);if((0,g.gR)(yt,Lt.name))return yt[Lt.name];const Je=new lt(Lt,gt);return yt[Lt.name]=Je,Je},app:Ce,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Te(nt){const vt=nt.name,Lt=vt.replace("-compat","");if(R._registerComponent(nt)&&"PUBLIC"===nt.type){const Je=(Zt=Ce())=>{if("function"!=typeof Zt[Lt])throw Se.create("invalid-app-argument",{appName:vt});return Zt[Lt]()};void 0!==nt.serviceProps&&(0,g.zw)(Je,nt.serviceProps),gt[Lt]=Je,lt.prototype[Lt]=function(...Zt){return this._getService.bind(this,vt).apply(this,nt.multipleInstances?Zt:[])}}return"PUBLIC"===nt.type?gt[Lt]:null},removeApp:function qt(nt){delete yt[nt]},useAsService:function Fe(nt,vt){return"serverAuth"===vt?null:vt},modularAPIs:R}};function Ce(nt){if(!(0,g.gR)(yt,nt=nt||R._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:nt});return yt[nt]}return gt.default=gt,Object.defineProperty(gt,"apps",{get:function tt(){return Object.keys(yt).map(nt=>yt[nt])}}),Ce.App=lt,gt}(F);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function yt(gt){(0,g.zw)(lt,gt)},createSubscribe:g.tD,ErrorFactory:g.FA,deepExtend:g.zw}),lt}(),ce=new J.Vy("@firebase/app-compat");try{const lt=(0,g.mS)();if(void 0!==lt.firebase){ce.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const yt=lt.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&ce.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const _t=ie;!function He(lt){(0,R.registerVersion)("@firebase/app-compat","0.2.40",lt)}()},7852:($t,ze,B)=>{B.r(ze),B.d(ze,{FirebaseError:()=>J.g,SDK_VERSION:()=>bt,_DEFAULT_ENTRY_NAME:()=>We,_addComponent:()=>mn,_addOrOverwriteComponent:()=>xr,_apps:()=>ot,_clearComponents:()=>Et,_components:()=>kt,_getProvider:()=>mt,_isFirebaseApp:()=>Pn,_isFirebaseServerApp:()=>$n,_registerComponent:()=>Qi,_removeServiceInstance:()=>Kr,_serverApps:()=>rn,deleteApp:()=>Tr,getApp:()=>Dr,getApps:()=>Qr,initializeApp:()=>qr,initializeServerApp:()=>_i,onLog:()=>W,registerVersion:()=>X,setLogLevel:()=>G});var g=B(467),oe=B(1362),R=B(8041),J=B(1076);const F=(Qe,be)=>be.some(it=>Qe instanceof it);let _e,Se;const ie=new WeakMap,ce=new WeakMap,we=new WeakMap,at=new WeakMap,He=new WeakMap;let yt={get(Qe,be,it){if(Qe instanceof IDBTransaction){if("done"===be)return ce.get(Qe);if("objectStoreNames"===be)return Qe.objectStoreNames||we.get(Qe);if("store"===be)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return Re(Qe[be])},set:(Qe,be,it)=>(Qe[be]=it,!0),has:(Qe,be)=>Qe instanceof IDBTransaction&&("done"===be||"store"===be)||be in Qe};function Ce(Qe){return"function"==typeof Qe?function qt(Qe){return Qe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ve(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Qe)?function(...be){return Qe.apply(tt(this),be),Re(ie.get(this))}:function(...be){return Re(Qe.apply(tt(this),be))}:function(be,...it){const Nt=Qe.call(tt(this),be,...it);return we.set(Nt,be.sort?be.sort():[be]),Re(Nt)}}(Qe):(Qe instanceof IDBTransaction&&function lt(Qe){if(ce.has(Qe))return;const be=new Promise((it,Nt)=>{const Yt=()=>{Qe.removeEventListener("complete",Wt),Qe.removeEventListener("error",Tn),Qe.removeEventListener("abort",Tn)},Wt=()=>{it(),Yt()},Tn=()=>{Nt(Qe.error||new DOMException("AbortError","AbortError")),Yt()};Qe.addEventListener("complete",Wt),Qe.addEventListener("error",Tn),Qe.addEventListener("abort",Tn)});ce.set(Qe,be)}(Qe),F(Qe,function Ae(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Qe,yt):Qe)}function Re(Qe){if(Qe instanceof IDBRequest)return function _t(Qe){const be=new Promise((it,Nt)=>{const Yt=()=>{Qe.removeEventListener("success",Wt),Qe.removeEventListener("error",Tn)},Wt=()=>{it(Re(Qe.result)),Yt()},Tn=()=>{Nt(Qe.error),Yt()};Qe.addEventListener("success",Wt),Qe.addEventListener("error",Tn)});return be.then(it=>{it instanceof IDBCursor&&ie.set(it,Qe)}).catch(()=>{}),He.set(be,Qe),be}(Qe);if(at.has(Qe))return at.get(Qe);const be=Ce(Qe);return be!==Qe&&(at.set(Qe,be),He.set(be,Qe)),be}const tt=Qe=>He.get(Qe),nt=["get","getKey","getAll","getAllKeys","count"],vt=["put","add","delete","clear"],Lt=new Map;function Je(Qe,be){if(!(Qe instanceof IDBDatabase)||be in Qe||"string"!=typeof be)return;if(Lt.get(be))return Lt.get(be);const it=be.replace(/FromIndex$/,""),Nt=be!==it,Yt=vt.includes(it);if(!(it in(Nt?IDBIndex:IDBObjectStore).prototype)||!Yt&&!nt.includes(it))return;const Wt=function(){var Tn=(0,g.A)(function*(rr,...bn){const ri=this.transaction(rr,Yt?"readwrite":"readonly");let Yi=ri.store;return Nt&&(Yi=Yi.index(bn.shift())),(yield Promise.all([Yi[it](...bn),Yt&&ri.done]))[0]});return function(bn){return Tn.apply(this,arguments)}}();return Lt.set(be,Wt),Wt}!function gt(Qe){yt=Qe(yt)}(Qe=>({...Qe,get:(be,it,Nt)=>Je(be,it)||Qe.get(be,it,Nt),has:(be,it)=>!!Je(be,it)||Qe.has(be,it)}));class Zt{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function cn(Qe){const be=Qe.getComponent();return"VERSION"===be?.type}(it)){const Nt=it.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(it=>it).join(" ")}}const an="@firebase/app",Wn="0.10.10",Dn=new R.Vy("@firebase/app"),We="[DEFAULT]",Mt={[an]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ot=new Map,rn=new Map,kt=new Map;function mn(Qe,be){try{Qe.container.addComponent(be)}catch(it){Dn.debug(`Component ${be.name} failed to register with FirebaseApp ${Qe.name}`,it)}}function xr(Qe,be){Qe.container.addOrOverwriteComponent(be)}function Qi(Qe){const be=Qe.name;if(kt.has(be))return Dn.debug(`There were multiple attempts to register component ${be}.`),!1;kt.set(be,Qe);for(const it of ot.values())mn(it,Qe);for(const it of rn.values())mn(it,Qe);return!0}function mt(Qe,be){const it=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),Qe.container.getProvider(be)}function Kr(Qe,be,it=We){mt(Qe,be).clearInstance(it)}function Pn(Qe){return void 0!==Qe.options}function $n(Qe){return void 0!==Qe.settings}function Et(){kt.clear()}const nn=new J.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mi{constructor(be,it,Nt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new oe.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}class Kn extends mi{constructor(be,it,Nt,Yt){const Wt=void 0!==it.automaticDataCollectionEnabled&&it.automaticDataCollectionEnabled,Tn={name:Nt,automaticDataCollectionEnabled:Wt};super(void 0!==be.apiKey?be:be.options,Tn,Yt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Wt},it),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,it.releaseOnDeref=void 0,X(an,Wn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(be){this.isDeleted||(this._refCount++,void 0!==be&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(be,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Tr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nn.create("server-app-deleted")}}const bt="10.13.1";function qr(Qe,be={}){let it=Qe;"object"!=typeof be&&(be={name:be});const Nt=Object.assign({name:We,automaticDataCollectionEnabled:!1},be),Yt=Nt.name;if("string"!=typeof Yt||!Yt)throw nn.create("bad-app-name",{appName:String(Yt)});if(it||(it=(0,J.T9)()),!it)throw nn.create("no-options");const Wt=ot.get(Yt);if(Wt){if((0,J.bD)(it,Wt.options)&&(0,J.bD)(Nt,Wt.config))return Wt;throw nn.create("duplicate-app",{appName:Yt})}const Tn=new oe.h1(Yt);for(const bn of kt.values())Tn.addComponent(bn);const rr=new mi(it,Nt,Tn);return ot.set(Yt,rr),rr}function _i(Qe,be){if((0,J.Bd)()&&!(0,J.p7)())throw nn.create("invalid-server-app-environment");let it;void 0===be.automaticDataCollectionEnabled&&(be.automaticDataCollectionEnabled=!1),it=Pn(Qe)?Qe.options:Qe;const Nt=Object.assign(Object.assign({},be),it);if(void 0!==Nt.releaseOnDeref&&delete Nt.releaseOnDeref,void 0!==be.releaseOnDeref&&typeof FinalizationRegistry>"u")throw nn.create("finalization-registry-not-supported",{});const Wt=""+(ri=JSON.stringify(Nt),[...ri].reduce((Yi,Gn)=>Math.imul(31,Yi)+Gn.charCodeAt(0)|0,0)),Tn=rn.get(Wt);var ri;if(Tn)return Tn.incRefCount(be.releaseOnDeref),Tn;const rr=new oe.h1(Wt);for(const ri of kt.values())rr.addComponent(ri);const bn=new Kn(it,be,Wt,rr);return rn.set(Wt,bn),bn}function Dr(Qe=We){const be=ot.get(Qe);if(!be&&Qe===We&&(0,J.T9)())return qr();if(!be)throw nn.create("no-app",{appName:Qe});return be}function Qr(){return Array.from(ot.values())}function Tr(Qe){return yi.apply(this,arguments)}function yi(){return(yi=(0,g.A)(function*(Qe){let be=!1;const it=Qe.name;ot.has(it)?(be=!0,ot.delete(it)):rn.has(it)&&Qe.decRefCount()<=0&&(rn.delete(it),be=!0),be&&(yield Promise.all(Qe.container.getProviders().map(Nt=>Nt.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function X(Qe,be,it){var Nt;let Yt=null!==(Nt=Mt[Qe])&&void 0!==Nt?Nt:Qe;it&&(Yt+=`-${it}`);const Wt=Yt.match(/\s|\//),Tn=be.match(/\s|\//);if(Wt||Tn){const rr=[`Unable to register library "${Yt}" with version "${be}":`];return Wt&&rr.push(`library name "${Yt}" contains illegal characters (whitespace or "/")`),Wt&&Tn&&rr.push("and"),Tn&&rr.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void Dn.warn(rr.join(" "))}Qi(new oe.uA(`${Yt}-version`,()=>({library:Yt,version:be}),"VERSION"))}function W(Qe,be){if(null!==Qe&&"function"!=typeof Qe)throw nn.create("invalid-log-argument");(0,R.Ey)(Qe,be)}function G(Qe){(0,R.He)(Qe)}const Z="firebase-heartbeat-database",re=1,et="firebase-heartbeat-store";let Ct=null;function Pt(){return Ct||(Ct=function Te(Qe,be,{blocked:it,upgrade:Nt,blocking:Yt,terminated:Wt}={}){const Tn=indexedDB.open(Qe,be),rr=Re(Tn);return Nt&&Tn.addEventListener("upgradeneeded",bn=>{Nt(Re(Tn.result),bn.oldVersion,bn.newVersion,Re(Tn.transaction),bn)}),it&&Tn.addEventListener("blocked",bn=>it(bn.oldVersion,bn.newVersion,bn)),rr.then(bn=>{Wt&&bn.addEventListener("close",()=>Wt()),Yt&&bn.addEventListener("versionchange",ri=>Yt(ri.oldVersion,ri.newVersion,ri))}).catch(()=>{}),rr}(Z,re,{upgrade:(Qe,be)=>{if(0===be)try{Qe.createObjectStore(et)}catch(it){console.warn(it)}}}).catch(Qe=>{throw nn.create("idb-open",{originalErrorMessage:Qe.message})})),Ct}function he(){return(he=(0,g.A)(function*(Qe){try{const it=(yield Pt()).transaction(et),Nt=yield it.objectStore(et).get(ir(Qe));return yield it.done,Nt}catch(be){if(be instanceof J.g)Dn.warn(be.message);else{const it=nn.create("idb-get",{originalErrorMessage:be?.message});Dn.warn(it.message)}}})).apply(this,arguments)}function Hn(Qe,be){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.A)(function*(Qe,be){try{const Nt=(yield Pt()).transaction(et,"readwrite");yield Nt.objectStore(et).put(be,ir(Qe)),yield Nt.done}catch(it){if(it instanceof J.g)Dn.warn(it.message);else{const Nt=nn.create("idb-set",{originalErrorMessage:it?.message});Dn.warn(Nt.message)}}})).apply(this,arguments)}function ir(Qe){return`${Qe.name}!${Qe.options.appId}`}class ni{constructor(be){this.container=be,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new Ri(it),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var be=this;return(0,g.A)(function*(){var it,Nt;try{const Wt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tn=Or();return null==(null===(it=be._heartbeatsCache)||void 0===it?void 0:it.heartbeats)&&(be._heartbeatsCache=yield be._heartbeatsCachePromise,null==(null===(Nt=be._heartbeatsCache)||void 0===Nt?void 0:Nt.heartbeats))||be._heartbeatsCache.lastSentHeartbeatDate===Tn||be._heartbeatsCache.heartbeats.some(rr=>rr.date===Tn)?void 0:(be._heartbeatsCache.heartbeats.push({date:Tn,agent:Wt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(rr=>{const bn=new Date(rr.date).valueOf();return Date.now()-bn<=2592e6}),be._storage.overwrite(be._heartbeatsCache))}catch(Yt){Dn.warn(Yt)}})()}getHeartbeatsHeader(){var be=this;return(0,g.A)(function*(){var it;try{if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null==(null===(it=be._heartbeatsCache)||void 0===it?void 0:it.heartbeats)||0===be._heartbeatsCache.heartbeats.length)return"";const Nt=Or(),{heartbeatsToSend:Yt,unsentEntries:Wt}=function Pr(Qe,be=1024){const it=[];let Nt=Qe.slice();for(const Yt of Qe){const Wt=it.find(Tn=>Tn.agent===Yt.agent);if(Wt){if(Wt.dates.push(Yt.date),yr(it)>be){Wt.dates.pop();break}}else if(it.push({agent:Yt.agent,dates:[Yt.date]}),yr(it)>be){it.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:it,unsentEntries:Nt}}(be._heartbeatsCache.heartbeats),Tn=(0,J.Uj)(JSON.stringify({version:2,heartbeats:Yt}));return be._heartbeatsCache.lastSentHeartbeatDate=Nt,Wt.length>0?(be._heartbeatsCache.heartbeats=Wt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Tn}catch(Nt){return Dn.warn(Nt),""}})()}}function Or(){return(new Date).toISOString().substring(0,10)}class Ri{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.A)(function*(){return!!(0,J.zW)()&&(0,J.eX)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.A)(function*(){if(yield be._canUseIndexedDBPromise){const Nt=yield function hn(Qe){return he.apply(this,arguments)}(be.app);return Nt?.heartbeats?Nt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(be){var it=this;return(0,g.A)(function*(){var Nt;if(yield it._canUseIndexedDBPromise){const Wt=yield it.read();return Hn(it.app,{lastSentHeartbeatDate:null!==(Nt=be.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Wt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var it=this;return(0,g.A)(function*(){var Nt;if(yield it._canUseIndexedDBPromise){const Wt=yield it.read();return Hn(it.app,{lastSentHeartbeatDate:null!==(Nt=be.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...be.heartbeats]})}})()}}function yr(Qe){return(0,J.Uj)(JSON.stringify({version:2,heartbeats:Qe})).length}!function yn(Qe){Qi(new oe.uA("platform-logger",be=>new Zt(be),"PRIVATE")),Qi(new oe.uA("heartbeat",be=>new ni(be),"PRIVATE")),X(an,Wn,Qe),X(an,Wn,"esm2017"),X("fire-js","")}("")},1362:($t,ze,B)=>{B.d(ze,{h1:()=>Ae,uA:()=>R});var g=B(467),oe=B(1076);class R{constructor(ie,ce,we){this.name=ie,this.instanceFactory=ce,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const J="[DEFAULT]";class F{constructor(ie,ce){this.name=ie,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const ce=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(ce)){const we=new oe.cY;if(this.instancesDeferred.set(ce,we),this.isInitialized(ce)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ce});at&&we.resolve(at)}catch{}}return this.instancesDeferred.get(ce).promise}getImmediate(ie){var ce;const we=this.normalizeInstanceIdentifier(ie?.identifier),at=null!==(ce=ie?.optional)&&void 0!==ce&&ce;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(He){if(at)return null;throw He}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function Se(Ve){return"EAGER"===Ve.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[ce,we]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ce);try{const He=this.getOrInitializeService({instanceIdentifier:at});we.resolve(He)}catch{}}}}clearInstance(ie=J){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,g.A)(function*(){const ce=Array.from(ie.instances.values());yield Promise.all([...ce.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...ce.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=J){return this.instances.has(ie)}getOptions(ie=J){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:ce={}}=ie,we=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:we,options:ce});for(const[He,_t]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(He)&&_t.resolve(at);return at}onInit(ie,ce){var we;const at=this.normalizeInstanceIdentifier(ce),He=null!==(we=this.onInitCallbacks.get(at))&&void 0!==we?we:new Set;He.add(ie),this.onInitCallbacks.set(at,He);const _t=this.instances.get(at);return _t&&ie(_t,at),()=>{He.delete(ie)}}invokeOnInitCallbacks(ie,ce){const we=this.onInitCallbacks.get(ce);if(we)for(const at of we)try{at(ie,ce)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:ce={}}){let we=this.instances.get(ie);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=ie,Ve===J?void 0:Ve),options:ce}),this.instances.set(ie,we),this.instancesOptions.set(ie,ce),this.invokeOnInitCallbacks(we,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,we)}catch{}var Ve;return we||null}normalizeInstanceIdentifier(ie=J){return this.component?this.component.multipleInstances?ie:J:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const ce=this.getProvider(ie.name);if(ce.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);ce.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const ce=new F(ie,this);return this.providers.set(ie,ce),ce}getProviders(){return Array.from(this.providers.values())}}},8041:($t,ze,B)=>{B.d(ze,{$b:()=>oe,Ey:()=>Ve,He:()=>Ae,Vy:()=>Se});const g=[];var oe=function(ie){return ie[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",ie}(oe||{});const R={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},J=oe.INFO,F={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},_e=(ie,ce,...we)=>{if(ce<ie.logLevel)return;const at=(new Date).toISOString(),He=F[ce];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[He](`[${at}]  ${ie.name}:`,...we)};class Se{constructor(ce){this.name=ce,this._logLevel=J,this._logHandler=_e,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in oe))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?R[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...ce),this._logHandler(this,oe.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...ce),this._logHandler(this,oe.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...ce),this._logHandler(this,oe.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...ce),this._logHandler(this,oe.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...ce),this._logHandler(this,oe.ERROR,...ce)}}function Ae(ie){g.forEach(ce=>{ce.setLogLevel(ie)})}function Ve(ie,ce){for(const we of g){let at=null;ce&&ce.level&&(at=R[ce.level]),we.userLogHandler=null===ie?null:(He,_t,...lt)=>{const yt=lt.map(gt=>{if(null==gt)return null;if("string"==typeof gt)return gt;if("number"==typeof gt||"boolean"==typeof gt)return gt.toString();if(gt instanceof Error)return gt.message;try{return JSON.stringify(gt)}catch{return null}}).filter(gt=>gt).join(" ");_t>=(at??He.logLevel)&&ie({level:oe[_t].toLowerCase(),message:yt,args:lt,type:He.name})}}}},7935:($t,ze,B)=>{B.d(ze,{A:()=>g.A});var g=B(3345);g.A.registerVersion("firebase","10.13.1","app-compat")},3200:($t,ze,B)=>{var g=B(467),oe=B(3345),R=B(7852),J=B(1076),F=B(8041),_e=B(1635),Se=B(1362);const Ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const _t=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},lt=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new J.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qt=new F.Vy("@firebase/auth");function Re(_,...c){qt.logLevel<=F.$b.ERROR&&qt.error(`Auth (${R.SDK_VERSION}): ${_}`,...c)}function tt(_,...c){throw Lt(_,...c)}function Te(_,...c){return Lt(_,...c)}function Fe(_,c,d){const v=Object.assign(Object.assign({},lt()),{[c]:d});return new J.FA("auth","Firebase",v).create(c,{appName:_.name})}function nt(_){return Fe(_,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vt(_,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&tt(_,"argument-error"),Fe(_,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lt(_,...c){if("string"!=typeof _){const d=c[0],v=[...c.slice(1)];return v[0]&&(v[0].appName=_.name),_._errorFactory.create(d,...v)}return yt.create(_,...c)}function Je(_,c,...d){if(!_)throw Lt(c,...d)}function Zt(_){const c="INTERNAL ASSERTION FAILED: "+_;throw Re(c),new Error(c)}function cn(_,c){_||Zt(c)}function an(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Wn(){return"http:"===Dn()||"https:"===Dn()}function Dn(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class de{constructor(c,d){this.shortDelay=c,this.longDelay=d,cn(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,J.jZ)()||(0,J.lV)()}get(){return function Ft(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wn()||(0,J.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ye(_,c){cn(_.emulator,"Emulator should always be set here");const{url:d}=_.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class ke{static initialize(c,d,v){this.fetchImpl=c,d&&(this.headersImpl=d),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new de(3e4,6e4);function xe(_,c){return _.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:_.tenantId}):c}function se(_,c,d,v){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.A)(function*(_,c,d,v,x={}){return Tt(_,x,(0,g.A)(function*(){let z={},fe={};v&&("GET"===c?fe=v:z={body:JSON.stringify(v)});const Ne=(0,J.Am)(Object.assign({key:_.config.apiKey},fe)).slice(1),st=yield _._getAdditionalHeaders();return st["Content-Type"]="application/json",_.languageCode&&(st["X-Firebase-Locale"]=_.languageCode),ke.fetch()(Un(_,_.config.apiHost,d,Ne),Object.assign({method:c,headers:st,referrerPolicy:"no-referrer"},z))}))})).apply(this,arguments)}function Tt(_,c,d){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.A)(function*(_,c,d){_._canInitEmulator=!1;const v=Object.assign(Object.assign({},Me),c);try{const x=new pt(_),z=yield Promise.race([d(),x.promise]);x.clearNetworkTimeout();const fe=yield z.json();if("needConfirmation"in fe)throw It(_,"account-exists-with-different-credential",fe);if(z.ok&&!("errorMessage"in fe))return fe;{const Ne=z.ok?fe.errorMessage:fe.error.message,[st,Ut]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw It(_,"credential-already-in-use",fe);if("EMAIL_EXISTS"===st)throw It(_,"email-already-in-use",fe);if("USER_DISABLED"===st)throw It(_,"user-disabled",fe);const Ht=v[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(Ut)throw Fe(_,Ht,Ut);tt(_,Ht)}}catch(x){if(x instanceof J.g)throw x;tt(_,"network-request-failed",{message:String(x)})}})).apply(this,arguments)}function Ke(_,c,d,v){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,g.A)(function*(_,c,d,v,x={}){const z=yield se(_,c,d,v,x);return"mfaPendingCredential"in z&&tt(_,"multi-factor-auth-required",{_serverResponse:z}),z})).apply(this,arguments)}function Un(_,c,d,v){const x=`${c}${d}?${v}`;return _.config.emulator?ye(_.config,x):`${_.config.apiScheme}://${x}`}function dn(_){switch(_){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,v)=>{this.timer=setTimeout(()=>v(Te(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function It(_,c,d){const v={appName:_.name};d.email&&(v.email=d.email),d.phoneNumber&&(v.phoneNumber=d.phoneNumber);const x=Te(_,c,v);return x.customData._tokenResponse=d,x}function Gt(_){return void 0!==_&&void 0!==_.getResponse}function ut(_){return void 0!==_&&void 0!==_.enterprise}class Le{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return dn(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Rn(){return(Rn=(0,g.A)(function*(_){return(yield se(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(_,c){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.A)(function*(_,c){return se(_,"GET","/v2/recaptchaConfig",xe(_,c))})).apply(this,arguments)}function We(){return(We=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function ot(){return(ot=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function rn(_,c){return kt.apply(this,arguments)}function kt(){return(kt=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function mn(_){if(_)try{const c=new Date(Number(_));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function mt(){return(mt=(0,g.A)(function*(_,c=!1){const d=(0,J.Ku)(_),v=yield d.getIdToken(c),x=Pn(v);Je(x&&x.exp&&x.auth_time&&x.iat,d.auth,"internal-error");const z="object"==typeof x.firebase?x.firebase:void 0,fe=z?.sign_in_provider;return{claims:x,token:v,authTime:mn(Kr(x.auth_time)),issuedAtTime:mn(Kr(x.iat)),expirationTime:mn(Kr(x.exp)),signInProvider:fe||null,signInSecondFactor:z?.sign_in_second_factor||null}})).apply(this,arguments)}function Kr(_){return 1e3*Number(_)}function Pn(_){const[c,d,v]=_.split(".");if(void 0===c||void 0===d||void 0===v)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,J.u)(d);return x?JSON.parse(x):(Re("Failed to decode base64 JWT payload"),null)}catch(x){return Re("Caught error parsing JWT payload as JSON",x?.toString()),null}}function $n(_){const c=Pn(_);return Je(c,"internal-error"),Je(typeof c.exp<"u","internal-error"),Je(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Et(_,c){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.A)(function*(_,c,d=!1){if(d)return c;try{return yield c}catch(v){throw v instanceof J.g&&function nn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(v)&&_.auth.currentUser===_&&(yield _.auth.signOut()),v}})).apply(this,arguments)}class mi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const x=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const v=this.getInterval(c);this.timerId=setTimeout((0,g.A)(function*(){yield d.iteration()}),v)}iteration(){var c=this;return(0,g.A)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class Kn{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=mn(this.lastLoginAt),this.creationTime=mn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bt(_){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.A)(function*(_){var c;const d=_.auth,v=yield _.getIdToken(),x=yield Et(_,rn(d,{idToken:v}));Je(x?.users.length,d,"internal-error");const z=x.users[0];_._notifyReloadListener(z);const fe=null!==(c=z.providerUserInfo)&&void 0!==c&&c.length?Tr(z.providerUserInfo):[],Ne=function Qr(_,c){return[..._.filter(v=>!c.some(x=>x.providerId===v.providerId)),...c]}(_.providerData,fe),Ht=!!_.isAnonymous&&!(_.email&&z.passwordHash||Ne?.length),Qt={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:Ne,metadata:new Kn(z.createdAt,z.lastLoginAt),isAnonymous:Ht};Object.assign(_,Qt)})).apply(this,arguments)}function Dr(){return(Dr=(0,g.A)(function*(_){const c=(0,J.Ku)(_);yield bt(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Tr(_){return _.map(c=>{var{providerId:d}=c,v=(0,_e.Tt)(c,["providerId"]);return{providerId:d,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function X(){return(X=(0,g.A)(function*(_,c){const d=yield Tt(_,{},(0,g.A)(function*(){const v=(0,J.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:x,apiKey:z}=_.config,fe=Un(_,x,"/v1/token",`key=${z}`),Ne=yield _._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",ke.fetch()(fe,{method:"POST",headers:Ne,body:v})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function G(){return(G=(0,g.A)(function*(_,c){return se(_,"POST","/v2/accounts:revokeToken",xe(_,c))})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Je(c.idToken,"internal-error"),Je(typeof c.idToken<"u","internal-error"),Je(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):$n(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}updateFromIdToken(c){Je(0!==c.length,"internal-error");const d=$n(c);this.updateTokensAndExpiration(c,null,d)}getToken(c,d=!1){var v=this;return(0,g.A)(function*(){return d||!v.accessToken||v.isExpired?(Je(v.refreshToken,c,"user-token-expired"),v.refreshToken?(yield v.refresh(c,v.refreshToken),v.accessToken):null):v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var v=this;return(0,g.A)(function*(){const{accessToken:x,refreshToken:z,expiresIn:fe}=yield function yi(_,c){return X.apply(this,arguments)}(c,d);v.updateTokensAndExpiration(x,z,Number(fe))})()}updateTokensAndExpiration(c,d,v){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(c,d){const{refreshToken:v,accessToken:x,expirationTime:z}=d,fe=new Z;return v&&(Je("string"==typeof v,"internal-error",{appName:c}),fe.refreshToken=v),x&&(Je("string"==typeof x,"internal-error",{appName:c}),fe.accessToken=x),z&&(Je("number"==typeof z,"internal-error",{appName:c}),fe.expirationTime=z),fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function re(_,c){Je("string"==typeof _||typeof _>"u","internal-error",{appName:c})}class et{constructor(c){var{uid:d,auth:v,stsTokenManager:x}=c,z=(0,_e.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=v,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=z.displayName||null,this.email=z.email||null,this.emailVerified=z.emailVerified||!1,this.phoneNumber=z.phoneNumber||null,this.photoURL=z.photoURL||null,this.isAnonymous=z.isAnonymous||!1,this.tenantId=z.tenantId||null,this.providerData=z.providerData?[...z.providerData]:[],this.metadata=new Kn(z.createdAt||void 0,z.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,g.A)(function*(){const v=yield Et(d,d.stsTokenManager.getToken(d.auth,c));return Je(v,d.auth,"internal-error"),d.accessToken!==v&&(d.accessToken=v,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),v})()}getIdTokenResult(c){return function Qi(_){return mt.apply(this,arguments)}(this,c)}reload(){return function _i(_){return Dr.apply(this,arguments)}(this)}_assign(c){this!==c&&(Je(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new et(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var v=this;return(0,g.A)(function*(){let x=!1;c.idToken&&c.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(c),x=!0),d&&(yield bt(v)),yield v.auth._persistUserIfCurrent(v),x&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var c=this;return(0,g.A)(function*(){if((0,R._isFirebaseServerApp)(c.auth.app))return Promise.reject(nt(c.auth));const d=yield c.getIdToken();return yield Et(c,function on(_,c){return We.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var v,x,z,fe,Ne,st,Ut,Ht;const Qt=null!==(v=d.displayName)&&void 0!==v?v:void 0,Jr=null!==(x=d.email)&&void 0!==x?x:void 0,Ms=null!==(z=d.phoneNumber)&&void 0!==z?z:void 0,Iu=null!==(fe=d.photoURL)&&void 0!==fe?fe:void 0,$o=null!==(Ne=d.tenantId)&&void 0!==Ne?Ne:void 0,gl=null!==(st=d._redirectEventId)&&void 0!==st?st:void 0,uc=null!==(Ut=d.createdAt)&&void 0!==Ut?Ut:void 0,$f=null!==(Ht=d.lastLoginAt)&&void 0!==Ht?Ht:void 0,{uid:Hf,emailVerified:wu,isAnonymous:gd,providerData:lc,stsTokenManager:cc}=d;Je(Hf&&cc,c,"internal-error");const Gf=Z.fromJSON(this.name,cc);Je("string"==typeof Hf,c,"internal-error"),re(Qt,c.name),re(Jr,c.name),Je("boolean"==typeof wu,c,"internal-error"),Je("boolean"==typeof gd,c,"internal-error"),re(Ms,c.name),re(Iu,c.name),re($o,c.name),re(gl,c.name),re(uc,c.name),re($f,c.name);const ml=new et({uid:Hf,auth:c,email:Jr,emailVerified:wu,displayName:Qt,isAnonymous:gd,photoURL:Iu,phoneNumber:Ms,tenantId:$o,stsTokenManager:Gf,createdAt:uc,lastLoginAt:$f});return lc&&Array.isArray(lc)&&(ml.providerData=lc.map(zf=>Object.assign({},zf))),gl&&(ml._redirectEventId=gl),ml}static _fromIdTokenResponse(c,d,v=!1){return(0,g.A)(function*(){const x=new Z;x.updateFromServerResponse(d);const z=new et({uid:d.localId,auth:c,stsTokenManager:x,isAnonymous:v});return yield bt(z),z})()}static _fromGetAccountInfoResponse(c,d,v){return(0,g.A)(function*(){const x=d.users[0];Je(void 0!==x.localId,"internal-error");const z=void 0!==x.providerUserInfo?Tr(x.providerUserInfo):[],fe=!(x.email&&x.passwordHash||z?.length),Ne=new Z;Ne.updateFromIdToken(v);const st=new et({uid:x.localId,auth:c,stsTokenManager:Ne,isAnonymous:fe}),Ut={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:z,metadata:new Kn(x.createdAt,x.lastLoginAt),isAnonymous:!(x.email&&x.passwordHash||z?.length)};return Object.assign(st,Ut),st})()}}const Ct=new Map;function Pt(_){cn(_ instanceof Function,"Expected a class definition");let c=Ct.get(_);return c?(cn(c instanceof _,"Instance stored in cache mismatched with class"),c):(c=new _,Ct.set(_,c),c)}const he=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.A)(function*(){return!0})()}_set(d,v){var x=this;return(0,g.A)(function*(){x.storage[d]=v})()}_get(d){var v=this;return(0,g.A)(function*(){const x=v.storage[d];return void 0===x?null:x})()}_remove(d){var v=this;return(0,g.A)(function*(){delete v.storage[d]})()}_addListener(d,v){}_removeListener(d,v){}}return _.type="NONE",_})();function Hn(_,c,d){return`firebase:${_}:${c}:${d}`}class tn{constructor(c,d,v){this.persistence=c,this.auth=d,this.userKey=v;const{config:x,name:z}=this.auth;this.fullUserKey=Hn(this.userKey,x.apiKey,z),this.fullPersistenceKey=Hn("persistence",x.apiKey,z),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,g.A)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?et._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,g.A)(function*(){if(d.persistence===c)return;const v=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,v?d.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,v="authUser"){return(0,g.A)(function*(){if(!d.length)return new tn(Pt(he),c,v);const x=(yield Promise.all(d.map(function(){var Ut=(0,g.A)(function*(Ht){if(yield Ht._isAvailable())return Ht});return function(Ht){return Ut.apply(this,arguments)}}()))).filter(Ut=>Ut);let z=x[0]||Pt(he);const fe=Hn(v,c.config.apiKey,c.name);let Ne=null;for(const Ut of d)try{const Ht=yield Ut._get(fe);if(Ht){const Qt=et._fromJSON(c,Ht);Ut!==z&&(Ne=Qt),z=Ut;break}}catch{}const st=x.filter(Ut=>Ut._shouldAllowMigration);return z._shouldAllowMigration&&st.length?(z=st[0],Ne&&(yield z._set(fe,Ne.toJSON())),yield Promise.all(d.map(function(){var Ut=(0,g.A)(function*(Ht){if(Ht!==z)try{yield Ht._remove(fe)}catch{}});return function(Ht){return Ut.apply(this,arguments)}}())),new tn(z,c,v)):new tn(z,c,v)})()}}function ir(_){const c=_.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Or(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(vi(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Ri(c))return"Blackberry";if(yr(c))return"Webos";if(Ei(c))return"Safari";if((c.includes("chrome/")||ni(c))&&!c.includes("edge/"))return"Chrome";if(Pr(c))return"Android";{const v=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function vi(_=(0,J.ZQ)()){return/firefox\//i.test(_)}function Ei(_=(0,J.ZQ)()){const c=_.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function ni(_=(0,J.ZQ)()){return/crios\//i.test(_)}function Or(_=(0,J.ZQ)()){return/iemobile/i.test(_)}function Pr(_=(0,J.ZQ)()){return/android/i.test(_)}function Ri(_=(0,J.ZQ)()){return/blackberry/i.test(_)}function yr(_=(0,J.ZQ)()){return/webos/i.test(_)}function yn(_=(0,J.ZQ)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Nt(_=(0,J.ZQ)()){return yn(_)||Pr(_)||yr(_)||Ri(_)||/windows phone/i.test(_)||Or(_)}function Yt(_,c=[]){let d;switch(_){case"Browser":d=ir((0,J.ZQ)());break;case"Worker":d=`${ir((0,J.ZQ)())}-${_}`;break;default:d=_}const v=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${R.SDK_VERSION}/${v}`}class Wt{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const v=z=>new Promise((fe,Ne)=>{try{fe(c(z))}catch(st){Ne(st)}});v.onAbort=d,this.queue.push(v);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,g.A)(function*(){if(d.auth.currentUser===c)return;const v=[];try{for(const x of d.queue)yield x(c),x.onAbort&&v.push(x.onAbort)}catch(x){v.reverse();for(const z of v)try{z()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}function rr(){return(rr=(0,g.A)(function*(_,c={}){return se(_,"GET","/v2/passwordPolicy",xe(_,c))})).apply(this,arguments)}class ri{constructor(c){var d,v,x,z;const fe=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=fe.minPasswordLength)&&void 0!==d?d:6,fe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=fe.maxPasswordLength),void 0!==fe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=fe.containsLowercaseCharacter),void 0!==fe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=fe.containsUppercaseCharacter),void 0!==fe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=fe.containsNumericCharacter),void 0!==fe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=fe.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(x=null===(v=c.allowedNonAlphanumericCharacters)||void 0===v?void 0:v.join(""))&&void 0!==x?x:"",this.forceUpgradeOnSignin=null!==(z=c.forceUpgradeOnSignin)&&void 0!==z&&z,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,v,x,z,fe,Ne;const st={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,st),this.validatePasswordCharacterOptions(c,st),st.isValid&&(st.isValid=null===(d=st.meetsMinPasswordLength)||void 0===d||d),st.isValid&&(st.isValid=null===(v=st.meetsMaxPasswordLength)||void 0===v||v),st.isValid&&(st.isValid=null===(x=st.containsLowercaseLetter)||void 0===x||x),st.isValid&&(st.isValid=null===(z=st.containsUppercaseLetter)||void 0===z||z),st.isValid&&(st.isValid=null===(fe=st.containsNumericCharacter)||void 0===fe||fe),st.isValid&&(st.isValid=null===(Ne=st.containsNonAlphanumericCharacter)||void 0===Ne||Ne),st}validatePasswordLengthOptions(c,d){const v=this.customStrengthOptions.minPasswordLength,x=this.customStrengthOptions.maxPasswordLength;v&&(d.meetsMinPasswordLength=c.length>=v),x&&(d.meetsMaxPasswordLength=c.length<=x)}validatePasswordCharacterOptions(c,d){let v;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let x=0;x<c.length;x++)v=c.charAt(x),this.updatePasswordCharacterOptionsStatuses(d,v>="a"&&v<="z",v>="A"&&v<="Z",v>="0"&&v<="9",this.allowedNonAlphanumericCharacters.includes(v))}updatePasswordCharacterOptionsStatuses(c,d,v,x,z){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=v)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=x)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=z))}}class Yi{constructor(c,d,v,x){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=v,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new io(this),this.idTokenSubscription=new io(this),this.beforeStateQueue=new Wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(c,d){var v=this;return d&&(this._popupRedirectResolver=Pt(d)),this._initializationPromise=this.queue((0,g.A)(function*(){var x,z;if(!v._deleted&&(v.persistenceManager=yield tn.create(v,c),!v._deleted)){if(null!==(x=v._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(d),v.lastNotifiedUid=(null===(z=v.currentUser)||void 0===z?void 0:z.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,g.A)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(c){var d=this;return(0,g.A)(function*(){try{const v=yield rn(d,{idToken:c}),x=yield et._fromGetAccountInfoResponse(d,v,c);yield d.directlySetCurrentUser(x)}catch(v){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",v),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var d=this;return(0,g.A)(function*(){var v;if((0,R._isFirebaseServerApp)(d.app)){const Ne=d.app.settings.authIdToken;return Ne?new Promise(st=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(Ne).then(st,st))}):d.directlySetCurrentUser(null)}const x=yield d.assertedPersistence.getCurrentUser();let z=x,fe=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const Ne=null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId,st=z?._redirectEventId,Ut=yield d.tryRedirectSignIn(c);(!Ne||Ne===st)&&Ut?.user&&(z=Ut.user,fe=!0)}if(!z)return d.directlySetCurrentUser(null);if(!z._redirectEventId){if(fe)try{yield d.beforeStateQueue.runMiddleware(z)}catch(Ne){z=x,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(Ne))}return z?d.reloadAndSetCurrentUserOrClear(z):d.directlySetCurrentUser(null)}return Je(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===z._redirectEventId?d.directlySetCurrentUser(z):d.reloadAndSetCurrentUserOrClear(z)})()}tryRedirectSignIn(c){var d=this;return(0,g.A)(function*(){let v=null;try{v=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,g.A)(function*(){try{yield bt(c)}catch(v){if("auth/network-request-failed"!==v?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Vt(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var c=this;return(0,g.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,g.A)(function*(){if((0,R._isFirebaseServerApp)(d.app))return Promise.reject(nt(d));const v=c?(0,J.Ku)(c):null;return v&&Je(v.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(v&&v._clone(d))})()}_updateCurrentUser(c,d=!1){var v=this;return(0,g.A)(function*(){if(!v._deleted)return c&&Je(v.tenantId===c.tenantId,v,"tenant-id-mismatch"),d||(yield v.beforeStateQueue.runMiddleware(c)),v.queue((0,g.A)(function*(){yield v.directlySetCurrentUser(c),v.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,g.A)(function*(){return(0,R._isFirebaseServerApp)(c.app)?Promise.reject(nt(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var d=this;return(0,R._isFirebaseServerApp)(this.app)?Promise.reject(nt(this)):this.queue((0,g.A)(function*(){yield d.assertedPersistence.setPersistence(Pt(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,g.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const v=d._getPasswordPolicyInternal();return v.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):v.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,g.A)(function*(){const d=yield function Tn(_){return rr.apply(this,arguments)}(c),v=new ri(d);null===c.tenantId?c._projectPasswordPolicy=v:c._tenantPasswordPolicies[c.tenantId]=v})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new J.FA("auth","Firebase",c())}onAuthStateChanged(c,d,v){return this.registerStateListener(this.authStateSubscription,c,d,v)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,v){return this.registerStateListener(this.idTokenSubscription,c,d,v)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const v=this.onAuthStateChanged(()=>{v(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,g.A)(function*(){if(d.currentUser){const v=yield d.currentUser.getIdToken(),x={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:v};null!=d.tenantId&&(x.tenantId=d.tenantId),yield function W(_,c){return G.apply(this,arguments)}(d,x)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var v=this;return(0,g.A)(function*(){const x=yield v.getOrInitRedirectPersistenceManager(d);return null===c?x.removeCurrentUser():x.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,g.A)(function*(){if(!d.redirectPersistenceManager){const v=c&&Pt(c)||d._popupRedirectResolver;Je(v,d,"argument-error"),d.redirectPersistenceManager=yield tn.create(d,[Pt(v._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,g.A)(function*(){var v,x;return d._isInitialized&&(yield d.queue((0,g.A)(function*(){}))),(null===(v=d._currentUser)||void 0===v?void 0:v._redirectEventId)===c?d._currentUser:(null===(x=d.redirectUser)||void 0===x?void 0:x._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,g.A)(function*(){if(c===d.currentUser)return d.queue((0,g.A)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,v,x){if(this._deleted)return()=>{};const z="function"==typeof d?d:d.next.bind(d);let fe=!1;const Ne=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(Ne,this,"internal-error"),Ne.then(()=>{fe||z(this.currentUser)}),"function"==typeof d){const st=c.addObserver(d,v,x);return()=>{fe=!0,st()}}{const st=c.addObserver(d);return()=>{fe=!0,st()}}}directlySetCurrentUser(c){var d=this;return(0,g.A)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Yt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,g.A)(function*(){var d;const v={"X-Client-Version":c.clientVersion};c.app.options.appId&&(v["X-Firebase-gmpid"]=c.app.options.appId);const x=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();x&&(v["X-Firebase-Client"]=x);const z=yield c._getAppCheckToken();return z&&(v["X-Firebase-AppCheck"]=z),v})()}_getAppCheckToken(){var c=this;return(0,g.A)(function*(){var d;const v=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return v?.error&&function Ce(_,...c){qt.logLevel<=F.$b.WARN&&qt.warn(`Auth (${R.SDK_VERSION}): ${_}`,...c)}(`Error while retrieving App Check token: ${v.error}`),v?.token})()}}function Gn(_){return(0,J.Ku)(_)}class io{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,J.tD)(d=>this.observer=d)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xi={loadJS:()=>(0,g.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zs(_){return Xi.loadJS(_)}function Es(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Mi{constructor(c){this.type="recaptcha-enterprise",this.auth=Gn(c)}verify(c="verify",d=!1){var v=this;return(0,g.A)(function*(){function z(){return z=(0,g.A)(function*(Ne){if(!d){if(null==Ne.tenantId&&null!=Ne._agentRecaptchaConfig)return Ne._agentRecaptchaConfig.siteKey;if(null!=Ne.tenantId&&void 0!==Ne._tenantRecaptchaConfigs[Ne.tenantId])return Ne._tenantRecaptchaConfigs[Ne.tenantId].siteKey}return new Promise(function(){var st=(0,g.A)(function*(Ut,Ht){Nr(Ne,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Qt=>{if(void 0!==Qt.recaptchaKey){const Jr=new Le(Qt);return null==Ne.tenantId?Ne._agentRecaptchaConfig=Jr:Ne._tenantRecaptchaConfigs[Ne.tenantId]=Jr,Ut(Jr.siteKey)}Ht(new Error("recaptcha Enterprise site key undefined"))}).catch(Qt=>{Ht(Qt)})});return function(Ut,Ht){return st.apply(this,arguments)}}())}),z.apply(this,arguments)}function fe(Ne,st,Ut){const Ht=window.grecaptcha;ut(Ht)?Ht.enterprise.ready(()=>{Ht.enterprise.execute(Ne,{action:c}).then(Qt=>{st(Qt)}).catch(()=>{st("NO_RECAPTCHA")})}):Ut(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ne,st)=>{(function x(Ne){return z.apply(this,arguments)})(v.auth).then(Ut=>{if(!d&&ut(window.grecaptcha))fe(Ut,Ne,st);else{if(typeof window>"u")return void st(new Error("RecaptchaVerifier is only supported in browser"));let Ht=function Do(){return Xi.recaptchaEnterpriseScript}();0!==Ht.length&&(Ht+=Ut),zs(Ht).then(()=>{fe(Ut,Ne,st)}).catch(Qt=>{st(Qt)})}}).catch(Ut=>{st(Ut)})})})()}}function Co(_,c,d){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.A)(function*(_,c,d,v=!1){const x=new Mi(_);let z;try{z=yield x.verify(d)}catch{z=yield x.verify(d,!0)}const fe=Object.assign({},c);return Object.assign(fe,v?{captchaResp:z}:{captchaResponse:z}),Object.assign(fe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(fe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),fe})).apply(this,arguments)}function is(_,c,d,v){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,g.A)(function*(_,c,d,v){var x;if(null!==(x=_._getRecaptchaConfig())&&void 0!==x&&x.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const z=yield Co(_,c,d,"getOobCode"===d);return v(_,z)}return v(_,c).catch(function(){var z=(0,g.A)(function*(fe){if("auth/missing-recaptcha-token"===fe.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ne=yield Co(_,c,d,"getOobCode"===d);return v(_,Ne)}return Promise.reject(fe)});return function(fe){return z.apply(this,arguments)}}())}),Ea.apply(this,arguments)}function Da(_){const c=_.indexOf(":");return c<0?"":_.substr(0,c+1)}function oo(_){if(!_)return null;const c=Number(_);return isNaN(c)?null:c}class Is{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return Zt("not implemented")}_getIdTokenResponse(c){return Zt("not implemented")}_linkToIdToken(c,d){return Zt("not implemented")}_getReauthenticationResolver(c){return Zt("not implemented")}}function Ii(_,c){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:resetPassword",xe(_,c))})).apply(this,arguments)}function An(){return(An=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ss(_,c){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function os(){return(os=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:update",xe(_,c))})).apply(this,arguments)}function wi(_,c){return vr.apply(this,arguments)}function vr(){return(vr=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithPassword",xe(_,c))})).apply(this,arguments)}function Ni(_,c){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:sendOobCode",xe(_,c))})).apply(this,arguments)}function fn(){return(fn=(0,g.A)(function*(_,c){return Ni(_,c)})).apply(this,arguments)}function Cn(_,c){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,g.A)(function*(_,c){return Ni(_,c)})).apply(this,arguments)}function ui(_,c){return Er.apply(this,arguments)}function Er(){return(Er=(0,g.A)(function*(_,c){return Ni(_,c)})).apply(this,arguments)}function qn(){return(qn=(0,g.A)(function*(_,c){return Ni(_,c)})).apply(this,arguments)}function Hr(){return(Hr=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithEmailLink",xe(_,c))})).apply(this,arguments)}function li(){return(li=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithEmailLink",xe(_,c))})).apply(this,arguments)}class ci extends Is{constructor(c,d,v,x=null){super("password",v),this._email=c,this._password=d,this._tenantId=x}static _fromEmailAndPassword(c,d){return new ci(c,d,"password")}static _fromEmailAndCode(c,d,v=null){return new ci(c,d,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,g.A)(function*(){switch(d.signInMethod){case"password":return is(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",wi);case"emailLink":return function as(_,c){return Hr.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:tt(c,"internal-error")}})()}_linkToIdToken(c,d){var v=this;return(0,g.A)(function*(){switch(v.signInMethod){case"password":return is(c,{idToken:d,returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ss);case"emailLink":return function sn(_,c){return li.apply(this,arguments)}(c,{idToken:d,email:v._email,oobCode:v._password});default:tt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function pr(_,c){return sr.apply(this,arguments)}function sr(){return(sr=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithIdp",xe(_,c))})).apply(this,arguments)}class Fr extends Is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Fr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):tt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:x}=d,z=(0,_e.Tt)(d,["providerId","signInMethod"]);if(!v||!x)return null;const fe=new Fr(v,x);return fe.idToken=z.idToken||void 0,fe.accessToken=z.accessToken||void 0,fe.secret=z.secret,fe.nonce=z.nonce,fe.pendingToken=z.pendingToken||null,fe}_getIdTokenResponse(c){return pr(c,this.buildRequest())}_linkToIdToken(c,d){const v=this.buildRequest();return v.idToken=d,pr(c,v)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,pr(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,J.Am)(d)}return c}}function Di(){return(Di=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:sendVerificationCode",xe(_,c))})).apply(this,arguments)}function ii(){return(ii=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",xe(_,c))})).apply(this,arguments)}function $i(){return($i=(0,g.A)(function*(_,c){const d=yield Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",xe(_,c));if(d.temporaryProof)throw It(_,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Zi={USER_NOT_FOUND:"user-not-found"};function So(){return(So=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",xe(_,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Zi)})).apply(this,arguments)}class Hi extends Is{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Hi({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Hi({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Ws(_,c){return ii.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Rr(_,c){return $i.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function xn(_,c){return So.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:v,verificationCode:x}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:v,code:x}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:v,phoneNumber:x,temporaryProof:z}=c;return v||d||x||z?new Hi({verificationId:d,verificationCode:v,phoneNumber:x,temporaryProof:z}):null}}class ws{constructor(c){var d,v,x,z,fe,Ne;const st=(0,J.I9)((0,J.hp)(c)),Ut=null!==(d=st.apiKey)&&void 0!==d?d:null,Ht=null!==(v=st.oobCode)&&void 0!==v?v:null,Qt=function Fs(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=st.mode)&&void 0!==x?x:null);Je(Ut&&Ht&&Qt,"argument-error"),this.apiKey=Ut,this.operation=Qt,this.code=Ht,this.continueUrl=null!==(z=st.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(fe=st.languageCode)&&void 0!==fe?fe:null,this.tenantId=null!==(Ne=st.tenantId)&&void 0!==Ne?Ne:null}static parseLink(c){const d=function si(_){const c=(0,J.I9)((0,J.hp)(_)).link,d=c?(0,J.I9)((0,J.hp)(c)).deep_link_id:null,v=(0,J.I9)((0,J.hp)(_)).deep_link_id;return(v?(0,J.I9)((0,J.hp)(v)).link:null)||v||d||c||_}(c);try{return new ws(d)}catch{return null}}}let Vs=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(d,v){return ci._fromEmailAndPassword(d,v)}static credentialWithLink(d,v){const x=ws.parseLink(v);return Je(x,"argument-error"),ci._fromEmailAndCode(d,x.code,x.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Ir{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class qs extends Ir{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Cr extends qs{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return Je("providerId"in d&&"signInMethod"in d,"argument-error"),Fr._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Je(c.idToken||c.accessToken,"argument-error"),Fr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Cr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Cr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:v,oauthTokenSecret:x,pendingToken:z,nonce:fe,providerId:Ne}=c;if(!v&&!x&&!d&&!z||!Ne)return null;try{return new Cr(Ne)._credential({idToken:d,accessToken:v,nonce:fe,pendingToken:z})}catch{return null}}}let vn=(()=>{class _ extends qs{constructor(){super("facebook.com")}static credential(d){return Fr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return _.credentialFromTaggedObject(d)}static credentialFromError(d){return _.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return _.credential(d.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ao=(()=>{class _ extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(d,v){return Fr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:v})}static credentialFromResult(d){return _.credentialFromTaggedObject(d)}static credentialFromError(d){return _.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:v,oauthAccessToken:x}=d;if(!v&&!x)return null;try{return _.credential(v,x)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),jn=(()=>{class _ extends qs{constructor(){super("github.com")}static credential(d){return Fr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return _.credentialFromTaggedObject(d)}static credentialFromError(d){return _.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return _.credential(d.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ei extends Is{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return pr(c,this.buildRequest())}_linkToIdToken(c,d){const v=this.buildRequest();return v.idToken=d,pr(c,v)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,pr(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:v,signInMethod:x,pendingToken:z}=d;return v&&x&&z&&v===x?new ei(v,z):null}static _create(c,d){return new ei(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class es extends Ir{constructor(c){Je(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return es.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return es.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=ei.fromJSON(c);return Je(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:v}=c;if(!d||!v)return null;try{return ei._create(v,d)}catch{return null}}}let Ro=(()=>{class _ extends qs{constructor(){super("twitter.com")}static credential(d,v){return Fr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:v})}static credentialFromResult(d){return _.credentialFromTaggedObject(d)}static credentialFromError(d){return _.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:v,oauthTokenSecret:x}=d;if(!v||!x)return null;try{return _.credential(v,x)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Fu(_,c){return On.apply(this,arguments)}function On(){return(On=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signUp",xe(_,c))})).apply(this,arguments)}class _n{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,v,x=!1){return(0,g.A)(function*(){const z=yield et._fromIdTokenResponse(c,v,x),fe=us(v);return new _n({user:z,providerId:fe,_tokenResponse:v,operationType:d})})()}static _forOperation(c,d,v){return(0,g.A)(function*(){yield c._updateTokensIfNecessary(v,!0);const x=us(v);return new _n({user:c,providerId:x,_tokenResponse:v,operationType:d})})()}}function us(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Ta(){return(Ta=(0,g.A)(function*(_){var c;if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const d=Gn(_);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new _n({user:d.currentUser,providerId:null,operationType:"signIn"});const v=yield Fu(d,{returnSecureToken:!0}),x=yield _n._fromIdTokenResponse(d,"signIn",v,!0);return yield d._updateCurrentUser(x.user),x})).apply(this,arguments)}class or extends J.g{constructor(c,d,v,x){var z;super(d.code,d.message),this.operationType=v,this.user=x,Object.setPrototypeOf(this,or.prototype),this.customData={appName:c.name,tenantId:null!==(z=c.tenantId)&&void 0!==z?z:void 0,_serverResponse:d.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(c,d,v,x){return new or(c,d,v,x)}}function Qs(_,c,d,v){return("reauthenticate"===c?d._getReauthenticationResolver(_):d._getIdTokenResponse(_)).catch(z=>{throw"auth/multi-factor-auth-required"===z.code?or._fromErrorAndOperation(_,z,c,v):z})}function qa(_){return new Set(_.map(({providerId:c})=>c).filter(c=>!!c))}function $(){return $=(0,g.A)(function*(_,c){const d=(0,J.Ku)(_);yield me(!0,d,c);const{providerUserInfo:v}=yield function Mt(_,c){return ot.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),x=qa(v||[]);return d.providerData=d.providerData.filter(z=>x.has(z.providerId)),x.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),$.apply(this,arguments)}function M(_,c){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.A)(function*(_,c,d=!1){const v=yield Et(_,c._linkToIdToken(_.auth,yield _.getIdToken()),d);return _n._forOperation(_,"link",v)})).apply(this,arguments)}function me(_,c,d){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,g.A)(function*(_,c,d){yield bt(c);const x=!1===_?"provider-already-linked":"no-such-provider";Je(qa(c.providerData).has(d)===_,c.auth,x)})).apply(this,arguments)}function pn(_,c){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.A)(function*(_,c,d=!1){const{auth:v}=_;if((0,R._isFirebaseServerApp)(v.app))return Promise.reject(nt(v));const x="reauthenticate";try{const z=yield Et(_,Qs(v,x,c,_),d);Je(z.idToken,v,"internal-error");const fe=Pn(z.idToken);Je(fe,v,"internal-error");const{sub:Ne}=fe;return Je(_.uid===Ne,v,"user-mismatch"),_n._forOperation(_,x,z)}catch(z){throw"auth/user-not-found"===z?.code&&tt(v,"user-mismatch"),z}})).apply(this,arguments)}function ls(_,c){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.A)(function*(_,c,d=!1){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const v="signIn",x=yield Qs(_,v,c),z=yield _n._fromIdTokenResponse(_,v,x);return d||(yield _._updateCurrentUser(z.user)),z})).apply(this,arguments)}function Ys(_,c){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.A)(function*(_,c){return ls(Gn(_),c)})).apply(this,arguments)}function Xr(_,c){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,g.A)(function*(_,c){const d=(0,J.Ku)(_);return yield me(!1,d,c.providerId),M(d,c)})).apply(this,arguments)}function Qa(_,c){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.A)(function*(_,c){return pn((0,J.Ku)(_),c)})).apply(this,arguments)}function di(){return(di=(0,g.A)(function*(_,c){return Ke(_,"POST","/v1/accounts:signInWithCustomToken",xe(_,c))})).apply(this,arguments)}function ea(){return ea=(0,g.A)(function*(_,c){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const d=Gn(_),v=yield function Po(_,c){return di.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),x=yield _n._fromIdTokenResponse(d,"signIn",v);return yield d._updateCurrentUser(x.user),x}),ea.apply(this,arguments)}class cs{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Us._fromServerResponse(c,d):"totpInfo"in d?uo._fromServerResponse(c,d):tt(c,"internal-error")}}class Us extends cs{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Us(d)}}class uo extends cs{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new uo(d)}}function xi(_,c,d){var v;Je((null===(v=d.url)||void 0===v?void 0:v.length)>0,_,"invalid-continue-uri"),Je(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(Je(d.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(Je(d.android.packageName.length>0,_,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Gr(_){return ta.apply(this,arguments)}function ta(){return(ta=(0,g.A)(function*(_){const c=Gn(_);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function na(){return(na=(0,g.A)(function*(_,c,d){const v=Gn(_),x={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&xi(v,x,d),yield is(v,x,"getOobCode",Cn)})).apply(this,arguments)}function Bs(){return Bs=(0,g.A)(function*(_,c,d){yield Ii((0,J.Ku)(_),{oobCode:c,newPassword:d}).catch(function(){var v=(0,g.A)(function*(x){throw"auth/password-does-not-meet-requirements"===x.code&&Gr(_),x});return function(x){return v.apply(this,arguments)}}())}),Bs.apply(this,arguments)}function Gi(){return Gi=(0,g.A)(function*(_,c){yield function er(_,c){return os.apply(this,arguments)}((0,J.Ku)(_),{oobCode:c})}),Gi.apply(this,arguments)}function lo(_,c){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.A)(function*(_,c){const d=(0,J.Ku)(_),v=yield Ii(d,{oobCode:c}),x=v.requestType;switch(Je(x,d,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Je(v.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Je(v.mfaInfo,d,"internal-error");default:Je(v.email,d,"internal-error")}let z=null;return v.mfaInfo&&(z=cs._fromServerResponse(Gn(d),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:z},operation:x}})).apply(this,arguments)}function xl(){return(xl=(0,g.A)(function*(_,c){const{data:d}=yield lo((0,J.Ku)(_),c);return d.email})).apply(this,arguments)}function Uu(){return(Uu=(0,g.A)(function*(_,c,d){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const v=Gn(_),fe=yield is(v,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fu).catch(st=>{throw"auth/password-does-not-meet-requirements"===st.code&&Gr(_),st}),Ne=yield _n._fromIdTokenResponse(v,"signIn",fe);return yield v._updateCurrentUser(Ne.user),Ne})).apply(this,arguments)}function Js(){return(Js=(0,g.A)(function*(_,c,d){const v=Gn(_),x={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function z(fe,Ne){Je(Ne.handleCodeInApp,v,"argument-error"),Ne&&xi(v,fe,Ne)})(x,d),yield is(v,x,"getOobCode",ui)})).apply(this,arguments)}function Xa(){return(Xa=(0,g.A)(function*(_,c,d){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const v=(0,J.Ku)(_),x=Vs.credentialWithLink(c,d||an());return Je(x._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Ys(v,x)})).apply(this,arguments)}function Ja(){return(Ja=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:createAuthUri",xe(_,c))})).apply(this,arguments)}function H(){return H=(0,g.A)(function*(_,c){const v={identifier:c,continueUri:Wn()?an():"http://localhost"},{signinMethods:x}=yield function No(_,c){return Ja.apply(this,arguments)}((0,J.Ku)(_),v);return x||[]}),H.apply(this,arguments)}function j(){return j=(0,g.A)(function*(_,c){const d=(0,J.Ku)(_),x={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};c&&xi(d.auth,x,c);const{email:z}=yield function Dt(_,c){return fn.apply(this,arguments)}(d.auth,x);z!==_.email&&(yield _.reload())}),j.apply(this,arguments)}function Ye(){return Ye=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_),z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:c};d&&xi(v.auth,z,d);const{email:fe}=yield function Ji(_,c){return qn.apply(this,arguments)}(v.auth,z);fe!==_.email&&(yield _.reload())}),Ye.apply(this,arguments)}function Kt(){return(Kt=(0,g.A)(function*(_,c){return se(_,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Xn(){return Xn=(0,g.A)(function*(_,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const v=(0,J.Ku)(_),z={idToken:yield v.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},fe=yield Et(v,function dt(_,c){return Kt.apply(this,arguments)}(v.auth,z));v.displayName=fe.displayName||null,v.photoURL=fe.photoUrl||null;const Ne=v.providerData.find(({providerId:st})=>"password"===st);Ne&&(Ne.displayName=v.displayName,Ne.photoURL=v.photoURL),yield v._updateTokensIfNecessary(fe)}),Xn.apply(this,arguments)}function cr(_,c,d){return ar.apply(this,arguments)}function ar(){return ar=(0,g.A)(function*(_,c,d){const{auth:v}=_,z={idToken:yield _.getIdToken(),returnSecureToken:!0};c&&(z.email=c),d&&(z.password=d);const fe=yield Et(_,function kr(_,c){return An.apply(this,arguments)}(v,z));yield _._updateTokensIfNecessary(fe,!0)}),ar.apply(this,arguments)}class hi{constructor(c,d,v={}){this.isNewUser=c,this.providerId=d,this.profile=v}}class oi extends hi{constructor(c,d,v,x){super(c,d,v),this.username=x}}class co extends hi{constructor(c,d){super(c,"facebook.com",d)}}class Oi extends oi{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class fs extends hi{constructor(c,d){super(c,"google.com",d)}}class fi extends oi{constructor(c,d,v){super(c,"twitter.com",d,v)}}function Ts(_){const{user:c,_tokenResponse:d}=_;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function gr(_){var c,d;if(!_)return null;const{providerId:v}=_,x=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},z=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!v&&_?.idToken){const fe=null===(d=null===(c=Pn(_.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(fe)return new hi(z,"anonymous"!==fe&&"custom"!==fe?fe:null)}if(!v)return null;switch(v){case"facebook.com":return new co(z,x);case"github.com":return new Oi(z,x);case"google.com":return new fs(z,x);case"twitter.com":return new fi(z,x,_.screenName||null);case"custom":case"anonymous":return new hi(z,null);default:return new hi(z,v,x)}}(d)}class ps{constructor(c,d,v){this.type=c,this.credential=d,this.user=v}static _fromIdtoken(c,d){return new ps("enroll",c,d)}static _fromMfaPendingCredential(c){return new ps("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,v;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ps._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(v=c.multiFactorSession)&&void 0!==v&&v.idToken)return ps._fromIdtoken(c.multiFactorSession.idToken)}return null}}class ba{constructor(c,d,v){this.session=c,this.hints=d,this.signInResolver=v}static _fromError(c,d){const v=Gn(c),x=d.customData._serverResponse,z=(x.mfaInfo||[]).map(Ne=>cs._fromServerResponse(v,Ne));Je(x.mfaPendingCredential,v,"internal-error");const fe=ps._fromMfaPendingCredential(x.mfaPendingCredential);return new ba(fe,z,function(){var Ne=(0,g.A)(function*(st){const Ut=yield st._process(v,fe);delete x.mfaInfo,delete x.mfaPendingCredential;const Ht=Object.assign(Object.assign({},x),{idToken:Ut.idToken,refreshToken:Ut.refreshToken});switch(d.operationType){case"signIn":const Qt=yield _n._fromIdTokenResponse(v,d.operationType,Ht);return yield v._updateCurrentUser(Qt.user),Qt;case"reauthenticate":return Je(d.user,v,"internal-error"),_n._forOperation(d.user,d.operationType,Ht);default:tt(v,"internal-error")}});return function(st){return Ne.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,g.A)(function*(){return d.signInResolver(c)})()}}class Qn{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(v=>cs._fromServerResponse(c.auth,v)))})}static _fromUser(c){return new Qn(c)}getSession(){var c=this;return(0,g.A)(function*(){return ps._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var v=this;return(0,g.A)(function*(){const x=c,z=yield v.getSession(),fe=yield Et(v.user,x._process(v.user.auth,z,d));return yield v.user._updateTokensIfNecessary(fe),v.user.reload()})()}unenroll(c){var d=this;return(0,g.A)(function*(){const v="string"==typeof c?c:c.uid,x=yield d.user.getIdToken();try{const z=yield Et(d.user,function ti(_,c){return se(_,"POST","/v2/accounts/mfaEnrollment:withdraw",xe(_,c))}(d.user.auth,{idToken:x,mfaEnrollmentId:v}));d.enrolledFactors=d.enrolledFactors.filter(({uid:fe})=>fe!==v),yield d.user._updateTokensIfNecessary(z),yield d.user.reload()}catch(z){throw z}})()}}const Cs=new WeakMap,Sa="__sak";class Ll{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ko=(()=>{class _ extends Ll{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,v)=>this.onStorageEvent(d,v),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const v of Object.keys(this.listeners)){const x=this.storage.getItem(v),z=this.localCache[v];x!==z&&d(v,z,x)}}onStorageEvent(d,v=!1){if(!d.key)return void this.forAllChangedKeys((Ne,st,Ut)=>{this.notifyListeners(Ne,Ut)});const x=d.key;v?this.detachListener():this.stopPolling();const z=()=>{const Ne=this.storage.getItem(x);!v&&this.localCache[x]===Ne||this.notifyListeners(x,Ne)},fe=this.storage.getItem(x);!function it(){return(0,J.lT)()&&10===document.documentMode}()||fe===d.newValue||d.newValue===d.oldValue?z():setTimeout(z,10)}notifyListeners(d,v){this.localCache[d]=v;const x=this.listeners[d];if(x)for(const z of Array.from(x))z(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,v,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:v,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(v)}_removeListener(d,v){this.listeners[d]&&(this.listeners[d].delete(v),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,v){var x=()=>super._set,z=this;return(0,g.A)(function*(){yield x().call(z,d,v),z.localCache[d]=JSON.stringify(v)})()}_get(d){var v=()=>super._get,x=this;return(0,g.A)(function*(){const z=yield v().call(x,d);return x.localCache[d]=JSON.stringify(z),z})()}_remove(d){var v=()=>super._remove,x=this;return(0,g.A)(function*(){yield v().call(x,d),delete x.localCache[d]})()}}return _.type="LOCAL",_})(),bs=(()=>{class _ extends Ll{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,v){}_removeListener(d,v){}}return _.type="SESSION",_})();let zn=(()=>{class _{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const v=this.receivers.find(z=>z.isListeningto(d));if(v)return v;const x=new _(d);return this.receivers.push(x),x}isListeningto(d){return this.eventTarget===d}handleEvent(d){var v=this;return(0,g.A)(function*(){const x=d,{eventId:z,eventType:fe,data:Ne}=x.data,st=v.handlersMap[fe];if(!st?.size)return;x.ports[0].postMessage({status:"ack",eventId:z,eventType:fe});const Ut=Array.from(st).map(function(){var Qt=(0,g.A)(function*(Jr){return Jr(x.origin,Ne)});return function(Jr){return Qt.apply(this,arguments)}}()),Ht=yield function ft(_){return Promise.all(_.map(function(){var c=(0,g.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(v){return{fulfilled:!1,reason:v}}});return function(d){return c.apply(this,arguments)}}()))}(Ut);x.ports[0].postMessage({status:"done",eventId:z,eventType:fe,response:Ht})})()}_subscribe(d,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(v)}_unsubscribe(d,v){this.handlersMap[d]&&v&&this.handlersMap[d].delete(v),(!v||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ra(_="",c=10){let d="";for(let v=0;v<c;v++)d+=Math.floor(10*Math.random());return _+d}class Vc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,v=50){var x=this;return(0,g.A)(function*(){const z=typeof MessageChannel<"u"?new MessageChannel:null;if(!z)throw new Error("connection_unavailable");let fe,Ne;return new Promise((st,Ut)=>{const Ht=ra("",20);z.port1.start();const Qt=setTimeout(()=>{Ut(new Error("unsupported_event"))},v);Ne={messageChannel:z,onMessage(Jr){const Ms=Jr;if(Ms.data.eventId===Ht)switch(Ms.data.status){case"ack":clearTimeout(Qt),fe=setTimeout(()=>{Ut(new Error("timeout"))},3e3);break;case"done":clearTimeout(fe),st(Ms.data.response);break;default:clearTimeout(Qt),clearTimeout(fe),Ut(new Error("invalid_response"))}}},x.handlers.add(Ne),z.port1.addEventListener("message",Ne.onMessage),x.target.postMessage({eventType:c,eventId:Ht,data:d},[z.port2])}).finally(()=>{Ne&&x.removeMessageHandler(Ne)})})()}}function Yn(){return window}function Fo(){return typeof Yn().WorkerGlobalScope<"u"&&"function"==typeof Yn().importScripts}function Ra(){return(Ra=(0,g.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rh="firebaseLocalStorageDb",Lr="firebaseLocalStorage",$s="fbase_key";class Pa{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function _r(_,c){return _.transaction([Lr],c?"readwrite":"readonly").objectStore(Lr)}function tu(){const _=indexedDB.open(rh,1);return new Promise((c,d)=>{_.addEventListener("error",()=>{d(_.error)}),_.addEventListener("upgradeneeded",()=>{const v=_.result;try{v.createObjectStore(Lr,{keyPath:$s})}catch(x){d(x)}}),_.addEventListener("success",(0,g.A)(function*(){const v=_.result;v.objectStoreNames.contains(Lr)?c(v):(v.close(),yield function Ss(){const _=indexedDB.deleteDatabase(rh);return new Pa(_).toPromise()}(),c(yield tu()))}))})}function jl(_,c,d){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.A)(function*(_,c,d){const v=_r(_,!0).put({[$s]:c,value:d});return new Pa(v).toPromise()})).apply(this,arguments)}function nu(){return(nu=(0,g.A)(function*(_,c){const d=_r(_,!1).get(c),v=yield new Pa(d).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function zu(_,c){const d=_r(_,!0).delete(c);return new Pa(d).toPromise()}const E=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,g.A)(function*(){return d.db||(d.db=yield tu()),d.db})()}_withRetries(d){var v=this;return(0,g.A)(function*(){let x=0;for(;;)try{const z=yield v._openDb();return yield d(z)}catch(z){if(x++>3)throw z;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,g.A)(function*(){return Fo()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,g.A)(function*(){d.receiver=zn._getInstance(function nh(){return Fo()?self:null}()),d.receiver._subscribe("keyChanged",function(){var v=(0,g.A)(function*(x,z){return{keyProcessed:(yield d._poll()).includes(z.key)}});return function(x,z){return v.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var v=(0,g.A)(function*(x,z){return["keyChanged"]});return function(x,z){return v.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,g.A)(function*(){var v,x;if(d.activeServiceWorker=yield function Zs(){return Ra.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Vc(d.activeServiceWorker);const z=yield d.sender._send("ping",{},800);z&&null!==(v=z[0])&&void 0!==v&&v.fulfilled&&null!==(x=z[0])&&void 0!==x&&x.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var v=this;return(0,g.A)(function*(){if(v.sender&&v.activeServiceWorker&&function Bl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:d},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.A)(function*(){try{if(!indexedDB)return!1;const d=yield tu();return yield jl(d,Sa,"1"),yield zu(d,Sa),!0}catch{}return!1})()}_withPendingWrite(d){var v=this;return(0,g.A)(function*(){v.pendingWrites++;try{yield d()}finally{v.pendingWrites--}})()}_set(d,v){var x=this;return(0,g.A)(function*(){return x._withPendingWrite((0,g.A)(function*(){return yield x._withRetries(z=>jl(z,d,v)),x.localCache[d]=v,x.notifyServiceWorker(d)}))})()}_get(d){var v=this;return(0,g.A)(function*(){const x=yield v._withRetries(z=>function fo(_,c){return nu.apply(this,arguments)}(z,d));return v.localCache[d]=x,x})()}_remove(d){var v=this;return(0,g.A)(function*(){return v._withPendingWrite((0,g.A)(function*(){return yield v._withRetries(x=>zu(x,d)),delete v.localCache[d],v.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,g.A)(function*(){const v=yield d._withRetries(fe=>{const Ne=_r(fe,!1).getAll();return new Pa(Ne).toPromise()});if(!v)return[];if(0!==d.pendingWrites)return[];const x=[],z=new Set;if(0!==v.length)for(const{fbase_key:fe,value:Ne}of v)z.add(fe),JSON.stringify(d.localCache[fe])!==JSON.stringify(Ne)&&(d.notifyListeners(fe,Ne),x.push(fe));for(const fe of Object.keys(d.localCache))d.localCache[fe]&&!z.has(fe)&&(d.notifyListeners(fe,null),x.push(fe));return x})()}notifyListeners(d,v){this.localCache[d]=v;const x=this.listeners[d];if(x)for(const z of Array.from(x))z(v)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,g.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(v)}_removeListener(d,v){this.listeners[d]&&(this.listeners[d].delete(v),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),Ge=1e12;class Bt{constructor(c){this.auth=c,this.counter=Ge,this._widgets=new Map}render(c,d){const v=this.counter;return this._widgets.set(v,new Sn(c,this.auth.name,d||{})),this.counter++,v}reset(c){var d;const v=c||Ge;null===(d=this._widgets.get(v))||void 0===d||d.delete(),this._widgets.delete(v)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Ge))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,g.A)(function*(){var v;return null===(v=d._widgets.get(c||Ge))||void 0===v||v.execute(),""})()}}class Sn{constructor(c,d,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof c?document.getElementById(c):c;Je(x,"argument-error",{appName:d}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kn(_){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<_;v++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fn=Es("rcb"),ur=new de(3e4,6e4);class ru{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Yn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return Je(function iu(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Gt(Yn().grecaptcha)?Promise.resolve(Yn().grecaptcha):new Promise((v,x)=>{const z=Yn().setTimeout(()=>{x(Te(c,"network-request-failed"))},ur.get());Yn()[Fn]=()=>{Yn().clearTimeout(z),delete Yn()[Fn];const Ne=Yn().grecaptcha;if(!Ne||!Gt(Ne))return void x(Te(c,"internal-error"));const st=Ne.render;Ne.render=(Ut,Ht)=>{const Qt=st(Ut,Ht);return this.counter++,Qt},this.hostLanguage=d,v(Ne)},zs(`${function Ka(){return Xi.recaptchaV2Script}()}?${(0,J.Am)({onload:Fn,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(z),x(Te(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Yn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hl{load(c){return(0,g.A)(function*(){return new Bt(c)})()}clearedOneInstance(){}}const rs="recaptcha",ia={theme:"light",type:"image"};class ih{constructor(c,d,v=Object.assign({},ia)){this.parameters=v,this.type=rs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gn(c),this.isInvisible="invisible"===this.parameters.size,Je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof d?document.getElementById(d):d;Je(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hl:new ru,this.validateStartingState()}verify(){var c=this;return(0,g.A)(function*(){c.assertNotDestroyed();const d=yield c.render(),v=c.getAssertedRecaptcha();return v.getResponse(d)||new Promise(z=>{const fe=Ne=>{Ne&&(c.tokenChangeListeners.delete(fe),z(Ne))};c.tokenChangeListeners.add(fe),c.isInvisible&&v.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Je(!this.parameters.sitekey,this.auth,"argument-error"),Je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(v=>v(d)),"function"==typeof c)c(d);else if("string"==typeof c){const v=Yn()[c];"function"==typeof v&&v(d)}}}assertNotDestroyed(){Je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,g.A)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const v=document.createElement("div");d.appendChild(v),d=v}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,g.A)(function*(){Je(Wn()&&!Fo(),c.auth,"internal-error"),yield function Lc(){let _=null;return new Promise(c=>{"complete"!==document.readyState?(_=()=>c(),window.addEventListener("load",_)):c()}).catch(c=>{throw _&&window.removeEventListener("load",_),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function qe(_){return Rn.apply(this,arguments)}(c.auth);Je(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return Je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class po{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Hi._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function su(){return(su=(0,g.A)(function*(_,c,d){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const v=Gn(_),x=yield go(v,c,(0,J.Ku)(d));return new po(x,z=>Ys(v,z))})).apply(this,arguments)}function ou(){return(ou=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_);yield me(!1,v,"phone");const x=yield go(v.auth,c,(0,J.Ku)(d));return new po(x,z=>Xr(v,z))})).apply(this,arguments)}function Vo(){return(Vo=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_);if((0,R._isFirebaseServerApp)(v.auth.app))return Promise.reject(nt(v.auth));const x=yield go(v.auth,c,(0,J.Ku)(d));return new po(x,z=>Qa(v,z))})).apply(this,arguments)}function go(_,c,d){return oa.apply(this,arguments)}function oa(){return oa=(0,g.A)(function*(_,c,d){var v;const x=yield d.verify();try{let z;if(Je("string"==typeof x,_,"argument-error"),Je(d.type===rs,_,"argument-error"),z="string"==typeof c?{phoneNumber:c}:c,"session"in z){const fe=z.session;if("phoneNumber"in z)return Je("enroll"===fe.type,_,"internal-error"),(yield function Fl(_,c){return se(_,"POST","/v2/accounts/mfaEnrollment:start",xe(_,c))}(_,{idToken:fe.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Je("signin"===fe.type,_,"internal-error");const Ne=(null===(v=z.multiFactorHint)||void 0===v?void 0:v.uid)||z.multiFactorUid;return Je(Ne,_,"missing-multi-factor-info"),(yield function b(_,c){return se(_,"POST","/v2/accounts/mfaSignIn:start",xe(_,c))}(_,{mfaPendingCredential:fe.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:fe}=yield function Ai(_,c){return Di.apply(this,arguments)}(_,{phoneNumber:z.phoneNumber,recaptchaToken:x});return fe}}finally{d._reset()}}),oa.apply(this,arguments)}function Na(){return(Na=(0,g.A)(function*(_,c){const d=(0,J.Ku)(_);if((0,R._isFirebaseServerApp)(d.auth.app))return Promise.reject(nt(d.auth));yield M(d,c)})).apply(this,arguments)}let au=(()=>{class _{constructor(d){this.providerId=_.PROVIDER_ID,this.auth=Gn(d)}verifyPhoneNumber(d,v){return go(this.auth,d,(0,J.Ku)(v))}static credential(d,v){return Hi._fromVerification(d,v)}static credentialFromResult(d){return _.credentialFromTaggedObject(d)}static credentialFromError(d){return _.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:v,temporaryProof:x}=d;return v&&x?Hi._fromTokenResponse(v,x):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function xa(_,c){return c?Pt(c):(Je(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ku extends Is{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return pr(c,this._buildIdpRequest())}_linkToIdToken(c,d){return pr(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return pr(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function hg(_){return ls(_.auth,new Ku(_),_.bypassAuthState)}function fg(_){const{auth:c,user:d}=_;return Je(d,c,"internal-error"),pn(d,new Ku(_),_.bypassAuthState)}function If(_){return sh.apply(this,arguments)}function sh(){return(sh=(0,g.A)(function*(_){const{auth:c,user:d}=_;return Je(d,c,"internal-error"),M(d,new Ku(_),_.bypassAuthState)})).apply(this,arguments)}class Bc{constructor(c,d,v,x,z=!1){this.auth=c,this.resolver=v,this.user=x,this.bypassAuthState=z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,g.A)(function*(v,x){c.pendingPromise={resolve:v,reject:x};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(z){c.reject(z)}});return function(v,x){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,g.A)(function*(){const{urlResponse:v,sessionId:x,postBody:z,tenantId:fe,error:Ne,type:st}=c;if(Ne)return void d.reject(Ne);const Ut={auth:d.auth,requestUri:v,sessionId:x,tenantId:fe||void 0,postBody:z||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(st)(Ut))}catch(Ht){d.reject(Ht)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return hg;case"linkViaPopup":case"linkViaRedirect":return If;case"reauthViaPopup":case"reauthViaRedirect":return fg;default:tt(this.auth,"internal-error")}}resolve(c){cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uu=new de(2e3,1e4);function aa(){return(aa=(0,g.A)(function*(_,c,d){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(Te(_,"operation-not-supported-in-this-environment"));const v=Gn(_);vt(_,c,Ir);const x=xa(v,d);return new $c(v,"signInViaPopup",c,x).executeNotNull()})).apply(this,arguments)}function qu(){return(qu=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_);if((0,R._isFirebaseServerApp)(v.auth.app))return Promise.reject(Te(v.auth,"operation-not-supported-in-this-environment"));vt(v.auth,c,Ir);const x=xa(v.auth,d);return new $c(v.auth,"reauthViaPopup",c,x,v).executeNotNull()})).apply(this,arguments)}function wf(){return(wf=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_);vt(v.auth,c,Ir);const x=xa(v.auth,d);return new $c(v.auth,"linkViaPopup",c,x,v).executeNotNull()})).apply(this,arguments)}let $c=(()=>{class _ extends Bc{constructor(d,v,x,z,fe){super(d,v,z,fe),this.provider=x,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var d=this;return(0,g.A)(function*(){const v=yield d.execute();return Je(v,d.auth,"internal-error"),v})()}onExecution(){var d=this;return(0,g.A)(function*(){cn(1===d.filter.length,"Popup operations only handle one event");const v=ra();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],v),d.authWindow.associatedEvent=v,d.resolver._originValidation(d.auth).catch(x=>{d.reject(x)}),d.resolver._isIframeWebStorageSupported(d.auth,x=>{x||d.reject(Te(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const d=()=>{var v,x;this.pollId=null!==(x=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,uu.get())};d()}}return _.currentPopupAction=null,_})();const Qu="pendingRedirect",mo=new Map;class zi extends Bc{constructor(c,d,v=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,v),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,g.A)(function*(){let v=mo.get(d.auth._key());if(!v){try{const z=(yield function Af(_,c){return lu.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;v=()=>Promise.resolve(z)}catch(x){v=()=>Promise.reject(x)}mo.set(d.auth._key(),v)}return d.bypassAuthState||mo.set(d.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,v=this;return(0,g.A)(function*(){if("signInViaRedirect"===c.type)return d().call(v,c);if("unknown"!==c.type){if(c.eventId){const x=yield v.auth._redirectUserForId(c.eventId);if(x)return v.user=x,d().call(v,c);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.A)(function*(){})()}cleanUp(){}}function lu(){return(lu=(0,g.A)(function*(_,c){const d=Wl(c),v=oh(_);if(!(yield v._isAvailable()))return!1;const x="true"===(yield v._get(d));return yield v._remove(d),x})).apply(this,arguments)}function Yu(_,c){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,g.A)(function*(_,c){return oh(_)._set(Wl(c),"true")})).apply(this,arguments)}function cu(_,c){mo.set(_._key(),c)}function oh(_){return Pt(_._redirectPersistence)}function Wl(_){return Hn(Qu,_.config.apiKey,_.name)}function Gc(_,c,d){return function ah(_,c,d){return du.apply(this,arguments)}(_,c,d)}function du(){return(du=(0,g.A)(function*(_,c,d){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const v=Gn(_);vt(_,c,Ir),yield v._initializationPromise;const x=xa(v,d);return yield Yu(x,v),x._openRedirect(v,c,"signInViaRedirect")})).apply(this,arguments)}function pg(_,c,d){return function Ju(_,c,d){return eo.apply(this,arguments)}(_,c,d)}function eo(){return(eo=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_);if(vt(v.auth,c,Ir),(0,R._isFirebaseServerApp)(v.auth.app))return Promise.reject(nt(v.auth));yield v.auth._initializationPromise;const x=xa(v.auth,d);yield Yu(x,v.auth);const z=yield ki(v);return x._openRedirect(v.auth,c,"reauthViaRedirect",z)})).apply(this,arguments)}function gg(_,c,d){return function uh(_,c,d){return ua.apply(this,arguments)}(_,c,d)}function ua(){return(ua=(0,g.A)(function*(_,c,d){const v=(0,J.Ku)(_);vt(v.auth,c,Ir),yield v.auth._initializationPromise;const x=xa(v.auth,d);yield me(!1,v,c.providerId),yield Yu(x,v.auth);const z=yield ki(v);return x._openRedirect(v.auth,c,"linkViaRedirect",z)})).apply(this,arguments)}function Oa(){return(Oa=(0,g.A)(function*(_,c){return yield Gn(_)._initializationPromise,bi(_,c,!1)})).apply(this,arguments)}function bi(_,c){return zc.apply(this,arguments)}function zc(){return(zc=(0,g.A)(function*(_,c,d=!1){if((0,R._isFirebaseServerApp)(_.app))return Promise.reject(nt(_));const v=Gn(_),x=xa(v,c),fe=yield new zi(v,x,d).execute();return fe&&!d&&(delete fe.user._redirectEventId,yield v._persistUserIfCurrent(fe.user),yield v._setRedirectUser(null,c)),fe})).apply(this,arguments)}function ki(_){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,g.A)(function*(_){const c=ra(`${_.uid}:::`);return _._redirectEventId=c,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),c})).apply(this,arguments)}class el{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(c,v)&&(d=!0,this.sendToConsumer(c,v),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function _o(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rs(_);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var v;if(c.error&&!Rs(c)){const x=(null===(v=c.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";d.onError(Te(this.auth,x))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const v=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&v}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kl(c))}saveEventToCache(c){this.cachedEventUids.add(Kl(c)),this.lastProcessedEventTime=Date.now()}}function Kl(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(c=>c).join("-")}function Rs({type:_,error:c}){return"unknown"===_&&"auth/no-auth-event"===c?.code}function ka(_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.A)(function*(_,c={}){return se(_,"GET","/v1/projects",c)})).apply(this,arguments)}const lh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yo=/^https?/;function Bo(){return(Bo=(0,g.A)(function*(_){if(_.config.emulator)return;const{authorizedDomains:c}=yield ka(_);for(const d of c)try{if(_g(d))return}catch{}tt(_,"unauthorized-domain")})).apply(this,arguments)}function _g(_){const c=an(),{protocol:d,hostname:v}=new URL(c);if(_.startsWith("chrome-extension://")){const fe=new URL(_);return""===fe.hostname&&""===v?"chrome-extension:"===d&&_.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&fe.hostname===v}if(!yo.test(d))return!1;if(lh.test(_))return v===_;const x=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(v)}const h_=new de(3e4,6e4);function Df(){const _=Yn().___jsl;if(_?.H)for(const c of Object.keys(_.H))if(_.H[c].r=_.H[c].r||[],_.H[c].L=_.H[c].L||[],_.H[c].r=[..._.H[c].L],_.CP)for(let d=0;d<_.CP.length;d++)_.CP[d]=null}let Kc=null;const ca=new de(5e3,15e3),Tf="__/auth/iframe",yg="emulator/auth/iframe",pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tl(_){const c=_.config;Je(c.authDomain,_,"auth-domain-config-required");const d=c.emulator?ye(c,yg):`https://${_.config.authDomain}/${Tf}`,v={apiKey:c.apiKey,appName:_.name,v:R.SDK_VERSION},x=vg.get(_.config.apiHost);x&&(v.eid=x);const z=_._getFrameworks();return z.length&&(v.fw=z.join(",")),`${d}?${(0,J.Am)(v).slice(1)}`}function Fi(){return Fi=(0,g.A)(function*(_){const c=yield function p_(_){return Kc=Kc||function f_(_){return new Promise((c,d)=>{var v,x,z;function fe(){Df(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Df(),d(Te(_,"network-request-failed"))},timeout:h_.get()})}if(null!==(x=null===(v=Yn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==x&&x.Iframe)c(gapi.iframes.getContext());else{if(null===(z=Yn().gapi)||void 0===z||!z.load){const Ne=Es("iframefcb");return Yn()[Ne]=()=>{gapi.load?fe():d(Te(_,"network-request-failed"))},zs(`${function $r(){return Xi.gapiScript}()}?onload=${Ne}`).catch(st=>d(st))}fe()}}).catch(c=>{throw Kc=null,c})}(_),Kc}(_),d=Yn().gapi;return Je(d,_,"internal-error"),c.open({where:document.body,url:tl(_),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},v=>new Promise(function(){var x=(0,g.A)(function*(z,fe){yield v.restyle({setHideOnLeave:!1});const Ne=Te(_,"network-request-failed"),st=Yn().setTimeout(()=>{fe(Ne)},ca.get());function Ut(){Yn().clearTimeout(st),z(v)}v.ping(Ut).then(Ut,()=>{fe(Ne)})});return function(z,fe){return x.apply(this,arguments)}}()))}),Fi.apply(this,arguments)}const fu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ig{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ar="__/auth/handler",dh="emulator/auth/handler",rl=encodeURIComponent("fac");function bf(_,c,d,v,x,z){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,g.A)(function*(_,c,d,v,x,z){Je(_.config.authDomain,_,"auth-domain-config-required"),Je(_.config.apiKey,_,"invalid-api-key");const fe={apiKey:_.config.apiKey,appName:_.name,authType:d,redirectUrl:v,v:R.SDK_VERSION,eventId:x};if(c instanceof Ir){c.setDefaultLanguage(_.languageCode),fe.providerId=c.providerId||"",(0,J.Im)(c.getCustomParameters())||(fe.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Ht,Qt]of Object.entries(z||{}))fe[Ht]=Qt}if(c instanceof qs){const Ht=c.getScopes().filter(Qt=>""!==Qt);Ht.length>0&&(fe.scopes=Ht.join(","))}_.tenantId&&(fe.tid=_.tenantId);const Ne=fe;for(const Ht of Object.keys(Ne))void 0===Ne[Ht]&&delete Ne[Ht];const st=yield _._getAppCheckToken(),Ut=st?`#${rl}=${encodeURIComponent(st)}`:"";return`${function hh({config:_}){return _.emulator?ye(_,dh):`https://${_.authDomain}/${Ar}`}(_)}?${(0,J.Am)(Ne).slice(1)}${Ut}`})).apply(this,arguments)}const fh="webStorageSupport",ql=class Yc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bs,this._completeRedirectFn=bi,this._overrideRedirectResult=cu}_openPopup(c,d,v,x){var z=this;return(0,g.A)(function*(){var fe;cn(null===(fe=z.eventManagers[c._key()])||void 0===fe?void 0:fe.manager,"_initialize() not called before _openPopup()");const Ne=yield bf(c,d,v,an(),x);return function wg(_,c,d,v=500,x=600){const z=Math.max((window.screen.availHeight-x)/2,0).toString(),fe=Math.max((window.screen.availWidth-v)/2,0).toString();let Ne="";const st=Object.assign(Object.assign({},fu),{width:v.toString(),height:x.toString(),top:z,left:fe}),Ut=(0,J.ZQ)().toLowerCase();d&&(Ne=ni(Ut)?"_blank":d),vi(Ut)&&(c=c||"http://localhost",st.scrollbars="yes");const Ht=Object.entries(st).reduce((Jr,[Ms,Iu])=>`${Jr}${Ms}=${Iu},`,"");if(function be(_=(0,J.ZQ)()){var c;return yn(_)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ut)&&"_self"!==Ne)return function Cf(_,c){const d=document.createElement("a");d.href=_,d.target=c;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(v)}(c||"",Ne),new Ig(null);const Qt=window.open(c||"",Ne,Ht);Je(Qt,_,"popup-blocked");try{Qt.focus()}catch{}return new Ig(Qt)}(c,Ne,ra())})()}_openRedirect(c,d,v,x){var z=this;return(0,g.A)(function*(){return yield z._originValidation(c),function th(_){Yn().location.href=_}(yield bf(c,d,v,an(),x)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:x,promise:z}=this.eventManagers[d];return x?Promise.resolve(x):(cn(z,"If manager is not set, promise should be"),z)}const v=this.initAndGetManager(c);return this.eventManagers[d]={promise:v},v.catch(()=>{delete this.eventManagers[d]}),v}initAndGetManager(c){var d=this;return(0,g.A)(function*(){const v=yield function hu(_){return Fi.apply(this,arguments)}(c),x=new el(c);return v.register("authEvent",z=>(Je(z?.authEvent,c,"invalid-auth-event"),{status:x.onEvent(z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:x},d.iframes[c._key()]=v,x})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(fh,{type:fh},x=>{var z;const fe=null===(z=x?.[0])||void 0===z?void 0:z[fh];void 0!==fe&&d(!!fe),tt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function mg(_){return Bo.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return Nt()||Ei()||yn()}};class Sf{constructor(c){this.factorId=c}_process(c,d,v){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,v);case"signin":return this._finalizeSignIn(c,d.credential);default:return Zt("unexpected MultiFactorSessionType")}}}class Xc extends Sf{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Xc(c)}_finalizeEnroll(c,d,v){return function $u(_,c){return se(_,"POST","/v2/accounts/mfaEnrollment:finalize",xe(_,c))}(c,{idToken:d,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function O(_,c){return se(_,"POST","/v2/accounts/mfaSignIn:finalize",xe(_,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ql=(()=>{class _{constructor(){}static assertion(d){return Xc._fromCredential(d)}}return _.FACTOR_ID="phone",_})();var gu="@firebase/auth";class ph{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,g.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(v=>{c(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sl(){return window}(0,J.XA)("authIdTokenMaxAge"),function Ao(_){Xi=_}({loadJS:_=>new Promise((c,d)=>{const v=document.createElement("script");v.setAttribute("src",_),v.onload=c,v.onerror=x=>{const z=Te("internal-error");z.customData=x,d(z)},v.type="text/javascript",v.charset="UTF-8",function Mf(){var _,c;return null!==(c=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==c?c:document}().appendChild(v)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Xl(_){(0,R._registerComponent)(new Se.uA("auth",(c,{options:d})=>{const v=c.getProvider("app").getImmediate(),x=c.getProvider("heartbeat"),z=c.getProvider("app-check-internal"),{apiKey:fe,authDomain:Ne}=v.options;Je(fe&&!fe.includes(":"),"invalid-api-key",{appName:v.name});const st={apiKey:fe,authDomain:Ne,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yt(_)},Ut=new Yi(v,x,z,st);return function Aa(_,c){const d=c?.persistence||[],v=(Array.isArray(d)?d:[d]).map(Pt);c?.errorMap&&_._updateErrorMap(c.errorMap),_._initializeWithPersistence(v,c?.popupRedirectResolver)}(Ut,d),Ut},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,v)=>{c.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new Se.uA("auth-internal",c=>{const d=Gn(c.getProvider("auth").getImmediate());return new ph(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(gu,"1.7.8",function gh(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(_)),(0,R.registerVersion)(gu,"1.7.8","esm2017")}("Browser");function Zc(){return Zc=(0,g.A)(function*(_,c,d){var v;const{BuildInfo:x}=sl();cn(c.sessionId,"AuthEvent did not contain a session ID");const z=yield function xf(_){return rd.apply(this,arguments)}(c.sessionId),fe={};return yn()?fe.ibi=x.packageName:Pr()?fe.apn=x.packageName:tt(_,"operation-not-supported-in-this-environment"),x.displayName&&(fe.appDisplayName=x.displayName),fe.sessionId=z,bf(_,d,c.type,void 0,null!==(v=c.eventId)&&void 0!==v?v:void 0,fe)}),Zc.apply(this,arguments)}function td(){return(td=(0,g.A)(function*(_){const{BuildInfo:c}=sl(),d={};yn()?d.iosBundleId=c.packageName:Pr()?d.androidPackageName=c.packageName:tt(_,"operation-not-supported-in-this-environment"),yield ka(_,d)})).apply(this,arguments)}function nd(){return(nd=(0,g.A)(function*(_,c,d){const{cordova:v}=sl();let x=()=>{};try{yield new Promise((z,fe)=>{let Ne=null;function st(){var Qt;z();const Jr=null===(Qt=v.plugins.browsertab)||void 0===Qt?void 0:Qt.close;"function"==typeof Jr&&Jr(),"function"==typeof d?.close&&d.close()}function Ut(){Ne||(Ne=window.setTimeout(()=>{fe(Te(_,"redirect-cancelled-by-user"))},2e3))}function Ht(){"visible"===document?.visibilityState&&Ut()}c.addPassiveListener(st),document.addEventListener("resume",Ut,!1),Pr()&&document.addEventListener("visibilitychange",Ht,!1),x=()=>{c.removePassiveListener(st),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",Ht,!1),Ne&&window.clearTimeout(Ne)}})}finally{x()}})).apply(this,arguments)}function rd(){return(rd=(0,g.A)(function*(_){const c=function vh(_){if(cn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const c=new ArrayBuffer(_.length),d=new Uint8Array(c);for(let v=0;v<_.length;v++)d[v]=_.charCodeAt(v);return d}(_),d=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(d)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Eh extends el{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(c)),super.onEvent(c)}initialized(){var c=this;return(0,g.A)(function*(){yield c.initPromise})()}}function sd(_){return od.apply(this,arguments)}function od(){return(od=(0,g.A)(function*(_){const c=yield Ih()._get(kf(_));return c&&(yield Ih()._remove(kf(_))),c})).apply(this,arguments)}function Of(){const _=[];for(let d=0;d<20;d++){const v=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(v))}return _.join("")}function Ih(){return Pt(ko)}function kf(_){return Hn("authEvent",_.config.apiKey,_.name)}function al(_){if(!_?.includes("?"))return{};const[c,...d]=_.split("?");return(0,J.I9)(d.join("?"))}const Wi=class ud{constructor(){this._redirectPersistence=bs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bi,this._overrideRedirectResult=cu}_initialize(c){var d=this;return(0,g.A)(function*(){const v=c._key();let x=d.eventManagers.get(v);return x||(x=new Eh(c),d.eventManagers.set(v,x),d.attachCallbackListeners(c,x)),x})()}_openPopup(c){tt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,d,v,x){var z=this;return(0,g.A)(function*(){!function yh(_){var c,d,v,x,z,fe,Ne,st,Ut,Ht;const Qt=sl();Je("function"==typeof(null===(c=Qt?.universalLinks)||void 0===c?void 0:c.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Je(typeof(null===(d=Qt?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Je("function"==typeof(null===(z=null===(x=null===(v=Qt?.cordova)||void 0===v?void 0:v.plugins)||void 0===x?void 0:x.browsertab)||void 0===z?void 0:z.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Je("function"==typeof(null===(st=null===(Ne=null===(fe=Qt?.cordova)||void 0===fe?void 0:fe.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===st?void 0:st.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Je("function"==typeof(null===(Ht=null===(Ut=Qt?.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===Ht?void 0:Ht.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const fe=yield z._initialize(c);yield fe.initialized(),fe.resetRedirect(),function Xu(){mo.clear()}(),yield z._originValidation(c);const Ne=function id(_,c,d=null){return{type:c,eventId:d,urlResponse:null,sessionId:Of(),postBody:null,tenantId:_.tenantId,error:Te(_,"no-auth-event")}}(c,v,x);yield function yu(_,c){return Ih()._set(kf(_),c)}(c,Ne);const st=yield function ol(_,c,d){return Zc.apply(this,arguments)}(c,Ne,d),Ut=yield function Nf(_){const{cordova:c}=sl();return new Promise(d=>{c.plugins.browsertab.isAvailable(v=>{let x=null;v?c.plugins.browsertab.openUrl(_):x=c.InAppBrowser.open(_,function Qe(_=(0,J.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),d(x)})})}(st);return function Jl(_,c,d){return nd.apply(this,arguments)}(c,fe,Ut)})()}_isIframeWebStorageSupported(c,d){throw new Error("Method not implemented.")}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function ed(_){return td.apply(this,arguments)}(c)),this.originValidationPromises[d]}attachCallbackListeners(c,d){const{universalLinks:v,handleOpenURL:x,BuildInfo:z}=sl(),fe=setTimeout((0,g.A)(function*(){yield sd(c),d.onEvent(Ah())}),500),Ne=function(){var Ht=(0,g.A)(function*(Qt){clearTimeout(fe);const Jr=yield sd(c);let Ms=null;Jr&&Qt?.url&&(Ms=function Zl(_,c){var d,v;const x=function wh(_){const c=al(_),d=c.link?decodeURIComponent(c.link):void 0,v=al(d).link,x=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return al(x).link||x||v||d||_}(c);if(x.includes("/__/auth/callback")){const z=al(x),fe=z.firebaseError?function Dg(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(z.firebaseError)):null,Ne=null===(v=null===(d=fe?.code)||void 0===d?void 0:d.split("auth/"))||void 0===v?void 0:v[1],st=Ne?Te(Ne):null;return st?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:st,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:x,postBody:null}}return null}(Jr,Qt.url)),d.onEvent(Ms||Ah())});return function(Jr){return Ht.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,Ne);const st=x,Ut=`${z.packageName.toLowerCase()}://`;sl().handleOpenURL=function(){var Ht=(0,g.A)(function*(Qt){if(Qt.toLowerCase().startsWith(Ut)&&Ne({url:Qt}),"function"==typeof st)try{st(Qt)}catch(Jr){console.error(Jr)}});return function(Qt){return Ht.apply(this,arguments)}}()}};function Ah(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function ha(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function ec(_=(0,J.ZQ)()){return!("file:"!==ha()&&"ionic:"!==ha()&&"capacitor:"!==ha()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function cl(){try{const _=self.localStorage,c=ra();if(_)return _.setItem(c,"1"),_.removeItem(c),!function ll(_=(0,J.ZQ)()){return function Cg(){return(0,J.lT)()&&11===document?.documentMode}()||function bg(_=(0,J.ZQ)()){return/Edge\/\d+/.test(_)}(_)}()||(0,J.zW)()}catch{return Va()&&(0,J.zW)()}return!1}function Va(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tc(){return(function cd(){return"http:"===ha()||"https:"===ha()}()||(0,J.sr)()||ec())&&!function Tg(){return(0,J.lV)()||(0,J.Ll)()}()&&cl()&&!Va()}function nc(){return ec()&&typeof document<"u"}function rc(){return(rc=(0,g.A)(function*(){return!!nc()&&new Promise(_=>{const c=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),_(!0)})})})).apply(this,arguments)}const br={LOCAL:"local",NONE:"none",SESSION:"session"},fa=Je,jo="persistence";function Vi(_){return pa.apply(this,arguments)}function pa(){return(pa=(0,g.A)(function*(_){yield _._initializationPromise;const c=ic(),d=Hn(jo,_.config.apiKey,_.name);c&&c.setItem(d,_._getPersistence())})).apply(this,arguments)}function ic(){var _;try{return(null===(_=function Ff(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Sg=Je;class vo{constructor(){this.browserResolver=Pt(ql),this.cordovaResolver=Pt(Wi),this.underlyingResolver=null,this._redirectPersistence=bs,this._completeRedirectFn=bi,this._overrideRedirectResult=cu}_initialize(c){var d=this;return(0,g.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,d,v,x){var z=this;return(0,g.A)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openPopup(c,d,v,x)})()}_openRedirect(c,d,v,x){var z=this;return(0,g.A)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openRedirect(c,d,v,x)})()}_isIframeWebStorageSupported(c,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,d)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return nc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,g.A)(function*(){if(c.underlyingResolver)return;const d=yield function vu(){return rc.apply(this,arguments)}();c.underlyingResolver=d?c.cordovaResolver:c.browserResolver})()}}function Lf(_){return _.unwrap()}function fd(_){return Th(_)}function Th(_){const{_tokenResponse:c}=_ instanceof J.g?_.customData:_;if(!c)return null;if(!(_ instanceof J.g)&&"temporaryProof"in c&&"phoneNumber"in c)return au.credentialFromResult(_);const d=c.providerId;if(!d||d===Ve.PASSWORD)return null;let v;switch(d){case Ve.GOOGLE:v=ao;break;case Ve.FACEBOOK:v=vn;break;case Ve.GITHUB:v=jn;break;case Ve.TWITTER:v=Ro;break;default:const{oauthIdToken:x,oauthAccessToken:z,oauthTokenSecret:fe,pendingToken:Ne,nonce:st}=c;return z||fe||x||Ne?Ne?d.startsWith("saml.")?ei._create(d,Ne):Fr._fromParams({providerId:d,signInMethod:d,pendingToken:Ne,idToken:x,accessToken:z}):new Cr(d).credential({idToken:x,accessToken:z,rawNonce:st}):null}return _ instanceof J.g?v.credentialFromError(_):v.credentialFromResult(_)}function Si(_,c){return c.catch(d=>{throw d instanceof J.g&&function pd(_,c){var d;const v=null===(d=c.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Rg(_,function kl(_,c){var d;const v=(0,J.Ku)(_),x=c;return Je(c.customData.operationType,v,"argument-error"),Je(null===(d=x.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,v,"argument-error"),ba._fromError(v,x)}(_,c));else if(v){const x=Th(c),z=c;x&&(z.credential=x,z.tenantId=v.tenantId||void 0,z.email=v.email||void 0,z.phoneNumber=v.phoneNumber||void 0)}}(_,d),d}).then(d=>{const x=d.user;return{operationType:d.operationType,credential:fd(d),additionalUserInfo:Ts(d),user:Ps.getOrCreate(x)}})}function Eu(_,c){return sc.apply(this,arguments)}function sc(){return(sc=(0,g.A)(function*(_,c){const d=yield c;return{verificationId:d.verificationId,confirm:v=>Si(_,d.confirm(v))}})).apply(this,arguments)}class Rg{constructor(c,d){this.resolver=d,this.auth=function hd(_){return _.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Si(Lf(this.auth),this.resolver.resolveSignIn(c))}}class Ps{constructor(c){this._delegate=c,this.multiFactor=function kc(_){const c=(0,J.Ku)(_);return Cs.has(c)||Cs.set(c,Qn._fromUser(c)),Cs.get(c)}(c)}static getOrCreate(c){return Ps.USER_MAP.has(c)||Ps.USER_MAP.set(c,new Ps(c)),Ps.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var d=this;return(0,g.A)(function*(){return Si(d.auth,Xr(d._delegate,c))})()}linkWithPhoneNumber(c,d){var v=this;return(0,g.A)(function*(){return Eu(v.auth,function Uc(_,c,d){return ou.apply(this,arguments)}(v._delegate,c,d))})()}linkWithPopup(c){var d=this;return(0,g.A)(function*(){return Si(d.auth,function jc(_,c,d){return wf.apply(this,arguments)}(d._delegate,c,vo))})()}linkWithRedirect(c){var d=this;return(0,g.A)(function*(){return yield Vi(Gn(d.auth)),gg(d._delegate,c,vo)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var d=this;return(0,g.A)(function*(){return Si(d.auth,Qa(d._delegate,c))})()}reauthenticateWithPhoneNumber(c,d){return Eu(this.auth,function Wu(_,c,d){return Vo.apply(this,arguments)}(this._delegate,c,d))}reauthenticateWithPopup(c){return Si(this.auth,function zl(_,c,d){return qu.apply(this,arguments)}(this._delegate,c,vo))}reauthenticateWithRedirect(c){var d=this;return(0,g.A)(function*(){return yield Vi(Gn(d.auth)),pg(d._delegate,c,vo)})()}sendEmailVerification(c){return function N(_,c){return j.apply(this,arguments)}(this._delegate,c)}unlink(c){var d=this;return(0,g.A)(function*(){return yield function L(_,c){return $.apply(this,arguments)}(d._delegate,c),d})()}updateEmail(c){return function Jn(_,c){const d=(0,J.Ku)(_);return(0,R._isFirebaseServerApp)(d.auth.app)?Promise.reject(nt(d.auth)):cr(d,c,null)}(this._delegate,c)}updatePassword(c){return function En(_,c){return cr((0,J.Ku)(_),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Lo(_,c){return Na.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function lr(_,c){return Xn.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,d){return function ue(_,c,d){return Ye.apply(this,arguments)}(this._delegate,c,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ps.USER_MAP=new WeakMap;const dl=Je;let Uf=(()=>{class _{constructor(d,v){if(this.app=d,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=d.options;dl(x,"invalid-api-key",{appName:d.name}),dl(x,"invalid-api-key",{appName:d.name});const z=typeof window<"u"?vo:void 0;this._delegate=v.initialize({options:{persistence:Bf(x,d.name),popupRedirectResolver:z}}),this._delegate._updateErrorMap(_t),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,v){!function so(_,c,d){const v=Gn(_);Je(v._canInitEmulator,v,"emulator-config-failed"),Je(/^https?:\/\//.test(c),v,"invalid-emulator-scheme");const x=!!d?.disableWarnings,z=Da(c),{host:fe,port:Ne}=function bo(_){const c=Da(_),d=/(\/\/)?([^?#/]+)/.exec(_.substr(c.length));if(!d)return{host:"",port:null};const v=d[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(v);if(x){const z=x[1];return{host:z,port:oo(v.substr(z.length+1))}}{const[z,fe]=v.split(":");return{host:z,port:oo(fe)}}}(c);v.config.emulator={url:`${z}//${fe}${null===Ne?"":`:${Ne}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:fe,port:Ne,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Sr(){function _(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,d,v)}applyActionCode(d){return function Xs(_,c){return Gi.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return lo(this._delegate,d)}confirmPasswordReset(d,v){return function Mo(_,c,d){return Bs.apply(this,arguments)}(this._delegate,d,v)}createUserWithEmailAndPassword(d,v){var x=this;return(0,g.A)(function*(){return Si(x._delegate,function ds(_,c,d){return Uu.apply(this,arguments)}(x._delegate,d,v))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function D(_,c){return H.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function Ol(_,c){const d=ws.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,g.A)(function*(){dl(tc(),d._delegate,"operation-not-supported-in-this-environment");const v=yield function la(_,c){return Oa.apply(this,arguments)}(d._delegate,vo);return v?Si(d._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Dh(_,c){Gn(_)._logFramework(c)}(this._delegate,d)}onAuthStateChanged(d,v,x){const{next:z,error:fe,complete:Ne}=oc(d,v,x);return this._delegate.onAuthStateChanged(z,fe,Ne)}onIdTokenChanged(d,v,x){const{next:z,error:fe,complete:Ne}=oc(d,v,x);return this._delegate.onIdTokenChanged(z,fe,Ne)}sendSignInLinkToEmail(d,v){return function Bu(_,c,d){return Js.apply(this,arguments)}(this._delegate,d,v)}sendPasswordResetEmail(d,v){return function Lu(_,c,d){return na.apply(this,arguments)}(this._delegate,d,v||void 0)}setPersistence(d){var v=this;return(0,g.A)(function*(){let x;switch(function dd(_,c){fa(Object.values(br).includes(c),_,"invalid-persistence-type"),(0,J.lV)()?fa(c!==br.SESSION,_,"unsupported-persistence-type"):(0,J.Ll)()?fa(c===br.NONE,_,"unsupported-persistence-type"):Va()?fa(c===br.NONE||c===br.LOCAL&&(0,J.zW)(),_,"unsupported-persistence-type"):fa(c===br.NONE||cl(),_,"unsupported-persistence-type")}(v._delegate,d),d){case br.SESSION:x=bs;break;case br.LOCAL:x=(yield Pt(E)._isAvailable())?E:ko;break;case br.NONE:x=he;break;default:return tt("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Si(this._delegate,function Vu(_){return Ta.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Si(this._delegate,Ys(this._delegate,d))}signInWithCustomToken(d){return Si(this._delegate,function Ls(_,c){return ea.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,v){return Si(this._delegate,function ts(_,c,d){return(0,R._isFirebaseServerApp)(_.app)?Promise.reject(nt(_)):Ys((0,J.Ku)(_),Vs.credential(c,d)).catch(function(){var v=(0,g.A)(function*(x){throw"auth/password-does-not-meet-requirements"===x.code&&Gr(_),x});return function(x){return v.apply(this,arguments)}}())}(this._delegate,d,v))}signInWithEmailLink(d,v){return Si(this._delegate,function hs(_,c,d){return Xa.apply(this,arguments)}(this._delegate,d,v))}signInWithPhoneNumber(d,v){return Eu(this._delegate,function sa(_,c,d){return su.apply(this,arguments)}(this._delegate,d,v))}signInWithPopup(d){var v=this;return(0,g.A)(function*(){return dl(tc(),v._delegate,"operation-not-supported-in-this-environment"),Si(v._delegate,function Gl(_,c,d){return aa.apply(this,arguments)}(v._delegate,d,vo))})()}signInWithRedirect(d){var v=this;return(0,g.A)(function*(){return dl(tc(),v._delegate,"operation-not-supported-in-this-environment"),yield Vi(v._delegate),Gc(v._delegate,d,vo)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function xc(_,c){return xl.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=br,_})();function oc(_,c,d){let v=_;"function"!=typeof _&&({next:v,error:c,complete:d}=_);const x=v;return{next:fe=>x(fe&&Ps.getOrCreate(fe)),error:c,complete:d}}function Bf(_,c){const d=function Vf(_,c){const d=ic();if(!d)return[];const v=Hn(jo,_,c);switch(d.getItem(v)){case br.NONE:return[he];case br.LOCAL:return[E,bs];case br.SESSION:return[bs];default:return[]}}(_,c);if(typeof self<"u"&&!d.includes(E)&&d.push(E),typeof window<"u")for(const v of[ko,bs])d.includes(v)||d.push(v);return d.includes(he)||d.push(he),d}class hl{constructor(){this.providerId="phone",this._delegate=new au(Lf(oe.A.auth()))}static credential(c,d){return au.credential(c,d)}verifyPhoneNumber(c,d){return this._delegate.verifyPhoneNumber(c,d)}unwrap(){return this._delegate}}hl.PHONE_SIGN_IN_METHOD=au.PHONE_SIGN_IN_METHOD,hl.PROVIDER_ID=au.PROVIDER_ID;const fl=Je;class pl{constructor(c,d,v=oe.A.app()){var x;fl(null===(x=v.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new ih(v.auth(),c,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ac(_){_.INTERNAL.registerComponent(new Se.uA("auth-compat",c=>{const d=c.getProvider("app-compat").getImmediate(),v=c.getProvider("auth");return new Uf(d,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vs,FacebookAuthProvider:vn,GithubAuthProvider:jn,GoogleAuthProvider:ao,OAuthProvider:Cr,SAMLAuthProvider:es,PhoneAuthProvider:hl,PhoneMultiFactorGenerator:Ql,RecaptchaVerifier:pl,TwitterAuthProvider:Ro,Auth:Uf,AuthCredential:Is,Error:J.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.5.13")}(oe.A)},467:($t,ze,B)=>{function g(R,J,F,_e,Se,Ae,Ve){try{var ie=R[Ae](Ve),ce=ie.value}catch(we){return void F(we)}ie.done?J(ce):Promise.resolve(ce).then(_e,Se)}function oe(R){return function(){var J=this,F=arguments;return new Promise(function(_e,Se){var Ae=R.apply(J,F);function Ve(ce){g(Ae,_e,Se,Ve,ie,"next",ce)}function ie(ce){g(Ae,_e,Se,Ve,ie,"throw",ce)}Ve(void 0)})}}B.d(ze,{A:()=>oe})},1635:($t,ze,B)=>{function J(de,ye){var ke={};for(var Me in de)Object.prototype.hasOwnProperty.call(de,Me)&&ye.indexOf(Me)<0&&(ke[Me]=de[Me]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(Me=Object.getOwnPropertySymbols(de);le<Me.length;le++)ye.indexOf(Me[le])<0&&Object.prototype.propertyIsEnumerable.call(de,Me[le])&&(ke[Me[le]]=de[Me[le]])}return ke}function we(de,ye,ke,Me){return new(ke||(ke=Promise))(function(xe,se){function ve(Ke){try{xt(Me.next(Ke))}catch(Ot){se(Ot)}}function Tt(Ke){try{xt(Me.throw(Ke))}catch(Ot){se(Ot)}}function xt(Ke){Ke.done?xe(Ke.value):function le(xe){return xe instanceof ke?xe:new ke(function(se){se(xe)})}(Ke.value).then(ve,Tt)}xt((Me=Me.apply(de,ye||[])).next())})}function Re(de){return this instanceof Re?(this.v=de,this):new Re(de)}function tt(de,ye,ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,Me=ke.apply(de,ye||[]),xe=[];return le=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),ve("next"),ve("throw"),ve("return",function se(dn){return function(pt){return Promise.resolve(pt).then(dn,Ot)}}),le[Symbol.asyncIterator]=function(){return this},le;function ve(dn,pt){Me[dn]&&(le[dn]=function(It){return new Promise(function(Gt,ut){xe.push([dn,It,Gt,ut])>1||Tt(dn,It)})},pt&&(le[dn]=pt(le[dn])))}function Tt(dn,pt){try{!function xt(dn){dn.value instanceof Re?Promise.resolve(dn.value.v).then(Ke,Ot):Un(xe[0][2],dn)}(Me[dn](pt))}catch(It){Un(xe[0][3],It)}}function Ke(dn){Tt("next",dn)}function Ot(dn){Tt("throw",dn)}function Un(dn,pt){dn(pt),xe.shift(),xe.length&&Tt(xe[0][0],xe[0][1])}}function Fe(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ye=de[Symbol.asyncIterator];return ye?ye.call(de):(de=function lt(de){var ye="function"==typeof Symbol&&Symbol.iterator,ke=ye&&de[ye],Me=0;if(ke)return ke.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Me>=de.length&&(de=void 0),{value:de&&de[Me++],done:!de}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),ke={},Me("next"),Me("throw"),Me("return"),ke[Symbol.asyncIterator]=function(){return this},ke);function Me(xe){ke[xe]=de[xe]&&function(se){return new Promise(function(ve,Tt){!function le(xe,se,ve,Tt){Promise.resolve(Tt).then(function(xt){xe({value:xt,done:ve})},se)}(ve,Tt,(se=de[xe](se)).done,se.value)})}}}B.d(ze,{AQ:()=>tt,N3:()=>Re,Tt:()=>J,sH:()=>we,xN:()=>Fe}),"function"==typeof SuppressedError&&SuppressedError}},$t=>{$t($t.s=226)}]);